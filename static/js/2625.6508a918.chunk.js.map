{"version":3,"file":"static/js/2625.6508a918.chunk.js","mappings":"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","sources":["features/branch/components/Table.jsx","features/branch/pages/List.jsx"],"sourcesContent":["import React from \"react\";\nimport { MdDelete } from \"react-icons/md\";\nimport { FaEdit } from \"react-icons/fa\";\nimport { Link } from \"react-router-dom\";\n\nimport DeleteModal from \"@/components/Modal/DeleteModal\";\nimport usePermissions from \"@/hooks/usePermissions\";\n\nconst SubCompanyTable = ({\n  onConfirmDelete,\n  currentPage,\n  itemsPerPage,\n  tableData,\n}) => {\n  const { can } = usePermissions();\n  const editPermission = can(\"branch\", \"modify\");\n  const deletePermission = can(\"branch\", \"delete\");\n  const startIndex = (currentPage - 1) * itemsPerPage + 1;\n\n  return (\n    <>\n      {tableData?.map((item, index) => (\n        <tr key={index}>\n          <td>\n            <span>{startIndex + index}</span>\n          </td>\n          <td>\n            <span className=\"text-primary\">{item.branchName}</span>\n          </td>\n          <td>\n            <span>\n              {item.companyId?.companyName ? (\n                item.companyId?.companyName\n              ) : (\n                <span className=\"ps-4\">-</span>\n              )}\n            </span>\n          </td>\n          <td>\n            <span>\n              {item.businessGroupId?.groupName ? (\n                item.businessGroupId?.groupName\n              ) : (\n                <span className=\"ps-4\">-</span>\n              )}\n            </span>\n          </td>\n          {/* <td>\n              <span>{item.mobileNumber}</span>\n            </td> */}\n          <td>\n            <span>{item.city}</span>\n          </td>\n\n          {(editPermission || deletePermission) && (\n            <td>\n              <span className=\"d-flex justify-content-center\">\n                {editPermission && (\n                  <Link to={`/branch/edit/${item?._id}`}>\n                    <span className=\"cursor-pointer\">\n                      <FaEdit style={{ color: \"green\", fontSize: \"1.2rem\" }} />\n                    </span>\n                  </Link>\n                )}\n                {deletePermission && (\n                  <DeleteModal\n                    className=\"cursor-pointer \"\n                    onConfirmDelete={onConfirmDelete}\n                    id={item._id}\n                  >\n                    <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n                  </DeleteModal>\n                )}\n              </span>\n            </td>\n          )}\n        </tr>\n      ))}\n    </>\n  );\n};\n\nexport default SubCompanyTable;\n","import React, { useEffect } from \"react\";\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  useQuery,\n  keepPreviousData,\n  useMutation,\n  useQueryClient,\n} from \"@tanstack/react-query\";\n\nimport MainPagetitle from \"@/components/MainPagetitle\";\nimport BranchTable from \"../components/Table\";\nimport { notifyError } from \"@/utils/toast\";\nimport usePagination from \"@/hooks/usePagination\";\nimport CompanyDropdownList from \"@/features/company/components/DropDownList\";\nimport Paginate from \"@/components/Paginate\";\nimport TableSkeleton from \"@/components/Skeleton/Table\";\nimport { deleteBranch, getAllBranch } from \"../api\";\nimport { getApiErrorMessage } from \"@/utils/helper\";\nimport usePermissions from \"@/hooks/usePermissions\";\n\nconst customStyles = {\n  control: (base) => ({\n    ...base,\n    marginRight: \"1rem\",\n    marginLeft: \"1rem\",\n    width: \"15rem\",\n    height: \"0.6rem\",\n    menuPortal: (provided) => ({ ...provided, zIndex: 9999 }),\n    menu: (provided) => ({ ...provided, zIndex: 9999 }),\n  }),\n};\n\nconst BranchList = () => {\n  const { can } = usePermissions();\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { cId } = useParams();\n  const { page, goToPage, setCount, totalCount } = usePagination();\n  const queryClient = useQueryClient();\n  const { control } = useForm();\n  const itemsPerPage = 10;\n\n  const { data, isLoading, isFetching } = useQuery({\n    queryKey: [\"branches\", page, cId],\n    queryFn: () => getAllBranch(page, 10, { companyId: cId }),\n    placeholderData: keepPreviousData,\n    staleTime: Infinity,\n  });\n\n  const { mutate } = useMutation({\n    onError: (err) => {\n      notifyError(getApiErrorMessage(err));\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries(\"companies\");\n    },\n    mutationFn: deleteBranch,\n  });\n\n  useEffect(() => {\n    if (data) setCount(data.totalCount);\n  }, [data]);\n\n  const handlePageClick = ({ selected }) => {\n    goToPage(selected + 1);\n  };\n\n  const handleClearFilter = () => {\n    navigate(\"/branch\");\n  };\n\n  return (\n    <>\n      <MainPagetitle\n        mainTitle={t(\"branch\")}\n        pageTitle={t(\"branch\")}\n        parentTitle={t(\"home\")}\n      />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t(\"branches\")}</h4>\n                    <div className=\"d-flex align-items-center\">\n                      {can(\"company\", \"view\") && (\n                        <>\n                          <Link\n                            className=\"btn  btn-xxs\"\n                            data-bs-toggle=\"offcanvas\"\n                            onClick={handleClearFilter}\n                            to={\"/branch\"}\n                            style={{\n                              background: \"gray\",\n                              border: \"gray\",\n                              color: \"white\",\n                            }}\n                          >\n                            {t(\"clear\")}\n                          </Link>\n                          <Controller\n                            name=\"company\"\n                            control={control}\n                            rules={{ required: true }}\n                            render={({\n                              field: { onChange, value, name, ref },\n                            }) => (\n                              <CompanyDropdownList\n                                onChange={(newValue) => {\n                                  navigate(`/branch/cid/${newValue?.value}`);\n                                }}\n                                defaultValue={cId}\n                                value={\n                                  cId ?? {\n                                    label: t(\"allCompanies\"),\n                                    value: \"All Companies\",\n                                  }\n                                }\n                                customStyles={customStyles}\n                                name={name}\n                                ref={ref}\n                                isDisabled={!can(\"company\", \"view\")}\n                              />\n                            )}\n                          />\n                        </>\n                      )}\n                      {can(\"branch\", \"add\") && (\n                        <Link\n                          to={\"/branch/create\"}\n                          className=\"btn btn-primary btn-sm ms-1\"\n                          style={{ paddingBlock: \"9px\" }}\n                          data-bs-toggle=\"offcanvas\"\n                        >\n                          + {t(\"addBranch\")}\n                        </Link>\n                      )}{\" \"}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    <div className=\"table-responsive \">\n                      {isLoading || isFetching ? (\n                        <TableSkeleton />\n                      ) : (\n                        <table\n                          id=\"empoloyees-tblwrapper\"\n                          className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                        >\n                          <thead>\n                            <tr>\n                              <th>{t(\"id\")}</th>\n                              <th>{t(\"branchName\")}</th>\n                              {/* <th>{t(\"parentBranch\")}</th> */}\n                              <th>{t(\"companyName\")}</th>\n                              <th>{t(\"businessGroup\")}</th>\n                              {/* <th>{t('mobileNumber')}</th> */}\n                              <th>{t(\"location\")}</th>\n                              {/* <th>{t(\"childBranches\")}</th> */}\n                              {(can(\"branch\", \"modify\") ||\n                                can(\"branch\", \"delete\")) && (\n                                <th>{t(\"action\")}</th>\n                              )}\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {data?.data?.length ? (\n                              <BranchTable\n                                tableData={data?.data ?? []}\n                                currentPage={page}\n                                itemsPerPage={itemsPerPage}\n                                onConfirmDelete={mutate}\n                              />\n                            ) : (\n                              <tr>\n                                <td colspan=\"10\" rowSpan={2} height={150}>\n                                  <h1 className=\"text-center\">\n                                    No Data found!\n                                  </h1>\n                                </td>\n                              </tr>\n                            )}\n                          </tbody>\n                        </table>\n                      )}\n                    </div>\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                        {t(\"showing\")} {(page - 1) * 10 + 1} {t(\"to\")}{\" \"}\n                        {Math.min(page * 10, totalCount)} {t(\"of\")} {totalCount}{\" \"}\n                        {t(\"entries\")}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                        <Paginate\n                          totalCount={totalCount}\n                          itemsPerPage={itemsPerPage}\n                          handlePageClick={handlePageClick}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* <SubCompanyOffcanvas\n                ref={subCompany}\n                editData={editData}\n                setEditData={setEditData}\n                handleSubmit={handleSubmit}\n                Title={ editData.id === 0 ? \"Add Branch\" : \"Edit Branch\"}\n            /> */}\n    </>\n  );\n};\nexport default BranchList;\n"],"names":["_ref","onConfirmDelete","currentPage","itemsPerPage","tableData","can","usePermissions","editPermission","deletePermission","startIndex","_jsx","_Fragment","children","map","item","index","_item$companyId","_item$companyId2","_item$businessGroupId","_item$businessGroupId2","_jsxs","className","branchName","companyId","companyName","businessGroupId","groupName","city","Link","to","concat","_id","FaEdit","style","color","fontSize","DeleteModal","id","MdDelete","customStyles","control","base","marginRight","marginLeft","width","height","menuPortal","provided","zIndex","menu","BranchList","_data$data","_data$data2","t","useTranslation","navigate","useNavigate","cId","useParams","page","goToPage","setCount","totalCount","usePagination","queryClient","useQueryClient","useForm","data","isLoading","isFetching","useQuery","queryKey","queryFn","getAllBranch","placeholderData","keepPreviousData","staleTime","Infinity","mutate","useMutation","onError","err","notifyError","getApiErrorMessage","onSuccess","invalidateQueries","mutationFn","deleteBranch","useEffect","MainPagetitle","mainTitle","pageTitle","parentTitle","onClick","handleClearFilter","background","border","Controller","name","rules","required","render","_ref2","field","onChange","value","ref","CompanyDropdownList","newValue","defaultValue","label","isDisabled","paddingBlock","TableSkeleton","length","BranchTable","colspan","rowSpan","Math","min","Paginate","handlePageClick","selected"],"sourceRoot":""}