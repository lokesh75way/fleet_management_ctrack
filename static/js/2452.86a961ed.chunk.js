"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[2452],{61613:(e,a,t)=>{t.d(a,{A:()=>o});var s=t(78109),r=t(74563),l=t(7695),n=t(47337);const o=e=>{let{onChange:a,value:t,customStyles:o,ref:i,isDisabled:c,name:m}=e;const[d,u]=(0,s.useState)([]),[h,x]=(0,s.useState)(t);return(0,s.useEffect)((()=>{(async()=>{const e=(await(0,l.K$)()).data.map((e=>({label:null===e||void 0===e?void 0:e.firstName,value:null===e||void 0===e?void 0:e._id})));u(e)})()}),[]),(0,s.useEffect)((()=>{const e=d.find((e=>e.value===t));x(e)}),[t,d]),(0,n.jsx)(r.Ay,{options:d,value:h,onChange:e=>a(e),styles:o,ref:i,name:m})}},72452:(e,a,t)=>{t.r(a),t.d(a,{default:()=>A});var s=t(78109),r=t(36145),l=t(93576),n=t(86554),o=t(53252),i=t(67236),c=t(78292),m=t(75889),d=t.n(m),u=t(74563),h=(t(1682),t(35291)),x=(t(6040),t(4524)),p=t(51983),v=t(61613),j=t(34571),b=t(47337);const g=e=>{let{Title:a,editData:t,setEditData:r,register:l,setValue:o,getValues:m,handleSubmit:g,onSubmit:f,errors:N,control:C,clearErrors:y}=e;const{t:A}=(0,j.Bd)(),[S,T]=(0,s.useState)(!1),[F,L]=(0,s.useState)(),[w,I]=(0,s.useState)([]),E=((0,i.Zp)(),(0,i.zy)()),D={control:e=>({...e,padding:".25rem 0 "})},{id:$}=(0,i.g)();return(0,s.useEffect)((()=>{if($){const e=E.state[0];I(e)}}),[$]),(0,s.useEffect)((()=>{w&&$?(o("startLocation",null===w||void 0===w?void 0:w.startLocation),o("reachLocation",null===w||void 0===w?void 0:w.reachLocation),o("distance",null===w||void 0===w?void 0:w.distance),o("fuelConsumption",null===w||void 0===w?void 0:w.fuelConsumption),o("tripStatus",null===w||void 0===w?void 0:w.tripStatus),o("driver",null===w||void 0===w?void 0:w.driver)):(o("startTime",new Date),o("reachTime",new Date))}),[w,$]),(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,b.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,b.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[A("startTime")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsx)(n.xI,{name:"startTime",control:C,render:e=>{let{value:a,name:t}=e;return(0,b.jsx)(d(),{selected:m("startTime")||new Date,className:"form-control customDateHeight",onChange:e=>o("startTime",e)})}}),(0,b.jsx)(x.A,{errorName:N.startTime})]}),(0,b.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,b.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[A("startLocation")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsx)(p.A,{type:"text",register:l,label:"Start Location",name:"startLocation",placeholder:""}),(0,b.jsx)("br",{}),(0,b.jsx)(x.A,{errorName:N.startLocation})]}),(0,b.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,b.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[A("reachTime")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsx)(n.xI,{name:"reachTime",control:C,render:e=>{let{value:a,name:t}=e;return(0,b.jsx)(d(),{selected:m("reachTime")||new Date,className:"form-control customDateHeight",onChange:e=>o("reachTime",e)})}}),(0,b.jsx)("br",{}),(0,b.jsx)(x.A,{errorName:N.reachTime})]}),(0,b.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,b.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[A("reachLocation")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsx)(p.A,{type:"text",register:l,label:"Reach Location",name:"reachLocation",placeholder:""}),(0,b.jsx)(x.A,{errorName:N.reachLocation})]}),(0,b.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,b.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:A("distance")}),(0,b.jsx)(p.A,{type:"number",register:l,label:"Distance",name:"distance",placeholder:""})]}),(0,b.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,b.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:A("fuelConsumption")}),(0,b.jsx)(p.A,{type:"number",register:l,label:"Fuel Consumption",name:"fuelConsumption",placeholder:""})]}),(0,b.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,b.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[A("driver")," ",(0,b.jsx)("span",{className:"text-danger",children:"*"})]}),(0,b.jsx)(n.xI,{name:"driver",control:C,rules:{required:!0},render:e=>{let{field:{onChange:a,value:t,name:s,ref:r}}=e;return(0,b.jsx)(v.A,{onChange:e=>{o("driver",e.value)},value:t,customStyles:D,ref:r,name:s})}}),(0,b.jsx)(x.A,{errorName:N.driver})]}),(0,b.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,b.jsx)("label",{className:"form-label",children:A("tripStatus")}),(0,b.jsx)(n.xI,{name:"tripStatus",control:C,render:e=>{let{field:{onChange:a,value:t,name:s,ref:r}}=e;return(0,b.jsx)(u.Ay,{onChange:e=>{L(e.value),o("tripStatus",e.value)},options:h.av,ref:r,name:s,styles:D,defaultValue:h.av[0]})}})]})]}),(0,b.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:[(0,b.jsx)("button",{type:"submit",onClick:()=>{g(f)},className:"btn btn-primary me-1",children:"Submit"}),(0,b.jsx)(c.N_,{to:"#",onClick:()=>T(!1),className:"btn btn-danger light ms-1",children:"Cancel"})]})]})})};var f=t(6486),N=t(15985),C=t(70529),y=t(14578);const A=()=>{const[e,a]=(0,s.useState)(0),t=(0,i.Zp)(),c=["Trip"],m=[g],{register:d,setValue:u,getValues:h,handleSubmit:x,clearErrors:p,formState:{errors:v},control:A}=(c.length,(0,n.mN)({resolver:(0,o.t)(f.M0)})),{id:S}=(0,i.g)(),{t:T}=(0,j.Bd)(),F=async e=>{if(S)try{return await(0,N.pj)(S,e),(0,C.V)("Trip Updated!"),void t("/settings/classifyTrips")}catch(a){console.log(a),(0,C.U)("Some error occured !!")}else try{await(0,N.C$)(e),(0,C.V)("New Trip Created!"),t("/settings/classifyTrips"),console.log("Submit botn",e)}catch(s){console.log("Error",s),(0,C.U)("Some error occured !!")}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.A,{mainTitle:T("trip"),pageTitle:T(S?"edit":"create"),parentTitle:T("classifyTrip")}),(0,b.jsx)("div",{className:"m-2 p-2",children:(0,b.jsx)(n.Op,{children:(0,b.jsx)("form",{onSubmit:x(F),children:(0,b.jsx)("div",{className:"default-tab",children:(0,b.jsxs)(r.A.Container,{defaultActiveKey:c[0].toLowerCase(),children:[(0,b.jsx)(l.A,{as:"ul",className:"nav-tabs",children:c.map(((t,s)=>(0,b.jsx)(l.A.Item,{as:"li",children:(0,b.jsx)(l.A.Link,{style:{padding:".5rem 2rem"},eventKey:t.toLowerCase(),active:s===e,onClick:()=>a(s),children:t})},s)))}),(0,b.jsx)(r.A.Content,{className:"pt-4",children:c.map(((a,t)=>{const s=m[t];return(0,b.jsx)(r.A.Pane,{eventKey:a.toLowerCase(),active:t===e,children:(0,b.jsx)(s,{data:c,control:A,setValue:u,register:d,getValues:h,errors:v,handleSubmit:x,onSubmit:F})},t)}))})]})})})})})]})}},15985:(e,a,t)=>{t.d(a,{BG:()=>o,C$:()=>l,nH:()=>r,pj:()=>n});var s=t(74763);(0,t(30304).A)();const r=async function(){let e=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,t=arguments.length>4?arguments[4]:void 0,r=`/trips?page=${arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}&limit=10`;r+=e&&a&&t?`&driverId=${e}&start=${a}&end=${t}`:`&status=${arguments.length>1?arguments[1]:void 0}`;const l=await s.A.get(r);return{data:l.data.data.data,totalLength:l.data.data.count}},l=async e=>s.A.post("/trips",e),n=async(e,a)=>s.A.patch(`/trips/${e}`,a),o=async e=>s.A.delete(`/trips/${e}`)}}]);
//# sourceMappingURL=2452.86a961ed.chunk.js.map