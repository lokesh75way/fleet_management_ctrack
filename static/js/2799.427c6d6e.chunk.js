"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[2799],{22799:(e,a,s)=>{s.r(a),s.d(a,{default:()=>C});var l=s(65043),r=s(73216),t=s(44816),n=s(86856),o=s(24858),c=(s(9531),s(9866)),i=s(14282),m=s(2364),d=s(23764),u=s(15075),h=s(69367),x=s(13052),p=s(59167),b=(s(72213),s(86151)),j=s(40078),N=s(70579);const f=e=>{let{handleNext:a,register:s,setValue:t,onSubmit:n,handleSubmit:c,getValues:f,errors:g,control:y}=e;const{checkUser:v}=(0,p.A)(),[C,S]=(0,l.useState)(),[A,w]=(0,l.useState)(0),[V,B]=(0,l.useState)(0),[I,k]=(0,l.useState)(!0),T={control:e=>({...e,padding:"0.25rem 0 "})},U=b.filter((e=>"company"===e.role)).map((e=>({label:e.userName,value:e.id})));console.log("ye he default company data",U);const{id:E}=(0,r.g)(),D=JSON.parse(localStorage.getItem("userJsonData")).filter((e=>"branch"===e.role&&e.id==E)),J=JSON.parse(localStorage.getItem("userJsonData")).filter((e=>e.id===parseInt(E,10))),P=(0,j.Bc)(),[O,F]=(0,l.useState)(J),[H,L]=(0,l.useState)([]),[q,G]=(0,l.useState)([]),[M,K]=(0,l.useState)([]),[Q,R]=(0,l.useState)([]),[Z,z]=(0,l.useState)(),[W,X]=(0,l.useState)([]),[Y,$]=(0,l.useState)();(0,l.useEffect)((()=>{const e=b.filter((e=>"businessgroup"===e.role)).map((e=>({label:e.userName,value:e.id}))),a=b.filter((e=>"company"===e.role)).filter((e=>e.parent===Z)).map((e=>({label:e.userName,value:e.id}))),s=b.filter((e=>"branch"===e.role)).filter((e=>e.parentCompany===W)).map((e=>({label:e.userName,value:e.id}))),l=b.filter((e=>e.vehicleName&&e.company===W)).map((e=>({label:e.vehicleName,value:e.id})));a.push({label:"None",value:0}),L(e),console.log("ye he value ",Z),G(Z?a:[...U,{label:"None",value:0}]),R(l),K(s)}),[Z,W,Y]);const[_,ee]=(0,l.useState)(D);return(0,l.useEffect)((()=>{t("parentBusinessGroup",_[0]?_[0].parentBusinessGroup:""),t("parentCompany",_[0]?_[0].parentCompany:""),t("parentBranch",_[0]?_[0].parentBranch:""),t("country",_[0]?_[0].country:""),t("state",_[0]?_[0].state:"")}),[]),(0,N.jsxs)("div",{className:"p-4",children:[(0,N.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsx)("label",{className:"form-label",children:"Business Group"}),(0,N.jsx)(o.xI,{name:"businessUser",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:r}}=e;return(0,N.jsx)(m.Ay,{onChange:e=>{z(e.label),t("parentBusinessGroup",e.label)},options:H,ref:r,isDisabled:P.business.disabled,name:l,styles:T})}})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsxs)("label",{className:"form-label",children:["Company",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(o.xI,{name:"parentCompany",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:r}}=e;return(0,N.jsx)(m.Ay,{onChange:e=>{X(e.label),t("parentCompany",e.label)},isDisabled:P.company.disabled,options:q,ref:r,name:l,styles:T})}})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsx)("label",{className:"form-label",children:"Branch"}),(0,N.jsx)(o.xI,{name:"Branch",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:r}}=e;return(0,N.jsx)(m.Ay,{onChange:e=>{t("Branch",e)},options:M,ref:r,name:l,styles:T,isMulti:!0,defaultValue:O[0]?O[0].Branch:""})}}),!f("Branch")&&(0,N.jsx)(d.A,{errorName:g.parent})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsx)("label",{className:"form-label",children:"vehicle"}),(0,N.jsx)(o.xI,{name:"accessibleVehicles",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:r}}=e;return(0,N.jsx)(m.Ay,{onChange:e=>{t("vehicle",e)},options:Q,ref:r,name:l,styles:T,isMulti:!0,defaultValue:O[0]?O[0].vehicle:""})}}),!f("vehicle")&&(0,N.jsx)(d.A,{errorName:g.parent})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:["Email ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(h.A,{type:"email",register:s,label:"Email",className:"form-control",name:"email",defaultValue:O[0]?O[0].email:"",placeholder:""}),(0,N.jsx)(d.A,{errorName:g.email})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,N.jsxs)("label",{className:"form-label",children:["User Name ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(h.A,{type:"text",register:s,label:"User Name",name:"userName",placeholder:"",defaultValue:O[0]?O[0].userName:""}),(0,N.jsx)(d.A,{errorName:g.userName})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,N.jsxs)("label",{className:"form-label",children:["Mobile Number ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(h.A,{type:"text",register:s,label:"Mobile Number",name:"mobileNumber",placeholder:"",defaultValue:O[0]?O[0].mobileNumber:""}),(0,N.jsx)(d.A,{errorName:g.mobileNumber})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsxs)("label",{className:"form-label",children:["Country",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(x.b3,{onChange:e=>{w(e.id),t("country",e.name),k(!1)},containerClassName:"bg-white",inputClassName:"border border-white customSelectHeight",placeHolder:"Select Country"}),!f("country")&&(0,N.jsx)(d.A,{errorName:g.country})]}),(0,N.jsxs)("div",{className:"".concat(I?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,N.jsxs)("label",{className:"form-label",children:["State",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)("div",{style:{background:"white"},children:(0,N.jsx)(x.QO,{countryid:A,onChange:e=>{B(e.id),t("state",e.name)},containerClassName:"bg-white",inputClassName:"border border-white customSelectHeight",placeHolder:"Select State"})}),!f("state")&&(0,N.jsx)(d.A,{errorName:g.state})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,N.jsxs)("label",{className:"form-label",children:["Password ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(h.A,{type:"password",register:s,label:"Password",name:"password",placeholder:"",defaultValue:O[0]?O[0].password:""}),(0,N.jsx)(d.A,{errorName:g.password})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,N.jsxs)("label",{className:"form-label",children:["Confirm Password ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(h.A,{type:"password",register:s,label:"Confirm Password",name:"confirmPassword",placeholder:"",defaultValue:O[0]?O[0].confirmPassword:""}),(0,N.jsx)(d.A,{errorName:g.confirmPassword})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,N.jsxs)("label",{className:"form-label",children:["Feature Template ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(o.xI,{name:"featureTemplate",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:r}}=e;return(0,N.jsx)(m.Ay,{onChange:e=>{S(e.label),t("featureTemplate",e.label)},options:u.H2,ref:r,name:l,styles:T,defaultValue:u.H2[0]})}}),!f("featureTemplate")&&(0,N.jsx)(d.A,{errorName:g.featureTemplate})]})]}),(0,N.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,N.jsxs)(i.A,{type:"submit",onClick:c(n),style:{width:"10%"},children:[" ","Submit"]})})]})};var g=s(18403),y=s(87742),v=s(42457);const C=e=>{let{Title:a,editData:s,setEditData:i}=e;const[m,d]=(0,l.useState)(0),{checkRole:u,checkUserName:h}=(0,p.A)(),x=u(),b=h(),j=["Account"],C=[f],S=(j.length,(0,r.Zp)()),{register:A,formState:{errors:w},setValue:V,getValues:B,control:I,handleSubmit:k}=(0,o.mN)({resolver:(0,g.t)(y.it)}),T=e=>{try{const a=JSON.parse(localStorage.getItem("userJsonData"));e.id=a.length+1,e.role="user",e.parent=b,e.type=x,a.push(e),console.log("this is dataaaaaaaaaaaaaaaaa",e),localStorage.setItem("userJsonData",JSON.stringify(a)),(0,v.V)("User created successfully !!"),S("/subUser")}catch(a){(0,v.U)("Error Occured !!"),S("/subUser")}};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(c.A,{mainTitle:"User",pageTitle:"Create",parentTitle:"User"}),(0,N.jsx)("div",{className:"m-2 p-2",children:(0,N.jsx)(o.Op,{children:(0,N.jsx)("form",{onSubmit:k(T),children:(0,N.jsx)("div",{className:"default-tab",children:(0,N.jsxs)(t.A.Container,{defaultActiveKey:j[0].toLowerCase(),children:[(0,N.jsx)(n.A,{as:"ul",className:"nav-tabs",children:j.map(((e,a)=>(0,N.jsx)(n.A.Item,{as:"li",children:(0,N.jsx)(n.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:a===m,onClick:()=>d(a),children:e})},a)))}),(0,N.jsx)(t.A.Content,{className:"pt-4",children:j.map(((e,a)=>{const s=C[a];return(0,N.jsx)(t.A.Pane,{eventKey:e.toLowerCase(),active:a===m,children:(0,N.jsx)(s,{data:j,control:I,setValue:V,register:A,getValues:B,errors:w,onSubmit:T,handleSubmit:k})},a)}))})]})})})})})]})}}}]);
//# sourceMappingURL=2799.427c6d6e.chunk.js.map