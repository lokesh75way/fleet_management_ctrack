"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[5163],{98649:(e,a,s)=>{s.r(a),s.d(a,{default:()=>T});var t=s(65043),n=s(9866),l=s(53358),i=s(33723),c=s(44816),r=s(86856),o=s(10457),d=s(14282),m=(s(72213),s(50423)),h=(s(51359),s(15075),s(47522)),p=(s(19980),s(79904)),x=s.n(p),u=s(70579);const g=e=>{const[a,s]=(0,t.useState)([]),[n,l]=(0,t.useState)([]),[i,c]=(0,t.useState)([]);(0,t.useEffect)((()=>{const a=Object.entries(e.vehicles).map((e=>{const a=e[1].map((e=>({label:e.vehicleName,value:e.id})));return{value:e[0],label:e[0],children:a}}));c([...a])}),[e.vehicles]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"checkboxTree",children:(0,u.jsx)(x(),{nodes:i,checked:a,expanded:n,onCheck:e=>{s(e)},onExpand:e=>{l(e)},showNodeIcon:!1,icons:{expandOpen:(0,u.jsx)("i",{class:"fa-solid fa-minus"}),expandClose:(0,u.jsx)("i",{class:"fa-solid fa-plus"}),uncheck:(0,u.jsx)("i",{class:"fa-regular fa-square",style:{fontSize:"16px"}}),check:(0,u.jsx)("i",{class:"fa-solid fa-square-check",style:{fontSize:"16px"}}),halfCheck:(0,u.jsx)("i",{class:"fa-regular fa-square-minus",style:{fontSize:"16px"}})}})}),(0,u.jsx)("div",{className:"text-center  pt-2 ",children:(0,u.jsx)(d.A,{className:" mb-5",variant:"primary btn-md ",type:"submit",onClick:()=>{const s=a.map((e=>JSON.parse(e)));console.log(s),e.handleToggleCardPositionHandler()},children:"Save Selection"})})]})};var f=s(272);const v=e=>{let{geoFences:a,handleToggleCardPositionHandler:s}=e;const[n,l]=(0,t.useState)([]),[i,c]=(0,t.useState)([]),[r,o]=(0,t.useState)([]);(0,t.useEffect)((()=>{const e=Object.entries(a).map((e=>{let[a,s]=e;return{value:a,label:a,children:s.map((e=>({label:e.name,value:e.id})))}}));o(e)}),[a]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"checkboxTree",children:(0,u.jsx)(x(),{nodes:r,checked:n,expanded:i,onCheck:e=>{l(e)},onExpand:e=>{c(e)},showNodeIcon:!1,icons:{expandOpen:(0,u.jsx)("i",{className:"fa-solid fa-minus"}),expandClose:(0,u.jsx)("i",{className:"fa-solid fa-plus"}),uncheck:(0,u.jsx)("i",{className:"fa-regular fa-square",style:{fontSize:"16px"}}),check:(0,u.jsx)("i",{className:"fa-solid fa-square-check",style:{fontSize:"16px"}}),halfCheck:(0,u.jsx)("i",{className:"fa-regular fa-square-minus",style:{fontSize:"16px"}})}})}),(0,u.jsx)("div",{className:"text-center  pt-2 ",children:(0,u.jsx)(d.A,{className:" mb-5",variant:"primary btn-md ",type:"submit",onClick:()=>{const e=n.map((e=>JSON.parse(e)));console.log(e),s()},children:"Save Selection"})})]})},j=e=>{const a=(0,f.r_)(),{Running:s,Idle:n,Stopped:l,Inactive:i,nodata:c,total:r}=a,[o,d]=(0,t.useState)("All"),[m,p]=(0,t.useState)([]);(0,t.useEffect)((()=>{const e=(0,f.kw)(o);p(e)}),[o]);const x=JSON.parse(localStorage.getItem("userJsonData")).filter((e=>"vehicle"===e.designation)).map((e=>({id:e.id,name:e.vehicleName})));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"vehicle_tracking-object",children:[(0,u.jsxs)("span",{className:"light fs-9 running ".concat("Running"===o&&"vehicle_tracking-active"),onClick:()=>d("Running"),children:[(0,u.jsx)("p",{children:s}),(0,u.jsx)("span",{children:"Running"})]}),(0,u.jsxs)("span",{pill:!0,className:"light fs-9 idle ".concat("Idle"===o&&"vehicle_tracking-active"),onClick:()=>d("Idle"),children:[(0,u.jsx)("p",{children:n}),(0,u.jsx)("span",{children:"Idle"})]}),(0,u.jsxs)("span",{pill:!0,className:"light stopped fs-9 ".concat("Stopped"===o&&"vehicle_tracking-active"),onClick:()=>d("Stopped"),children:[(0,u.jsx)("p",{children:l}),(0,u.jsx)("span",{children:"Stopped"})]}),(0,u.jsxs)("span",{pill:!0,className:"light fs-9 inActive ".concat("Inactive"===o&&"vehicle_tracking-active"),onClick:()=>d("Inactive"),children:[(0,u.jsx)("p",{children:i}),(0,u.jsx)("span",{children:"InActive"})]}),(0,u.jsxs)("span",{pill:!0,className:"light fs-9 noData ".concat("NoData"===o&&"vehicle_tracking-active"),onClick:()=>d("NoData"),children:[(0,u.jsx)("p",{children:c}),(0,u.jsx)("span",{children:"NoData"})]}),(0,u.jsxs)("span",{className:"light fs-9 total ".concat("All"===o&&"vehicle_tracking-active"),onClick:()=>d("All"),children:[(0,u.jsx)("p",{children:r}),(0,u.jsx)("span",{children:"Total"})]})]}),(0,u.jsx)("div",{className:"d-flex mt-4 mb-4",children:(0,u.jsx)(h.ReactSearchAutocomplete,{items:x,className:"w-100",styling:{height:"30px",marginRight:"10px",fontSize:"12px",color:"#4A4646"},onSearch:e=>{if(""===e){const e=(0,f.kw)(o);p(e)}},onSelect:e=>{const a=(0,f.kw)(o);console.log(a);const s=Object.entries(a).filter((a=>a[1].filter((a=>a.id==e.id)).length>0)).reduce(((a,s)=>{let[t,n]=s;return n.map((s=>{s.vehicleName===e.name&&(a[t]=[s])})),a}),{});p(s)}})}),(0,u.jsx)(g,{vehicles:m,handleToggleCardPositionHandler:e.handleToggleCardPosition})]})},N=e=>{const[a,s]=(0,t.useState)("All"),[n,l]=(0,t.useState)([]),[i,c]=(0,t.useState)([]),[r,m]=(0,t.useState)([]),[p,x]=(0,t.useState)(!1),[g,f]=(0,t.useState)(!1),v=JSON.parse(localStorage.getItem("userJsonData")),[j,N]=(0,t.useState)(v.filter((e=>"company"===e.role))),[k,S]=(0,t.useState)(v.filter((e=>"Driver"===e.designation))),C=k.filter((e=>"Allocated"===e.activityStatus)),y=k.filter((e=>"Not Allocated"===e.activityStatus)),b=k.length;console.log(k);const A=e=>{console.log(n),l((a=>{const s=[...a];return s[e]=!s[e],s}))};(0,t.useEffect)((()=>{if("All"!==a){if(N(v.filter((e=>"company"===e.role))),x(!0),"Allocated"===a){const e=C.map((e=>e.parentCompany)).filter(((e,a,s)=>s.indexOf(e)===a));N(j.filter((a=>e.some((e=>e===a.userName)))))}if("Not Allocated"===a){const e=y.map((e=>e.parentCompany)).filter(((e,a,s)=>s.indexOf(e)===a));N(j.filter((a=>e.some((e=>e===a.userName)))))}}else x(!1)}),[a]);const T=v.filter((e=>"Driver"===e.designation)).map((e=>({id:e.id,name:e.firstName+" "+e.lastName})));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"px-2 vehicle_tracking-object",children:[(0,u.jsxs)("span",{bg:"",pill:!0,className:"light fs-9  running ".concat("Allocated"===a?"vehicle_tracking-active":g&&"pe-none"),onClick:()=>s("Allocated"),children:[(0,u.jsx)("p",{children:C.length}),(0,u.jsx)("span",{children:"Allocated"})]}),(0,u.jsxs)("span",{bg:"",pill:!0,className:"light fs-9 idle ".concat("Not Allocated"===a?"vehicle_tracking-active":g&&"pe-none"),onClick:()=>s("Not Allocated"),children:[(0,u.jsx)("p",{children:y.length}),(0,u.jsx)("span",{children:"Not Allocated"})]}),(0,u.jsxs)("span",{bg:"",pill:!0,className:"light fs-9 total ".concat("Total"===a?"vehicle_tracking-active":g&&"pe-none"),onClick:()=>s("Total"),children:[(0,u.jsx)("p",{children:b}),(0,u.jsx)("span",{children:"Total"})]})]}),(0,u.jsx)("div",{className:"d-flex mt-4 mb-4",children:(0,u.jsx)(h.ReactSearchAutocomplete,{items:T,className:"w-100",styling:{height:"30px",marginRight:"10px",fontSize:"12px",color:"#red"},onSearch:(e,a)=>{s("All"),f(!1),x(!1),S(v.filter((e=>"Driver"===e.designation))),N(v.filter((e=>"company"===e.role)))},onSelect:e=>{s("All"),x(!0),f(!0);var a=v.filter((a=>"Driver"===a.designation&&a.id===e.id)),t=j.filter((e=>e.userName===a[0].parentCompany));S(a),N(t)}})}),(0,u.jsx)("div",{className:"d-flex flex-column  p-2",style:{marginTop:".5rem",height:"65vh",overflowY:"scroll"},children:j.map(((e,s)=>{var t=[];return 0===i.length&&j.map((e=>i.push([])&&n.push(!1))),p?"All"===a?t=k:"Allocated"===a?t=C.filter((a=>a.parentCompany===e.userName)):"Not Allocated"===a?t=y.filter((a=>a.parentCompany===e.userName)):"Total"===a&&(t=v.filter((a=>"Driver"===a.designation&&a.parentCompany===e.userName))):t=v.filter((a=>"Driver"===a.designation&&a.parentCompany===e.userName)),(0,u.jsx)(o.A,{className:"accordion accordion-primary",defaultActiveKey:"0",children:(0,u.jsxs)(o.A.Item,{className:"accordion-item",eventKey:"$/{i}",children:[(0,u.jsxs)(o.A.Header,{className:"accordian-header rounded-sm",children:[(0,u.jsx)("div",{className:"form-check custom-checkbox bs_exam_topper_all",style:{marginRight:"10px"},onClick:e=>e.stopPropagation(),children:(0,u.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox".concat(s),onChange:()=>((e,a,s,t)=>{var l=[...i];n[t]?(l[t]=[],c(l)):s.map((e=>l[t].push(e.id))),console.log(l)})(e.id,0,t,s),onClick:()=>A(s),checked:n[s],required:!0})}),e.userName]}),0===t.length?(0,u.jsx)(o.A.Body,{className:"p-2 text-center fs-4 heading ",children:"No Record Found"}):t.map(((e,a)=>(0,u.jsx)(o.A.Body,{className:"accordian-body",eventKey:"".concat(s),children:(0,u.jsxs)("div",{onClick:()=>{m(r.concat(e.id))},className:"d-flex align-items-center border-bottom heading driver-select-object p-2",children:[(0,u.jsx)("div",{className:"form-check custom-checkbox ms-3 me-3 bs_exam_topper",children:(0,u.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:()=>((e,a)=>{const s=[...i];if(s[a].includes(e)){const t=s[a].indexOf(e);s[a].splice(t,1),2===s[a].length&&A(a)}else s[a].push(e),3===s[a].length&&A(a);console.log(s),c(s)})(e.id,s),checked:i[s].includes(e.id),required:!0})}),(0,u.jsxs)("span",{className:"fs-4 ms-2",children:[e.firstName," ",e.lastName]})]},a)})))]},s)})}))}),(0,u.jsx)("div",{className:"mt-3 text-center",children:(0,u.jsx)(d.A,{className:"btn-md",variant:"primary",children:"Save Selection"})})]})},k=e=>{const a=JSON.parse(localStorage.getItem("geofenceData")),[s,n]=(0,t.useState)(a),[l,i]=(0,t.useState)([]),[c,r]=(0,t.useState)(""),o=(s.filter((e=>e.company.toLowerCase().includes(c.toLowerCase()))),s.reduce(((e,a)=>(e[a.company]||(e[a.company]=[]),e[a.company].push(a),e)),{})),d=s.map((e=>({id:e.id,name:e.name})));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"d-flex mt-4 mb-4",children:(0,u.jsx)(h.ReactSearchAutocomplete,{items:d,className:"w-100",styling:{height:"30px",marginRight:"10px",fontSize:"12px",color:"#red"},onSelect:e=>{console.log("Search Query:",e);const s=a.filter((a=>a.id===e.id));n(s)}})}),(0,u.jsx)("div",{className:"d-flex flex-column p-2",style:{marginTop:".5rem",overflowY:"scroll"},children:(0,u.jsx)(v,{geoFences:o,handleToggleCardPositionHandler:e.handleToggleCardPosition})})]})},S=e=>{let{tabData:a,handleToggleCardPosition:s,isOutside:t}=e;const n={name:"Company1",drivers:[{name:"driver1",timeStamp:"22-02-2024 3:00 PM",status:"running"},{name:"driver2",timeStamp:"22-02-2024 3:00 PM",status:"idle"},{name:"driver3",timeStamp:"22-02-2024 3:00 PM",status:"inactive"},{name:"driver4",timeStamp:"22-02-2024 3:00 PM",status:"running"},{name:"driver5",timeStamp:"22-02-2024 3:00 PM",status:"stopped"},{name:"driver6",timeStamp:"22-02-2024 3:00 PM",status:"stopped"},{name:"driver7",timeStamp:"22-02-2024 3:00 PM"}],allocatedDriver:4,notAllocatedDriver:3,totalDriver:7},l=[j,N,k];return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"default-tab outer-container ".concat(t?"toggleBarInside":"toggleBarOutside"),children:[(0,u.jsx)("button",{onClick:s,className:"driver_tracking_button",children:t?(0,u.jsx)(m.m6W,{}):(0,u.jsx)(m.OQo,{})}),(0,u.jsxs)(c.A.Container,{defaultActiveKey:a[0].name.toLowerCase(),children:[(0,u.jsx)(r.A,{as:"ul",className:"nav-tabs tracking_navTabs",children:a.map(((e,a)=>{const s=e.icon;return(0,u.jsx)(r.A.Item,{as:"li",children:(0,u.jsxs)(r.A.Link,{eventKey:e.name.toLowerCase(),children:[(0,u.jsx)(s,{className:"tab-icon"}),e.name]})},a)}))}),(0,u.jsx)(c.A.Content,{className:"p-2 py-4",style:{background:"#f5f5f5",overflow:"scroll",height:"100vh"},children:a.map(((e,a)=>{const t=l[a];return(0,u.jsx)(c.A.Pane,{eventKey:e.name.toLowerCase(),children:(0,u.jsx)(t,{data:n,handleToggleCardPosition:s})},a)}))})]})]})})};var C=s(60397),y=s(60184),b=s(6720),A=s(74117);const T=()=>{const{t:e}=(0,A.Bd)(),{currentPosition:a,setCurrentPosition:s}=(0,t.useContext)(i.D),[c,r]=(0,t.useState)(!0),o=[{name:"Object",icon:C.ETQ},{name:"Driver",icon:y.x$1},{name:"Geofence",icon:b.vVi}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n.A,{mainTitle:e("vehicleTracking"),pageTitle:e("vehicleTracking"),parentTitle:e("tracking")}),(0,u.jsx)("div",{className:"backdrop ".concat(c?"d-none":"d-block"),onClick:()=>r(!0)}),(0,u.jsx)("div",{className:"p-2",children:(0,u.jsx)(l.A,{data:[{lat:30.7099475,lng:76.6900474},{lat:30.7333,lng:76.7794}]})}),(0,u.jsx)(S,{tabData:o,handleToggleCardPosition:()=>{r(!c)},isOutside:c})]})}}}]);
//# sourceMappingURL=5163.48dd44bd.chunk.js.map