"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[2542],{5614:(e,n,a)=>{a.d(n,{A:()=>s});a(78109);var t=a(47337);const s=e=>{let{height:n="100vh"}=e;return(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:n,marginTop:"-50px"},children:(0,t.jsx)("div",{class:"spinner-border",role:"status",children:(0,t.jsx)("span",{class:"sr-only",children:"Loading..."})})})}},62542:(e,n,a)=>{a.r(n),a.d(n,{default:()=>A});var t=a(78109),s=a(67236),r=a(36145),i=a(93576),l=a(86554),d=(a(1682),a(53252)),o=a(4900),c=a(67889),u=a(6986),h=a(34571),m=a(32343),v=a(44988),b=a(70529),g=a(96152),p=a(71459),j=a(19076),x=a(20460),f=a(5614),y=a(47337);const A=()=>{var e,n;const{t:a}=(0,h.Bd)(),[A,C]=(0,t.useState)(0),{id:E}=(0,s.g)(),I=[a(E?"editBranch":"newBranch")],S=[j.A],w=(0,s.Zp)(),F=(0,o.jE)(),{data:L,isLoading:B,isError:N}=(0,c.I)({queryKey:["branch",E],queryFn:()=>(0,p.dh)(E),enabled:!!E,staleTime:1/0});(0,t.useEffect)((()=>{N&&E&&((0,b.U)("Not able to fetch branch data"),w("/not-found"))}),[N&&E]);const T=(0,t.useMemo)((()=>{var e,n;return{...L,businessGroupId:null===L||void 0===L||null===(e=L.businessGroupId)||void 0===e?void 0:e._id,companyId:null===L||void 0===L||null===(n=L.companyId)||void 0===n?void 0:n._id}}),[L]),{register:V,formState:{errors:k},setValue:K,getValues:U,control:G,handleSubmit:P,watch:q}=(0,l.mN)({defaultValues:{companyId:"",businessGroupId:"",userInfo:[{name:"",designation:"",mobileNumber:null,email:""}],timeFormat:null===(e=x.lD[1])||void 0===e?void 0:e.value,dateFormat:null===(n=x.wJ[1])||void 0===n?void 0:n.value},resolver:(0,d.t)(v.dZ),values:T}),{mutate:Q,isPending:Z}=(0,u.n)({mutationFn:p.v9,onSuccess:()=>{(0,b.V)("Branch has been created"),F.invalidateQueries(["branches"]),w("/branch")},onError:e=>(0,b.U)((0,g.SU)(e))}),{mutate:_,isPending:D}=(0,u.n)({mutationFn:e=>{let{data:n,id:a}=e;return(0,p.t0)(a,n)},onSuccess:()=>{(0,b.V)("Branch has been updated!"),F.invalidateQueries(["branches"]),w("/branch")},onError:e=>{(0,b.U)(e.message)}}),J=async e=>{0===A&&(null!=e.logo&&0!==e.logo.length||delete e.logo,e.file&&0===e.file.length&&delete e.file,E?_({data:e,id:E}):Q(e))};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.A,{mainTitle:"Branch",pageTitle:E?"Edit":"Create",parentTitle:"Branch"}),(0,y.jsx)("div",{className:"m-2 p-2",children:(0,y.jsx)(l.Op,{children:(0,y.jsx)("form",{onSubmit:P(J),children:(0,y.jsx)("div",{className:"default-tab",children:(0,y.jsxs)(r.A.Container,{defaultActiveKey:I[0].toLowerCase(),children:[(0,y.jsx)(i.A,{as:"ul",className:"nav-tabs",children:I.map(((e,n)=>(0,y.jsx)(i.A.Item,{as:"li",children:(0,y.jsx)(i.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:n===A,onClick:()=>C(n),children:e})},n)))}),(0,y.jsx)(r.A.Content,{className:"pt-4",children:B?(0,y.jsx)(f.A,{height:500}):I.map(((e,n)=>{const a=S[n];return(0,y.jsx)(r.A.Pane,{eventKey:e.toLowerCase(),active:n===A,children:(0,y.jsx)(a,{data:I,control:G,setValue:K,register:V,getValues:U,errors:k,handleSubmit:P,onSubmit:J,watch:q,isFormSubmitting:Z||D})},n)}))})]})})})})})]})}}}]);
//# sourceMappingURL=2542.0e7ba3e4.chunk.js.map