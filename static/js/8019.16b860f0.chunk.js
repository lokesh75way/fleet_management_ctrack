"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[8019],{40965:(e,l,a)=>{a.d(l,{A:()=>d});var s=a(65043),t=a(14282),n=a(28334),r=a(74805),i=a(89698),o=(a(43),a(70579));const d=e=>{let{getValues:l,register:a,onSubmit:d,handleSubmit:c,errors:m,isFormSubmitting:u}=e;const[x,h]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),[j,p]=(0,s.useState)(!1);return(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("div",{className:"row",style:{width:"70%",margin:"auto"},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"col-xl-6 mb-3 position-relative",children:[(0,o.jsxs)("label",{className:"form-label",children:["Old Password",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsx)(r.A,{type:x?"text":"password",register:a,name:"oldPassword",label:"Old Password",placeholder:"",defaultValue:l("oldPassword")}),(0,o.jsx)("span",{className:"showPasswordIcon",onClick:()=>{h(!x)},children:x?(0,o.jsx)(i.mI_,{}):(0,o.jsx)(i.ZT8,{})})]}),(0,o.jsx)(n.A,{errorName:m.oldPassword})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:["New Password",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsx)(r.A,{type:b?"text":"password",register:a,label:"New Password",name:"newPassword",placeholder:"",defaultValue:l("newPassword")}),(0,o.jsx)("span",{className:"showPasswordIcon",onClick:()=>{v(!b)},children:b?(0,o.jsx)(i.mI_,{}):(0,o.jsx)(i.ZT8,{})})]}),(0,o.jsx)(n.A,{errorName:m.newPassword})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3 position-relative",children:[(0,o.jsxs)("label",{className:"form-label",children:["Retype Password",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsx)(r.A,{type:j?"text":"password",register:a,label:"Retype Password",name:"confirmPassword",placeholder:""}),(0,o.jsx)("span",{className:"showPasswordIcon",onClick:()=>{p(!j)},children:j?(0,o.jsx)(i.mI_,{}):(0,o.jsx)(i.ZT8,{})})]}),(0,o.jsx)(n.A,{errorName:m.confirmPassword})]})]})}),(0,o.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,o.jsxs)(t.A,{type:"submit",disabled:u,onClick:c(d),style:{width:"10%"},children:[" ","Submit"]})})]})}},79055:(e,l,a)=>{a.d(l,{A:()=>x});var s=a(65043),t=a(13052),n=a(28334),r=a(74805),i=a(42297),o=a(85756),d=a(74117),c=a(70579);const m=e=>{let{countryCode:l,customStyle:a,setValue:t,id:n,dValues:r,Comptype:m}=e;const{t:u}=(0,d.Bd)(),[x,h]=(0,s.useState)([]),[b,v]=(0,s.useState)(null);(0,s.useEffect)((()=>{const e=o.Ay.getCountry(l);if(e){const l=e.timezones;l&&l.length>0&&(h(l.map((e=>({label:"(GMT ".concat(j(e),") ").concat(e," "),value:e})))),v({label:"(GMT ".concat(j(l[0]),") ").concat(l[0]," "),value:l[0]}),t("timezone",l[0]))}}),[l]),(0,s.useEffect)((()=>{if(r&&n){var e,l;const a="companyId"===m?null===(e=r.companyId)||void 0===e?void 0:e.timezone:"businessGroupId"===m?null===(l=r.businessGroupId)||void 0===l?void 0:l.timezone:r.timezone;t("timezone",a),a&&(v({label:"(GMT ".concat(j(a),") ").concat(a),value:a}),console.log(b,"hi"))}}),[r,n]);const j=e=>{const l=o.Ay.getTimezone(e).utcOffset,a=Math.abs(Math.floor(l/60)),s=Math.abs(l%60);return"".concat(l>=0?"+":"-").concat(a,":").concat(s.toString().padStart(2,"0"))};return(0,c.jsxs)("div",{className:"col-xl-3",children:[(0,c.jsxs)("label",{htmlFor:"timezone",children:[u("timezone"),":"]}),(0,c.jsx)(i.Ay,{id:"timezone",value:b,styles:a,onChange:e=>{t("timezone",e.value),v(e)},options:x})]})},u={control:e=>({...e,padding:".25rem 0 "})},x=e=>{let{register:l,setValue:a,errors:o,getValues:x,locationData:h,dValues:b,id:v,showCity:j,Comptype:p,showtimeZone:f=!0}=e;const{t:N}=(0,d.Bd)(),[y,g]=(0,s.useState)(null),[A,w]=(0,s.useState)(null),[I,C]=(0,s.useState)([]),[S,V]=(0,s.useState)([]),[E,P]=(0,s.useState)("IND");(0,s.useEffect)((()=>{(0,t.xb)().then((e=>{C(e)}))}),[]),(0,s.useEffect)((()=>{if(v){if(null!==b&&void 0!==b&&b.city&&a("city",b.city),null!==b&&void 0!==b&&b.country){a("country",b.country);const e=G.find((e=>e.value==(null===b||void 0===b?void 0:b.country)));e&&F(e)}null!==b&&void 0!==b&&b.state&&(a("state",b.state||""),w({value:b.state,label:b.state||""}))}else{var e,l,s,n,r,i,o,d;g({value:null===h||void 0===h||null===(e=h.country)||void 0===e?void 0:e.isoAlpha3,label:null===h||void 0===h||null===(l=h.country)||void 0===l?void 0:l.isoName}),a("country",null===h||void 0===h||null===(s=h.country)||void 0===s?void 0:s.isoAlpha3),P(null===h||void 0===h||null===(n=h.country)||void 0===n?void 0:n.isoAlpha2),w({value:null===h||void 0===h||null===(r=h.location)||void 0===r?void 0:r.principalSubdivision,label:(null===h||void 0===h||null===(i=h.location)||void 0===i?void 0:i.principalSubdivision)||""}),a("state",(null===h||void 0===h||null===(o=h.location)||void 0===o?void 0:o.principalSubdivision)||"");const c=k(null===h||void 0===h||null===(d=h.country)||void 0===d?void 0:d.isoAlpha3);(0,t.Wm)(c).then((e=>{V(e)}))}}),[h,v,b]);const k=e=>{const l=I.find((l=>l.iso3===e));return l?l.id:null},F=async e=>{const l=e.value,s=k(l),n=I.find((e=>e.iso3===l));P(n.iso2),a("country",l),g({value:l,label:n.name}),V([]),w({value:"",label:""});const r=await(0,t.Wm)(s);V(r)},z=e=>"United Arab Emirates"===(null===y||void 0===y?void 0:y.label)&&e.name.endsWith(" Emirate")?e.name.replace(" Emirate",""):e.name,G=I.map((e=>({value:e.iso3,label:e.name}))),L=S.map((e=>({value:e.name,label:z(e)})));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,c.jsx)("label",{className:"form-label",children:N("country")}),(0,c.jsx)(i.Ay,{options:G,value:y,styles:u,onChange:F},y),!y&&(0,c.jsx)(n.A,{errorName:o.country})]}),(0,c.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,c.jsx)("label",{className:"form-label",children:N("state")}),(0,c.jsx)(i.Ay,{options:L,value:A,styles:u,onChange:e=>{const l=e.value,s=S.find((e=>e.name===l));"United Arab Emirates"===(null===y||void 0===y?void 0:y.label)&&null!==s&&void 0!==s&&s.name.endsWith(" Emirate")&&(s.name=s.name.replace(" Emirate","")),a("state",s.name),w({value:s.name,label:s.name})}},A),!A&&(0,c.jsx)(n.A,{errorName:o.state})]}),j&&(0,c.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,c.jsx)("label",{className:"form-label",children:N("city")}),(0,c.jsx)(r.A,{type:"text",register:l,label:"City",name:"city",placeholder:"",defaultValue:x("city")}),(0,c.jsx)(n.A,{errorName:o.city})]}),j&&f&&(0,c.jsx)(m,{setValue:a,id:v,countryCode:E,customStyle:u,Comptype:p})]})}},99793:(e,l,a)=>{a.d(l,{A:()=>o});a(65043);var s=a(74805),t=a(28334),n=a(27940),r=a(44978),i=a(70579);const o=e=>{var l,a,o,d,c,m,u,x;let{field:h,fields:b,index:v,register:j,getValues:p,errors:f,remove:N,id:y}=e;return(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[b.length>1&&(0,i.jsx)("div",{className:"flex-grow-1 mb-3",children:(0,i.jsxs)("h5",{children:["User ",v+1]})}),b.length>1&&(0,i.jsx)("div",{className:"mr-5",onClick:()=>(e=>{N(e)})(v),children:n.Os.Delete})]}),(0,i.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,i.jsxs)("label",{className:"form-label",children:[(0,r.t)("name")," ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)(s.A,{type:"text",register:j,label:"name",name:"userInfo.".concat(v,".name"),placeholder:"",defaultValue:p("userInfo.".concat(v,".name"))}),(0,i.jsx)(t.A,{errorName:null===(l=f.userInfo)||void 0===l||null===(a=l[v])||void 0===a?void 0:a.name})]}),(0,i.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,i.jsxs)("label",{className:"form-label",children:[(0,r.t)("designation")," ",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)(s.A,{type:"text",register:j,label:"designation",name:"userInfo.".concat(v,".designation"),placeholder:"",defaultValue:p("userInfo.".concat(v,".designation"))}),(0,i.jsx)(t.A,{errorName:null===(o=f.userInfo)||void 0===o||null===(d=o[v])||void 0===d?void 0:d.designation})]}),(0,i.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,i.jsxs)("label",{className:"form-label",children:[(0,r.t)("mobileNumber"),(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)(s.A,{type:"number",register:j,name:"userInfo.".concat(v,".mobileNumber"),label:"Mobile Number",placeholder:"",min:"0",onInput:e=>{const l=Math.max(0,e.target.value);e.target.value=l<1?"":l},defaultValue:p("userInfo.".concat(v,".mobileNumber"))}),(0,i.jsx)(t.A,{errorName:null===(c=f.userInfo)||void 0===c||null===(m=c[v])||void 0===m?void 0:m.mobileNumber})]}),(0,i.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,i.jsxs)("label",{className:"form-label",children:[(0,r.t)("email"),(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsx)(s.A,{type:"email",register:j,name:"userInfo.".concat(v,".email"),label:"email",placeholder:"",defaultValue:p("userInfo.".concat(v,".email"))}),(0,i.jsx)(t.A,{errorName:null===(u=f.userInfo)||void 0===u||null===(x=u[v])||void 0===x?void 0:x.email})]})]},h.id)}},94492:(e,l,a)=>{a.d(l,{A:()=>f});var s=a(65043),t=a(14282),n=a(24858),r=a(42297),i=a(73216),o=a(74117),d=a(28334),c=a(74805),m=a(92548),u=a(95474),x=a(99793),h=a(87460),b=a(79055),v=a(75636),j=a(70579);const p={control:e=>({...e,padding:".25rem 0 "})},f=e=>{let{setValue:l,getValues:a,register:f,onSubmit:N,handleSubmit:y,errors:g,control:A,isFormSubmitting:w,watch:I}=e;const{fields:C,append:S,remove:V}=(0,n.jz)({control:A,name:"userInfo"}),[E,P]=(0,s.useState)(),{t:k}=(0,o.Bd)(),{id:F}=(0,i.g)(),{location:z,error:G}=(0,v.A)();return(0,j.jsxs)("div",{className:"p-4",children:[(0,j.jsxs)("div",{className:"row",style:{width:"85%",margin:"auto"},children:[(0,j.jsx)("div",{children:G&&(0,j.jsx)("p",{children:G})}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,j.jsx)("label",{className:"form-label",children:k("businessGroup")}),(0,j.jsx)("span",{className:"text-danger",children:"*"}),(0,j.jsx)(n.xI,{name:"businessGroupId",control:A,rules:{required:!0},render:e=>{let{field:{onChange:s,value:t,name:n,ref:r}}=e;return(0,j.jsx)(m.A,{onChange:e=>{a("businessGroupId")!=e.value&&(l("businessGroupId",e.value),l("companyName",""),l("companyId",""),P(null))},defaultValue:t,customStyles:p,ref:r,name:n})}}),!a("businessGroupId")&&(0,j.jsx)(d.A,{errorName:g.businessGroupId})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,j.jsxs)("label",{className:"form-label",children:[k("company"),(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(n.xI,{name:"companyId",control:A,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:t,ref:n}}=e;return(0,j.jsx)(u.A,{groupId:I("businessGroupId"),onChange:e=>{l("companyId",e.value),l("companyName",e.label),P(e)},defaultValue:s,value:E,customStyles:p,ref:n,name:t})}}),!a("companyId")&&(0,j.jsx)(d.A,{errorName:g.companyId})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,j.jsxs)("label",{className:"form-label",children:[k("branchName")," ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(c.A,{type:"text",register:f,required:!0,label:"Branch Name",name:"branchName",placeholder:"",defaultValue:a("branchName")}),(0,j.jsx)(d.A,{errorName:g.branchName})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,j.jsx)("label",{className:"form-label",children:k("tradeLicenseNumber")}),(0,j.jsx)(c.A,{type:"text",register:f,label:"tradeLicenseNumber",name:"tradeLicenseNumber",placeholder:"",defaultValue:a("tradeLicenseNumber")}),(0,j.jsx)(d.A,{errorName:g.tradeLicenseNumber})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,j.jsx)("label",{className:"form-label",children:k("officeNo")}),(0,j.jsx)(c.A,{type:"text",register:f,label:"officeNumber",name:"officeNumber",placeholder:"",defaultValue:a("officeNumber")}),(0,j.jsx)(d.A,{errorName:g.officeNumber})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,j.jsxs)("label",{className:"form-label",children:[k("email"),(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(c.A,{type:"email",register:f,label:"Email",name:"email",placeholder:"",defaultValue:a("email"),disabled:!!F}),(0,j.jsx)(d.A,{errorName:g.email})]}),(0,j.jsx)(b.A,{register:f,setValue:l,dValues:{country:a("country"),state:a("state"),city:a("city")},errors:g,getValues:a,locationData:z,id:F,showCity:!0,Comptype:""}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,j.jsx)("label",{className:"form-label",children:k("dateFormat")}),(0,j.jsx)(n.xI,{name:"dateFormat",control:A,render:e=>{let{field:{onChange:a,value:s,name:t,ref:n}}=e;return(0,j.jsx)(r.Ay,{onChange:e=>l("dateFormat",null===e||void 0===e?void 0:e.value),options:h.wJ,ref:n,name:t,styles:p,value:{value:s,label:s}})}}),(0,j.jsx)(d.A,{errorName:g.dateFormat})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,j.jsx)("label",{className:"form-label",children:k("timeFormat")}),(0,j.jsx)(n.xI,{name:"timeFormat",control:A,render:e=>{let{field:{onChange:a,value:s,name:t,ref:n}}=e;return(0,j.jsx)(r.Ay,{onChange:e=>l("timeFormat",e.value),options:h.lD,ref:n,name:t,styles:p,value:{value:s,label:s},defaultValue:h.lD[1]})}})]}),(0,j.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",margin:"2rem 0"},children:[(0,j.jsx)("h3",{children:k("contactDetails")}),(0,j.jsxs)(t.A,{type:"button",onClick:()=>{S({name:"",designation:"",mobileNumber:null,email:""})},style:{width:"10%"},children:[" ","ADD"]})]}),C.map(((e,l)=>(0,j.jsx)(x.A,{field:e,index:l,register:f,getValues:a,errors:g,fields:C,remove:V,id:F},e.id)))]}),(0,j.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,j.jsxs)(t.A,{type:"submit",disabled:w,onClick:y(N),style:{width:"10%"},children:[" ",k("submit")]})})]})}},75636:(e,l,a)=>{a.d(l,{A:()=>n});var s=a(65043),t=a(77154);const n=()=>{const[e,l]=(0,s.useState)(null),[a,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(async()=>{try{m(!0);const e="bdc_031d6a642ab94e0b8f5376a97ded1793";if(!e)throw new Error("API key is missing.");const a=await t.A.get("https://api.bigdatacloud.net/data/ip-geolocation?key=".concat(e));l(a.data.location.latitude),n(a.data.location.longitude);const s=a.data;d(s),i(null)}catch(r){i("Error getting location data: "+r.message)}finally{m(!1)}})()}),[]),{location:o,lat:e,lng:a,isLoading:c,error:r}}},8019:(e,l,a)=>{a.r(l),a.d(l,{default:()=>j});var s=a(65043),t=a(73216),n=a(44816),r=a(86856),i=a(24858),o=(a(9531),a(40399)),d=a(94492),c=a(18403),m=a(70228),u=a(42457),x=(a(40965),a(74117)),h=a(66948),b=a(272),v=a(70579);const j=()=>{const{t:e}=(0,x.Bd)(),[l,a]=(0,s.useState)(0),{id:j}=(0,t.g)(),p=[e(j?"editBranch":"newBranch")],f=[d.A],N=(0,t.Zp)(),y=p.length,{register:g,formState:{errors:A},setValue:w,getValues:I,control:C,handleSubmit:S}=(0,i.mN)({defaultValues:{userInfo:[{name:"",designation:"",mobileNumber:null,email:""}]},resolver:(0,c.t)(m.dZ)}),V=async e=>{if(l===y-1)try{if(null!=e.logo&&0!==e.logo.length||delete e.logo,e.file&&0===e.file.length&&delete e.file,e.file&&0===Object.keys(e.file).length&&delete e.file,!j)return await(0,h.v9)(e),(0,u.V)("New Branch Created!"),void N("/branch");{const l={...e,branchId:j};await(0,h.t0)(l),(0,u.V)("Branch Updated!"),N("/branch")}}catch(a){(0,u.U)((0,b.SU)(a))}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.A,{mainTitle:"Branch",pageTitle:j?"Edit":"Create",parentTitle:"Branch"}),(0,v.jsx)("div",{className:"m-2 p-2",children:(0,v.jsx)(i.Op,{children:(0,v.jsx)("form",{onSubmit:S(V),children:(0,v.jsx)("div",{className:"default-tab",children:(0,v.jsxs)(n.A.Container,{defaultActiveKey:p[0].toLowerCase(),children:[(0,v.jsx)(r.A,{as:"ul",className:"nav-tabs",children:p.map(((e,s)=>(0,v.jsx)(r.A.Item,{as:"li",children:(0,v.jsx)(r.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:s===l,onClick:()=>a(s),children:e})},s)))}),(0,v.jsx)(n.A.Content,{className:"pt-4",children:p.map(((e,a)=>{const s=f[a];return(0,v.jsx)(n.A.Pane,{eventKey:e.toLowerCase(),active:a===l,children:(0,v.jsx)(s,{data:p,control:C,setValue:w,register:g,getValues:I,errors:A,handleSubmit:S,onSubmit:V})},a)}))})]})})})})})]})}}}]);
//# sourceMappingURL=8019.16b860f0.chunk.js.map