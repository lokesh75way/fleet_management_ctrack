"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[6411],{6411:(e,l,a)=>{a.r(l),a.d(l,{default:()=>A});var s=a(65043),n=a(44816),t=a(86856),r=a(24858),c=a(18403),o=a(87742),m=a(73216),i=a(35475),d=a(31899),x=a.n(d),h=a(2364),u=(a(9531),a(74117)),b=a(69367),j=a(83700),p=a(23764),f=(a(86359),a(70579));var N=a(15075),g=a(87407);const v=e=>{let{Title:l,editData:a,setEditData:n,register:t,setValue:c,getValues:o,handleSubmit:d,onSubmit:v,errors:k,control:y,clearErrors:D}=e;const[A,C]=(0,s.useState)(new Date),[w,I]=(0,s.useState)(new Date),[F,S]=(0,s.useState)(new Date),[E,V]=(0,s.useState)(!1),[L,B]=(0,s.useState)(null),[T,R]=(0,s.useState)(!1),[U,X]=(0,s.useState)(null),[H,Z]=(0,s.useState)(null),[P,K]=(0,s.useState)(),[O,z]=(0,s.useState)([]),Y=((0,m.Zp)(),(0,m.zy)()),J=e=>{B(e.target.value),c("category",e.target.value)},W=e=>{X(e.target.value),c("jobAllocation",e.target.value)},_={control:e=>({...e,padding:".25rem 0 "})},[q,G]=(0,s.useState)(!1),{t:M}=(0,u.Bd)(),{id:Q}=(0,m.g)();return(0,s.useEffect)((()=>{if(Q){const e=Y.state[0];z(e)}}),[Q]),(0,s.useEffect)((()=>{if(Q&&null!==O&&void 0!==O&&O.fromDate&&null!==O&&void 0!==O&&O.toDate&&null!==O&&void 0!==O&&O.expenseDate){c("branch",null===O||void 0===O?void 0:O.branch),c("type",null===O||void 0===O?void 0:O.type),c("amount",null===O||void 0===O?void 0:O.amount),c("referenceNumber",null===O||void 0===O?void 0:O.referenceNumber),c("odometer",null===O||void 0===O?void 0:O.odometer),c("workHour",null===O||void 0===O?void 0:O.workHour);const e=new Date(null===O||void 0===O?void 0:O.fromDate);c("fromDate",e);const l=new Date(null===O||void 0===O?void 0:O.toDate);c("toDate",l);const a=new Date(null===O||void 0===O?void 0:O.expenseDate);c("expenseDate",a)}}),[O,Q]),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"p-4",children:[(0,f.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,f.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,f.jsxs)("label",{className:"form-label",children:[M("branchId"),(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(r.xI,{name:"branch",control:y,render:e=>{let{field:{onChange:l,value:a,name:s,ref:n}}=e;return(0,f.jsx)(j.A,{onChange:e=>{c("branch",e.value)},value:a,customStyles:_,ref:n,name:s})}}),!o("branch")&&(0,f.jsx)(p.A,{errorName:k.branch})]}),(0,f.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,f.jsxs)("label",{className:"form-label",children:[M("category"),(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,f.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,f.jsx)("input",{type:"radio",className:"form-check-input",value:"VARIABLE",checked:"VARIABLE"===L,onChange:J}),(0,f.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:M("variable")})]}),(0,f.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,f.jsx)("input",{type:"radio",className:"form-check-input",value:"FIX",checked:"FIX"===L,onChange:J}),(0,f.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:M("FIX")})]})]}),!o("category")&&(0,f.jsx)(p.A,{errorName:k.category})]}),(0,f.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,f.jsx)("label",{className:"form-label",children:M("considerJob")}),(0,f.jsx)("div",{className:"".concat("VARIABLE"!==L?"form-check custom-checkbox mb-3 pe-none":"form-check custom-checkbox mb-3"),children:(0,f.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox1",onClick:()=>R(!T)})})]}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,f.jsx)("label",{className:"form-label",children:M("jobAllocation")}),(0,f.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,f.jsxs)("div",{className:"".concat(T?"form-check custom-checkbox form-check-inline":"form-check custom-checkbox form-check-inline pe-none"),children:[(0,f.jsx)("input",{type:"radio",className:"form-check-input",value:"inProgress",checked:"inProgress"===U,onChange:W}),(0,f.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:M("inProgress")})]}),(0,f.jsxs)("div",{className:"".concat(T?"form-check custom-checkbox form-check-inline":"form-check custom-checkbox form-check-inline pe-none"),children:[(0,f.jsx)("input",{type:"radio",className:"form-check-input",value:"completed",checked:"completed"===U,onChange:W}),(0,f.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:M("completed")})]})]})]}),(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,f.jsx)("label",{className:"form-label",children:M("completedTill")}),(0,f.jsxs)("div",{className:"".concat("completed"!==U?"d-flex align-items-center pe-none":"fd-flex align-items-center"),children:[(0,f.jsx)(r.xI,{name:"startDate",control:y,render:e=>{let{value:l,name:a}=e;return(0,f.jsx)(x(),{selected:o("startDate")||new Date,className:"form-control",onChange:e=>c("startDate",e)})}}),(0,f.jsx)("span",{className:"mx-2",children:M("to")}),(0,f.jsx)(r.xI,{name:"endDate",control:y,render:e=>{let{value:l,name:a}=e;return(0,f.jsx)(x(),{selected:o("endDate")||new Date,className:"form-control",onChange:e=>c("endDate",e)})}})]})]})}),(0,f.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,f.jsx)("label",{className:"form-label",children:M("job")}),(0,f.jsx)(r.xI,{name:"job",control:y,render:e=>{let{field:{onChange:l,value:a,name:s,ref:n}}=e;return(0,f.jsx)(h.Ay,{onChange:e=>c("job",e.value),ref:n,name:s,styles:_})}})]})]}),(0,f.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,f.jsxs)("label",{className:"form-label",children:[M("type"),(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(r.xI,{name:"type",control:y,render:e=>{let{field:{onChange:l,value:a,name:s,ref:n}}=e;return(0,f.jsx)(h.Ay,{onChange:e=>{K(e.value),c("type",e.value)},options:N.r5,ref:n,name:s,styles:_})}}),!o("type")&&(0,f.jsx)(p.A,{errorName:k.type})]}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"".concat("FIX"!==L?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,f.jsxs)("label",{className:"form-label",children:[M("fromDate")," ",(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(r.xI,{name:"fromDate",control:y,render:e=>{let{value:l,name:a}=e;return console.log({value:l}),(0,f.jsx)(x(),{selected:o("fromDate")||new Date,className:"form-control",onChange:e=>{c("fromDate",e)}})}}),!o("fromDate")&&(0,f.jsx)(p.A,{errorName:k.fromDate})]}),(0,f.jsxs)("div",{className:"".concat("FIX"!==L?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,f.jsxs)("label",{className:"form-label",children:[M("toDate")," ",(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(r.xI,{name:"toDate",control:y,render:e=>{let{value:l,name:a}=e;return(0,f.jsx)(x(),{selected:o("toDate")||new Date,className:"form-control",onChange:e=>{K(e),c("toDate",e)}})}}),!o("toDate")&&(0,f.jsx)(p.A,{errorName:k.toDate})]})]}),(0,f.jsxs)("div",{className:"".concat("FIX"!==L?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,f.jsxs)("label",{className:"form-label",children:[M("expenseDate")," ",(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(r.xI,{name:"expenseDate",control:y,render:e=>{let{value:l,name:a}=e;return(0,f.jsx)(x(),{selected:o("expenseDate")||new Date,className:"form-control",onChange:e=>c("expenseDate",e)})}}),!o("expenseDate")&&(0,f.jsx)(p.A,{errorName:k.expenseDate})]}),(0,f.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,f.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[M("amount")," ",(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(b.A,{type:"number",register:t,label:"Amount",name:"amount",placeholder:""}),(0,f.jsx)(p.A,{errorName:k.amount})]}),(0,f.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,f.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[M("referenceNumber")," ",(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(b.A,{type:"number",register:t,label:"Reference Number",name:"referenceNumber",placeholder:""}),(0,f.jsx)(p.A,{errorName:k.referenceNumber})]}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"".concat("VARIABLE"!==L?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,f.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:M("odometer")}),(0,f.jsx)(b.A,{type:"number",register:t,label:"Odometer",name:"odometer",placeholder:""})]}),(0,f.jsxs)("div",{className:"".concat("VARIABLE"!==L?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,f.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:M("workHour")}),(0,f.jsx)(r.xI,{name:"workHour",control:y,render:e=>{let{value:l,name:a}=e;return(0,f.jsx)(x(),{selected:w,showTimeSelect:!0,showTimeSelectOnly:!0,dateFormat:"h:mm aa",timeIntervals:15,className:"form-control customDateHeight",onChange:e=>I(e),value:l})}})]})]}),(0,f.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,f.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:M("billUpload")}),(0,f.jsx)(g.A,{setValue:c,register:t,label:"bill",name:"bill",getValue:o,setLoading:G,loading:q}),q&&(0,f.jsx)("small",{children:"Uploading..."})]}),(0,f.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,f.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:M("description")}),(0,f.jsx)(b.A,{type:"textarea",register:t,label:"Description",name:"description",placeholder:""})]})]}),(0,f.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:[(0,f.jsx)("button",{type:"submit",onClick:()=>{d(v)},className:"btn btn-primary me-1",children:Q?"Update":"Submit"}),(0,f.jsx)(i.N_,{to:"#",onClick:()=>V(!1),className:"btn btn-danger light ms-1",children:"Cancel"})]})]})})};var k=a(9866),y=a(79826),D=a(42457);const A=()=>{const[e,l]=(0,s.useState)(0),a=["Expense"],i=[v],{t:d}=(0,u.Bd)(),{id:x}=(0,m.g)(),{register:h,formState:{errors:b},setValue:j,getValues:p,control:N,handleSubmit:g}=(a.length,(0,r.mN)({resolver:(0,c.t)(o.gZ)})),A=(0,m.Zp)();console.log(b,"ds:-",p("fromDate"));const C=async e=>{if(x)try{0===e.bill.length&&delete e.bill,0===e.file.length&&delete e.file,await(0,y.eY)(x,e),(0,D.V)("Expense Updated!"),A("/settings/expense")}catch(l){console.log(l),(0,D.U)("Some error occured !!")}else try{0===e.bill.length&&delete e.bill,await(0,y.ZN)(e),(0,D.V)(d("New Expense Created")),A("/settings/expense")}catch(a){console.log(a),(0,D.U)("Some error occured !!")}};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(k.A,{mainTitle:d("expense"),pageTitle:d(x?"edit":"create"),parentTitle:d("expense")}),(0,f.jsx)("div",{className:"m-2 p-2",children:(0,f.jsx)(r.Op,{children:(0,f.jsx)("form",{onSubmit:g(C),children:(0,f.jsx)("div",{className:"default-tab",children:(0,f.jsxs)(n.A.Container,{defaultActiveKey:a[0].toLowerCase(),children:[(0,f.jsx)(t.A,{as:"ul",className:"nav-tabs",children:a.map(((a,s)=>(0,f.jsx)(t.A.Item,{as:"li",children:(0,f.jsx)(t.A.Link,{style:{padding:".5rem 2rem"},eventKey:a.toLowerCase(),active:s===e,onClick:()=>l(s),children:a})},s)))}),(0,f.jsx)(n.A.Content,{className:"pt-4",children:a.map(((l,s)=>{const t=i[s];return(0,f.jsx)(n.A.Pane,{eventKey:l.toLowerCase(),active:s===e,children:(0,f.jsx)(t,{data:a,control:N,setValue:j,register:h,getValues:p,errors:b,handleSubmit:g,onSubmit:C})},s)}))})]})})})})})]})}},79826:(e,l,a)=>{a.d(l,{Wz:()=>c,ZN:()=>t,ck:()=>n,eY:()=>r});var s=a(77154);(0,a(88472).A)();const n=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const{data:l}=await s.A.get("/expenses?page=".concat(e,"&limit=",10));return console.log(l.data.data,"ko:-"),{data:l.data.data,totalLength:l.data.totalCount}},t=async e=>s.A.post("/expenses",e),r=async(e,l)=>s.A.patch("/expenses/".concat(e),l),c=async e=>s.A.delete("/expenses/".concat(e))}}]);
//# sourceMappingURL=6411.ed3692a6.chunk.js.map