"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[1981],{53358:(e,s,a)=>{a.d(s,{A:()=>x});var n=a(65043),t=a(79942),i=a(33723),c=(a(72213),a(49804)),l=a(6720),r=a(45394),o=a(60184),d=a(31462),m=a(32620),h=a(70579);const p=()=>{const{isTrafficClick:e,setIsTrafficClick:s}=(0,n.useContext)(i.D);return(0,h.jsxs)("div",{className:"panel",children:[(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(r.dVm,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(m.U2u,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",onClick:a=>{a.preventDefault(),s(!e)},children:(0,h.jsx)(o.zmV,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(o.$Fg,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(r._vB,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(r.o9J,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(d.nnb,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(l.uU7,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(c.yzF,{className:"modes_icon"})})]})},x=e=>{let{data:s}=e;const{isTrafficClick:a,setIsTrafficClick:c}=(0,n.useContext)(i.D),l={NODE_ENV:"production",PUBLIC_URL:"/fleet_management_ctrack",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_MAPS_API_KEY,{isLoaded:r}=(0,t.RH)({googleMapsApiKey:"".concat(l)});return(0,h.jsxs)("div",{className:"vehicle_tracking",children:[(0,h.jsx)(p,{}),r?(0,h.jsx)(t.u6,{mapContainerStyle:{width:"100%",height:"80vh"},center:s[0],zoom:13,children:a?(0,h.jsx)(t.vs,{}):null===s||void 0===s?void 0:s.map(((e,s)=>{let{lat:a,lng:n}=e;return(0,h.jsx)(t.X0,{position:{lat:a,lng:n}},s)}))}):(0,h.jsx)("h3",{children:" Loading...."})]})}},36655:(e,s,a)=>{a.r(s),a.d(s,{default:()=>A});var n=a(65043),t=a(9866),i=a(53358),c=a(33723),l=a(44816),r=a(86856),o=a(10457),d=a(14282),m=(a(72213),a(60184)),h=a(31462),p=a(6720),x=a(50423),u=a(47522),j=(a(19980),a(79904)),g=a.n(j),v=a(70579);const f=e=>{const[s,a]=(0,n.useState)([]),[t,i]=(0,n.useState)([]),[c,l]=(0,n.useState)([]);(0,n.useEffect)((()=>{const s=Object.entries(e.vehicles).map((e=>{const s=e[1].map((e=>({label:e.vehicleName,value:e.id})));return{value:e[0],label:e[0],children:s}}));l([...s])}),[e.vehicles]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"checkboxTree",children:(0,v.jsx)(g(),{nodes:c,checked:s,expanded:t,onCheck:e=>{a(e)},onExpand:e=>{i(e)},showNodeIcon:!1,icons:{expandOpen:(0,v.jsx)("i",{class:"fa-solid fa-minus"}),expandClose:(0,v.jsx)("i",{class:"fa-solid fa-plus"}),uncheck:(0,v.jsx)("i",{class:"fa-regular fa-square",style:{fontSize:"16px"}}),check:(0,v.jsx)("i",{class:"fa-solid fa-square-check",style:{fontSize:"16px"}}),halfCheck:(0,v.jsx)("i",{class:"fa-regular fa-square-minus",style:{fontSize:"16px"}})}})}),(0,v.jsx)("div",{className:"text-center  pt-2 ",children:(0,v.jsx)(d.A,{className:" mb-5",variant:"primary btn-md ",type:"submit",onClick:()=>{const a=s.map((e=>JSON.parse(e)));console.log(a),e.handleToggleCardPositionHandler()},children:"Save Selection"})})]})};var N=a(40078);const k=e=>{const s=(0,N.r_)(),{Running:a,Idle:t,Stopped:i,Inactive:c,nodata:l,total:r}=s,[o,d]=(0,n.useState)("All"),[m,h]=(0,n.useState)([]);(0,n.useEffect)((()=>{const e=(0,N.kw)(o);h(e)}),[o]);const p=JSON.parse(localStorage.getItem("userJsonData")).filter((e=>"vehicle"===e.designation)).map((e=>({id:e.id,name:e.vehicleName})));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"vehicle_tracking-object",children:[(0,v.jsxs)("span",{className:"light fs-9 ".concat("Running"===o&&"vehicle_tracking-active"),onClick:()=>d("Running"),children:[(0,v.jsx)("p",{children:a}),(0,v.jsx)("span",{children:"Running"})]}),(0,v.jsxs)("span",{pill:!0,className:"light fs-9 ".concat("Idle"===o&&"vehicle_tracking-active"),onClick:()=>d("Idle"),children:[(0,v.jsx)("p",{children:t}),(0,v.jsx)("span",{children:"Idle"})]}),(0,v.jsxs)("span",{pill:!0,className:"light fs-9 ".concat("Stopped"===o&&"vehicle_tracking-active"),onClick:()=>d("Stopped"),children:[(0,v.jsx)("p",{children:i}),(0,v.jsx)("span",{children:"Stopped"})]}),(0,v.jsxs)("span",{pill:!0,className:"light fs-9 ".concat("Inactive"===o&&"vehicle_tracking-active"),onClick:()=>d("Inactive"),children:[(0,v.jsx)("p",{children:c}),(0,v.jsx)("span",{children:"InActive"})]}),(0,v.jsxs)("span",{pill:!0,className:"light fs-9 ".concat("NoData"===o&&"vehicle_tracking-active"),onClick:()=>d("NoData"),children:[(0,v.jsx)("p",{children:l}),(0,v.jsx)("span",{children:"NoData"})]}),(0,v.jsxs)("span",{className:"light fs-9 ".concat("All"===o&&"vehicle_tracking-active"),onClick:()=>d("All"),children:[(0,v.jsx)("p",{children:r}),(0,v.jsx)("span",{children:"Total"})]})]}),(0,v.jsx)("div",{className:"d-flex mt-4 mb-4",children:(0,v.jsx)(u.ReactSearchAutocomplete,{items:p,className:"w-100",styling:{height:"30px",marginRight:"10px",fontSize:"12px",color:"#4a4646"},onSearch:e=>{if(""===e){const e=(0,N.kw)(o);h(e)}},onSelect:e=>{const s=(0,N.kw)(o);console.log(s);const a=Object.entries(s).filter((s=>s[1].filter((s=>s.id==e.id)).length>0)).reduce(((s,a)=>{let[n,t]=a;return t.map((a=>{a.vehicleName===e.name&&(s[n]=[a])})),s}),{});h(a)}})}),(0,v.jsx)(f,{vehicles:m,handleToggleCardPositionHandler:e.handleToggleCardPosition})]})},S=e=>{const[s,a]=(0,n.useState)("All"),[t,i]=(0,n.useState)([]),[c,l]=(0,n.useState)([]),[r,m]=(0,n.useState)([]),[h,p]=(0,n.useState)(!1),[x,j]=(0,n.useState)(!1),g=JSON.parse(localStorage.getItem("userJsonData")),[f,N]=(0,n.useState)(g.filter((e=>"company"===e.role))),[k,S]=(0,n.useState)(g.filter((e=>"Driver"===e.designation))),b=k.filter((e=>"Allocated"===e.activityStatus)),y=k.filter((e=>"Not Allocated"===e.activityStatus)),C=k.length,A=e=>{console.log(t),i((s=>{const a=[...s];return a[e]=!a[e],a}))};(0,n.useEffect)((()=>{if("All"!==s){if(N(g.filter((e=>"company"===e.role))),p(!0),"Allocated"===s){const e=b.map((e=>e.parentCompany)).filter(((e,s,a)=>a.indexOf(e)===s));N(f.filter((s=>e.some((e=>e===s.userName)))))}if("Not Allocated"===s){const e=y.map((e=>e.parentCompany)).filter(((e,s,a)=>a.indexOf(e)===s));N(f.filter((s=>e.some((e=>e===s.userName)))))}}else p(!1)}),[s]);const _=g.filter((e=>"Driver"===e.designation)).map((e=>({id:e.id,name:e.firstName+" "+e.lastName})));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"px-2 driver_tracking-object",children:[(0,v.jsxs)("span",{bg:"",pill:!0,className:"light fs-9 ".concat("Allocated"===s?"vehicle_tracking-active":x&&"pe-none"),onClick:()=>a("Allocated"),children:[(0,v.jsx)("p",{children:b.length}),(0,v.jsx)("span",{children:"Allocated"})]}),(0,v.jsxs)("span",{bg:"",pill:!0,className:"light fs-9 ".concat("Not Allocated"===s?"vehicle_tracking-active":x&&"pe-none"),onClick:()=>a("Not Allocated"),children:[(0,v.jsx)("p",{children:y.length}),(0,v.jsx)("span",{children:"Not Allocated"})]}),(0,v.jsxs)("span",{bg:"",pill:!0,className:"light fs-9 ".concat("Total"===s?"vehicle_tracking-active":x&&"pe-none"),onClick:()=>a("Total"),children:[(0,v.jsx)("p",{children:C}),(0,v.jsx)("span",{children:"Total"})]})]}),(0,v.jsx)("div",{className:"d-flex mt-4 mb-4",children:(0,v.jsx)(u.ReactSearchAutocomplete,{items:_,className:"w-100",styling:{position:"absolute",zIndex:999},onSearch:(e,s)=>{a("All"),j(!1),p(!1),S(g.filter((e=>"Driver"===e.designation))),N(g.filter((e=>"company"===e.role)))},onSelect:e=>{a("All"),p(!0),j(!0);var s=g.filter((s=>"Driver"===s.designation&&s.id===e.id)),n=f.filter((e=>e.userName===s[0].parentCompany));S(s),N(n)}})}),(0,v.jsx)("div",{className:"d-flex flex-column bg-white p-2",style:{border:" 1px solid white",marginTop:".5rem",height:"65vh",overflowY:"scroll"},children:f.map(((e,a)=>{var n=[];return 0===c.length&&f.map((e=>c.push([])&&t.push(!1))),h?"All"===s?n=k:"Allocated"===s?n=b.filter((s=>s.parentCompany===e.userName)):"Not Allocated"===s?n=y.filter((s=>s.parentCompany===e.userName)):"Total"===s&&(n=g.filter((s=>"Driver"===s.designation&&s.parentCompany===e.userName))):n=g.filter((s=>"Driver"===s.designation&&s.parentCompany===e.userName)),(0,v.jsx)(o.A,{className:"accordion accordion-primary",defaultActiveKey:"0",children:(0,v.jsxs)(o.A.Item,{className:"accordion-item",eventKey:"$/{i}",children:[(0,v.jsxs)(o.A.Header,{className:"accordian-header rounded-sm",children:[(0,v.jsx)("div",{className:"form-check custom-checkbox bs_exam_topper_all",style:{marginRight:"10px"},children:(0,v.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox".concat(a),onChange:()=>((e,s,a,n)=>{var i=[...c];t[n]?(i[n]=[],l(i)):a.map((e=>i[n].push(e.id))),console.log(i)})(e.id,0,n,a),onClick:()=>A(a),checked:t[a],required:!0})}),e.userName]}),0===n.length?(0,v.jsx)(o.A.Body,{className:"p-2 text-center fs-4 heading ",children:"No Record Found"}):n.map(((e,s)=>(0,v.jsx)(o.A.Body,{className:"accordian-body",eventKey:"".concat(a),children:(0,v.jsxs)("div",{onClick:()=>{m(r.concat(e.id))},className:"d-flex align-items-center border-bottom heading driver-select-object p-2",children:[(0,v.jsx)("div",{className:"form-check custom-checkbox ms-3 me-3 bs_exam_topper",children:(0,v.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:()=>((e,s)=>{const a=[...c];if(a[s].includes(e)){const n=a[s].indexOf(e);a[s].splice(n,1),2===a[s].length&&A(s)}else a[s].push(e),3===a[s].length&&A(s);console.log(a),l(a)})(e.id,a),checked:c[a].includes(e.id),required:!0})}),(0,v.jsxs)("span",{className:"fs-4 ms-2",children:[e.firstName," ",e.lastName]})]},s)})))]},a)})}))}),(0,v.jsx)("div",{className:"mt-3 text-center",children:(0,v.jsx)(d.A,{className:"w-25 btn-md",variant:"primary btn-md",children:"XLS"})})]})},b=e=>{const{drivers:s}=e.data;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"d-flex mt-2",children:[(0,v.jsxs)("div",{className:"search-driver-tab",children:[(0,v.jsx)("input",{type:"text",className:"form-control-driver-tab"}),(0,v.jsx)(m.KSO,{style:{fontSize:"1.5rem",padding:"2px"}})]}),(0,v.jsx)(p.vVi,{style:{fontSize:"1.5rem",padding:"2px",margin:"0 .3rem"}}),(0,v.jsx)(m.YsJ,{style:{fontSize:"1.5rem",padding:"3px",margin:"0 .3rem"}})]}),(0,v.jsxs)("div",{className:"d-flex mt-2 fs-6 align-items-center",children:[(0,v.jsx)("div",{className:"form-check custom-checkbox",style:{marginRight:"5px"},children:(0,v.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox1",required:!0})}),(0,v.jsx)("div",{className:" bg-white p-2 d-flex justify-content-between",style:{width:"80%"},children:(0,v.jsx)("span",{children:"Company 1"})}),(0,v.jsx)(h.OWu,{style:{fontSize:"2.2rem",padding:"2px",margin:"0 .3rem"}})]}),(0,v.jsx)(o.A,{className:"accordian accordion-solid-bg mt-4",defaultActiveKey:"0",flush:!0,children:(0,v.jsxs)(o.A.Item,{eventKey:"0",children:[(0,v.jsx)(o.A.Header,{children:"All"}),s.map(((e,s)=>(0,v.jsx)(o.A.Body,{className:"p-2",children:(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)("div",{className:"form-check custom-checkbox",style:{marginRight:"5px"},children:(0,v.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox1",required:!0})}),(0,v.jsxs)("div",{className:" bg-white w-100 p-2 d-flex justify-content-between",children:[(0,v.jsx)("span",{children:e.name}),(0,v.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,v.jsx)(x.LzA,{style:{fontSize:"1.5rem",padding:"2px",margin:"0 .3rem",background:"white"}}),(0,v.jsx)(m.uO9,{style:{fontSize:"1.5rem",padding:"2px",margin:"0 .3rem",background:"white"}}),(0,v.jsx)(p.b6i,{style:{fontSize:"1.5rem",padding:"2px",margin:"0 .3rem",background:"white"}})]})]})]})})))]})})]})},y=e=>{let{tabData:s,handleToggleCardPosition:a,isOutside:n}=e;const t={name:"Company1",drivers:[{name:"driver1",timeStamp:"22-02-2024 3:00 PM",status:"running"},{name:"driver2",timeStamp:"22-02-2024 3:00 PM",status:"idle"},{name:"driver3",timeStamp:"22-02-2024 3:00 PM",status:"inactive"},{name:"driver4",timeStamp:"22-02-2024 3:00 PM",status:"running"},{name:"driver5",timeStamp:"22-02-2024 3:00 PM",status:"stopped"},{name:"driver6",timeStamp:"22-02-2024 3:00 PM",status:"stopped"},{name:"driver7",timeStamp:"22-02-2024 3:00 PM"}],allocatedDriver:4,notAllocatedDriver:3,totalDriver:7},i=[k,S,b];return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"default-tab outer-container ".concat(n?"toggleBarInside":"toggleBarOutside"),children:[(0,v.jsx)("button",{onClick:a,className:"driver_tracking_button",children:n?(0,v.jsx)(x.m6W,{}):(0,v.jsx)(x.OQo,{})}),(0,v.jsxs)(l.A.Container,{defaultActiveKey:s[0].name.toLowerCase(),children:[(0,v.jsx)(r.A,{as:"ul",className:"nav-tabs tracking_navTabs",children:s.map(((e,s)=>{const a=e.icon;return(0,v.jsx)(r.A.Item,{as:"li",children:(0,v.jsxs)(r.A.Link,{eventKey:e.name.toLowerCase(),children:[(0,v.jsx)(a,{className:"tab-icon"}),e.name]})},s)}))}),(0,v.jsx)(l.A.Content,{className:"p-2 py-4",style:{background:"#f5f5f5",height:"100vh",overflowY:"auto"},children:s.map(((e,s)=>{const n=i[s];return(0,v.jsx)(l.A.Pane,{eventKey:e.name.toLowerCase(),children:(0,v.jsx)(n,{data:t,handleToggleCardPosition:a})},s)}))})]})]})})};var C=a(60397);const A=()=>{const{currentPosition:e,setCurrentPosition:s}=(0,n.useContext)(c.D),[a,l]=(0,n.useState)(!0),r=[{name:"Object",icon:C.ETQ},{name:"Driver",icon:m.x$1},{name:"Geofence",icon:p.vVi}];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(t.A,{mainTitle:"Vehicle Tracking",pageTitle:"Vehicle Tracking",parentTitle:"Tracking"}),(0,v.jsx)("div",{className:"backdrop ".concat(a?"d-none":"d-block"),onClick:()=>l(!0)}),(0,v.jsx)("div",{className:"p-2",children:(0,v.jsx)(i.A,{data:[{lat:30.7099475,lng:76.6900474},{lat:30.7333,lng:76.7794}]})}),(0,v.jsx)(y,{tabData:r,handleToggleCardPosition:()=>{l(!a)},isOutside:a})]})}}}]);
//# sourceMappingURL=1981.52a09c48.chunk.js.map