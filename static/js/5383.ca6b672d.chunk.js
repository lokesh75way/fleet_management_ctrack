"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[5383],{25383:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var s=a(78109),r=a(32343),n=a(27515),l=a(25255),c=a(32449),i=a(67236),o=a(81310),d=a(47337);const m=e=>{let{onConfirmDelete:t,currentPage:a,itemsPerPage:r,tableData:m,setIsEditTrue:h,isEditTrue:u}=e;const p=(0,i.Zp)(),[x,f]=(0,s.useState)([]),{can:g}=(0,o.A)(),j=g("groups","modify"),y=g("groups","delete");(0,s.useEffect)((()=>{f(m.reverse())}),[m]);const b=(a-1)*r+1;return(0,d.jsx)(d.Fragment,{children:x.map(((e,a)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"products d-flex justify-content-center",children:(0,d.jsx)("h6",{children:b+a})})}),(0,d.jsx)("td",{children:(0,d.jsx)("div",{className:"products d-flex justify-content-center",children:(0,d.jsx)("h6",{children:e.name})})}),(j||y)&&(0,d.jsx)("td",{children:(0,d.jsxs)("span",{className:"d-flex justify-content-center",children:[j&&(0,d.jsx)("span",{className:"cursor-pointer",onClick:()=>((e,t)=>{h(e);const a={isEditTrue:u,setIsEditTrue:h};p(`permission/${t}`,{state:JSON.stringify(a)})})(a,e._id),children:(0,d.jsx)(l.uO9,{style:{color:"green",fontSize:"1.2rem"}})}),y&&(0,d.jsx)(c.A,{className:"cursor-pointer ",onConfirmDelete:()=>t(a,e._id),id:e.id,children:(0,d.jsx)(n.b6i,{style:{color:"red",fontSize:"1.2rem"}})})]})})]},a)))})};var h=a(60306),u=a(34571),p=a(97804),x=a(35651),f=(a(43157),a(98626),a(71980)),g=a(72555);const j=()=>{const{isRtl:e}=(0,s.useContext)(x.D),[t,a]=(0,s.useState)(!1),{t:n}=(0,u.Bd)(),{can:l}=(0,o.A)(),{page:c,nextPage:j,prevPage:y,goToPage:b,setCount:N,totalCount:T}=(0,p.A)();(0,s.useEffect)((()=>{(async e=>{try{a(!0);const t=await(0,h.y)(e);console.log("Received template data:",t),N(t.data.totalCount),w(t.data.data)}catch(t){console.error("Error fetching template data:",t)}finally{a(!1)}})(c)}),[c]);const[v,w]=(0,s.useState)([]),[E,A]=(0,s.useState)(-1),C=(0,i.Zp)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.A,{mainTitle:n("featureTemplates"),pageTitle:n("featureTemplates"),parentTitle:n("home")}),(0,d.jsx)("div",{className:"container-fluid",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"col-xl-12",children:(0,d.jsx)("div",{className:"card",children:(0,d.jsx)("div",{className:"card-body p-0",children:(0,d.jsxs)("div",{className:"table-responsive active-projects style-1 ItemsCheckboxSec shorting",children:[(0,d.jsxs)("div",{className:"tbl-caption d-flex justify-content-between text-wrap align-items-center",children:[(0,d.jsx)("h4",{className:"heading mb-0",children:n("featureTemplates")}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("button",{className:"btn btn-primary btn-sm ms-1","data-bs-toggle":"offcanvas",onClick:()=>{const e={isEditTrue:E,setIsEditTrue:A};C("permission",{state:JSON.stringify(e)})},children:["+ ",n("addNew")]})," ",""]})]}),(0,d.jsxs)("div",{id:"employee-tbl_wrapper",className:"dataTables_wrapper no-footer",children:[!v.length&&t?(0,d.jsx)(g.A,{}):(0,d.jsxs)("table",{id:"empoloyees-tblwrapper",className:"table ItemsCheckboxSec dataTable no-footer mb-0",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"text-center",children:n("serialNumber")}),(0,d.jsx)("th",{className:"text-center",children:n("templateName")}),(l("groups","modify")||l("groups","delete"))&&(0,d.jsx)("th",{className:"text-center",children:n("action")})]})}),(0,d.jsx)("tbody",{children:(0,d.jsx)(m,{isEditTrue:E,setIsEditTrue:A,tableData:v,onConfirmDelete:async(e,t)=>{const a=v.filter(((t,a)=>{if(e!=a)return t}));localStorage.setItem("templateData",JSON.stringify(a)),w(a),await h.A.deleteTemplate(t)},currentPage:c,itemsPerPage:10})})]}),(0,d.jsxs)("div",{className:"d-sm-flex text-center justify-content-between align-items-center",children:[(0,d.jsxs)("div",{className:"dataTables_info",children:[n("showing")," ",10*(c-1)+1," ",n("to")," ",Math.min(10*c,T)," ",n("of")," ",T," ",n("entries")]}),(0,d.jsx)("div",{className:"dataTables_paginate paging_simple_numbers",id:"example2_paginate",children:(0,d.jsx)(f.A,{totalCount:T,itemsPerPage:10,handlePageClick:e=>{let{selected:t}=e;b(t+1)}})})]})]})]})})})})})})]})}},60306:(e,t,a)=>{a.d(t,{A:()=>l,y:()=>n});var s=a(95441),r=a(74763);(0,s.A)();const n=async e=>{try{let t="/feature-template";void 0!==e&&(t+=`?page=${e}&limit=10`);return(await r.A.get(t)).data}catch(t){return console.error("Error fetching templates:",t),{error:"Couldn't fetch User"}}},l={getTemplates:async e=>{try{return(await r.A.get("/feature-template",e)).data}catch(t){throw console.error("Error fetching modules:",t),t}},createTemplate:async e=>{try{return(await r.A.post("/feature-template",e)).data}catch(t){throw console.error("Error fetching modules:",t),t}},listModule:async e=>{try{return(await r.A.get("/modules",e)).data}catch(t){throw console.error("Error fetching modules:",t),t}},udpateTemplate:async e=>{try{return(await r.A.patch("/feature-template",e)).data}catch(t){throw console.error("Error fetching modules:",t),t}},deleteTemplate:async e=>{try{return(await r.A.delete(`/feature-template/${e}`)).data}catch(t){throw console.error("Error fetching modules:",t),t}}}}}]);
//# sourceMappingURL=5383.ca6b672d.chunk.js.map