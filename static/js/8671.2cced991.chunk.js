"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[8671],{40965:(e,s,a)=>{a.d(s,{A:()=>d});var l=a(65043),n=a(14282),o=a(28334),r=a(74805),t=a(89698),i=(a(43),a(70579));const d=e=>{let{getValues:s,register:a,onSubmit:d,handleSubmit:c,errors:m,isFormSubmitting:u}=e;const[p,x]=(0,l.useState)(!1),[h,w]=(0,l.useState)(!1),[j,v]=(0,l.useState)(!1);return(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("div",{className:"row",style:{width:"70%",margin:"auto"},children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"col-xl-6 mb-3 position-relative",children:[(0,i.jsxs)("label",{className:"form-label",children:["Old Password",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsxs)("div",{className:"position-relative",children:[(0,i.jsx)(r.A,{type:p?"text":"password",register:a,name:"oldPassword",label:"Old Password",placeholder:"",defaultValue:s("oldPassword")}),(0,i.jsx)("span",{className:"showPasswordIcon",onClick:()=>{x(!p)},children:p?(0,i.jsx)(t.mI_,{}):(0,i.jsx)(t.ZT8,{})})]}),(0,i.jsx)(o.A,{errorName:m.oldPassword})]}),(0,i.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,i.jsxs)("label",{className:"form-label",children:["New Password",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsxs)("div",{className:"position-relative",children:[(0,i.jsx)(r.A,{type:h?"text":"password",register:a,label:"New Password",name:"newPassword",placeholder:"",defaultValue:s("newPassword")}),(0,i.jsx)("span",{className:"showPasswordIcon",onClick:()=>{w(!h)},children:h?(0,i.jsx)(t.mI_,{}):(0,i.jsx)(t.ZT8,{})})]}),(0,i.jsx)(o.A,{errorName:m.newPassword})]}),(0,i.jsxs)("div",{className:"col-xl-6 mb-3 position-relative",children:[(0,i.jsxs)("label",{className:"form-label",children:["Retype Password",(0,i.jsx)("span",{className:"text-danger",children:"*"})]}),(0,i.jsxs)("div",{className:"position-relative",children:[(0,i.jsx)(r.A,{type:j?"text":"password",register:a,label:"Retype Password",name:"confirmPassword",placeholder:""}),(0,i.jsx)("span",{className:"showPasswordIcon",onClick:()=>{v(!j)},children:j?(0,i.jsx)(t.mI_,{}):(0,i.jsx)(t.ZT8,{})})]}),(0,i.jsx)(o.A,{errorName:m.confirmPassword})]})]})}),(0,i.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,i.jsxs)(n.A,{type:"submit",disabled:u,onClick:c(d),style:{width:"10%"},children:[" ","Submit"]})})]})}},48671:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var l=a(65043),n=a(44816),o=a(86856),r=a(24858),t=(a(9531),a(18403)),i=a(73216),d=a(74117),c=a(63248),m=a(28261),u=a(47097),p=a(40399),x=a(127),h=a(70228),w=a(42457),j=a(40965),v=a(8782),g=a(272),b=a(87460),y=a(15395),f=a(70579);const N=()=>{var e,s;const{t:a}=(0,d.Bd)(),N=(0,i.Zp)(),{id:P}=(0,i.g)();let A=[a(P?"editCompany":"newCompany"),a("changePassword")],C=[x.A,j.A];const[S,I]=(0,l.useState)(0),F=(0,c.jE)();P||(A=[a("newCompany")],C=[x.A]);const{data:E,isError:V,isLoading:k}=(0,m.I)({queryKey:["company",P],queryFn:()=>(0,v.EG)(P),enabled:!!P,staleTime:1/0});(0,l.useEffect)((()=>{V&&P&&((0,w.U)("Not able to fetch company data"),N("/not-found"))}),[V&&P]);const T=(0,l.useMemo)((()=>{var e,s;return{...E,...null===E||void 0===E?void 0:E.companyId,businessGroupId:null===E||void 0===E?void 0:E.businessGroupId,logo:null!==(e=null===E||void 0===E||null===(s=E.companyDetails)||void 0===s?void 0:s.logo)&&void 0!==e?e:null,password:""}}),[E]),{register:L,formState:{errors:G},setValue:K,getValues:O,control:U,handleSubmit:Z}=(0,r.mN)({defaultValues:{businessGroupId:"",userInfo:[{name:"",designation:"",mobileNumber:null,email:""}],timeFormat:null===(e=b.lD[1])||void 0===e?void 0:e.value,dateFormat:null===(s=b.wJ[1])||void 0===s?void 0:s.value},resolver:(0,t.t)(1===S?h.Mw:(0,h.QB)(P)),values:T}),_=e=>(0,w.U)((0,g.SU)(e)),{mutate:Q,isPending:q}=(0,u.n)({mutationFn:e=>{let{data:s,id:a}=e;return(0,v.OG)(a,s)},onSuccess:()=>{(0,w.V)("Company Updated Successfully"),F.invalidateQueries(["companies"]),N("/company")},onError:_}),{mutate:B,isPending:D}=(0,u.n)({mutationFn:v.P0,onSuccess:()=>{(0,w.V)("New Company Created"),F.invalidateQueries(["companies"]),N("/company")},onError:_}),{mutate:M,isPending:R}=(0,u.n)({mutationFn:v.ec,onSuccess:()=>{(0,w.V)("Password has been changed"),N("/company")},onError:_}),J=async e=>{if(0===S)null!=e.logo&&0!==e.logo.length||delete e.logo,e.file&&0===e.file.length&&delete e.file,P?Q({data:e,id:P}):B(e);else if(1===S){const s={password:e.newPassword,oldPassword:e.oldPassword,confirmPassword:e.confirmPassword,_id:P};M(s)}};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.A,{mainTitle:a("company"),pageTitle:a(P?"edit":"create"),parentTitle:a("company")}),(0,f.jsx)("div",{className:"m-2 p-2",children:(0,f.jsx)(r.Op,{children:(0,f.jsx)("form",{onSubmit:Z(J),children:(0,f.jsx)("div",{className:"default-tab",children:(0,f.jsxs)(n.A.Container,{defaultActiveKey:A[0].toLowerCase(),children:[(0,f.jsx)(o.A,{as:"ul",className:"nav-tabs",children:A.map(((e,s)=>(0,f.jsx)(o.A.Item,{as:"li",children:(0,f.jsx)(o.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:s===S,onClick:()=>I(s),children:e})},s)))}),(0,f.jsx)(n.A.Content,{className:"pt-4",children:k?(0,f.jsx)(y.A,{height:500}):A.map(((e,s)=>{const a=C[s];return(0,f.jsx)(n.A.Pane,{eventKey:e.toLowerCase(),active:s===S,children:(0,f.jsx)(a,{data:A,control:U,setValue:K,register:L,getValues:O,errors:G,handleSubmit:Z,onSubmit:J,isFormSubmitting:D||q||R})},s)}))})]})})})})})]})}}}]);
//# sourceMappingURL=8671.2cced991.chunk.js.map