"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[9807],{39807:(e,a,s)=>{s.r(a),s.d(a,{default:()=>A});var t=s(65043),l=s(35475),n=s(9866),r=s(6720),i=s(60184),c=s(51359),o=s(70579);const d=e=>{let{tableData:a,onConfirmDelete:s,editDrawerOpen:t,currentPage:l,itemsPerPage:n}=e;const d=(l-1)*n+1;return(0,o.jsx)(o.Fragment,{children:a.map(((e,a)=>{var l,n,m,x;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:d+a})}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{className:"products",children:(0,o.jsx)("div",{children:(0,o.jsx)("h6",{children:e.taskName})})})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:e.taskCategory})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:"".concat(null!==(l=null===(n=e.technician)||void 0===n?void 0:n.firstName)&&void 0!==l?l:""," ").concat(null!==(m=null===(x=e.technician)||void 0===x?void 0:x.lastName)&&void 0!==m?m:"")})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:e.serviceLocation})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"text-primary",children:e.reportingTime})}),(0,o.jsx)("td",{children:(0,o.jsxs)("span",{className:"d-flex justify-content-center",children:[(0,o.jsx)("span",{className:"cursor-pointer",onClick:()=>t(null===e||void 0===e?void 0:e._id),children:(0,o.jsx)(i.uO9,{style:{color:"green",fontSize:"1.2rem"}})}),(0,o.jsx)(c.A,{className:"cursor-pointer ",onConfirmDelete:s,id:e._id,children:(0,o.jsx)(r.b6i,{style:{color:"red",fontSize:"1.2rem"}})})]})})]},a)}))})};var m=s(28086),x=s(31899),h=s.n(x),u=(s(9531),s(24858)),p=s(2364),j=s(23764),g=s(69367),b=(s(72213),s(15075)),N=s(74117),v=s(94692),f=s(39343);const y=e=>{let{onChange:a,value:s,groupId:l,customStyles:n,name:r,ref:i,isDisabled:c}=e;const[d,m]=(0,t.useState)([]),[x,h]=(0,t.useState)(s),{page:u}=(0,v.A)();return(0,t.useEffect)((()=>{(async()=>{const{technicians:e}=await(0,f.KZ)(u);console.log({technicians:e});const a=e.map((e=>{var a,s;return{value:null===e||void 0===e?void 0:e._id,label:"".concat(null!==(a=null===e||void 0===e?void 0:e.firstName)&&void 0!==a?a:""," ").concat(null!==(s=null===e||void 0===e?void 0:e.lastName)&&void 0!==s?s:"")}}));m(a)})()}),[]),(0,t.useEffect)((()=>{const e=d.find((e=>e.value===s));h(e)}),[s,d,l]),(0,o.jsx)(p.Ay,{options:d,value:x,onChange:e=>a(e),styles:n,name:r,ref:i,isDisabled:c})},k=(0,t.forwardRef)(((e,a)=>{let{Title:s,handleSubmit:n,editData:r,setEditData:i,control:c,setValue:d,getValues:x,register:v,errors:f,clearErrors:k,onSubmit:C,reset:D}=e;const[T,P]=(0,t.useState)(!1);(0,t.useImperativeHandle)(a,(()=>({showModal(){P(!0)},closeModal(){D(),k(),P(!1)}})));const{t:w}=(0,N.Bd)(),S={control:e=>({...e,padding:".25rem 0 "})};return(0,t.useEffect)((()=>{D({}),k(),T&&r?(D({...r,technician:r.technician._id}),d("description",r.description)):i()}),[T]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(m.A,{show:T,onHide:P,className:"offcanvas-end customeoff",placement:"end",children:[(0,o.jsxs)("div",{className:"offcanvas-header",children:[(0,o.jsx)("h5",{className:"modal-title",id:"#gridSystemModal",children:s}),(0,o.jsx)("button",{type:"button",className:"btn-close",onClick:()=>P(!1),children:(0,o.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,o.jsx)("div",{className:"offcanvas-body",children:(0,o.jsx)("div",{className:"container-fluid",children:(0,o.jsx)(u.Op,{children:(0,o.jsxs)("form",{noValidate:!0,onSubmit:n(C),children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[w("technician")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(u.xI,{name:"technician",control:c,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:t,ref:l}}=e;return(0,o.jsx)(y,{onChange:e=>{d("technician",e.value)},value:s,customStyles:S,ref:l,name:t})}}),!x("technician")&&(0,o.jsx)(j.A,{errorName:f.technician})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[w("taskCategory"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(u.xI,{name:"c",control:c,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:t,ref:l}}=e;return(0,o.jsx)(p.Ay,{onChange:e=>{d("taskCategory",e.value)},options:b.qf,ref:l,name:t,styles:S,value:s,defaultValue:{value:x("taskCategory")?x("taskCategory"):b.qf[0].value,label:x("taskCategory")?x("taskCategory"):b.qf[0].label}})}}),!x("taskCategory")&&(0,o.jsx)(j.A,{errorName:f.taskCategory})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{htmlFor:"exampleFormControlInput2",className:"form-label",children:[w("taskName")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(g.A,{type:"text",register:v,name:"taskName",label:"Task Name",placeholder:""}),(0,o.jsx)(j.A,{errorName:f.taskName})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[w("taskPriority")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(u.xI,{name:"taskPriority",control:c,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:t,ref:l}}=e;return(0,o.jsx)(p.Ay,{onChange:e=>{d("taskPriority",e.value)},options:b.YR,ref:l,name:t,styles:S,defaultValue:{value:x("taskPriority")?x("taskPriority"):b.YR[0].value,label:x("taskPriority")?x("taskPriority"):b.YR[0].label}})}}),!x("taskPriority")&&(0,o.jsx)(j.A,{errorName:f.taskPriority})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsx)("label",{className:"form-label",children:w("contactPersonName")}),(0,o.jsx)(g.A,{type:"text",register:v,name:"contactPersonName",label:"Contact Person Name",placeholder:""})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:w("contactPersonNumber")}),(0,o.jsx)(g.A,{type:"number",register:v,name:"contactPersonNumber",label:"Contact Person Number",placeholder:""}),(0,o.jsx)(j.A,{errorName:f.contactPersonNumber})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[w("serviceLocation"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(g.A,{type:"text",name:"serviceLocation",register:v,label:"Service Location",placeholder:""}),(0,o.jsx)(j.A,{errorName:f.serviceLocation})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3 d-flex flex-column",children:[(0,o.jsxs)("label",{className:"form-label",children:[w("plannedReportingDate")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(u.xI,{name:"plannedReportingDate",control:c,render:e=>{let{value:a,name:s}=e;return(0,o.jsx)(h(),{selected:x("plannedReportingDate")?new Date(x("plannedReportingDate")):new Date,className:"form-control customDateHeight",onChange:e=>d("plannedReportingDate",e)})}}),!x("plannedReportingDate")&&(0,o.jsx)(j.A,{errorName:f.plannedReportingDate})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,o.jsxs)("label",{className:"form-label",children:[w("reportingTime"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(g.A,{type:"time",register:v,name:"reportingTime",label:"Reporting Time",placeholder:""}),(0,o.jsx)(j.A,{errorName:f.reportingTime})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsx)("label",{className:"form-label",children:w("description")}),(0,o.jsx)("div",{className:"mb-3 ",children:(0,o.jsx)(u.xI,{name:"description",control:c,defaultValue:"",render:e=>{let{field:a}=e;return(0,o.jsx)("textarea",{className:"form-txtarea form-control",register:v("description"),name:"description",label:"Description",rows:"8",id:"comment",...a})}})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{type:"submit",onClick:()=>{console.log("clicked here"),n(C)},className:"btn btn-primary me-1 m-1",children:w("submit")}),(0,o.jsx)(l.N_,{to:"#",onClick:()=>P(!1),className:"btn btn-danger light ms-1 m-1",children:w("cancel")})]})]})})})})]})})}));var C=s(18403),D=s(87742),T=s(33723),P=s(42457),w=s(92157),S=s.n(w);const A=e=>{const{t:a}=(0,N.Bd)(),{isRtl:s}=(0,t.useContext)(T.D),[r,i]=(0,t.useState)([]),{page:c,nextPage:m,prevPage:x,goToPage:h,setCount:p,totalCount:j,setPage:g}=(0,v.A)(),[b,y]=(0,t.useState)(),w=async(e,a)=>{try{const{data:a,totalCount:s}=await(0,f.x1)(e,10);i(a),p(s)}catch(s){(0,P.U)("Error in fetching data")}};(0,t.useEffect)((()=>{w(c)}),[c]);const{register:A,formState:{errors:_},setValue:R,getValues:E,control:L,handleSubmit:V,clearErrors:I,reset:F}=(0,u.mN)({resolver:(0,C.t)(D.l2)}),M=(0,t.useRef)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.A,{mainTitle:a("technicianTask"),pageTitle:a("technicianTask"),parentTitle:a("technician")}),(0,o.jsx)("div",{className:"container-fluid",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-xl-12",children:(0,o.jsx)("div",{className:"card",children:(0,o.jsx)("div",{className:"card-body p-0",children:(0,o.jsxs)("div",{className:"table-responsive active-projects style-1 ItemsCheckboxSec shorting",children:[(0,o.jsxs)("div",{className:"tbl-caption d-flex justify-content-between text-wrap align-items-center",children:[(0,o.jsx)("h4",{className:"heading mb-0",children:a("technicianTask")}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(l.N_,{to:"#",className:"btn btn-primary btn-sm ms-1","data-bs-toggle":"offcanvas",onClick:()=>{I(),F(),M.current.showModal()},children:["+ ",a("addTechnicianTask")]})," "]})]}),(0,o.jsxs)("div",{id:"employee-tbl_wrapper",className:"dataTables_wrapper no-footer",children:[(0,o.jsxs)("table",{id:"empoloyees-tblwrapper",className:"table ItemsCheckboxSec dataTable no-footer mb-0",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:a("id")}),(0,o.jsx)("th",{children:a("taskName")}),(0,o.jsx)("th",{children:a("taskCategory")}),(0,o.jsx)("th",{children:a("technicianName")}),(0,o.jsx)("th",{children:a("serviceLocation")}),(0,o.jsx)("th",{children:a("reportingTime")}),(0,o.jsx)("th",{children:a("action")})]})}),(0,o.jsx)("tbody",{children:(0,o.jsx)(d,{tableData:r,onConfirmDelete:async e=>{try{await(0,f.vq)(e);const a=r.filter((a=>a._id!==e));i(a),p(j-1),(0,P.V)("Task Deleted")}catch(a){(0,P.U)("Something Went Wrong")}},editDrawerOpen:e=>{r.map((a=>a._id===e&&y(a))),M.current.showModal()},setEditData:y,currentPage:c,itemsPerPage:10})})]}),(0,o.jsxs)("div",{className:"d-sm-flex text-center justify-content-between align-items-center",children:[(0,o.jsxs)("div",{className:"dataTables_info",children:[a("showing")," ",10*(c-1)+1," ",a("to")," ",Math.min(10*c,j)," ",a("of")," ",j," ",a("entries")]}),(0,o.jsx)("div",{className:"dataTables_paginate paging_simple_numbers",id:"example2_paginate",children:(0,o.jsx)(S(),{previousLabel:(0,o.jsx)("i",{className:"fa-solid fa-angle-left"}),nextLabel:(0,o.jsx)("i",{className:"fa-solid fa-angle-right"}),breakLabel:"...",pageCount:Math.ceil(j/10),marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:e=>{let{selected:a}=e;h(a+1)},containerClassName:"pagination",activeClassName:"active",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link"})})]})]})]})})})})})}),(0,o.jsx)(k,{ref:M,editData:b,control:L,setValue:R,getValues:E,onSubmit:async e=>{try{if(e.plannedReportingDate){const a=new Date(e.plannedReportingDate).toLocaleDateString().split("/"),s=a[2]+"-"+a[1]+"-"+a[0];e.plannedReportingDate=s}e._id&&0!==e._id?(await(0,f.lC)(e,e._id),(0,P.V)("Task Updated Successfully !!"),M.current.closeModal()):(await(0,f.UT)(e),(0,P.V)("Task Created Successfully !!"),M.current.closeModal()),w()}catch(n){var s,t,l;const e=null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.errors;e&&e.length>0?(0,P.U)(e[0].msg):(0,P.U)(a("someErrorOccurred"))}},register:A,errors:_,setEditData:y,handleSubmit:V,clearErrors:I,reset:F,Title:b&&0!==b._id?a("editTask"):a("addTask")})]})}}}]);
//# sourceMappingURL=9807.3c5092d6.chunk.js.map