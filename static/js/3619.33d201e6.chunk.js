"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[3619],{45794:(e,a,s)=>{s.d(a,{A:()=>o});var r=s(65043),l=s(80228),t=s(51403),n=s(3778),c=s(70579);function o(e){let{geojson:a,setGeojson:s}=e;const o=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e;0===(null===(e=o.current)||void 0===e?void 0:e.getLayers().length)&&a&&l.geoJSON(a).eachLayer((e=>{var a,s,r;(e instanceof l.Polyline||e instanceof l.Polygon||e instanceof l.Marker)&&(null!==e&&void 0!==e&&null!==(a=e.feature)&&void 0!==a&&a.properties.radius&&o.current?new l.Circle(e.feature.geometry.coordinates.slice().reverse(),{radius:null===(s=e.feature)||void 0===s?void 0:s.properties.radius}).addTo(o.current):null===(r=o.current)||void 0===r||r.addLayer(e))}))}),[a]);const i=()=>{var e;const a=null===(e=o.current)||void 0===e?void 0:e.toGeoJSON();console.log(a),"FeatureCollection"===(null===a||void 0===a?void 0:a.type)&&s(a)};return(0,c.jsx)(t.m,{ref:o,children:(0,c.jsx)(n.M,{position:"topright",onEdited:i,onCreated:i,onDeleted:i,draw:{rectangle:!1,circle:!0,polyline:!0,polygon:!0,marker:!0,circlemarker:!1}})})}},23619:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var r=s(65043),l=(s(16295),s(2364)),t=(s(84391),s(99419)),n=s(12023),c=s(76036),o=s(13318),i=s(62559),d=s(45794),m=s(70579);const u=()=>{const[e,a]=r.useState({type:"FeatureCollection",features:[]});return(0,m.jsx)("div",{style:{display:"flex",height:"85vh"},children:(0,m.jsx)("div",{style:{width:"100%"},children:(0,m.jsxs)(t.W,{center:[25.2233,55.2869],zoom:14,zoomControl:!1,children:[(0,m.jsx)(n.e,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),(0,m.jsxs)(c.p,{styles:{background:"red"},position:[25.2233,55.2869],children:[(0,m.jsx)(o.z,{children:"Dubai Trade Center"}),(0,m.jsx)(i.m,{children:"Dubai Trade Center"})]}),(0,m.jsx)(d.A,{geojson:e,setGeojson:a})]})})})};var x=s(69367),h=s(24858),f=s(18403),g=s(87742),p=s(15075),j=s(14282),b=s(23764),N=s(42457),v=s(73216);const y=()=>{const[e,a]=(0,r.useState)(null),[s,t]=(0,r.useState)(),n=(0,v.Zp)(),{id:c}=(0,v.g)(),o={control:e=>({...e,padding:".25rem 0 "})},i={lat:-3.745,lng:-38.523},[d,y]=(0,r.useState)(null),{register:C,formState:{errors:S},setValue:k,getValues:A,control:D,handleSubmit:F}=(r.useCallback((function(e){const a=new window.google.maps.LatLngBounds(i);e.fitBounds(a),y(e)}),[i]),r.useCallback((function(e){y(null)}),[]),(0,h.mN)({resolver:(0,f.t)(g._8)})),w=e=>{a(e.target.value),k("geofenceAccess",e.target.value)},V=e=>{try{if(c){const a=JSON.parse(localStorage.getItem("geofenceData")),s=a.findIndex((e=>e.id==c));return void(-1!==s&&(a[s]={...e,id:c},localStorage.setItem("geofenceData",JSON.stringify(a)),(0,N.V)("Geofence Updated!"),n("/vehicle-tracking")))}{e={...e};const a=JSON.parse(localStorage.getItem("geofenceData"));return e.id=a.length+1,a.push(e),localStorage.setItem("geofenceData",JSON.stringify(a)),(0,N.V)("New Geofence Created!"),void n("/vehicle-tracking")}}catch(a){(0,N.U)("Some error occured !!")}},O=JSON.parse(localStorage.getItem("geofenceData")).filter((e=>e.id==c)),[I,L]=(0,r.useState)(O);return(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{padding:"10px",backgroundColor:"#FFFDFD"},children:(0,m.jsx)("h2",{style:{fontSize:"20px"},children:"Geofence Detail"})}),(0,m.jsxs)("div",{className:"",style:{display:"flex",height:"88vh"},children:[(0,m.jsx)("div",{className:"col-md-3",style:{padding:"15px",boxShadow:"9px 0 4px rgba(0, 0, 0, 0.1)",backgroundColor:"#fff",overflow:"auto"},children:(0,m.jsx)(h.Op,{children:(0,m.jsxs)("form",{onSubmit:F(V),children:[(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsxs)("label",{htmlFor:"company",className:"form-label",children:["Company:",(0,m.jsx)("span",{className:"text-danger",children:"*"})]}),(0,m.jsx)(x.A,{type:"text",name:"company",register:C,label:"Company",defaultValue:I[0]?I[0].company:""}),(0,m.jsx)(b.A,{errorName:S.company})]}),(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsxs)("label",{htmlFor:"company",className:"form-label",children:["Name:",(0,m.jsx)("span",{className:"text-danger",children:"*"})]}),(0,m.jsx)(x.A,{type:"text",label:"Name",register:C,name:"name",defaultValue:I[0]?I[0].name:""}),(0,m.jsx)(b.A,{errorName:S.name})]}),(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsxs)("label",{className:"form-label",children:["Category:",(0,m.jsx)("span",{className:"text-danger",children:"*"})]}),(0,m.jsx)(h.xI,{name:"category",control:D,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:r,ref:n}}=e;return(0,m.jsx)(l.Ay,{onChange:e=>{t(e.value),k("category",e.value)},options:p.rF,ref:n,name:r,styles:o,defaultValue:I[0]?I[0].name:p.rF[0]})}}),!A("category")&&(0,m.jsx)(b.A,{errorName:S.category})]}),(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsxs)("label",{className:"form-label",children:["Geofence Access:",(0,m.jsx)("span",{className:"text-danger",children:"*"})]}),(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"5rem"},children:[(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{type:"radio",className:"form-check-input",value:"public",checked:"public"===e,onChange:w}),(0,m.jsx)("label",{className:"form-check-label",children:"Public"})]}),(0,m.jsxs)("div",{className:"form-check",children:[(0,m.jsx)("input",{type:"radio",className:"form-check-input",value:"private",checked:"private"===e,onChange:w}),(0,m.jsx)("label",{className:"form-check-label",children:"Private"})]})]}),!A("geofenceAccess")&&(0,m.jsx)(b.A,{errorName:S.geofenceAccess})]}),(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsxs)("label",{htmlFor:"contactNumber",className:"form-label",children:["Contact Number:",(0,m.jsx)("span",{className:"text-danger",children:"*"})]}),(0,m.jsx)(x.A,{type:"number",register:C,label:"Contact Number",name:"contactNumber",defaultValue:I[0]?I[0].contactNumber:""}),(0,m.jsx)(b.A,{errorName:S.contactNumber})]}),(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{htmlFor:"address",className:"form-label",children:"Address:"}),(0,m.jsx)("textarea",{className:"form-control",...C("address"),label:"Address",name:"address",defaultValue:I[0]?I[0].address:""})]}),(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsxs)("label",{className:"form-label",children:["Tolerance:",(0,m.jsx)("span",{className:"text-danger",children:"*"})]}),(0,m.jsx)(h.xI,{name:"tolerance",control:D,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:r,ref:n}}=e;return(0,m.jsx)(l.Ay,{onChange:e=>{t(e.value),k("tolerance",e.value)},options:p.gY,ref:n,name:r,styles:o,defaultValue:I[0]?I[0].name:p.gY[0]})}}),!A("contactNunber")&&(0,m.jsx)(b.A,{errorName:S.contactNumber})]}),(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("label",{className:"form-label",children:"Description:"}),(0,m.jsx)("textarea",{className:"form-control",...C("description"),name:"description",label:"Description",defaultValue:I[0]?I[0].description:""})]}),(0,m.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,m.jsxs)(j.A,{type:"submit",onClick:F(V),children:[" ","Next"]})})]})})}),(0,m.jsx)("div",{className:"col-md-9",style:{paddingLeft:"15px"},children:(0,m.jsx)(u,{})})]})]})}}}]);
//# sourceMappingURL=3619.33d201e6.chunk.js.map