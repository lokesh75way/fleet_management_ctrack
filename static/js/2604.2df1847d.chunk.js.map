{"version":3,"file":"static/js/2604.2df1847d.chunk.js","mappings":"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","sources":["jsx/components/Tables/SubUserTable.jsx","jsx/pages/SubUser.jsx"],"sourcesContent":["import React from \"react\";\nimport { MdDelete } from \"react-icons/md\";\nimport { FaEdit } from \"react-icons/fa\";\nimport DeleteModal from '../Modal/DeleteModal';\nimport { IMAGES } from \"../../constant/theme\";\nimport { usePermissions } from \"../../../context/PermissionContext\";\n\nconst SubUserTable = ({tableData,currentPage,itemsPerPage, onConfirmDelete, editDrawerOpen}) => {\n  const {can} = usePermissions()\n  const editPermission = can('subUser','modify')\n  const deletePermission = can('subUser','delete')\n\n  const startIndex = (currentPage - 1) * itemsPerPage + 1;\n\n  return (\n    <>\n      {tableData.map((item, index) => (\n        <tr key={index}>\n          <td>\n            <span>{startIndex + index}</span>\n          </td>\n          <td>\n            <span className=\"text-primary\">{item.userName}</span>\n          </td>\n\n          <td>\n            <span>{item.mobileNumber}</span>\n          </td>\n          <td>\n            <span>{item.email}</span>\n          </td>\n          <td>\n            <span>{item.country}</span>\n          </td>\n          {(editPermission || deletePermission) &&<td>\n            <span className=\"d-flex justify-content-center\">\n              { editPermission&&<span\n                className=\"cursor-pointer\"\n                onClick={() => editDrawerOpen(item._id)}\n              >\n                <FaEdit\n                  style={{\n                    color: \"green\",\n                    fontSize: \"1.2rem\",\n                  }}\n                />\n              </span>}\n              {deletePermission && <DeleteModal\n                className=\"cursor-pointer \"\n                onConfirmDelete={onConfirmDelete}\n                id={item._id}\n              >\n                <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n              </DeleteModal>}\n            </span>\n          </td>}\n        </tr>\n      ))}\n    </>\n  );\n};\n\nexport default SubUserTable;\n","import React, { useState, useRef, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport MainPagetitle from \"../layouts/MainPagetitle\";\nimport { useNavigate } from \"react-router-dom\";\nimport SubUserTable from \"../components/Tables/SubUserTable\";\nimport { clsx } from 'clsx';\nimport {useTranslation} from 'react-i18next'\nimport {getUser, deleteUser} from '../../services/api/UserServices'\nimport { useContext } from \"react\";\nimport { ThemeContext } from \"../../context/ThemeContext\";\nimport { notifyError, notifySuccess } from \"../../utils/toast\";\nimport { usePermissions } from \"../../context/PermissionContext\";\nimport useStorage from \"../../hooks/useStorage\";\nimport usePagination from \"../../hooks/usePagination\";\nimport ReactPaginate from \"react-paginate\";\n\n\n  const SubUser = () => {\n\n    const {t} = useTranslation();\n    const {isRtl} = useContext(ThemeContext);\n    const {can, setUserPermission} = usePermissions()\n    const arrowleft = clsx({'fa-solid fa-angle-right':isRtl, 'fa-solid fa-angle-left':!isRtl})\n    const arrowright = clsx({'fa-solid fa-angle-left':isRtl, 'fa-solid fa-angle-right':!isRtl})\n    //call get api from userservice\n    const [isLoading, setIsLoading] = useState(true);\n    const { page, nextPage, prevPage, goToPage, setCount, totalCount } =\n    usePagination();\n\n    const fetchUser = async () => {\n      setIsLoading(true)\n      const {data,count } = await getUser(page);\n      const permissions = JSON.parse(localStorage.getItem('permission'));\n      setUserPermission(permissions?.[0]?.permission);\n      setTableData(data)\n      setCount(count)\n      setIsLoading(false);\n    };\n    useEffect(() => {\n      fetchUser(page);\n    }, [page]);\n    \n  const navigate = useNavigate();\n  const {checkRole,checkUserName} = useStorage()\n  const role = checkRole()\n  const userName = checkUserName()\n  const userData = JSON.parse(localStorage.getItem('userJsonData'))\n  const currUser = JSON.parse(localStorage.getItem('userDetails'))\n  var UserData;\n  if(checkRole() === 'COMPANY'){\n    UserData = userData.filter((item)=> (item.role === 'USER' && item.type === 'STAFF' && item.companyId === currUser.user.companyId))\n  }\n\n  else if(checkRole() === 'BUSINESS_GROUP'){\n    UserData = userData.filter((item)=> (item.role === 'user' && item.type === 'businessgroup' && item.parent === userName))\n  } \n  else if(checkRole() === 'SUPER_ADMIN') UserData = userData.filter((item)=> item.role === 'USER' && item.type === 'STAFF' )\n  else if(checkRole() === \"USER\") {\n    UserData = userData.filter((item) => {\n      // console.log(item, \"iteeem\");\n      return item.role === 'USER' && item.type === 'STAFF' && item.companyId === currUser.user.companyId;\n    });\n  }\n\n  const [tableData, setTableData] = useState([] );\n\n  const onConfirmDelete = async (id) => {\n     await deleteUser(id);\n  };\n\n  const editDrawerOpen = (item) => {\n    navigate(`/subUser/edit/${item}`);\n  };\n\n  const itemsPerPage=10;\n\n  const handlePageClick = ({ selected }) => {\n    goToPage(selected + 1); \n  };\n\n  const startIndex = (page - 1) * itemsPerPage;\n  const slicedData = tableData.slice(startIndex, startIndex + itemsPerPage);\n  return (\n    <>\n      <MainPagetitle mainTitle=\"User\" pageTitle={\"User\"} parentTitle={\"Home\"} />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"table-responsive active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t('users')}</h4>\n                    <div>\n                      {can('subUser','add') && <Link\n                        to={\"/subUser/create\"}\n                        className=\"btn btn-primary btn-sm ms-1\"\n                        data-bs-toggle=\"offcanvas\"\n                        // onClick={()=>subuser.current.showModal()}\n                      >\n                        + {t('addUser')}\n                      </Link>}{\" \"}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    <table\n                      id=\"empoloyees-tblwrapper\"\n                      className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                    >\n                      <thead>\n                        <tr>\n                          <th>{t('id')}</th>\n                          <th>{t('username')}</th>\n                          <th>{t('mobileNumber')}</th>\n                          <th>{t('email')}</th>\n                          <th>{t('location')}</th>\n                          {(can('subUser','modify') || can('subUser','delete')) && <th>{t('action')}</th>}\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <SubUserTable key={tableData} currentPage={page} \n                            itemsPerPage={itemsPerPage}  tableData={tableData} onConfirmDelete={onConfirmDelete} editDrawerOpen={editDrawerOpen} />\n                      </tbody>\n                    </table>\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                        {t(\"showing\")} {(page - 1) * 10 + 1} {t(\"to\")}{\" \"}\n                        {Math.min(page * 10, totalCount)} {t(\"of\")} {totalCount}{\" \"}\n                        {t(\"entries\")}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                       <ReactPaginate\n                            previousLabel={<i className=\"fa-solid fa-angle-left\"></i>}\n                            nextLabel={<i className=\"fa-solid fa-angle-right\"></i>}\n                            breakLabel={\"...\"}\n                            pageCount={Math.ceil(totalCount / itemsPerPage)} // Calculate pageCount based on totalCount and itemsPerPage\n                            marginPagesDisplayed={2}\n                            pageRangeDisplayed={5}\n                            onPageChange={handlePageClick}\n                            containerClassName={\"pagination\"}\n                            activeClassName={\"active\"}\n                            pageClassName=\"page-item\"\n                            pageLinkClassName=\"page-link\"\n                            previousClassName=\"page-item\"\n                            previousLinkClassName=\"page-link\"\n                            nextClassName=\"page-item\"\n                            nextLinkClassName=\"page-link\"\n                          />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default SubUser;\n"],"names":["_ref","tableData","currentPage","itemsPerPage","onConfirmDelete","editDrawerOpen","can","usePermissions","editPermission","deletePermission","startIndex","_jsx","_Fragment","children","map","item","index","_jsxs","className","userName","mobileNumber","email","country","onClick","_id","FaEdit","style","color","fontSize","DeleteModal","id","MdDelete","SubUser","t","useTranslation","isRtl","useContext","ThemeContext","setUserPermission","isLoading","setIsLoading","clsx","useState","page","nextPage","prevPage","goToPage","setCount","totalCount","usePagination","useEffect","async","_permissions$","data","count","getUser","permissions","JSON","parse","localStorage","getItem","permission","setTableData","fetchUser","navigate","useNavigate","checkRole","checkUserName","useStorage","userData","currUser","filter","role","type","companyId","user","parent","slice","MainPagetitle","mainTitle","pageTitle","parentTitle","Link","to","SubUserTable","deleteUser","concat","Math","min","ReactPaginate","previousLabel","nextLabel","breakLabel","pageCount","ceil","marginPagesDisplayed","pageRangeDisplayed","onPageChange","selected","containerClassName","activeClassName","pageClassName","pageLinkClassName","previousClassName","previousLinkClassName","nextClassName","nextLinkClassName"],"sourceRoot":""}