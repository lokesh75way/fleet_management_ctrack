"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[8995],{48995:(e,a,l)=>{l.r(a),l.d(a,{default:()=>g});var t=l(65043),n=l(73216),s=l(35475),r=l(9866),i=l(6720),c=l(60184),o=l(51359),d=(l(71232),l(59167)),h=l(70579);const m=e=>{let{onConfirmDelete:a,params:l,tempValue:t,tempValue2:n,tableData:r,editDrawerOpen:d,setDataLength:m}=e;var u=r;console.log("this is data",u,t,n),"All Companies"!==t&&(u=r.filter((e=>"branch"===e.role&&e.parentCompany===t))),"All Branches"!==n&&(u=r.filter((e=>"branch"===e.role&&e.parentBranch===n))),console.log("this is data after filter",u,t,n);for(var p=[],x=0;x<u.length;x++){const e=u[x].userName;p[x]=u.filter((a=>a.parentBranch===e)).length}return m(u.length),(0,h.jsx)(h.Fragment,{children:u.map(((e,l)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsx)("span",{children:e.id})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{className:"text-primary",children:e.userName})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{children:"none"!==e.parentBranch?e.parentBranch:(0,h.jsx)("span",{className:"ps-4",children:"-"})})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{children:e.parentCompany})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{children:e.parentBusinessGroup})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{children:e.mobileNumber})}),(0,h.jsx)("td",{children:(0,h.jsx)("span",{children:e.city})}),(0,h.jsx)("td",{children:(0,h.jsx)(s.N_,{to:"/branch/bid/".concat(e.id),className:"text-primary badge light border-0 badge-count",children:p[l]})}),(0,h.jsx)("td",{children:(0,h.jsxs)("span",{className:"d-flex justify-content-center",children:[(0,h.jsx)("span",{className:"cursor-pointer",onClick:()=>d(e.id),children:(0,h.jsx)(c.uO9,{style:{color:"green",fontSize:"1.2rem"}})}),(0,h.jsx)(o.A,{className:"cursor-pointer ",onConfirmDelete:a,id:e.id,children:(0,h.jsx)(i.b6i,{style:{color:"red",fontSize:"1.2rem"}})})]})})]},l)))})};var u=l(24858),p=l(2364),x=l(74117),b=l(58387),f=l(33723);const g=()=>{const{isRtl:e}=(0,t.useContext)(f.D),a=(0,b.$)({"fa-solid fa-angle-right":e,"fa-solid fa-angle-left":!e}),l=(0,b.$)({"fa-solid fa-angle-left":e,"fa-solid fa-angle-right":!e}),{t:i}=(0,x.Bd)(),c=(0,n.Zp)(),o=(0,n.g)(),{getAllCompany:g}=(0,d.A)(),[j,N]=(0,t.useState)({value:"All Companies",label:"All Companies"}),[v,y]=(0,t.useState)({value:"All Branches",label:"All Branches"}),[C,S]=(0,t.useState)("All Companies"),[A,B]=(0,t.useState)("All Branches"),[w,D]=(0,t.useState)(document.querySelectorAll("#employee-tbl_wrapper tbody tr")),_={control:e=>({...e,marginRight:"1rem",marginLeft:"1rem",width:"15rem",height:"0.6rem",menuPortal:e=>({...e,zIndex:9999}),menu:e=>({...e,zIndex:9999})})};(0,t.useEffect)((()=>{const e=window.location.pathname;if(e.includes("cid")){const e=JSON.parse(localStorage.getItem("userJsonData")).filter((e=>e.id==o.id))[0].userName;N({value:e,label:e}),S(e),E("parent",e)}if(e.includes("bid")){const e=JSON.parse(localStorage.getItem("userJsonData")).filter((e=>e.id==o.id))[0].userName;y({value:e,label:e}),B(e),E("parent",e)}}),[o.id]);const I=localStorage.getItem("loginDetails-name"),k=localStorage.getItem("role"),{control:T,setValue:E,getValues:J,watch:O}=(0,u.mN)(),L=JSON.parse(localStorage.getItem("userJsonData")).filter((e=>"branch"===e.role)),[V,P]=(0,t.useState)(L),[R,q]=(0,t.useState)(L.length),[z,F]=(0,t.useState)({id:0,reseller:"",contact:0,username:"",status:"",location:"",usergroup:"",branches:0}),G=10,$=(0,t.useRef)(0),[H,M]=(0,t.useState)(0),Z=(e,a)=>{for(var l=0;l<w.length;++l)l>=e&&l<a?w[l].classList.remove("d-none"):w[l].classList.add("d-none")};(0,t.useEffect)((()=>{D(document.querySelectorAll("#employee-tbl_wrapper tbody tr"))}),[H]),0===$.current&&Z(0,G);let K=Array(Math.ceil(w.length/G)).fill().map(((e,a)=>a+1));const Q=e=>{$.current=e,Z($.current*G,($.current+1)*G),M(e)},U=((0,t.useRef)(),(0,t.useRef)(),JSON.parse(localStorage.getItem("userJsonData")));let W=U.filter((e=>"company"===e.role)).map((e=>({label:e.userName,value:e.id}))),X=U.filter((e=>"branch"===e.role)).map((e=>({label:e.userName,value:e.id})));X=[...X,{label:"All Branches",value:"All Branches"}];const[Y,ee]=(0,t.useState)(X);return(0,t.useEffect)((()=>{let e=U.filter((e=>"branch"===e.role&&"All Companies"!==C&&e.parentCompany===C)).map((e=>({label:e.userName,value:e.id})));ee("All Companies"!==C?e:X)}),[C]),W=[...W,{label:"All Companies",value:"All Companies"}],(0,t.useEffect)((()=>{if("admin"!==k)if("businessgroup"===k){const e=L.filter((e=>e.parentBusinessGroup===I));P(e)}else if("company"===k){const e=L.filter((e=>e.parentCompany===I));P(e)}}),[I,k,L]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.A,{mainTitle:"Branch",pageTitle:"Branch",parentTitle:"Home"}),(0,h.jsx)("div",{className:"container-fluid",children:(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col-xl-12",children:(0,h.jsx)("div",{className:"card",children:(0,h.jsx)("div",{className:"card-body p-0",children:(0,h.jsxs)("div",{className:"table-responsive active-projects style-1 ItemsCheckboxSec shorting",children:[(0,h.jsxs)("div",{className:"tbl-caption d-flex justify-content-between text-wrap align-items-center",children:[(0,h.jsx)("h4",{className:"heading mb-0",children:i("branches")}),(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)(u.xI,{name:"parent",control:T,rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:t,ref:n}}=e;return(0,h.jsx)(p.Ay,{onChange:e=>{S(e.label),B("All Branches"),E("parent",e.label),N({value:e.value,label:e.label}),y({value:"All Branches",label:"All Branches"})},ref:n,name:t,menuPortalTarget:document.body,menuPosition:"fixed",styles:_,options:W,value:j})}}),(0,h.jsx)(u.xI,{name:"parent",control:T,rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:t,ref:n}}=e;return(0,h.jsx)(p.Ay,{onChange:e=>{B(e.label),S("All Companies"),E("parentBranch",e.label),y({value:e.value,label:e.label})},ref:n,name:t,menuPortalTarget:document.body,menuPosition:"fixed",styles:_,options:Y,value:v})}}),(0,h.jsxs)(s.N_,{to:"/branch/create",className:"btn btn-primary btn-sm ms-1",style:{paddingBlock:"9px"},"data-bs-toggle":"offcanvas",children:["+ ",i("addBranch")]})," "]})]}),(0,h.jsxs)("div",{id:"employee-tbl_wrapper",className:"dataTables_wrapper no-footer",children:[(0,h.jsxs)("table",{id:"empoloyees-tblwrapper",className:"table ItemsCheckboxSec dataTable no-footer mb-0",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:i("id")}),(0,h.jsx)("th",{children:i("branchName")}),(0,h.jsx)("th",{children:i("parentBranch")}),(0,h.jsx)("th",{children:i("companyName")}),(0,h.jsx)("th",{children:i("businessGroup")}),(0,h.jsx)("th",{children:i("mobileNumber")}),(0,h.jsx)("th",{children:i("location")}),(0,h.jsx)("th",{children:i("childBranches")}),(0,h.jsx)("th",{children:i("action")})]})}),(0,h.jsx)("tbody",{children:(0,h.jsx)(m,{tempValue:C,setDataLength:q,tempValue2:A,editData:z,tableData:V,onConfirmDelete:e=>{const a=V.filter((a=>a.id!==e));P(a);const l=L.filter((a=>a.id!==e));localStorage.setItem("branchData",JSON.stringify(l))},editDrawerOpen:e=>{V.map((a=>a.id===e&&F(a))),c("edit/".concat(e))},setEditData:F})})]}),(0,h.jsxs)("div",{className:"d-sm-flex text-center justify-content-between align-items-center",children:[(0,h.jsxs)("div",{className:"dataTables_info",children:[i("showing")," ",$.current*G+1," ",i("to")," ",R.length>($.current+1)*G?($.current+1)*G:R," ",i("of")," ",R," ",i("entries")]}),(0,h.jsxs)("div",{className:"dataTables_paginate paging_simple_numbers",id:"example2_paginate",children:[(0,h.jsx)(s.N_,{className:"paginate_button previous disabled",to:"/branch",onClick:()=>$.current>0&&Q($.current-1),children:(0,h.jsx)("i",{className:a})}),(0,h.jsx)("span",{children:K.map(((e,a)=>(0,h.jsx)(s.N_,{to:"/branch",className:"paginate_button  ".concat($.current===a?"current":""," "),onClick:()=>Q(a),children:e},a)))}),(0,h.jsx)(s.N_,{className:"paginate_button next",to:"/branch",onClick:()=>$.current+1<K.length&&Q($.current+1),children:(0,h.jsx)("i",{className:l})})]})]})]})]})})})})})})]})}}}]);
//# sourceMappingURL=8995.691e79db.chunk.js.map