"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[2799],{22799:(e,a,l)=>{l.r(a),l.d(a,{default:()=>C});var s=l(65043),r=l(73216),t=l(44816),n=l(86856),o=l(24858),i=(l(9531),l(9866)),c=l(14282),m=l(2364),d=l(23764),u=l(15075),p=l(69367),h=l(13052),b=l(59167),x=(l(72213),l(86151)),f=l(272),N=l(74117),j=l(70579);const g=e=>{let{handleNext:a,register:l,setValue:t,onSubmit:n,handleSubmit:i,getValues:b,errors:g,control:y}=e;const[v,S]=(0,s.useState)({name:"Select State"}),[C,A]=(0,s.useState)(),[w,V]=(0,s.useState)(0),[I,B]=(0,s.useState)(0),[T,k]=(0,s.useState)(!0),{t:E}=(0,N.Bd)(),D={control:e=>({...e,padding:"0.25rem 0 "})},U=localStorage.getItem("role"),{id:J}=(0,r.g)(),O=JSON.parse(localStorage.getItem("userJsonData")),P=localStorage.getItem("loginDetails-name");let H,L;if(H="admin"===U?x.filter((e=>"company"===e.role)).map((e=>({label:e.userName,value:e.id}))):x.filter((e=>"company"===e.role&&e.parent===P)).map((e=>({label:e.userName,value:e.id}))),"company"===U){const e=O.filter((e=>e.parentCompany===P));L=e[0].parentBusinessGroup}const q=O.filter((e=>"branch"===e.role&&e.id==J)),F=JSON.parse(localStorage.getItem("userJsonData")).filter((e=>e.id===parseInt(J,10))),G=(0,f.Bc)(),[M,K]=(0,s.useState)(F),[Q,R]=(0,s.useState)([]),[Z,z]=(0,s.useState)([]),[W,X]=(0,s.useState)([]),[Y,$]=(0,s.useState)([]),[_,ee]=(0,s.useState)(),[ae,le]=(0,s.useState)([]),[se,re]=(0,s.useState)();(0,s.useEffect)((()=>{const e=x.filter((e=>"businessgroup"===e.role)).map((e=>({label:e.userName,value:e.id})));let a,l,s;a="businessgroup"===U?x.filter((e=>"company"===e.role)).filter((e=>e.parent===P)).map((e=>({label:e.userName,value:e.id}))):x.filter((e=>"company"===e.role)).filter((e=>e.parent===_)).map((e=>({label:e.userName,value:e.id}))),l="company"===U?x.filter((e=>"branch"===e.role)).filter((e=>e.parentCompany===P)).map((e=>({label:e.userName,value:e.id}))):x.filter((e=>"branch"===e.role)).filter((e=>e.parentCompany===ae)).map((e=>({label:e.userName,value:e.id}))),s="company"===U?x.filter((e=>e.vehicleName&&e.company===P)).map((e=>({label:e.vehicleName,value:e.id}))):x.filter((e=>e.vehicleName&&e.company===ae)).map((e=>({label:e.vehicleName,value:e.id}))),a.push({label:"None",value:0}),R(e),z(_?a:[...H,{label:"None",value:0}]),$(s),X(l)}),[_,ae,se]);const[te,ne]=(0,s.useState)(q);return(0,s.useEffect)((()=>{t("parentBusinessGroup",te[0]?te[0].parentBusinessGroup:""),t("parentCompany",te[0]?te[0].parentCompany:""),t("parentBranch",te[0]?te[0].parentBranch:""),t("country",te[0]?te[0].country:""),t("state",te[0]?te[0].state:"")}),[]),(0,j.jsxs)("div",{className:"p-4",children:[(0,j.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsx)("label",{className:"form-label",children:E("businessGroup")}),(0,j.jsx)(o.xI,{name:"businessUser",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:s,ref:r}}=e;return(0,j.jsx)(m.Ay,{onChange:e=>{ee(e.label),t("parentBusinessGroup",e.label)},options:Q,ref:r,isDisabled:G.business.disabled,name:s,styles:D,defaultValue:"company"===U&&{label:L,value:L}||"businessgroup"===U&&{label:P,value:P}})}})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsx)("label",{className:"form-label",children:E("company")}),(0,j.jsx)(o.xI,{name:"parentCompany",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:s,ref:r}}=e;return(0,j.jsx)(m.Ay,{onChange:e=>{le(e.label),t("parentCompany",e.label)},isDisabled:G.company.disabled,options:Z,ref:r,name:s,styles:D,defaultValue:"company"===U&&{label:P,value:P}})}})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsx)("label",{className:"form-label",children:E("branch")}),(0,j.jsx)(o.xI,{name:"Branch",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:s,ref:r}}=e;return(0,j.jsx)(m.Ay,{onChange:e=>{t("Branch",e)},options:W,ref:r,name:s,styles:D,isMulti:!0,defaultValue:M[0]?M[0].Branch:""})}}),!b("Branch")&&(0,j.jsx)(d.A,{errorName:g.parent})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsx)("label",{className:"form-label",children:E("vehicle")}),(0,j.jsx)(o.xI,{name:"accessibleVehicles",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:s,ref:r}}=e;return(0,j.jsx)(m.Ay,{onChange:e=>{t("vehicle",e)},options:Y,ref:r,name:s,styles:D,isMulti:!0,defaultValue:M[0]?M[0].vehicle:""})}}),!b("vehicle")&&(0,j.jsx)(d.A,{errorName:g.parent})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[E("email")," ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(p.A,{type:"email",register:l,label:"Email",className:"form-control",name:"email",defaultValue:M[0]?M[0].email:"",placeholder:""}),(0,j.jsx)(d.A,{errorName:g.email})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,j.jsxs)("label",{className:"form-label",children:[E("username")," ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(p.A,{type:"text",register:l,label:"User Name",name:"userName",placeholder:"",defaultValue:M[0]?M[0].userName:""}),(0,j.jsx)(d.A,{errorName:g.userName})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,j.jsxs)("label",{className:"form-label",children:[E("mobileNumber")," ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(p.A,{type:"text",register:l,label:"Mobile Number",name:"mobileNumber",min:"0",onInput:e=>{const a=Math.max(0,e.target.value);e.target.value=a<1?"":a},placeholder:"",defaultValue:M[0]?M[0].mobileNumber:""}),(0,j.jsx)(d.A,{errorName:g.mobileNumber})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsxs)("label",{className:"form-label",children:[E("country"),(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(h.b3,{onChange:e=>{S({name:"Select State"}),V(e.id),t("country",e.name),k(!1)},containerClassName:"bg-white",inputClassName:"border border-white customSelectHeight",placeHolder:"Select Country"}),!b("country")&&(0,j.jsx)(d.A,{errorName:g.country})]}),(0,j.jsxs)("div",{className:"".concat(T?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,j.jsx)("label",{className:"form-label",children:E("state")}),(0,j.jsx)("div",{style:{background:"white"},children:(0,j.jsx)(h.QO,{countryid:w,onChange:e=>{B(e.id),t("state",e.name)},defaultValue:v,containerClassName:"bg-white",inputClassName:"border border-white customSelectHeight",placeHolder:"Select State"})}),!b("state")&&(0,j.jsx)(d.A,{errorName:g.state})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,j.jsxs)("label",{className:"form-label",children:[E("password")," ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(p.A,{type:"password",register:l,label:"Password",name:"password",placeholder:"",defaultValue:M[0]?M[0].password:""}),(0,j.jsx)(d.A,{errorName:g.password})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,j.jsxs)("label",{className:"form-label",children:[E("confirmPassword")," ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(p.A,{type:"password",register:l,label:"Confirm Password",name:"confirmPassword",placeholder:"",defaultValue:M[0]?M[0].confirmPassword:""}),(0,j.jsx)(d.A,{errorName:g.confirmPassword})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,j.jsxs)("label",{className:"form-label",children:[E("featureTemplate")," ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(o.xI,{name:"featureTemplate",control:y,rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:s,ref:r}}=e;return(0,j.jsx)(m.Ay,{onChange:e=>{A(e.label),t("featureTemplate",e.label)},options:u.H2,ref:r,name:s,styles:D,defaultValue:u.H2[0]})}}),!b("featureTemplate")&&(0,j.jsx)(d.A,{errorName:g.featureTemplate})]})]}),(0,j.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,j.jsxs)(c.A,{type:"submit",onClick:i(n),style:{width:"10%"},children:[" ",E("submit")]})})]})};var y=l(18403),v=l(87742),S=l(42457);const C=e=>{let{Title:a,editData:l,setEditData:c}=e;const{t:m}=(0,N.Bd)(),[d,u]=(0,s.useState)(0),{checkRole:p,checkUserName:h}=(0,b.A)(),x=p(),f=h(),C=[m("account")],A=[g],w=(C.length,(0,r.Zp)()),{register:V,formState:{errors:I},setValue:B,getValues:T,control:k,handleSubmit:E}=(0,o.mN)({resolver:(0,y.t)(v.it)}),D=e=>{try{const a=JSON.parse(localStorage.getItem("userJsonData"));e.id=a.length+1,e.role="user",e.parent=f,e.type=x,a.push(e),console.log("this is dataaaaaaaaaaaaaaaaa",e),localStorage.setItem("userJsonData",JSON.stringify(a)),(0,S.V)("User created successfully !!"),w("/subUser")}catch(a){(0,S.U)("Error Occured !!"),w("/subUser")}},{id:U}=(0,r.g)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.A,{mainTitle:"User",pageTitle:U?"Edit":"Create",parentTitle:"User"}),(0,j.jsx)("div",{className:"m-2 p-2",children:(0,j.jsx)(o.Op,{children:(0,j.jsx)("form",{onSubmit:E(D),children:(0,j.jsx)("div",{className:"default-tab",children:(0,j.jsxs)(t.A.Container,{defaultActiveKey:C[0].toLowerCase(),children:[(0,j.jsx)(n.A,{as:"ul",className:"nav-tabs",children:C.map(((e,a)=>(0,j.jsx)(n.A.Item,{as:"li",children:(0,j.jsx)(n.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:a===d,onClick:()=>u(a),children:e})},a)))}),(0,j.jsx)(t.A.Content,{className:"pt-4",children:C.map(((e,a)=>{const l=A[a];return(0,j.jsx)(t.A.Pane,{eventKey:e.toLowerCase(),active:a===d,children:(0,j.jsx)(l,{data:C,control:k,setValue:B,register:V,getValues:T,errors:I,onSubmit:D,handleSubmit:E})},a)}))})]})})})})})]})}}}]);
//# sourceMappingURL=2799.cd8b7be6.chunk.js.map