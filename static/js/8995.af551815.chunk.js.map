{"version":3,"file":"static/js/8995.af551815.chunk.js","mappings":"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","sources":["jsx/components/Tables/SubCompanyTable.jsx","jsx/pages/company/Branch.js"],"sourcesContent":["import React from 'react'\nimport { MdDelete } from 'react-icons/md'\nimport { FaEdit } from 'react-icons/fa'\nimport DeleteModal from '../Modal/DeleteModal'\nimport { Link } from 'react-router-dom'\nimport { IMAGES,SVGICON} from '../../constant/theme'; \nimport useStorage from '../../../hooks/useStorage'\nimport { usePermissions } from '../../../context/PermissionContext'\n\nconst SubCompanyTable = ({onConfirmDelete,params,currentPage, itemsPerPage, tempValue,tempValue2,tableData,editDrawerOpen, setDataLength}) => {\n  let filterData = tableData;\n  const {can} = usePermissions()\n  const editPermission = can('branch','modify');\n  const deletePermission = can('branch','delete');\n  if(tempValue!=='All Companies'){\n    filterData = tableData.filter((item)=> item.role === 'branch' && item.parentCompany === tempValue)\n  }\n  if(tempValue2!=='All Branches'){\n    filterData = tableData.filter((item)=> item.role === 'branch' && item.parentBranch === tempValue2)\n  }\n  var branchCount = []\n  for(var i=0;i<filterData.length;i++){\n    const branchId = filterData[i]._id\n    branchCount[i] = filterData.filter((item)=> item?.parentBranchId?._id === branchId).length\n  }\n  // setDataLength(filterData.length)\n  const startIndex = (currentPage - 1) * itemsPerPage + 1;\n    return (\n      <>\n        {filterData.map((item, index) => (\n          <tr key={index}>\n            <td>\n              <span>{startIndex + index}</span>\n            </td>\n            <td>\n              <span className=\"text-primary\">{item.branchName}</span>\n            </td>\n            <td>\n              <span >{item.parentBranchId?.branchName ? item.parentBranchId?.branchName :<span className='ps-4'>-</span> }</span>\n            </td>\n            <td>\n              <span >{item.companyId?.companyName ? item.companyId?.companyName : <span className='ps-4'>-</span> }</span>\n            </td>\n            <td>\n              <span >{item.businessGroupId?.groupName ? item.businessGroupId?.groupName : <span className='ps-4'>-</span> }</span>\n            </td>\n            {/* <td>\n              <span>{item.mobileNumber}</span>\n            </td> */}\n            <td>\n              <span>{item.city}</span>\n            </td>\n\n            <td>\n            <Link\n              to={`/branch/bid/${item.id}`}\n              className=\"text-primary badge light border-0 badge-count\"\n            >\n              {branchCount[index]}\n            </Link>\n          </td>\n            {(editPermission || deletePermission) && <td>\n              <span className=\"d-flex justify-content-center\">\n                {editPermission && <span\n                  className=\"cursor-pointer\"\n                  onClick={() => editDrawerOpen(item._id)}\n                >\n                  <FaEdit style={{ color: \"green\", fontSize: \"1.2rem\" }} />\n                </span>}\n                {deletePermission && <DeleteModal\n                  className=\"cursor-pointer \"\n                  onConfirmDelete={onConfirmDelete}\n                  id={item._id}\n                >\n                  <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n                </DeleteModal>}\n              </span>\n            </td>}\n          </tr>\n        ))}\n      </>\n    );\n}\n\nexport default SubCompanyTable","import React, { useState, useRef, useEffect } from \"react\";\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\nimport MainPagetitle from \"../../layouts/MainPagetitle\";\nimport SubCompanyTable from \"../../components/Tables/SubCompanyTable\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport AsyncSelect from \"react-select/async\";\nimport useStorage from \"../../../hooks/useStorage\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { clsx } from \"clsx\";\n\nimport { useContext } from \"react\";\nimport { ThemeContext } from \"../../../context/ThemeContext\";\nimport { usePermissions } from \"../../../context/PermissionContext\";\nimport {\n  getAllBranch,\n  createBranch,\n  deleteBranch,\n} from \"../../../services/api/BranchServices\";\nimport { notifySuccess } from \"../../../utils/toast\";\nimport usePagination from \"../../../hooks/usePagination\";\nimport { getCompany } from \"../../../services/api/CompanyServices\";\nimport CompanyDropdown from \"../../components/CompanyDropdown\";\nimport BranchDropdown from \"../../components/BranchDropdown\";\nimport { getSelectValues } from \"../../../utils/helper\";\nimport ParentBranchDropdown from \"../../components/ParentBranch\";\nimport ReactPaginate from \"react-paginate\";\nimport { ICON } from \"../../constant/theme\";\nimport Paginate from \"../../components/Pagination/Paginate\";\n\n// import { SubCompanyData } from '../../components/Tables/Tables';\n\nconst Branch = () => {\n  const { isRtl } = useContext(ThemeContext);\n\n  const { can, setUserPermission } = usePermissions();\n\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const params = useParams();\n\n  const [selectFilter, setFilter] = useState({\n    value: \"All Companies\",\n    label: \"All Companies\",\n  });\n  const [selectFilter2, setFilter2] = useState({\n    value: \"All Branches\",\n    label: \"All Branches\",\n  });\n  const [tempValue, setTempValue] = useState(\"All Companies\");\n  const [tempValue2, setTempValue2] = useState(\"All Branches\");\n  const [data, setData] = useState(\n    document.querySelectorAll(\"#employee-tbl_wrapper tbody tr\")\n  );\n  const customStyles = {\n    control: (base) => ({\n      ...base,\n      marginRight: \"1rem\",\n      marginLeft: \"1rem\",\n      width: \"15rem\",\n      height: \"0.6rem\",\n      menuPortal: (provided) => ({ ...provided, zIndex: 9999 }),\n      menu: (provided) => ({ ...provided, zIndex: 9999 }),\n    }),\n  };\n  const loggedinUser = localStorage.getItem(\"loginDetails-name\");\n  // const SubCompanyData = JSON.parse( localStorage.getItem('branchData'));\n  // const role = localStorage.getItem(\"role\");\n  const { control, setValue, getValues, watch } = useForm();\n  const userData = JSON.parse(localStorage.getItem(\"userDetails\"));\n  const role = userData?.user?.role;\n  const [companyId, setCompanyId] = useState(null);\n  const [tableData, setTableData] = useState([]);\n  const [editData, setEditData] = useState({\n    id: 0,\n    reseller: \"\",\n    contact: 0,\n    username: \"\",\n    status: \"\",\n    location: \"\",\n    usergroup: \"\",\n    branches: 0,\n  });\n  const [companyDropdown, setCompanyDropdown] = useState({\n    label: \"All Companies\",\n    value: \"All Companies\",\n  });\n  const [branchDropdown, setBranchDropdown] = useState({\n    label: \"All Branches\",\n    value: \"All Branches\",\n  });\n  const [companies, setCompanies] = useState([]);\n  const [branches, setBranches] = useState([]);\n  const [selectedCompany, setSelectedCompany] = useState(null);\n  const [selectedBranch, setSelectedBranch] = useState(null);\n  const defaultValues = getSelectValues();\n  const { page, nextPage, prevPage, goToPage, setCount, totalCount, setPage } =\n    usePagination();\n  \n  const itemsPerPage=10;\n\n  const handlePageClick = ({ selected }) => {\n    goToPage(selected + 1); \n  };\n  \n    const startIndex = (page - 1) * itemsPerPage;\n    const slicedData = tableData.slice(startIndex, startIndex + itemsPerPage);\n\n  const fetchAllBranch = async (page, CompanyId, branchId) => {\n    try {\n      if (CompanyId) {\n        const { data, success } = await getAllBranch(undefined, CompanyId);\n        setTableData(data.data);\n        setCount(data.totalCount);\n        setBranches(data.data);\n      } else if (branchId) {\n        const { data, success } = await getAllBranch(\n          undefined,\n          undefined,\n          branchId\n        );\n        setTableData(data.data);\n        setCount(data.totalCount);\n        setBranches(data.data);\n      } else {\n        const { data, success } = await getAllBranch(page);\n        const permissions = JSON.parse(localStorage.getItem(\"permission\"));\n        setUserPermission(permissions?.[0]?.permission);\n        setTableData(data.data);\n        setCount(data.totalCount);\n        // setBranches(data.data);\n      }\n    } catch (error) {\n      console.log(\"Error in fetching data\", error);\n    }\n  };\n  useEffect(() => {\n    fetchAllBranch(page);\n  }, [page]);\n\n  const filteredBranches = branches.filter(\n    (branch) =>\n      selectedCompany && branch.companyId._id === selectedCompany.value\n  );\n\n  const branchOptions = filteredBranches.map((branch) => ({\n    value: branch._id,\n    label: branch.branchName,\n  }));\n\n  const handleCompanyChange = (selectedOption) => {\n\n    setSelectedCompany(selectedOption);\n    setFilter(selectedOption);\n    setCompanyId(selectedOption.value);\n    setPage(1);\n    fetchAllBranch(1, selectedOption.value);\n  };\n\n  // Handler function for branch selection\n  const handleBranchChange = (branchOption) => {\n    setSelectedBranch(branchOption);\n    setFilter2(branchOption);\n    setPage(1);\n    fetchAllBranch(1, undefined, branchOption.value);\n  };\n  const handleClearFilter = () => {\n    fetchAllBranch();\n    setCompanyId(null);\n    setValue(\"company\", \"\");\n    setValue(\"parent\", \"\");\n    setCompanyDropdown({\n      label: \"All companies\",\n      value: \"All companies\",\n    });\n  };\n\n  const onConfirmDelete = async (id) => {\n    await deleteBranch(id);\n    notifySuccess(\"Branch Deleted\");\n    await fetchAllBranch();\n  };\n\n  const editDrawerOpen = (item) => {\n    const filteredData = tableData?.filter((data) => data._id === item);\n    navigate(`edit/${item}`, { state: filteredData });\n  };\n\n  // const d = JSON.parse(localStorage.getItem(\"userJsonData\"));\n\n  return (\n    <>\n      <MainPagetitle\n        mainTitle=\"Branch\"\n        pageTitle={\"Branch\"}\n        parentTitle={\"Home\"}\n      />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"table-responsive active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t(\"branches\")}</h4>\n                    <div className=\"d-flex align-items-center\">\n                      <Link\n                        className=\"btn  btn-xxs\"\n                        data-bs-toggle=\"offcanvas\"\n                        onClick={handleClearFilter}\n                        style={{\n                          background: \"gray\",\n                          border: \"gray\",\n                          color: \"white\",\n                        }}\n                      >\n                        Clear\n                      </Link>\n                      <Controller\n                        name=\"company\"\n                        control={control}\n                        rules={{ required: true }}\n                        render={({ field: { onChange, value, name, ref } }) => (\n                          <CompanyDropdown\n                            onChange={async (newValue) => {\n                              setValue(\"company\", newValue.value);\n                              setCompanyId(newValue.value);\n                              handleCompanyChange(newValue);\n                            }}\n                            key={companyId}\n                            value={value? value : companyDropdown}\n                            customStyles={customStyles}\n                            name={name}\n                            ref={ref}\n                            isDisabled={role === 'COMPANY' ? true : false}\n                          />\n                        )}\n                      />\n                      <Controller\n                        name=\"parent\"\n                        control={control}\n                        rules={{ required: true }}\n                        render={({ field: { onChange, value, name, ref } }) => (\n                          <ParentBranchDropdown\n                            key={companyId}\n                            onChange={(newValue) => {\n                              setValue(\"parent\", newValue.value);\n                              handleBranchChange(newValue);\n                            }}\n                            companyId={companyId}\n                            value={value? value : branchDropdown}\n                            customStyles={customStyles}\n                            ref={ref}\n                            name={name}\n                            \n                          />\n                        )}\n                      />\n                      {can(\"branch\", \"add\") && (\n                        <Link\n                          to={\"/branch/create\"}\n                          className=\"btn btn-primary btn-sm ms-1\"\n                          style={{ paddingBlock: \"9px\" }}\n                          data-bs-toggle=\"offcanvas\"\n                          // onClick={()=>subCompany.current.showModal()}\n                        >\n                          + {t(\"addBranch\")}\n                        </Link>\n                      )}{\" \"}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    <table\n                      id=\"empoloyees-tblwrapper\"\n                      className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                    >\n                      <thead>\n                        <tr>\n                          <th>{t(\"id\")}</th>\n                          <th>{t(\"branchName\")}</th>\n                          <th>{t(\"parentBranch\")}</th>\n                          <th>{t(\"companyName\")}</th>\n                          <th>{t(\"businessGroup\")}</th>\n                          {/* <th>{t('mobileNumber')}</th> */}\n                          <th>{t(\"location\")}</th>\n                          <th>{t(\"childBranches\")}</th>\n                          {(can(\"branch\", \"modify\") ||\n                            can(\"branch\", \"delete\")) && <th>{t(\"action\")}</th>}\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <SubCompanyTable\n                          key={tableData}\n                          tempValue={tempValue}\n                          // setDataLength={setDataLength}\n                          tempValue2={tempValue2}\n                          editData={editData}\n                          tableData={tableData}\n                          currentPage={page} \n                        itemsPerPage={itemsPerPage}\n                          onConfirmDelete={onConfirmDelete}\n                          editDrawerOpen={editDrawerOpen}\n                          setEditData={setEditData}\n                        />\n                      </tbody>\n                    </table>\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                        {t(\"showing\")} {(page - 1) * 10 + 1} {t(\"to\")}{\" \"}\n                        {Math.min(page * 10, totalCount)} {t(\"of\")} {totalCount}{\" \"}\n                        {t(\"entries\")}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                        <Paginate\n                            totalCount={totalCount}\n                            itemsPerPage={itemsPerPage}\n                            handlePageClick={handlePageClick}\n                          />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* <SubCompanyOffcanvas\n                ref={subCompany}\n                editData={editData}\n                setEditData={setEditData}\n                handleSubmit={handleSubmit}\n                Title={ editData.id === 0 ? \"Add Branch\" : \"Edit Branch\"}\n            /> */}\n    </>\n  );\n};\nexport default Branch;\n"],"names":["_ref","onConfirmDelete","params","currentPage","itemsPerPage","tempValue","tempValue2","tableData","editDrawerOpen","setDataLength","filterData","can","usePermissions","editPermission","deletePermission","filter","item","role","parentCompany","parentBranch","branchCount","i","length","branchId","_id","_item$parentBranchId","parentBranchId","startIndex","_jsx","_Fragment","children","map","index","_item$parentBranchId2","_item$parentBranchId3","_item$companyId","_item$companyId2","_item$businessGroupId","_item$businessGroupId2","_jsxs","className","branchName","companyId","companyName","businessGroupId","groupName","city","Link","to","concat","id","onClick","FaEdit","style","color","fontSize","DeleteModal","MdDelete","Branch","_userData$user","isRtl","useContext","ThemeContext","setUserPermission","t","useTranslation","navigate","useNavigate","selectFilter","setFilter","useParams","useState","value","label","selectFilter2","setFilter2","setTempValue","setTempValue2","data","setData","document","querySelectorAll","customStyles","control","base","marginRight","marginLeft","width","height","menuPortal","provided","zIndex","menu","setValue","getValues","watch","localStorage","getItem","useForm","userData","JSON","parse","user","setCompanyId","setTableData","editData","setEditData","reseller","contact","username","status","location","usergroup","branches","companyDropdown","setCompanyDropdown","branchDropdown","setBranchDropdown","companies","setCompanies","setBranches","selectedCompany","setSelectedCompany","selectedBranch","setSelectedBranch","page","nextPage","prevPage","goToPage","setCount","totalCount","setPage","getSelectValues","usePagination","fetchAllBranch","slice","async","CompanyId","success","getAllBranch","undefined","_permissions$","permissions","permission","error","console","log","useEffect","branch","MainPagetitle","mainTitle","pageTitle","parentTitle","handleClearFilter","background","border","Controller","name","rules","required","render","_ref2","field","onChange","ref","CompanyDropdown","selectedOption","newValue","isDisabled","_ref3","ParentBranchDropdown","branchOption","paddingBlock","SubCompanyTable","deleteBranch","notifySuccess","filteredData","state","Math","min","Paginate","handlePageClick","selected"],"sourceRoot":""}