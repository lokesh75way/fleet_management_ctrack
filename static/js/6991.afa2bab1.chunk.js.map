{"version":3,"file":"static/js/6991.afa2bab1.chunk.js","mappings":"+LAQA,MAmEA,EAnEqBA,IAAqD,IAApD,UAAEC,EAAS,gBAAEC,EAAe,eAAEC,GAAgBH,EAGlE,MAAM,IAAEI,IAAQC,EAAAA,EAAAA,KACVC,EAAiBF,EAAI,UAAW,UAChCG,EAAmBH,EAAI,UAAW,UACxC,GAAyB,IAArBH,EAAUO,OAGd,OAAgB,OAATP,QAAS,IAATA,OAAS,EAATA,EAAWQ,KAAI,CAACC,EAAMC,KAAK,IAAAC,EAAA,OAChCC,EAAAA,EAAAA,MAAA,MAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAAD,UACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,WAAUF,UACvBC,EAAAA,EAAAA,KAAA,OAAAD,UACEC,EAAAA,EAAAA,KAAA,MAAAD,SAAKJ,EAAKO,qBAIhBF,EAAAA,EAAAA,KAAA,MAAAD,UACEC,EAAAA,EAAAA,KAAA,QAAAD,SAAOJ,EAAKQ,iBAEdH,EAAAA,EAAAA,KAAA,MAAAD,UACEC,EAAAA,EAAAA,KAAA,QAAMC,UAAU,eAAcF,SAAM,OAAJJ,QAAI,IAAJA,GAAc,QAAVE,EAAJF,EAAMS,gBAAQ,IAAAP,OAAV,EAAJA,EAAgBQ,gBAGlDL,EAAAA,EAAAA,KAAA,MAAAD,UACEC,EAAAA,EAAAA,KAAA,QAAAD,SAAOJ,EAAKW,eAEdN,EAAAA,EAAAA,KAAA,MAAAD,UACEC,EAAAA,EAAAA,KAAA,QAAAD,SAAOJ,EAAKY,gBAEdP,EAAAA,EAAAA,KAAA,MAAAD,UACEC,EAAAA,EAAAA,KAAA,QAAMC,UAAU,eAAcF,SAAEJ,EAAKa,wBAEvCR,EAAAA,EAAAA,KAAA,MAAAD,UACEC,EAAAA,EAAAA,KAAA,QAAAD,SAAOJ,EAAKc,oBAKZjB,GAAoBD,KACpBS,EAAAA,EAAAA,KAAA,MAAAD,UACED,EAAAA,EAAAA,MAAA,QAAMG,UAAU,gCAA+BF,SAAA,CAC5CR,IACCS,EAAAA,EAAAA,KAAA,QACEC,UAAU,iBACVS,QAASA,IAAMtB,EAAeO,EAAKgB,KAAKZ,UAExCC,EAAAA,EAAAA,KAACY,EAAAA,IAAM,CAACC,MAAO,CAAEC,MAAO,QAASC,SAAU,cAG9CvB,IACCQ,EAAAA,EAAAA,KAACgB,EAAAA,EAAW,CACVf,UAAU,kBACVd,gBAAiBA,EACjB8B,GAAItB,EAAKgB,IAAIZ,UAEbC,EAAAA,EAAAA,KAACkB,EAAAA,IAAQ,CAACL,MAAO,CAAEC,MAAO,MAAOC,SAAU,qBA/C9CpB,EAAKsB,GAqDT,GACL,C,wLC5DJ,MA6JA,EA7JgBE,KACd,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,OACR,IAAEhC,IAAQC,EAAAA,EAAAA,KAGVgC,GAAWC,EAAAA,EAAAA,OACVC,EAAUC,IAAeC,EAAAA,EAAAA,aACzBxC,EAAWyC,IAAgBD,EAAAA,EAAAA,UAAS,KACpCE,EAAaC,IAAkBH,EAAAA,EAAAA,WAAS,IACxCI,EAAUC,IAAeL,EAAAA,EAAAA,UAAS,CACvCT,GAAI,EACJf,YAAa,GACbC,YAAa,GACbG,UAAW,EACX0B,WAAY,EACZC,cAAe,GACfC,gBAAiB,KAGb,KAAEC,EAAI,SAAEC,EAAQ,SAAEC,EAAQ,WAAEC,IAAeC,EAAAA,EAAAA,MAqBjDC,EAAAA,EAAAA,YAAU,MAdVC,eAA8BN,GAC5B,IACEN,GAAe,GACf,MAAM,KAAEa,EAAI,YAAEC,SAAsBC,EAAAA,EAAAA,IAAYT,GAChDE,EAASM,GACThB,EAAae,EAEf,CAAE,MAAOG,GACPC,QAAQC,IAAI,yBAA0BF,EACxC,CAAC,QACChB,GAAe,EACjB,CACF,CAGEmB,CAAeb,EAAK,GACnB,CAACX,EAAUW,IAGd,MAcMc,EAAU,CACd,cACA,cACA,SACA,YACA,aACA,qBACA,kBAOF,OAJI5D,EAAI,UAAW,WAAaA,EAAI,UAAW,YAC7C4D,EAAQC,KAAK,WAIbpD,EAAAA,EAAAA,MAAAqD,EAAAA,SAAA,CAAApD,SAAA,EACEC,EAAAA,EAAAA,KAACoD,EAAAA,EAAa,CACZC,UAAWjC,EAAE,WACbkC,UAAWlC,EAAE,WACbmC,YAAanC,EAAE,WAEjBpB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBF,UAC9BC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,MAAKF,UAClBC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWF,UACxBC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMF,UACnBC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeF,UAC5BD,EAAAA,EAAAA,MAAA,OAAKG,UAAU,qEAAoEF,SAAA,EACjFD,EAAAA,EAAAA,MAAA,OAAKG,UAAU,0EAAyEF,SAAA,EACtFC,EAAAA,EAAAA,KAAA,MAAIC,UAAU,eAAcF,SAAEqB,EAAE,cAChCtB,EAAAA,EAAAA,MAAA,OAAAC,SAAA,CACGV,EAAI,UAAW,SACdS,EAAAA,EAAAA,MAAC0D,EAAAA,GAAI,CACHC,GAAI,kBACJxD,UAAU,8BACV,iBAAe,YAAWF,SAAA,CAC3B,KACIqB,EAAE,qBAEN,WAGPtB,EAAAA,EAAAA,MAAA,OACEmB,GAAG,uBACHhB,UAAU,+BAA8BF,SAAA,EAEtCb,EAAUO,QAAUmC,GACpB5B,EAAAA,EAAAA,KAAC0D,EAAAA,EAAa,KAEd5D,EAAAA,EAAAA,MAAA,SACEmB,GAAG,wBACHhB,UAAU,kDAAiDF,SAAA,EAE3DC,EAAAA,EAAAA,KAAA,SAAAD,UACEC,EAAAA,EAAAA,KAAA,MAAAD,SACGkD,EAAQvD,KAAKiE,IACZ3D,EAAAA,EAAAA,KAAA,MAAAD,SAAkBqB,EAAEuC,IAAXA,UAIf3D,EAAAA,EAAAA,KAAA,SAAAD,UACEC,EAAAA,EAAAA,KAAC4D,EAAAA,EAAY,CACX1E,UAAWA,EACXC,gBA5ED8B,KACvB4C,EAAAA,EAAAA,IAAe5C,GACf,MAAM6C,EAAc5E,EAAU6E,QAAQpE,GAASA,EAAKgB,MAAQM,IAC5DU,EAAamC,EAAY,EA0ED1E,eAvEF6B,IAGtB,MAAMyB,EAAOxD,EAAU6E,QAAQpE,GAASA,EAAKgB,MAAQM,IAErDK,EAAS,QAAQL,IAAM,CAAE+C,MAAO,CAAEC,SAAUvB,IAAS,EAmE7BwB,YAAa/B,EACbgC,aAxGL,WA6GHrE,EAAAA,EAAAA,MAAA,OAAKG,UAAU,mEAAkEF,SAAA,EAC/ED,EAAAA,EAAAA,MAAA,OAAKG,UAAU,kBAAiBF,SAAA,CAC7BqB,EAAE,WAAW,IAAe,IAAZe,EAAO,GAAU,EAAE,IAAEf,EAAE,MAAO,IAC9CgD,KAAKC,IAAW,GAAPlC,EAAWG,GAAY,IAAElB,EAAE,MAAM,IAAEkB,EAAY,IACxDlB,EAAE,eAELpB,EAAAA,EAAAA,KAAA,OACEC,UAAU,4CACVgB,GAAG,oBAAmBlB,UAEtBC,EAAAA,EAAAA,KAACsE,EAAAA,EAAQ,CACPhC,WAAYA,EACZ6B,aAzHH,GA0HGI,gBAxHAtF,IAAmB,IAAlB,SAAEuF,GAAUvF,EACnCmD,EAASoC,EAAW,EAAE,2BAkInB,C","sources":["jsx/components/Tables/VehicleTable.jsx","jsx/pages/Vehicle.jsx"],"sourcesContent":["import React from \"react\";\nimport DeleteModal from \"../../../components/Modal/DeleteModal\";\nimport { MdDelete } from \"react-icons/md\";\nimport { FaEdit } from \"react-icons/fa\";\nimport { FaCar } from \"react-icons/fa6\";\nimport useStorage from \"../../../hooks/useStorage\";\nimport { usePermissions } from \"../../../context/PermissionContext\";\n\nconst VehicleTable = ({ tableData, onConfirmDelete, editDrawerOpen }) => {\n  // const { getData } = useStorage();\n  // const filteredItems = getData(tableData);\n  const { can } = usePermissions();\n  const editPermission = can(\"vehicle\", \"modify\");\n  const deletePermission = can(\"vehicle\", \"delete\");\n  if (tableData.length === 0) {\n    return;\n  }\n  return tableData?.map((item, index) => (\n    <tr key={item.id}>\n      <td>\n        <div className=\"products\">\n          <div>\n            <h6>{item.vehicleName}</h6>\n          </div>\n        </div>\n      </td>\n      <td>\n        <span>{item.plateNumber}</span>\n      </td>\n      <td>\n        <span className=\"text-primary\">{item?.branchId?.branchName}</span>\n      </td>\n\n      <td>\n        <span>{item.simNumber}</span>\n      </td>\n      <td>\n        <span>{item.imeiNumber}</span>\n      </td>\n      <td>\n        <span className=\"text-primary\">{item.registrationNumber}</span>\n      </td>\n      <td>\n        <span>{item.weightCapacity}</span>\n      </td>\n      {/* <td>\n                <span className={`badge light border-0 ${item.status===\"Active\" ? 'badge-success' : 'badge-danger'} `}style={{width:\"45%\"}}>{item.status}</span>\n            </td> */}\n      {(deletePermission || editPermission) && (\n        <td>\n          <span className=\"d-flex justify-content-center\">\n            {editPermission && (\n              <span\n                className=\"cursor-pointer\"\n                onClick={() => editDrawerOpen(item._id)}\n              >\n                <FaEdit style={{ color: \"green\", fontSize: \"1.2rem\" }} />\n              </span>\n            )}\n            {deletePermission && (\n              <DeleteModal\n                className=\"cursor-pointer \"\n                onConfirmDelete={onConfirmDelete}\n                id={item._id}\n              >\n                <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n              </DeleteModal>\n            )}\n          </span>\n        </td>\n      )}\n    </tr>\n  ));\n};\n\nexport default VehicleTable;\n","import React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\n\nimport TableSkeleton from \"@/components/Skeleton/Table\";\nimport VehicleTable from \"../components/Tables/VehicleTable\";\nimport MainPagetitle from \"../../components/MainPagetitle\";\nimport Paginate from \"../../components/Paginate\";\nimport { usePermissions } from \"../../context/PermissionContext\";\nimport { deleteVehicles, getVehicles } from \"../../services/api/VehicleService\";\nimport usePagination from \"../../hooks/usePagination\";\n\nconst Vehicle = () => {\n  const { t } = useTranslation();\n  const { can } = usePermissions();\n  //   const { setAddVehicle, addVehicle } = useContext(ThemeContext);\n\n  const navigate = useNavigate();\n  const [deleteId, setDeleteId] = useState();\n  const [tableData, setTableData] = useState([]);\n  const [initialLoad, setInitialLoad] = useState(false);\n  const [editData, setEditData] = useState({\n    id: 0,\n    vehicleName: \"\",\n    plateNumber: \"\",\n    simNumber: 0,\n    IMEINumber: 0,\n    GPSDeviceType: \"\",\n    distanceCounter: 0,\n  });\n\n  const { page, goToPage, setCount, totalCount } = usePagination();\n  const itemsPerPage = 10;\n\n  const handlePageClick = ({ selected }) => {\n    goToPage(selected + 1);\n  };\n\n  async function getVehicleData(page) {\n    try {\n      setInitialLoad(true);\n      const { data, totalLength } = await getVehicles(page);\n      setCount(totalLength);\n      setTableData(data);\n      // setCount(totalCount);\n    } catch (error) {\n      console.log(\"Error in fetching data\", error);\n    } finally {\n      setInitialLoad(false);\n    }\n  }\n\n  useEffect(() => {\n    getVehicleData(page);\n  }, [deleteId, page]);\n\n  // delete function\n  const onConfirmDelete = (id) => {\n    deleteVehicles(id);\n    const updatedData = tableData.filter((item) => item._id !== id);\n    setTableData(updatedData);\n  };\n  // Edit function\n  const editDrawerOpen = (id) => {\n    // tableData.map((table) => table.id === id && setEditData(table));\n\n    const data = tableData.filter((item) => item._id === id);\n\n    navigate(`edit/${id}`, { state: { formData: data } });\n    // vehicle.current.showModal();\n  };\n  const headers = [\n    \"vehicleName\",\n    \"plateNumber\",\n    \"branch\",\n    \"simNumber\",\n    \"IMEINumber\",\n    \"registrationNumber\",\n    \"weightCapacity\",\n  ];\n\n  if (can(\"vehicle\", \"modify\") || can(\"vehicle\", \"delete\")) {\n    headers.push(\"action\");\n  }\n\n  return (\n    <>\n      <MainPagetitle\n        mainTitle={t(\"vehicle\")}\n        pageTitle={t(\"vehicle\")}\n        parentTitle={t(\"home\")}\n      />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"table-responsive active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t(\"vehicle\")}</h4>\n                    <div>\n                      {can(\"vehicle\", \"add\") && (\n                        <Link\n                          to={\"/vehicle/create\"}\n                          className=\"btn btn-primary btn-sm ms-1\"\n                          data-bs-toggle=\"offcanvas\"\n                        >\n                          + {t(\"addVehicleInfo\")}\n                        </Link>\n                      )}{\" \"}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    {!tableData.length && initialLoad ? (\n                      <TableSkeleton />\n                    ) : (\n                      <table\n                        id=\"empoloyees-tblwrapper\"\n                        className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                      >\n                        <thead>\n                          <tr>\n                            {headers.map((header) => (\n                              <th key={header}>{t(header)}</th>\n                            ))}\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <VehicleTable\n                            tableData={tableData}\n                            onConfirmDelete={onConfirmDelete}\n                            editDrawerOpen={editDrawerOpen}\n                            currentPage={page}\n                            itemsPerPage={itemsPerPage}\n                          />\n                        </tbody>\n                      </table>\n                    )}\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                        {t(\"showing\")} {(page - 1) * 10 + 1} {t(\"to\")}{\" \"}\n                        {Math.min(page * 10, totalCount)} {t(\"of\")} {totalCount}{\" \"}\n                        {t(\"entries\")}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                        <Paginate\n                          totalCount={totalCount}\n                          itemsPerPage={itemsPerPage}\n                          handlePageClick={handlePageClick}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Vehicle;\n"],"names":["_ref","tableData","onConfirmDelete","editDrawerOpen","can","usePermissions","editPermission","deletePermission","length","map","item","index","_item$branchId","_jsxs","children","_jsx","className","vehicleName","plateNumber","branchId","branchName","simNumber","imeiNumber","registrationNumber","weightCapacity","onClick","_id","FaEdit","style","color","fontSize","DeleteModal","id","MdDelete","Vehicle","t","useTranslation","navigate","useNavigate","deleteId","setDeleteId","useState","setTableData","initialLoad","setInitialLoad","editData","setEditData","IMEINumber","GPSDeviceType","distanceCounter","page","goToPage","setCount","totalCount","usePagination","useEffect","async","data","totalLength","getVehicles","error","console","log","getVehicleData","headers","push","_Fragment","MainPagetitle","mainTitle","pageTitle","parentTitle","Link","to","TableSkeleton","header","VehicleTable","deleteVehicles","updatedData","filter","state","formData","currentPage","itemsPerPage","Math","min","Paginate","handlePageClick","selected"],"sourceRoot":""}