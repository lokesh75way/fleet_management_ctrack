"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[6584],{19889:(e,a,t)=>{t.d(a,{Up:()=>c,e:()=>i,f7:()=>r,ih:()=>l,lp:()=>n,nz:()=>d});var s=t(95441);const i=async e=>s.S.post("/vehicles",e),n=async(e,a)=>{let t=`/vehicles?page=${e}&limit=10`;a&&(Array.isArray(a)?a.forEach((e=>{t+=`&branchIds=${e}`})):t+=`&branchIds=${a}`);const{data:i}=await s.S.get(t);return{data:i.data.data,totalCount:i.data.totalCount}},l=async e=>s.S.delete(`/vehicles/${e}`),r=async(e,a)=>s.S.patch(`/vehicles/${a}`,e),c=async(e,a)=>{const{data:t}=await s.S.get(`/vehicles/tracking?${e}&status=${a}`);return{data:t.data.data,count:t.data.count,centerCoordinate:t.data.centerCoordinate}},d=async e=>{var a;const{data:t}=await s.S.get(`/vehicles/${e}`);return null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data}},54162:(e,a,t)=>{t.d(a,{A:()=>d});t(78109);var s=t(27515),i=t(25255),n=t(78292),l=t(32449),r=t(81310),c=t(47337);const d=e=>{let{tableData:a,onConfirmDelete:t}=e;const{can:d}=(0,r.A)(),o=d("vehicle","modify"),h=d("vehicle","delete");return null===a||void 0===a?void 0:a.map((e=>{var a;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"products",children:(0,c.jsx)("div",{children:(0,c.jsx)("h6",{children:e.vehicleName})})})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{children:e.registrationNumber})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-primary",children:null===e||void 0===e||null===(a=e.branchId)||void 0===a?void 0:a.branchName})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{children:e.simNumber})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{children:e.imeiNumber})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{className:"text-primary",children:e.registrationNumber})}),(0,c.jsx)("td",{children:(0,c.jsx)("span",{children:e.weightCapacity})}),(h||o)&&(0,c.jsx)("td",{children:(0,c.jsxs)("span",{className:"d-flex justify-content-center",children:[o&&(0,c.jsx)(n.N_,{to:`/vehicle/edit/${null===e||void 0===e?void 0:e._id}`,children:(0,c.jsx)("span",{className:"cursor-pointer",children:(0,c.jsx)(i.uO9,{style:{color:"green",fontSize:"1.2rem"}})})}),h&&(0,c.jsx)(l.A,{className:"cursor-pointer ",onConfirmDelete:t,id:e._id,children:(0,c.jsx)(s.b6i,{style:{color:"red",fontSize:"1.2rem"}})})]})})]},e.id)}))}},56584:(e,a,t)=>{t.r(a),t.d(a,{default:()=>N});var s=t(78109),i=t(78292),n=t(34571),l=t(4900),r=t(67889),c=t(52454),d=t(6986),o=t(72555),h=t(54162),m=t(32343),x=t(71980),j=t(19889),v=t(97804),u=t(96152),p=t(81310),b=t(47337);const N=()=>{var e;const{t:a}=(0,n.Bd)(),{can:t}=(0,p.A)(),{page:N,goToPage:g,setCount:f,totalCount:y}=(0,v.A)(),C=(0,l.jE)(),{data:w,isLoading:S,isFetching:A}=(0,r.I)({queryKey:["vehicles",N],queryFn:()=>(0,j.lp)(N),placeholderData:c.rX,staleTime:1/0}),{mutate:T}=(0,d.n)({onError:e=>{notifyError((0,u.SU)(e))},onSuccess:()=>{C.invalidateQueries("vehicles")},mutationFn:j.ih});(0,s.useEffect)((()=>{w&&f(w.totalCount)}),[w]);const _=["vehicleName","plateNumber","branch","simNumber","IMEINumber","registrationNumber","weightCapacity"];return(t("vehicle","modify")||t("vehicle","delete"))&&_.push("action"),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.A,{mainTitle:a("vehicle"),pageTitle:a("vehicle"),parentTitle:a("home")}),(0,b.jsx)("div",{className:"container-fluid",children:(0,b.jsx)("div",{className:"row",children:(0,b.jsx)("div",{className:"col-xl-12",children:(0,b.jsx)("div",{className:"card",children:(0,b.jsx)("div",{className:"card-body p-0",children:(0,b.jsxs)("div",{className:"active-projects style-1 ItemsCheckboxSec shorting",children:[(0,b.jsxs)("div",{className:"tbl-caption d-flex justify-content-between text-wrap align-items-center",children:[(0,b.jsx)("h4",{className:"heading mb-0",children:a("vehicle")}),(0,b.jsxs)("div",{children:[t("vehicle","add")&&(0,b.jsxs)(i.N_,{to:"/vehicle/create",className:"btn btn-primary btn-sm ms-1","data-bs-toggle":"offcanvas",children:["+ ",a("addVehicleInfo")]})," "]})]}),(0,b.jsxs)("div",{id:"employee-tbl_wrapper",className:"dataTables_wrapper no-footer",children:[(0,b.jsx)("div",{className:"table-responsive",children:S||A?(0,b.jsx)(o.A,{}):(0,b.jsxs)("table",{id:"empoloyees-tblwrapper",className:"table ItemsCheckboxSec dataTable no-footer mb-0",children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{children:_.map((e=>(0,b.jsx)("th",{children:a(e)},e)))})}),(0,b.jsx)("tbody",{children:null!==(e=w.data)&&void 0!==e&&e.length?(0,b.jsx)(h.A,{tableData:w.data,onConfirmDelete:T,currentPage:N,itemsPerPage:10}):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colspan:"10",rowSpan:2,height:150,children:(0,b.jsx)("h1",{className:"text-center",children:"No Data found!"})})})})]})}),(0,b.jsxs)("div",{className:"d-sm-flex text-center justify-content-between align-items-center",children:[(0,b.jsxs)("div",{className:"dataTables_info",children:[a("showing")," ",10*(N-1)+1," ",a("to")," ",Math.min(10*N,y)," ",a("of")," ",y," ",a("entries")]}),(0,b.jsx)("div",{className:"dataTables_paginate paging_simple_numbers",id:"example2_paginate",children:(0,b.jsx)(x.A,{totalCount:y,itemsPerPage:10,handlePageClick:e=>{let{selected:a}=e;g(a+1)}})})]})]})]})})})})})})]})}}}]);
//# sourceMappingURL=6584.89dbfc89.chunk.js.map