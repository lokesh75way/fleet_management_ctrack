"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[5163],{53358:(e,s,a)=>{a.d(s,{A:()=>x});var n=a(65043),t=a(79942),c=a(33723),l=(a(72213),a(49804)),i=a(6720),o=a(45394),r=a(60184),d=a(31462),m=a(32620),h=a(70579);const p=()=>{const{isTrafficClick:e,setIsTrafficClick:s}=(0,n.useContext)(c.D);return(0,h.jsxs)("div",{className:"panel",children:[(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(o.dVm,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(m.U2u,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",onClick:a=>{a.preventDefault(),s(!e)},children:(0,h.jsx)(r.zmV,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(r.$Fg,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(o._vB,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(o.o9J,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(d.nnb,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(i.uU7,{className:"modes_icon"})}),(0,h.jsx)("span",{className:"modes",children:(0,h.jsx)(l.yzF,{className:"modes_icon"})})]})},x=e=>{let{data:s}=e;const{isTrafficClick:a,setIsTrafficClick:l}=(0,n.useContext)(c.D),i={NODE_ENV:"production",PUBLIC_URL:"/fleet_management_ctrack",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_MAPS_API_KEY,{isLoaded:o}=(0,t.RH)({googleMapsApiKey:"".concat(i)});return(0,h.jsxs)("div",{className:"vehicle_tracking",children:[(0,h.jsx)(p,{}),o?(0,h.jsx)(t.u6,{mapContainerStyle:{width:"100%",height:"80vh"},center:s[0],zoom:13,children:a?(0,h.jsx)(t.vs,{}):null===s||void 0===s?void 0:s.map(((e,s)=>{let{lat:a,lng:n}=e;return(0,h.jsx)(t.X0,{position:{lat:a,lng:n}},s)}))}):(0,h.jsx)("h3",{children:" Loading...."})]})}},98649:(e,s,a)=>{a.r(s),a.d(s,{default:()=>A});var n=a(65043),t=a(9866),c=a(53358),l=a(33723),i=a(44816),o=a(86856),r=a(10457),d=a(14282),m=(a(72213),a(50423)),h=(a(51359),a(15075),a(47522)),p=(a(19980),a(79904)),x=a.n(p),u=a(70579);const g=e=>{const[s,a]=(0,n.useState)([]),[t,c]=(0,n.useState)([]),[l,i]=(0,n.useState)([]);(0,n.useEffect)((()=>{const s=Object.entries(e.vehicles).map((e=>{const s=e[1].map((e=>({label:e.vehicleName,value:e.id})));return{value:e[0],label:e[0],children:s}}));i([...s])}),[e.vehicles]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"checkboxTree",children:(0,u.jsx)(x(),{nodes:l,checked:s,expanded:t,onCheck:e=>{a(e)},onExpand:e=>{c(e)},showNodeIcon:!1,icons:{expandOpen:(0,u.jsx)("i",{class:"fa-solid fa-minus"}),expandClose:(0,u.jsx)("i",{class:"fa-solid fa-plus"}),uncheck:(0,u.jsx)("i",{class:"fa-regular fa-square",style:{fontSize:"16px"}}),check:(0,u.jsx)("i",{class:"fa-solid fa-square-check",style:{fontSize:"16px"}}),halfCheck:(0,u.jsx)("i",{class:"fa-regular fa-square-minus",style:{fontSize:"16px"}})}})}),(0,u.jsx)("div",{className:"text-center  pt-2 ",children:(0,u.jsx)(d.A,{className:" mb-5",variant:"primary btn-md ",type:"submit",onClick:()=>{const a=s.map((e=>JSON.parse(e)));console.log(a),e.handleToggleCardPositionHandler()},children:"Save Selection"})})]})};var j=a(40078);const f=e=>{let{geoFences:s,handleToggleCardPositionHandler:a}=e;const[t,c]=(0,n.useState)([]),[l,i]=(0,n.useState)([]),[o,r]=(0,n.useState)([]);(0,n.useEffect)((()=>{const e=Object.entries(s).map((e=>{let[s,a]=e;return{value:s,label:s,children:a.map((e=>({label:e.name,value:e.id})))}}));r(e)}),[s]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"checkboxTree",children:(0,u.jsx)(x(),{nodes:o,checked:t,expanded:l,onCheck:e=>{c(e)},onExpand:e=>{i(e)},showNodeIcon:!1,icons:{expandOpen:(0,u.jsx)("i",{className:"fa-solid fa-minus"}),expandClose:(0,u.jsx)("i",{className:"fa-solid fa-plus"}),uncheck:(0,u.jsx)("i",{className:"fa-regular fa-square",style:{fontSize:"16px"}}),check:(0,u.jsx)("i",{className:"fa-solid fa-square-check",style:{fontSize:"16px"}}),halfCheck:(0,u.jsx)("i",{className:"fa-regular fa-square-minus",style:{fontSize:"16px"}})}})}),(0,u.jsx)("div",{className:"text-center  pt-2 ",children:(0,u.jsx)(d.A,{className:" mb-5",variant:"primary btn-md ",type:"submit",onClick:()=>{const e=t.map((e=>JSON.parse(e)));console.log(e),a()},children:"Save Selection"})})]})},v=e=>{const s=(0,j.r_)(),{Running:a,Idle:t,Stopped:c,Inactive:l,nodata:i,total:o}=s,[r,d]=(0,n.useState)("All"),[m,p]=(0,n.useState)([]);(0,n.useEffect)((()=>{const e=(0,j.kw)(r);p(e)}),[r]);const x=JSON.parse(localStorage.getItem("userJsonData")).filter((e=>"vehicle"===e.designation)).map((e=>({id:e.id,name:e.vehicleName})));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"vehicle_tracking-object",children:[(0,u.jsxs)("span",{className:"light fs-9 ".concat("Running"===r&&"vehicle_tracking-active"),onClick:()=>d("Running"),children:[(0,u.jsx)("p",{children:a}),(0,u.jsx)("span",{children:"Running"})]}),(0,u.jsxs)("span",{pill:!0,className:"light fs-9 ".concat("Idle"===r&&"vehicle_tracking-active"),onClick:()=>d("Idle"),children:[(0,u.jsx)("p",{children:t}),(0,u.jsx)("span",{children:"Idle"})]}),(0,u.jsxs)("span",{pill:!0,className:"light fs-9 ".concat("Stopped"===r&&"vehicle_tracking-active"),onClick:()=>d("Stopped"),children:[(0,u.jsx)("p",{children:c}),(0,u.jsx)("span",{children:"Stopped"})]}),(0,u.jsxs)("span",{pill:!0,className:"light fs-9 ".concat("Inactive"===r&&"vehicle_tracking-active"),onClick:()=>d("Inactive"),children:[(0,u.jsx)("p",{children:l}),(0,u.jsx)("span",{children:"InActive"})]}),(0,u.jsxs)("span",{pill:!0,className:"light fs-9 ".concat("NoData"===r&&"vehicle_tracking-active"),onClick:()=>d("NoData"),children:[(0,u.jsx)("p",{children:i}),(0,u.jsx)("span",{children:"NoData"})]}),(0,u.jsxs)("span",{className:"light fs-9 ".concat("All"===r&&"vehicle_tracking-active"),onClick:()=>d("All"),children:[(0,u.jsx)("p",{children:o}),(0,u.jsx)("span",{children:"Total"})]})]}),(0,u.jsx)("div",{className:"d-flex mt-4 mb-4",children:(0,u.jsx)(h.ReactSearchAutocomplete,{items:x,className:"w-100",styling:{height:"30px",marginRight:"10px",fontSize:"12px",color:"#4A4646"},onSearch:e=>{if(""===e){const e=(0,j.kw)(r);p(e)}},onSelect:e=>{const s=(0,j.kw)(r);console.log(s);const a=Object.entries(s).filter((s=>s[1].filter((s=>s.id==e.id)).length>0)).reduce(((s,a)=>{let[n,t]=a;return t.map((a=>{a.vehicleName===e.name&&(s[n]=[a])})),s}),{});p(a)}})}),(0,u.jsx)(g,{vehicles:m,handleToggleCardPositionHandler:e.handleToggleCardPosition})]})},N=e=>{const[s,a]=(0,n.useState)("All"),[t,c]=(0,n.useState)([]),[l,i]=(0,n.useState)([]),[o,m]=(0,n.useState)([]),[p,x]=(0,n.useState)(!1),[g,j]=(0,n.useState)(!1),f=JSON.parse(localStorage.getItem("userJsonData")),[v,N]=(0,n.useState)(f.filter((e=>"company"===e.role))),[S,k]=(0,n.useState)(f.filter((e=>"Driver"===e.designation))),C=S.filter((e=>"Allocated"===e.activityStatus)),b=S.filter((e=>"Not Allocated"===e.activityStatus)),y=S.length,A=e=>{console.log(t),c((s=>{const a=[...s];return a[e]=!a[e],a}))};(0,n.useEffect)((()=>{if("All"!==s){if(N(f.filter((e=>"company"===e.role))),x(!0),"Allocated"===s){const e=C.map((e=>e.parentCompany)).filter(((e,s,a)=>a.indexOf(e)===s));N(v.filter((s=>e.some((e=>e===s.userName)))))}if("Not Allocated"===s){const e=b.map((e=>e.parentCompany)).filter(((e,s,a)=>a.indexOf(e)===s));N(v.filter((s=>e.some((e=>e===s.userName)))))}}else x(!1)}),[s]);const _=f.filter((e=>"Driver"===e.designation)).map((e=>({id:e.id,name:e.firstName+" "+e.lastName})));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"px-2 driver_tracking-object",children:[(0,u.jsxs)("span",{bg:"",pill:!0,className:"light fs-9 ".concat("Allocated"===s?"vehicle_tracking-active":g&&"pe-none"),onClick:()=>a("Allocated"),children:[(0,u.jsx)("p",{children:C.length}),(0,u.jsx)("span",{children:"Allocated"})]}),(0,u.jsxs)("span",{bg:"",pill:!0,className:"light fs-9 ".concat("Not Allocated"===s?"vehicle_tracking-active":g&&"pe-none"),onClick:()=>a("Not Allocated"),children:[(0,u.jsx)("p",{children:b.length}),(0,u.jsx)("span",{children:"Not Allocated"})]}),(0,u.jsxs)("span",{bg:"",pill:!0,className:"light fs-9 ".concat("Total"===s?"vehicle_tracking-active":g&&"pe-none"),onClick:()=>a("Total"),children:[(0,u.jsx)("p",{children:y}),(0,u.jsx)("span",{children:"Total"})]})]}),(0,u.jsx)("div",{className:"d-flex mt-4 mb-4",children:(0,u.jsx)(h.ReactSearchAutocomplete,{items:_,className:"w-100",styling:{position:"absolute",zIndex:999},onSearch:(e,s)=>{a("All"),j(!1),x(!1),k(f.filter((e=>"Driver"===e.designation))),N(f.filter((e=>"company"===e.role)))},onSelect:e=>{a("All"),x(!0),j(!0);var s=f.filter((s=>"Driver"===s.designation&&s.id===e.id)),n=v.filter((e=>e.userName===s[0].parentCompany));k(s),N(n)}})}),(0,u.jsx)("div",{className:"d-flex flex-column bg-white p-2",style:{border:" 1px solid white",marginTop:".5rem",height:"65vh",overflowY:"scroll"},children:v.map(((e,a)=>{var n=[];return 0===l.length&&v.map((e=>l.push([])&&t.push(!1))),p?"All"===s?n=S:"Allocated"===s?n=C.filter((s=>s.parentCompany===e.userName)):"Not Allocated"===s?n=b.filter((s=>s.parentCompany===e.userName)):"Total"===s&&(n=f.filter((s=>"Driver"===s.designation&&s.parentCompany===e.userName))):n=f.filter((s=>"Driver"===s.designation&&s.parentCompany===e.userName)),(0,u.jsx)(r.A,{className:"accordion accordion-primary",defaultActiveKey:"0",children:(0,u.jsxs)(r.A.Item,{className:"accordion-item",eventKey:"$/{i}",children:[(0,u.jsxs)(r.A.Header,{className:"accordian-header rounded-sm",children:[(0,u.jsx)("div",{className:"form-check custom-checkbox bs_exam_topper_all",style:{marginRight:"10px"},children:(0,u.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox".concat(a),onChange:()=>((e,s,a,n)=>{var c=[...l];t[n]?(c[n]=[],i(c)):a.map((e=>c[n].push(e.id))),console.log(c)})(e.id,0,n,a),onClick:()=>A(a),checked:t[a],required:!0})}),e.userName]}),0===n.length?(0,u.jsx)(r.A.Body,{className:"p-2 text-center fs-4 heading ",children:"No Record Found"}):n.map(((e,s)=>(0,u.jsx)(r.A.Body,{className:"accordian-body",eventKey:"".concat(a),children:(0,u.jsxs)("div",{onClick:()=>{m(o.concat(e.id))},className:"d-flex align-items-center border-bottom heading driver-select-object p-2",children:[(0,u.jsx)("div",{className:"form-check custom-checkbox ms-3 me-3 bs_exam_topper",children:(0,u.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:()=>((e,s)=>{const a=[...l];if(a[s].includes(e)){const n=a[s].indexOf(e);a[s].splice(n,1),2===a[s].length&&A(s)}else a[s].push(e),3===a[s].length&&A(s);console.log(a),i(a)})(e.id,a),checked:l[a].includes(e.id),required:!0})}),(0,u.jsxs)("span",{className:"fs-4 ms-2",children:[e.firstName," ",e.lastName]})]},s)})))]},a)})}))}),(0,u.jsx)("div",{className:"mt-3 text-center",children:(0,u.jsx)(d.A,{className:"w-25 btn-md",variant:"primary btn-md",children:"XLS"})})]})},S=e=>{const s=JSON.parse(localStorage.getItem("geofenceData")),[a,t]=(0,n.useState)(s),[c,l]=(0,n.useState)([]),[i,o]=(0,n.useState)(""),r=(a.filter((e=>e.company.toLowerCase().includes(i.toLowerCase()))),a.reduce(((e,s)=>(e[s.company]||(e[s.company]=[]),e[s.company].push(s),e)),{}));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"d-flex mt-4 mb-4",children:(0,u.jsx)(h.ReactSearchAutocomplete,{onSearch:e=>{console.log("Search Query:",e),o(e)},className:"w-100",placeholder:"Search by company name",styling:{height:"30px",marginRight:"10px",fontSize:"12px",color:"#red"}})}),(0,u.jsx)("div",{className:"d-flex flex-column bg-white p-2",style:{border:" 1px solid white",marginTop:".5rem",height:"65vh",overflowY:"scroll"},children:(0,u.jsx)(f,{geoFences:r,handleToggleCardPositionHandler:e.handleToggleCardPosition})})]})},k=e=>{let{tabData:s,handleToggleCardPosition:a,isOutside:n}=e;const t={name:"Company1",drivers:[{name:"driver1",timeStamp:"22-02-2024 3:00 PM",status:"running"},{name:"driver2",timeStamp:"22-02-2024 3:00 PM",status:"idle"},{name:"driver3",timeStamp:"22-02-2024 3:00 PM",status:"inactive"},{name:"driver4",timeStamp:"22-02-2024 3:00 PM",status:"running"},{name:"driver5",timeStamp:"22-02-2024 3:00 PM",status:"stopped"},{name:"driver6",timeStamp:"22-02-2024 3:00 PM",status:"stopped"},{name:"driver7",timeStamp:"22-02-2024 3:00 PM"}],allocatedDriver:4,notAllocatedDriver:3,totalDriver:7},c=[v,N,S];return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"default-tab outer-container ".concat(n?"toggleBarInside":"toggleBarOutside"),children:[(0,u.jsx)("button",{onClick:a,className:"driver_tracking_button",children:n?(0,u.jsx)(m.m6W,{}):(0,u.jsx)(m.OQo,{})}),(0,u.jsxs)(i.A.Container,{defaultActiveKey:s[0].name.toLowerCase(),children:[(0,u.jsx)(o.A,{as:"ul",className:"nav-tabs tracking_navTabs",children:s.map(((e,s)=>{const a=e.icon;return(0,u.jsx)(o.A.Item,{as:"li",children:(0,u.jsxs)(o.A.Link,{eventKey:e.name.toLowerCase(),children:[(0,u.jsx)(a,{className:"tab-icon"}),e.name]})},s)}))}),(0,u.jsx)(i.A.Content,{className:"p-2 py-4",style:{background:"#f5f5f5"},children:s.map(((e,s)=>{const n=c[s];return(0,u.jsx)(i.A.Pane,{eventKey:e.name.toLowerCase(),children:(0,u.jsx)(n,{data:t,handleToggleCardPosition:a})},s)}))})]})]})})};var C=a(60397),b=a(60184),y=a(6720);const A=()=>{const{currentPosition:e,setCurrentPosition:s}=(0,n.useContext)(l.D),[a,i]=(0,n.useState)(!0),o=[{name:"Object",icon:C.ETQ},{name:"Driver",icon:b.x$1},{name:"Geofence",icon:y.vVi}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(t.A,{mainTitle:"Vehicle Tracking",pageTitle:"Vehicle Tracking",parentTitle:"Tracking"}),(0,u.jsx)("div",{className:"backdrop ".concat(a?"d-none":"d-block"),onClick:()=>i(!0)}),(0,u.jsx)("div",{className:"p-2",children:(0,u.jsx)(c.A,{data:[{lat:30.7099475,lng:76.6900474},{lat:30.7333,lng:76.7794}]})}),(0,u.jsx)(k,{tabData:o,handleToggleCardPosition:()=>{i(!a)},isOutside:a})]})}}}]);
//# sourceMappingURL=5163.3c249ca8.chunk.js.map