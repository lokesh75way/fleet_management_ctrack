{"version":3,"file":"static/js/8415.3de5e9e0.chunk.js","mappings":"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","sources":["features/technician/api.js","features/technician/components/TechnicianTable.jsx","features/technician/pages/List.jsx"],"sourcesContent":["import { axiosInstance as axios } from \"@/services/api\";\n\nexport const getTechnicianById = async (id) => {\n  const { data } = await axios.get(`/technicians/${id}`);\n  return data.data;\n};\n\nexport const getAllTechnicians = async (page, limit, filter) => {\n  const params = {\n    page: page || 1,\n    limit: limit || 10,\n    ...filter,\n  };\n\n  const { data } = await axios.get(\"/technicians\", { params });\n  return {\n    data: data.data.technicians,\n    totalPage: data.data.totalPage,\n    totalCount: data.data.count,\n  };\n};\n\nexport const deleteTechnician = async (id) => {\n  return await axios.delete(`/technicians/${id}`);\n};\n\nexport const createTechnician = async (data) => {\n  return await axios.post(\"/technicians\", data);\n};\n\nexport const updateTechnician = async (data, id) => {\n  return await axios.patch(`/technicians/${id}`, data);\n};\n\nexport const getTasks = async (page = 1, limit = 10) => {\n  let url = `/technician-tasks?page=${page}&limit=${limit}`;\n  const { data } = await axios.get(url);\n  return {\n    data: data.data.data,\n    totalPage: data.data.totalPage,\n    totalCount: data.data.totalCount,\n  };\n};\n\nexport const deleteTask = async (id) => {\n  return await axios.delete(`/technician-tasks/${id}`);\n};\n\nexport const createTask = async (data) => {\n  return await axios.post(\"/technician-tasks\", data);\n};\n\nexport const updateTask = async (data, id) => {\n  return await axios.patch(`/technician-tasks/${id}`, data);\n};\n","import React from \"react\";\nimport { MdDelete } from \"react-icons/md\";\nimport { FaEdit } from \"react-icons/fa\";\n\nimport usePermissions from \"@/hooks/usePermissions\";\nimport { Link } from \"react-router-dom\";\nimport DeleteModal from \"@/components/Modal/DeleteModal\";\n\nconst TechnicianTable = ({\n  tableData,\n  currentPage,\n  itemsPerPage,\n  onConfirmDelete,\n}) => {\n  const { can } = usePermissions();\n  const editPermission = can(\"technician\", \"modify\");\n  const deletePermission = can(\"technician\", \"delete\");\n  const startIndex = (currentPage - 1) * itemsPerPage + 1;\n\n  return (\n    <>\n      {tableData.map((item, index) => (\n        <tr key={index}>\n          <td>\n            <span>{startIndex + index}</span>\n          </td>\n          <td>\n            <div className=\"products\">\n              <div>\n                <h6>{item.firstName + item.lastName}</h6>\n              </div>\n            </div>\n          </td>\n\n          <td>\n            <span className=\"text-primary\">{item.email}</span>\n          </td>\n          <td>\n            <span>{item.mobileNumber}</span>\n          </td>\n\n          <td>\n            <span>{item.address.country}</span>\n          </td>\n          <td>\n            <span>{item.technicianNo}</span>\n          </td>\n          {(editPermission || deletePermission) && (\n            <td>\n              <span className=\"d-flex justify-content-center\">\n                {editPermission && (\n                  <Link to={`/technician/edit/${item?._id}`}>\n                    <span className=\"cursor-pointer\">\n                      <FaEdit\n                        style={{\n                          color: \"green\",\n                          fontSize: \"1.2rem\",\n                        }}\n                      />\n                    </span>\n                  </Link>\n                )}\n                {deletePermission && (\n                  <DeleteModal\n                    className=\"cursor-pointer \"\n                    onConfirmDelete={onConfirmDelete}\n                    id={item._id}\n                  >\n                    <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n                  </DeleteModal>\n                )}\n              </span>\n            </td>\n          )}\n        </tr>\n      ))}\n    </>\n  );\n};\n\nexport default TechnicianTable;\n","import React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  keepPreviousData,\n  useMutation,\n  useQuery,\n  useQueryClient,\n} from \"@tanstack/react-query\";\n\nimport TechnicianTable from \"../components/TechnicianTable\";\n\nimport TableSkeleton from \"@/components/Skeleton/Table\";\nimport usePermissions from \"@/hooks/usePermissions\";\nimport { getApiErrorMessage } from \"@/utils/helper\";\nimport { notifyError } from \"@/utils/toast\";\nimport usePagination from \"@/hooks/usePagination\";\nimport MainPagetitle from \"@/components/MainPagetitle\";\nimport Paginate from \"@/components/Paginate\";\nimport { deleteTechnician, getAllTechnicians } from \"../api\";\n\nconst TechnicianList = () => {\n  const { t } = useTranslation();\n  const { can } = usePermissions();\n  const { page, goToPage, setCount, totalCount } = usePagination();\n  const itemsPerPage = 10;\n  const queryClient = useQueryClient();\n\n  const { data, isLoading, isFetching } = useQuery({\n    queryKey: [\"technicians\", page],\n    queryFn: () => getAllTechnicians(page),\n    placeholderData: keepPreviousData,\n    staleTime: Infinity,\n  });\n\n  const { mutate } = useMutation({\n    onError: (err) => {\n      notifyError(getApiErrorMessage(err));\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries(\"technicians\");\n    },\n    mutationFn: deleteTechnician,\n  });\n\n  useEffect(() => {\n    if (data) setCount(data.totalCount);\n  }, [data]);\n\n  const handlePageClick = ({ selected }) => {\n    goToPage(selected + 1);\n  };\n\n  const headers = [\n    t(\"technicianId\"),\n    t(\"technicianName\"),\n    t(\"email\"),\n    t(\"contactNumber\"),\n    t(\"location\"),\n    t(\"technicianNumber\"),\n  ];\n\n  if (can(\"technician\", \"modify\") || can(\"technician\", \"delete\")) {\n    headers.push(t(\"action\"));\n  }\n\n  return (\n    <>\n      <MainPagetitle\n        mainTitle={t(\"technicianDetails\")}\n        pageTitle={t(\"technicianDetails\")}\n        parentTitle={t(\"home\")}\n      />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"table-responsive active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t(\"technician\")}</h4>\n                    <div>\n                      {can(\"technician\", \"add\") && (\n                        <Link\n                          to={\"/technician/create\"}\n                          className=\"btn btn-primary btn-sm ms-1\"\n                          data-bs-toggle=\"offcanvas\"\n                        >\n                          + {t(\"technician\")}\n                        </Link>\n                      )}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    <div className=\"table-responsive\">\n                      {isFetching || isLoading ? (\n                        <TableSkeleton />\n                      ) : (\n                        <table\n                          id=\"empoloyees-tblwrapper\"\n                          className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                        >\n                          <thead>\n                            <tr>\n                              {headers.map((header) => (\n                                <th key={header}>{t(header)}</th>\n                              ))}\n                            </tr>\n                          </thead>\n                          <tbody>\n                            <TechnicianTable\n                              onConfirmDelete={mutate}\n                              tableData={data?.data || []}\n                              currentPage={page}\n                              itemsPerPage={itemsPerPage}\n                            />\n                          </tbody>\n                        </table>\n                      )}\n                    </div>\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                        {t(\"showing\")} {(page - 1) * 10 + 1} {t(\"to\")}{\" \"}\n                        {Math.min(page * 10, totalCount)} {t(\"of\")} {totalCount}{\" \"}\n                        {t(\"entries\")}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                        <Paginate\n                          totalCount={totalCount}\n                          itemsPerPage={itemsPerPage}\n                          handlePageClick={handlePageClick}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default TechnicianList;\n"],"names":["getTechnicianById","async","data","axios","get","concat","id","getAllTechnicians","page","limit","filter","params","technicians","totalPage","totalCount","count","deleteTechnician","delete","createTechnician","post","updateTechnician","patch","getTasks","arguments","length","undefined","url","deleteTask","createTask","updateTask","_ref","tableData","currentPage","itemsPerPage","onConfirmDelete","can","usePermissions","editPermission","deletePermission","startIndex","_jsx","_Fragment","children","map","item","index","_jsxs","className","firstName","lastName","email","mobileNumber","address","country","technicianNo","Link","to","_id","FaEdit","style","color","fontSize","DeleteModal","MdDelete","TechnicianList","t","useTranslation","goToPage","setCount","usePagination","queryClient","useQueryClient","isLoading","isFetching","useQuery","queryKey","queryFn","placeholderData","keepPreviousData","staleTime","Infinity","mutate","useMutation","onError","err","notifyError","getApiErrorMessage","onSuccess","invalidateQueries","mutationFn","useEffect","headers","push","MainPagetitle","mainTitle","pageTitle","parentTitle","TableSkeleton","header","TechnicianTable","Math","min","Paginate","handlePageClick","selected"],"sourceRoot":""}