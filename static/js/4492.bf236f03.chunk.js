"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[4492],{79055:(e,l,a)=>{a.d(l,{A:()=>v});var s=a(65043),n=a(13052),t=a(28334),i=a(74805),o=a(42297),r=a(85756),c=a(74117),d=a(70579);const u=e=>{let{countryCode:l,customStyle:a,setValue:n,id:t,dValues:i,Comptype:u}=e;const{t:m}=(0,c.Bd)(),[v,x]=(0,s.useState)([]),[b,h]=(0,s.useState)(null);(0,s.useEffect)((()=>{const e=r.Ay.getCountry(l);if(e){const l=e.timezones;l&&l.length>0&&(x(l.map((e=>({label:"(GMT ".concat(f(e),") ").concat(e," "),value:e})))),h({label:"(GMT ".concat(f(l[0]),") ").concat(l[0]," "),value:l[0]}),n("timezone",l[0]))}}),[l]),(0,s.useEffect)((()=>{if(i&&t){var e,l;const a="companyId"===u?null===(e=i.companyId)||void 0===e?void 0:e.timezone:"businessGroupId"===u?null===(l=i.businessGroupId)||void 0===l?void 0:l.timezone:i.timezone;n("timezone",a),a&&(h({label:"(GMT ".concat(f(a),") ").concat(a),value:a}),console.log(b,"hi"))}}),[i,t]);const f=e=>{const l=r.Ay.getTimezone(e).utcOffset,a=Math.abs(Math.floor(l/60)),s=Math.abs(l%60);return"".concat(l>=0?"+":"-").concat(a,":").concat(s.toString().padStart(2,"0"))};return(0,d.jsxs)("div",{className:"col-xl-3",children:[(0,d.jsxs)("label",{htmlFor:"timezone",children:[m("timezone"),":"]}),(0,d.jsx)(o.Ay,{id:"timezone",value:b,styles:a,onChange:e=>{n("timezone",e.value),h(e)},options:v})]})},m={control:e=>({...e,padding:".25rem 0 "})},v=e=>{let{register:l,setValue:a,errors:r,getValues:v,locationData:x,dValues:b,id:h,showCity:f,Comptype:y,showtimeZone:p=!0}=e;const{t:j}=(0,c.Bd)(),[N,g]=(0,s.useState)(null),[A,I]=(0,s.useState)(null),[S,C]=(0,s.useState)(null),[V,w]=(0,s.useState)([]),[E,D]=(0,s.useState)([]),[z,F]=(0,s.useState)([]),[G,k]=(0,s.useState)("IND"),[L,M]=(0,s.useState)(null);(0,s.useEffect)((()=>{(0,n.xb)().then((e=>{w(e)}))}),[]),(0,s.useEffect)((()=>{if(h){if(null!==b&&void 0!==b&&b.city&&(a("city",b.city),C({value:b.city,label:b.city})),null!==b&&void 0!==b&&b.country){a("country",b.country);const e=q.find((e=>e.value===(null===b||void 0===b?void 0:b.country)));e&&J(e)}if(null!==b&&void 0!==b&&b.state&&(a("state",b.state||""),I({value:b.state,label:b.state||""}),null!==b&&void 0!==b&&b.country&&null!==b&&void 0!==b&&b.state&&L)){const e=E.find((e=>W(e)===b.state));e&&B(L,e.id)}}else{var e;if(null!==x&&void 0!==x&&null!==(e=x.country)&&void 0!==e&&e.isoAlpha3){var l,s,t,i,o,r,c;g({value:null===x||void 0===x||null===(l=x.country)||void 0===l?void 0:l.isoAlpha3,label:null===x||void 0===x||null===(s=x.country)||void 0===s?void 0:s.isoName}),a("country",null===x||void 0===x||null===(t=x.country)||void 0===t?void 0:t.isoAlpha3),k(null===x||void 0===x||null===(i=x.country)||void 0===i?void 0:i.isoAlpha2);const e=T(null===x||void 0===x||null===(o=x.country)||void 0===o?void 0:o.isoAlpha3);var d,u,m,v,f,y;if(M(e),null!==x&&void 0!==x&&null!==(r=x.location)&&void 0!==r&&r.principalSubdivision)I({value:null===x||void 0===x||null===(d=x.location)||void 0===d?void 0:d.principalSubdivision,label:(null===x||void 0===x||null===(u=x.location)||void 0===u?void 0:u.principalSubdivision)||""}),a("state",(null===x||void 0===x||null===(m=x.location)||void 0===m?void 0:m.principalSubdivision)||""),(0,n.Wm)(e).then((l=>{D(l);const a=l.find((e=>{var l;return W(e)===(null===x||void 0===x||null===(l=x.location)||void 0===l?void 0:l.principalSubdivision)}));a&&B(e,a.id)}));else(0,n.Wm)(e).then((e=>{D(e)}));if(null!==x&&void 0!==x&&null!==(c=x.location)&&void 0!==c&&c.city)a("city",null===x||void 0===x||null===(v=x.location)||void 0===v?void 0:v.city),C({value:null===x||void 0===x||null===(f=x.location)||void 0===f?void 0:f.city,label:null===x||void 0===x||null===(y=x.location)||void 0===y?void 0:y.city})}}}),[x,h,b,V]);const T=e=>{const l=V.find((l=>l.iso3===e));return l?l.id:null},B=async(e,l)=>{if(e&&l)try{const a=await(0,n.mA)(e,l);F(a)}catch(a){console.error("Error loading cities:",a),F([])}else F([])},J=async e=>{const l=e.value,s=T(l);M(s);const t=V.find((e=>e.iso3===l));k(t.iso2),a("country",l),g({value:l,label:t.name}),D([]),F([]),I(null),C(null),a("state",""),a("city","");const i=await(0,n.Wm)(s);D(i)},W=e=>"United Arab Emirates"===(null===N||void 0===N?void 0:N.label)&&e.name.endsWith(" Emirate")?e.name.replace(" Emirate",""):e.name,q=V.map((e=>({value:e.iso3,label:e.name}))),O=E.map((e=>({value:e.name,label:W(e)}))),U=z.map((e=>({value:e.name,label:e.name})));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,d.jsx)("label",{className:"form-label",children:j("country")}),(0,d.jsx)(o.Ay,{options:q,value:N,styles:m,onChange:J},"country-".concat(null===N||void 0===N?void 0:N.value)),!N&&(0,d.jsx)(t.A,{errorName:r.country})]}),(0,d.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,d.jsx)("label",{className:"form-label",children:j("state")}),(0,d.jsx)(o.Ay,{options:O,value:A,styles:m,onChange:async e=>{const l=e.value,s=E.find((e=>e.name===l)),n=W(s);a("state",n),I({value:n,label:n}),F([]),C(null),a("city",""),await B(L,s.id)},isDisabled:!N},"state-".concat(null===A||void 0===A?void 0:A.value)),!A&&(0,d.jsx)(t.A,{errorName:r.state})]}),f&&(0,d.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,d.jsx)("label",{className:"form-label",children:j("city")}),z.length>0?(0,d.jsx)(o.Ay,{options:U,value:S,styles:m,onChange:e=>{const l=e.value;a("city",l),C({value:l,label:l})},isDisabled:!A},"city-".concat(null===S||void 0===S?void 0:S.value)):(0,d.jsx)(i.A,{type:"text",register:l,label:"City",name:"city",placeholder:"",defaultValue:v("city")}),(0,d.jsx)(t.A,{errorName:r.city})]}),f&&p&&(0,d.jsx)(u,{setValue:a,id:h,countryCode:G,customStyle:m,Comptype:y})]})}},99793:(e,l,a)=>{a.d(l,{A:()=>r});a(65043);var s=a(74805),n=a(28334),t=a(27940),i=a(44978),o=a(70579);const r=e=>{var l,a,r,c,d,u,m,v;let{field:x,fields:b,index:h,register:f,getValues:y,errors:p,remove:j,id:N}=e;return(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"d-flex align-items-center",children:[b.length>1&&(0,o.jsx)("div",{className:"flex-grow-1 mb-3",children:(0,o.jsxs)("h5",{children:["User ",h+1]})}),b.length>1&&(0,o.jsx)("div",{className:"mr-5",onClick:()=>(e=>{j(e)})(h),children:t.Os.Delete})]}),(0,o.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[(0,i.t)("name")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(s.A,{type:"text",register:f,label:"name",name:"userInfo.".concat(h,".name"),placeholder:"",defaultValue:y("userInfo.".concat(h,".name"))}),(0,o.jsx)(n.A,{errorName:null===(l=p.userInfo)||void 0===l||null===(a=l[h])||void 0===a?void 0:a.name})]}),(0,o.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[(0,i.t)("designation")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(s.A,{type:"text",register:f,label:"designation",name:"userInfo.".concat(h,".designation"),placeholder:"",defaultValue:y("userInfo.".concat(h,".designation"))}),(0,o.jsx)(n.A,{errorName:null===(r=p.userInfo)||void 0===r||null===(c=r[h])||void 0===c?void 0:c.designation})]}),(0,o.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[(0,i.t)("mobileNumber"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(s.A,{type:"number",register:f,name:"userInfo.".concat(h,".mobileNumber"),label:"Mobile Number",placeholder:"",min:"0",onInput:e=>{const l=Math.max(0,e.target.value);e.target.value=l<1?"":l},defaultValue:y("userInfo.".concat(h,".mobileNumber"))}),(0,o.jsx)(n.A,{errorName:null===(d=p.userInfo)||void 0===d||null===(u=d[h])||void 0===u?void 0:u.mobileNumber})]}),(0,o.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[(0,i.t)("email"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(s.A,{type:"email",register:f,name:"userInfo.".concat(h,".email"),label:"email",placeholder:"",defaultValue:y("userInfo.".concat(h,".email"))}),(0,o.jsx)(n.A,{errorName:null===(m=p.userInfo)||void 0===m||null===(v=m[h])||void 0===v?void 0:v.email})]})]},x.id)}},94492:(e,l,a)=>{a.d(l,{A:()=>p});var s=a(65043),n=a(14282),t=a(24858),i=a(42297),o=a(73216),r=a(74117),c=a(28334),d=a(74805),u=a(92548),m=a(95474),v=a(99793),x=a(87460),b=a(79055),h=a(75636),f=a(70579);const y={control:e=>({...e,padding:".25rem 0 "})},p=e=>{let{setValue:l,getValues:a,register:p,onSubmit:j,handleSubmit:N,errors:g,control:A,isFormSubmitting:I,watch:S}=e;const{fields:C,append:V,remove:w}=(0,t.jz)({control:A,name:"userInfo"}),[E,D]=(0,s.useState)(),{t:z}=(0,r.Bd)(),{id:F}=(0,o.g)(),{location:G,error:k}=(0,h.A)();return(0,f.jsxs)("div",{className:"p-4",children:[(0,f.jsxs)("div",{className:"row",style:{width:"85%",margin:"auto"},children:[(0,f.jsx)("div",{children:k&&(0,f.jsx)("p",{children:k})}),(0,f.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,f.jsx)("label",{className:"form-label",children:z("businessGroup")}),(0,f.jsx)("span",{className:"text-danger",children:"*"}),(0,f.jsx)(t.xI,{name:"businessGroupId",control:A,rules:{required:!0},render:e=>{let{field:{onChange:s,value:n,name:t,ref:i}}=e;return(0,f.jsx)(u.A,{onChange:e=>{a("businessGroupId")!=e.value&&(l("businessGroupId",e.value),l("companyName",""),l("companyId",""),D(null))},defaultValue:n,customStyles:y,ref:i,name:t})}}),!a("businessGroupId")&&(0,f.jsx)(c.A,{errorName:g.businessGroupId})]}),(0,f.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,f.jsxs)("label",{className:"form-label",children:[z("company"),(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(t.xI,{name:"companyId",control:A,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:n,ref:t}}=e;return(0,f.jsx)(m.A,{groupId:S("businessGroupId"),onChange:e=>{l("companyId",e.value),l("companyName",e.label),D(e)},defaultValue:s,value:E,customStyles:y,ref:t,name:n})}}),!a("companyId")&&(0,f.jsx)(c.A,{errorName:g.companyId})]}),(0,f.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,f.jsxs)("label",{className:"form-label",children:[z("branchName")," ",(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(d.A,{type:"text",register:p,required:!0,label:"Branch Name",name:"branchName",placeholder:"",defaultValue:a("branchName")}),(0,f.jsx)(c.A,{errorName:g.branchName})]}),(0,f.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,f.jsx)("label",{className:"form-label",children:z("tradeLicenseNumber")}),(0,f.jsx)(d.A,{type:"text",register:p,label:"tradeLicenseNumber",name:"tradeLicenseNumber",placeholder:"",defaultValue:a("tradeLicenseNumber")}),(0,f.jsx)(c.A,{errorName:g.tradeLicenseNumber})]}),(0,f.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,f.jsx)("label",{className:"form-label",children:z("officeNo")}),(0,f.jsx)(d.A,{type:"text",register:p,label:"officeNumber",name:"officeNumber",placeholder:"",defaultValue:a("officeNumber")}),(0,f.jsx)(c.A,{errorName:g.officeNumber})]}),(0,f.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,f.jsxs)("label",{className:"form-label",children:[z("email"),(0,f.jsx)("span",{className:"text-danger",children:"*"})]}),(0,f.jsx)(d.A,{type:"email",register:p,label:"Email",name:"email",placeholder:"",defaultValue:a("email"),disabled:!!F}),(0,f.jsx)(c.A,{errorName:g.email})]}),(0,f.jsx)(b.A,{register:p,setValue:l,dValues:{country:a("country"),state:a("state"),city:a("city")},errors:g,getValues:a,locationData:G,id:F,showCity:!0,Comptype:""}),(0,f.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,f.jsx)("label",{className:"form-label",children:z("dateFormat")}),(0,f.jsx)(t.xI,{name:"dateFormat",control:A,render:e=>{let{field:{onChange:a,value:s,name:n,ref:t}}=e;return(0,f.jsx)(i.Ay,{onChange:e=>l("dateFormat",null===e||void 0===e?void 0:e.value),options:x.wJ,ref:t,name:n,styles:y,value:x.wJ.find((e=>e.value===s))||x.wJ[0],defaultValue:x.wJ[0]})}}),(0,f.jsx)(c.A,{errorName:g.dateFormat})]}),(0,f.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,f.jsx)("label",{className:"form-label",children:z("timeFormat")}),(0,f.jsx)(t.xI,{name:"timeFormat",control:A,render:e=>{let{field:{onChange:a,value:s,name:n,ref:t}}=e;return(0,f.jsx)(i.Ay,{onChange:e=>l("timeFormat",e.value),options:x.lD,ref:t,name:n,styles:y,value:x.lD.find((e=>e.value===s))||x.lD[1],defaultValue:x.lD[1]})}})]}),(0,f.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",margin:"2rem 0"},children:[(0,f.jsx)("h3",{children:z("contactDetails")}),(0,f.jsxs)(n.A,{type:"button",onClick:()=>{V({name:"",designation:"",mobileNumber:null,email:""})},style:{width:"10%"},children:[" ","ADD"]})]}),C.map(((e,l)=>(0,f.jsx)(v.A,{field:e,index:l,register:p,getValues:a,errors:g,fields:C,remove:w,id:F},e.id)))]}),(0,f.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,f.jsxs)(n.A,{type:"submit",disabled:I,onClick:N(j),style:{width:"10%"},children:[" ",z("submit")]})})]})}},75636:(e,l,a)=>{a.d(l,{A:()=>t});var s=a(65043),n=a(77154);const t=()=>{const[e,l]=(0,s.useState)(null),[a,t]=(0,s.useState)(null),[i,o]=(0,s.useState)(null),[r,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(async()=>{try{u(!0);const e="bdc_031d6a642ab94e0b8f5376a97ded1793";if(!e)throw new Error("API key is missing.");const a=await n.A.get("https://api.bigdatacloud.net/data/ip-geolocation?key=".concat(e));l(a.data.location.latitude),t(a.data.location.longitude);const s=a.data;c(s),o(null)}catch(i){o("Error getting location data: "+i.message)}finally{u(!1)}})()}),[]),{location:r,lat:e,lng:a,isLoading:d,error:i}}}}]);
//# sourceMappingURL=4492.bf236f03.chunk.js.map