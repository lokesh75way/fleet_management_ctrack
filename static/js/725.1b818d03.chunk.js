"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[725],{79055:(e,a,l)=>{l.d(a,{A:()=>v});var t=l(65043),s=l(13052),n=l(28334),i=l(74805),o=l(42297),r=l(85756),c=l(74117),d=l(70579);const u=e=>{let{countryCode:a,customStyle:l,setValue:s,id:n,dValues:i,Comptype:u}=e;const{t:m}=(0,c.Bd)(),[v,h]=(0,t.useState)([]),[p,x]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=r.Ay.getCountry(a);if(e){const a=e.timezones;a&&a.length>0&&(h(a.map((e=>({label:"(GMT ".concat(y(e),") ").concat(e," "),value:e})))),x({label:"(GMT ".concat(y(a[0]),") ").concat(a[0]," "),value:a[0]}),s("timezone",a[0]))}}),[a]),(0,t.useEffect)((()=>{if(i&&n){var e,a;const l="companyId"===u?null===(e=i.companyId)||void 0===e?void 0:e.timezone:"businessGroupId"===u?null===(a=i.businessGroupId)||void 0===a?void 0:a.timezone:i.timezone;s("timezone",l),l&&(x({label:"(GMT ".concat(y(l),") ").concat(l),value:l}),console.log(p,"hi"))}}),[i,n]);const y=e=>{const a=r.Ay.getTimezone(e).utcOffset,l=Math.abs(Math.floor(a/60)),t=Math.abs(a%60);return"".concat(a>=0?"+":"-").concat(l,":").concat(t.toString().padStart(2,"0"))};return(0,d.jsxs)("div",{className:"col-xl-3",children:[(0,d.jsxs)("label",{htmlFor:"timezone",children:[m("timezone"),":"]}),(0,d.jsx)(o.Ay,{id:"timezone",value:p,styles:l,onChange:e=>{s("timezone",e.value),x(e)},options:v})]})},m={control:e=>({...e,padding:".25rem 0 "})},v=e=>{let{register:a,setValue:l,errors:r,getValues:v,locationData:h,dValues:p,id:x,showCity:y,Comptype:f,showtimeZone:g=!0}=e;const{t:b}=(0,c.Bd)(),[j,N]=(0,t.useState)(null),[I,A]=(0,t.useState)(null),[S,w]=(0,t.useState)(null),[C,E]=(0,t.useState)([]),[P,V]=(0,t.useState)([]),[T,F]=(0,t.useState)([]),[q,M]=(0,t.useState)("IND"),[D,z]=(0,t.useState)(null);(0,t.useEffect)((()=>{(0,s.xb)().then((e=>{E(e)}))}),[]),(0,t.useEffect)((()=>{if(x){if(null!==p&&void 0!==p&&p.city&&(l("city",p.city),w({value:p.city,label:p.city})),null!==p&&void 0!==p&&p.country){l("country",p.country);const e=K.find((e=>e.value===(null===p||void 0===p?void 0:p.country)));e&&G(e)}if(null!==p&&void 0!==p&&p.state&&(l("state",p.state||""),A({value:p.state,label:p.state||""}),null!==p&&void 0!==p&&p.country&&null!==p&&void 0!==p&&p.state&&D)){const e=P.find((e=>O(e)===p.state));e&&k(D,e.id)}}else{var e;if(null!==h&&void 0!==h&&null!==(e=h.country)&&void 0!==e&&e.isoAlpha3){var a,t,n,i,o,r,c;N({value:null===h||void 0===h||null===(a=h.country)||void 0===a?void 0:a.isoAlpha3,label:null===h||void 0===h||null===(t=h.country)||void 0===t?void 0:t.isoName}),l("country",null===h||void 0===h||null===(n=h.country)||void 0===n?void 0:n.isoAlpha3),M(null===h||void 0===h||null===(i=h.country)||void 0===i?void 0:i.isoAlpha2);const e=L(null===h||void 0===h||null===(o=h.country)||void 0===o?void 0:o.isoAlpha3);var d,u,m,v,y,f;if(z(e),null!==h&&void 0!==h&&null!==(r=h.location)&&void 0!==r&&r.principalSubdivision)A({value:null===h||void 0===h||null===(d=h.location)||void 0===d?void 0:d.principalSubdivision,label:(null===h||void 0===h||null===(u=h.location)||void 0===u?void 0:u.principalSubdivision)||""}),l("state",(null===h||void 0===h||null===(m=h.location)||void 0===m?void 0:m.principalSubdivision)||""),(0,s.Wm)(e).then((a=>{V(a);const l=a.find((e=>{var a;return O(e)===(null===h||void 0===h||null===(a=h.location)||void 0===a?void 0:a.principalSubdivision)}));l&&k(e,l.id)}));else(0,s.Wm)(e).then((e=>{V(e)}));if(null!==h&&void 0!==h&&null!==(c=h.location)&&void 0!==c&&c.city)l("city",null===h||void 0===h||null===(v=h.location)||void 0===v?void 0:v.city),w({value:null===h||void 0===h||null===(y=h.location)||void 0===y?void 0:y.city,label:null===h||void 0===h||null===(f=h.location)||void 0===f?void 0:f.city})}}}),[h,x,p,C]);const L=e=>{const a=C.find((a=>a.iso3===e));return a?a.id:null},k=async(e,a)=>{if(e&&a)try{const l=await(0,s.mA)(e,a);F(l)}catch(l){console.error("Error loading cities:",l),F([])}else F([])},G=async e=>{const a=e.value,t=L(a);z(t);const n=C.find((e=>e.iso3===a));M(n.iso2),l("country",a),N({value:a,label:n.name}),V([]),F([]),A(null),w(null),l("state",""),l("city","");const i=await(0,s.Wm)(t);V(i)},O=e=>"United Arab Emirates"===(null===j||void 0===j?void 0:j.label)&&e.name.endsWith(" Emirate")?e.name.replace(" Emirate",""):e.name,K=C.map((e=>({value:e.iso3,label:e.name}))),U=P.map((e=>({value:e.name,label:O(e)}))),_=T.map((e=>({value:e.name,label:e.name})));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,d.jsx)("label",{className:"form-label",children:b("country")}),(0,d.jsx)(o.Ay,{options:K,value:j,styles:m,onChange:G},"country-".concat(null===j||void 0===j?void 0:j.value)),!j&&(0,d.jsx)(n.A,{errorName:r.country})]}),(0,d.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,d.jsx)("label",{className:"form-label",children:b("state")}),(0,d.jsx)(o.Ay,{options:U,value:I,styles:m,onChange:async e=>{const a=e.value,t=P.find((e=>e.name===a)),s=O(t);l("state",s),A({value:s,label:s}),F([]),w(null),l("city",""),await k(D,t.id)},isDisabled:!j},"state-".concat(null===I||void 0===I?void 0:I.value)),!I&&(0,d.jsx)(n.A,{errorName:r.state})]}),y&&(0,d.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,d.jsx)("label",{className:"form-label",children:b("city")}),T.length>0?(0,d.jsx)(o.Ay,{options:_,value:S,styles:m,onChange:e=>{const a=e.value;l("city",a),w({value:a,label:a})},isDisabled:!I},"city-".concat(null===S||void 0===S?void 0:S.value)):(0,d.jsx)(i.A,{type:"text",register:a,label:"City",name:"city",placeholder:"",defaultValue:v("city")}),(0,d.jsx)(n.A,{errorName:r.city})]}),y&&g&&(0,d.jsx)(u,{setValue:l,id:x,countryCode:q,customStyle:m,Comptype:f})]})}},24853:(e,a,l)=>{l.d(a,{I7:()=>i,LF:()=>n,Vz:()=>s,Xu:()=>o,ZS:()=>c,ub:()=>r});var t=l(94505);const s=async()=>{const{data:e}=await t.S.get("/modules");return null===e||void 0===e?void 0:e.data},n=async e=>{let a="/feature-template";void 0!==e&&(a+="?page=".concat(e,"&limit=",10));const{data:l}=await t.S.get(a);return{data:l.data.data,totalPage:l.data.totalPage,totalCount:l.data.totalCount}},i=async e=>await t.S.delete("/feature-template/".concat(e)),o=async e=>await t.S.post("/feature-template",e),r=async e=>await t.S.patch("/feature-template",e),c=async e=>{var a;const{data:l}=await t.S.get("/feature-template/".concat(e));return null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.data}},25847:(e,a,l)=>{l.d(a,{A:()=>m});var t=l(65043),s=l(42297),n=l(75714),i=l(28261),o=l(94692),r=l(24853),c=l(45350),d=l(42880),u=l(70579);const m=e=>{let{onChange:a,value:l,customStyles:m,isDisabled:v,name:h,placeholder:p,defaultValue:x}=e;const[y,f]=(0,t.useState)(l),{page:g,setPage:b}=(0,o.A)(),{can:j}=(0,c.A)(),{data:N,fetchNextPage:I,hasNextPage:A,isFetching:S,isFetchingNextPage:w}=(0,n.q)({queryKey:["templates"],queryFn:e=>{let{pageParam:a}=e;return b(a),(0,r.LF)(a)},initialPageParam:1,getNextPageParam:(e,a)=>{var l;return null!==(l=e.data)&&void 0!==l&&l.length?g+1:null},enabled:j("groups","view"),staleTime:1/0}),{refetch:C}=(0,i.I)({queryKey:["template",x],queryFn:()=>(0,r.ZS)(x),enabled:!1,staleTime:1/0}),E=(0,t.useMemo)((()=>{let e=[];return null===N||void 0===N||N.pages.forEach((a=>{a.data.forEach((a=>{e.push({value:a._id,label:a.name})}))})),e}),[N]);(0,t.useEffect)((()=>((null===l||void 0===l?void 0:l.value)!=(null===y||void 0===y?void 0:y.value)&&f(l),()=>{})),[l,E]),(0,t.useEffect)((()=>((async()=>{if(x&&!l){const l=E.find((e=>e.value===x));if(l)return f(l),void a(l);try{const{data:e}=await C();if(e){const l={label:e.name,value:e._id};return f(l),void a(l)}}catch(e){console.log(e)}}})(),()=>{})),[x,l]);return(0,u.jsx)(s.Ay,{options:E,value:y,onChange:a,styles:m,name:h,placeholder:p,isDisabled:v||!j("groups","view"),onMenuScrollToBottom:async e=>{e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&!S&&A&&!w&&I()},menuShouldScrollIntoView:!1,isLoading:S,components:{LoadingIndicator:d.A}})}},70725:(e,a,l)=>{l.r(a),l.d(a,{default:()=>z});var t=l(65043),s=l(73216),n=l(44816),i=l(86856),o=l(24858),r=(l(9531),l(74117)),c=l(63248),d=l(28261),u=l(47097),m=l(22166),v=l(18403),h=l(40399),p=l(14282),x=l(42297),y=l(89698),f=l(28334),g=l(74805),b=l(92548),j=l(95474),N=l(4437),I=l(25107),A=l(75636),S=l(87460),w=l(79055),C=l(25847),E=l(70579);const P={control:e=>({...e,padding:"0.25rem 0 "})},V=e=>{let{register:a,setValue:l,onSubmit:n,handleSubmit:i,getValues:c,errors:d,control:u,watch:m,isFormSubmitting:v}=e;const[h,V]=(0,t.useState)(!1),[T,F]=(0,t.useState)(!1),{t:q}=(0,r.Bd)(),{id:M}=(0,s.g)(),{location:D,error:z}=(0,A.A)(),[L,k]=(0,t.useState)(),[G,O]=(0,t.useState)(),[K,U]=(0,t.useState)(),[_,B]=(0,t.useState)();return(0,E.jsxs)("div",{className:"p-4",children:[(0,E.jsxs)("div",{className:"row",style:{width:"85%",margin:"auto"},children:[(0,E.jsx)("div",{children:z&&(0,E.jsx)("p",{children:z})}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,E.jsx)("label",{className:"form-label",children:q("businessGroup")}),(0,E.jsx)(o.xI,{name:"businessGroupId",control:u,rules:{required:!0},render:e=>{let{field:{onChange:a,value:t,name:s,ref:n}}=e;return(0,E.jsx)(b.A,{onChange:async e=>{e.value!=c("businessGroupId")&&(l("businessGroupId",e.value),O(null),l("companyId",""),U(null),l("branchIds",""),l("vehicleIds",""),B([]))},defaultValue:t,customStyles:P,ref:n,name:s})}}),(0,E.jsx)(f.A,{errorName:d.businessGroupId})]}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,E.jsx)("label",{className:"form-label",children:q("company")}),(0,E.jsx)(o.xI,{name:"companyId",control:u,rules:{required:!0},render:e=>{let{field:{value:a,name:t,ref:s}}=e;return(0,E.jsx)(j.A,{onChange:async e=>{e.value!=c("companyId")&&(l("companyId",e.value),O(e),U([]),l("branchIds",""),l("vehicleIds",""),B([]))},groupId:m("businessGroupId"),defaultValue:a,value:G,customStyles:P,name:t,ref:s})}}),(0,E.jsx)(f.A,{errorName:d.companyId})]}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,E.jsx)("label",{className:"form-label",children:q("branch")}),(0,E.jsx)(o.xI,{name:"branchIds",control:u,rules:{required:!0},render:e=>{let{field:{onChange:a,value:t,name:s,ref:n}}=e;return(0,E.jsx)(N.A,{companyId:m("companyId"),groupId:m("businessGroupId"),onChange:e=>{l("branchIds",null===e||void 0===e?void 0:e.map((e=>e.value))),l("vehicleIds",""),U(e),B([])},defaultValue:c("branchIds"),value:K,isMulti:!0,customStyles:P,ref:n,name:s})}}),(0,E.jsx)(f.A,{errorName:d.branchId})]}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,E.jsx)("label",{className:"form-label",children:q("vehicle")}),(0,E.jsx)(o.xI,{name:"vehicleIds",control:u,rules:{required:!0},render:e=>{let{field:{onChange:a,value:t,name:s,ref:n}}=e;return(0,E.jsx)(I.A,{onChange:e=>{const a=null===e||void 0===e?void 0:e.map((e=>e.value));l("vehicleIds",a),B(e)},defaultValue:c("vehicleIds"),value:_,branchIds:m("branchIds"),companyId:m("companyId"),groupId:m("businessGroupId"),customStyles:P,ref:n,isMulti:!0,name:s})}}),!c("Branch")&&(0,E.jsx)(f.A,{errorName:d.parent})]}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,E.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[q("email")," ",(0,E.jsx)("span",{className:"text-danger",children:"*"})]}),(0,E.jsx)(g.A,{type:"email",register:a,label:"Email",className:"form-control",name:"email",placeholder:""}),(0,E.jsx)(f.A,{errorName:d.email})]}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,E.jsxs)("label",{className:"form-label",children:[q("username")," ",(0,E.jsx)("span",{className:"text-danger",children:"*"})]}),(0,E.jsx)(g.A,{type:"text",register:a,label:"User Name",name:"userName",placeholder:""}),(0,E.jsx)(f.A,{errorName:d.userName})]}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,E.jsxs)("label",{className:"form-label",children:[q("mobileNumber")," ",(0,E.jsx)("span",{className:"text-danger",children:"*"})]}),(0,E.jsx)(g.A,{type:"text",register:a,label:"Mobile Number",name:"mobileNumber",min:"0",onInput:e=>{const a=Math.max(0,e.target.value);e.target.value=a<1?"":a},placeholder:""}),(0,E.jsx)(f.A,{errorName:d.mobileNumber})]}),(0,E.jsx)(w.A,{register:a,setValue:l,errors:d,getValues:c,dValues:{state:c("state"),country:c("country")},locationData:D,id:M,showCity:!1}),!M&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,E.jsxs)("label",{className:"form-label",children:[q("password")," ",(0,E.jsx)("span",{className:"text-danger",children:"*"})]}),(0,E.jsxs)("div",{className:"position-relative",children:[(0,E.jsx)(g.A,{type:h?"text":"password",register:a,label:"Password",name:"password",placeholder:""}),(0,E.jsx)("span",{className:"showPasswordIcon",onClick:()=>{V(!h)},children:h?(0,E.jsx)(y.mI_,{}):(0,E.jsx)(y.ZT8,{})})]}),(0,E.jsx)(f.A,{errorName:d.password})]}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,E.jsxs)("label",{className:"form-label",children:[q("confirmPassword")," ",(0,E.jsx)("span",{className:"text-danger",children:"*"})]}),(0,E.jsxs)("div",{className:"position-relative",children:[(0,E.jsx)(g.A,{type:T?"text":"password",register:a,label:"Confirm Password",name:"confirmPassword",placeholder:""}),(0,E.jsx)("span",{className:"showPasswordIcon",onClick:()=>{F(!T)},children:T?(0,E.jsx)(y.mI_,{}):(0,E.jsx)(y.ZT8,{})})]}),(0,E.jsx)(f.A,{errorName:d.confirmPassword})]})," "]}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,E.jsxs)("label",{className:"form-label",children:[q("featureTemplate")," ",(0,E.jsx)("span",{className:"text-danger",children:"*"})]}),(0,E.jsx)(o.xI,{name:"featureTemplateId",control:u,rules:{required:!0},render:e=>{let{field:{onChange:a,value:t,name:s,ref:n}}=e;return(0,E.jsx)(C.A,{onChange:e=>{l("featureTemplateId",e.value),k(e)},ref:n,name:s,defaultValue:c("featureTemplateId"),value:L,customStyles:P})}}),!c("featureTemplateId")&&(0,E.jsx)(f.A,{errorName:d.featureTemplateId})]}),(0,E.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,E.jsxs)("label",{htmlFor:"exampleFormControlInput6",className:"form-label",children:[q("unitOfDistance"),(0,E.jsx)("span",{className:"text-danger",children:"*"})]}),(0,E.jsx)(o.xI,{name:"unitOfDistance",control:u,render:e=>{let{field:{onChange:a,value:t,name:s,ref:n}}=e;return(0,E.jsx)(x.Ay,{onChange:e=>{l("unitOfDistance",e.value)},options:S.jZ,ref:n,name:s,styles:P,value:{label:c("unitOfDistance"),value:c("unitOfDistance")}})}}),!c("unitOfDistance")&&(0,E.jsx)(f.A,{errorName:d.unitOfDistance})]})]}),(0,E.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,E.jsxs)(p.A,{type:"submit",disabled:v,onClick:i(n),style:{width:"10%"},children:[" ",q("submit")]})})]})};var T=l(70228),F=l(42457),q=l(69620),M=l(272),D=l(15395);const z=()=>{const{id:e}=(0,s.g)(),{t:a}=(0,r.Bd)(),[l,p]=(0,t.useState)(0),x=[a("account")],y=[V],f=(0,s.Zp)(),g=(0,c.jE)(),b=(0,m.d4)((e=>e.auth.user)),{data:j,isError:N,isLoading:I}=(0,d.I)({queryKey:["user",e],queryFn:()=>(0,q.kl)(e),enabled:!!e,staleTime:1/0}),A=(0,t.useMemo)((()=>({...j})),[j]);(0,t.useEffect)((()=>{N&&e&&((0,F.U)("Not able to fetch user data"),f("/not-found"))}),[N&&e]);const{register:S,formState:{errors:w},setValue:C,getValues:P,control:z,handleSubmit:L,watch:k}=(0,o.mN)({resolver:(0,v.t)(e?T.I2:T.it),values:A}),G=e=>(0,F.U)((0,M.SU)(e)),{mutate:O,isPending:K}=(0,u.n)({mutationFn:e=>{let{data:a,id:l}=e;return(0,q.TK)(l,a)},onSuccess:()=>{(0,F.V)("User Updated Successfully"),g.invalidateQueries(["users"]),f("/user")},onError:G}),{mutate:U,isPending:_}=(0,u.n)({mutationFn:q.kg,onSuccess:()=>{(0,F.V)("New User Created"),g.invalidateQueries(["users"]),f("/user")},onError:G}),B=a=>{e?O({id:e,data:a}):(a.role="USER",a.parent=b.userName,a.type="STAFF",U(a))};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(h.A,{mainTitle:a("user"),pageTitle:a(e?"edit":"create"),parentTitle:a("user")}),(0,E.jsx)("div",{className:"m-2 p-2",children:(0,E.jsx)(o.Op,{children:(0,E.jsx)("form",{onSubmit:L(B),children:(0,E.jsx)("div",{className:"default-tab",children:(0,E.jsxs)(n.A.Container,{defaultActiveKey:x[0].toLowerCase(),children:[(0,E.jsx)(i.A,{as:"ul",className:"nav-tabs",children:x.map(((e,a)=>(0,E.jsx)(i.A.Item,{as:"li",children:(0,E.jsx)(i.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:a===l,onClick:()=>p(a),children:e})},a)))}),(0,E.jsx)(n.A.Content,{className:"pt-4",children:I?(0,E.jsx)(D.A,{height:500}):x.map(((e,a)=>{const t=y[a];return(0,E.jsx)(n.A.Pane,{eventKey:e.toLowerCase(),active:a===l,children:(0,E.jsx)(t,{data:x,control:z,setValue:C,register:S,getValues:P,errors:w,onSubmit:B,handleSubmit:L,isFormSubmitting:_||K,watch:k})},a)}))})]})})})})})]})}},25107:(e,a,l)=>{l.d(a,{A:()=>h});var t=l(65043),s=l(42297),n=l(44978),i=l(73216),o=l(75714),r=l(28261),c=l(94692),d=l(34713),u=l(45350),m=l(42880),v=l(70579);const h=e=>{let{branchIds:a,companyId:l,groupId:h,ref:p,onChange:x,value:y,defaultValue:f,customStyles:g,isDisabled:b,isMulti:j,name:N}=e;const[I,A]=(0,t.useState)(y),{page:S,setPage:w}=(0,c.A)(),{can:C}=(0,u.A)(),{pathname:E}=(0,i.zy)(),{data:P,fetchNextPage:V,hasNextPage:T,isFetching:F,isFetchingNextPage:q}=(0,o.q)({queryKey:["vehicles",a,l,h],queryFn:e=>{let{pageParam:t}=e;return w(t),(0,d.lp)(t,10,{branchIds:Array.isArray(a)?a.join(","):a,companyId:l,groupId:h})},initialPageParam:1,getNextPageParam:(e,a)=>{var l;return null!==(l=e.data)&&void 0!==l&&l.length?S+1:null},enabled:C("vehicle","view"),staleTime:1/0}),{refetch:M}=(0,r.I)({queryKey:["vehicle",f],queryFn:()=>(async e=>{let a=e;const l=[];Array.isArray(e)||(a=[e]);for(let t of a){const e=await(0,d.nz)(t);l.push(e)}return l})(f),enabled:!1,staleTime:1/0}),D=(0,t.useMemo)((()=>{let e=[];return null===P||void 0===P||P.pages.forEach((a=>{a.data.forEach((a=>{e.push({label:null===a||void 0===a?void 0:a.vehicleName,value:null===a||void 0===a?void 0:a._id})}))})),e}),[P]);(0,t.useEffect)((()=>{y&&y.length?A(y):A(void 0)}),[JSON.stringify(y)]),(0,t.useEffect)((()=>{(async()=>{if(f&&!y)if(Array.isArray(f)){if(!f.length)return;const a=D.filter((e=>f.some((a=>e.value===a))));if(a.length===f.length)return A(a),void x(a);try{const{data:e}=await M();if(e){const a=null===e||void 0===e?void 0:e.map((e=>({label:e.vehicleName,value:e._id})));A(a),x(a)}}catch(e){console.error("Error fetching vehicle details:",e)}}else{const a=D.find((e=>f===e.value));if(a)return A(a),void x(a);try{const{data:e}=await M();if(e&&e.length){const a={label:null===e||void 0===e?void 0:e[0].vehicleName,value:null===e||void 0===e?void 0:e[0]._id};A(a),x(a)}}catch(e){console.error("Error fetching vehicle details:",e)}}else A(y)})()}),[JSON.stringify(f),E,JSON.stringify(y)]);return(0,v.jsx)(s.Ay,{options:D,value:I,onChange:x,styles:g,ref:p,name:N,placeholder:(0,n.t)("selectVehicles"),isDisabled:b||!C("vehicle","view"),isClearable:!0,onMenuScrollToBottom:async e=>{e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&!F&&T&&!q&&V()},menuShouldScrollIntoView:!1,isLoading:F,components:{LoadingIndicator:m.A},isMulti:j})}},75636:(e,a,l)=>{l.d(a,{A:()=>n});var t=l(65043),s=l(77154);const n=()=>{const[e,a]=(0,t.useState)(null),[l,n]=(0,t.useState)(null),[i,o]=(0,t.useState)(null),[r,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{(async()=>{try{u(!0);const e="bdc_031d6a642ab94e0b8f5376a97ded1793";if(!e)throw new Error("API key is missing.");const l=await s.A.get("https://api.bigdatacloud.net/data/ip-geolocation?key=".concat(e));a(l.data.location.latitude),n(l.data.location.longitude);const t=l.data;c(t),o(null)}catch(i){o("Error getting location data: "+i.message)}finally{u(!1)}})()}),[]),{location:r,lat:e,lng:l,isLoading:d,error:i}}}}]);
//# sourceMappingURL=725.1b818d03.chunk.js.map