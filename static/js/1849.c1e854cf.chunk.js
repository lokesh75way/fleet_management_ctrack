"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[1849],{24725:(e,a,t)=>{t.d(a,{A:()=>o});var s=t(65043),l=t(2364),r=t(86359),n=t(70579);const o=e=>{let{onChange:a,value:t,customStyles:o,ref:i,isDisabled:c,name:m}=e;const[d,u]=(0,s.useState)([]),[h,x]=(0,s.useState)(t);return(0,s.useEffect)((()=>{(async()=>{const e=await(0,r.K$)();console.log(e.data,"dsis");const a=e.data.map((e=>({label:null===e||void 0===e?void 0:e.firstName,value:null===e||void 0===e?void 0:e._id})));u(a)})()}),[]),(0,s.useEffect)((()=>{const e=d.find((e=>e.value===t));x(e)}),[t,d]),(0,n.jsx)(l.Ay,{options:d,value:h,onChange:e=>a(e),styles:o,ref:i,name:m})}},61849:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var s=t(65043),l=t(44816),r=t(86856),n=t(24858),o=t(18403),i=t(73216),c=t(35475),m=t(31899),d=t.n(m),u=t(2364),h=(t(9531),t(15075)),x=(t(72213),t(23764)),p=t(69367),v=t(24725),j=t(70579);const g=e=>{let{Title:a,editData:t,setEditData:l,register:r,setValue:o,getValues:m,handleSubmit:g,onSubmit:b,errors:f,control:N,clearErrors:C}=e;const[y,S]=(0,s.useState)(!1),[A,T]=(0,s.useState)(),[F,L]=(0,s.useState)([]),w=((0,i.Zp)(),(0,i.zy)()),I={control:e=>({...e,padding:".25rem 0 "})},{id:D}=(0,i.g)();return(0,s.useEffect)((()=>{if(D){const e=w.state[0];L(e)}}),[D]),(0,s.useEffect)((()=>{console.log(F,"mn"),F&&D?(o("startLocation",null===F||void 0===F?void 0:F.startLocation),o("reachLocation",null===F||void 0===F?void 0:F.reachLocation),o("distance",null===F||void 0===F?void 0:F.distance),o("fuelConsumption",null===F||void 0===F?void 0:F.fuelConsumption),o("tripStatus",null===F||void 0===F?void 0:F.tripStatus),o("driver",null===F||void 0===F?void 0:F.driver)):(o("startTime",new Date),o("reachTime",new Date))}),[F,D]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"p-4",children:[(0,j.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:["Start Time ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(n.xI,{name:"startTime",control:N,render:e=>{let{value:a,name:t}=e;return(0,j.jsx)(d(),{selected:m("startTime")||new Date,className:"form-control customDateHeight",onChange:e=>o("startTime",e)})}}),(0,j.jsx)(x.A,{errorName:f.startTime})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:["Start Location ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(p.A,{type:"text",register:r,label:"Start Location",name:"startLocation",placeholder:""}),(0,j.jsx)("br",{}),(0,j.jsx)(x.A,{errorName:f.startLocation})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:["Reach Time ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(n.xI,{name:"reachTime",control:N,render:e=>{let{value:a,name:t}=e;return(0,j.jsx)(d(),{selected:m("reachTime")||new Date,className:"form-control customDateHeight",onChange:e=>o("reachTime",e)})}}),(0,j.jsx)("br",{}),(0,j.jsx)(x.A,{errorName:f.reachTime})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:["Reach Location ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(p.A,{type:"text",register:r,label:"Reach Location",name:"reachLocation",placeholder:""}),(0,j.jsx)(x.A,{errorName:f.reachLocation})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:"Distance"}),(0,j.jsx)(p.A,{type:"number",register:r,label:"Distance",name:"distance",placeholder:""})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:"Fuel Consumption"}),(0,j.jsx)(p.A,{type:"number",register:r,label:"Fuel Consumption",name:"fuelConsumption",placeholder:""})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:["Driver ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(n.xI,{name:"driver",control:N,rules:{required:!0},render:e=>{let{field:{onChange:a,value:t,name:s,ref:l}}=e;return(0,j.jsx)(v.A,{onChange:e=>{o("driver",e.value)},value:t,customStyles:I,ref:l,name:s})}}),(0,j.jsx)(x.A,{errorName:f.driver})]}),(0,j.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,j.jsx)("label",{className:"form-label",children:"Trip Status"}),(0,j.jsx)(n.xI,{name:"tripStatus",control:N,render:e=>{let{field:{onChange:a,value:t,name:s,ref:l}}=e;return(0,j.jsx)(u.Ay,{onChange:e=>{T(e.value),o("tripStatus",e.value)},options:h.av,ref:l,name:s,styles:I,defaultValue:h.av[0]})}})]})]}),(0,j.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:[(0,j.jsx)("button",{type:"submit",onClick:()=>{g(b)},className:"btn btn-primary me-1",children:"Submit"}),(0,j.jsx)(c.N_,{to:"#",onClick:()=>S(!1),className:"btn btn-danger light ms-1",children:"Cancel"})]})]})})};var b=t(87742),f=t(23577),N=t(42457),C=t(9866),y=t(74117);const S=()=>{const[e,a]=(0,s.useState)(0),t=(0,i.Zp)(),c=["Trip"],m=[g],{register:d,setValue:u,getValues:h,handleSubmit:x,clearErrors:p,formState:{errors:v},control:S}=(c.length,(0,n.mN)({resolver:(0,o.t)(b.M0)})),{id:A}=(0,i.g)(),{t:T}=(0,y.Bd)();console.log(v);const F=async e=>{if(console.log(e),A)try{return await(0,f.pj)(A,e),(0,N.V)("Trip Updated!"),void t("/settings/classifyTrips")}catch(a){console.log(a),(0,N.U)("Some error occured !!")}else try{await(0,f.C$)(e),(0,N.V)("New Trip Created!"),t("/settings/classifyTrips"),console.log("Submit botn",e)}catch(s){console.log("Error",s),(0,N.U)("Some error occured !!")}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(C.A,{mainTitle:T("Trip"),pageTitle:T(A?"edit":"create"),parentTitle:T("ClassifyTrips")}),(0,j.jsx)("div",{className:"m-2 p-2",children:(0,j.jsx)(n.Op,{children:(0,j.jsx)("form",{onSubmit:x(F),children:(0,j.jsx)("div",{className:"default-tab",children:(0,j.jsxs)(l.A.Container,{defaultActiveKey:c[0].toLowerCase(),children:[(0,j.jsx)(r.A,{as:"ul",className:"nav-tabs",children:c.map(((t,s)=>(0,j.jsx)(r.A.Item,{as:"li",children:(0,j.jsx)(r.A.Link,{style:{padding:".5rem 2rem"},eventKey:t.toLowerCase(),active:s===e,onClick:()=>a(s),children:t})},s)))}),(0,j.jsx)(l.A.Content,{className:"pt-4",children:c.map(((a,t)=>{const s=m[t];return(0,j.jsx)(l.A.Pane,{eventKey:a.toLowerCase(),active:t===e,children:(0,j.jsx)(s,{data:c,control:S,setValue:u,register:d,getValues:h,errors:v,handleSubmit:x,onSubmit:F})},t)}))})]})})})})})]})}},23577:(e,a,t)=>{t.d(a,{BG:()=>o,C$:()=>r,nH:()=>l,pj:()=>n});var s=t(77154);(0,t(88472).A)();const l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;console.log("driverIdhi",t,l,r);let n="/trips?page=".concat(e,"&limit=10");n+=t&&l&&r?"&driverId=".concat(t,"&start=").concat(l,"&end=").concat(r):"&status=".concat(a);const o=await s.A.get(n);return{data:o.data.data.data,totalLength:o.data.data.count}},r=async e=>s.A.post("/trips",e),n=async(e,a)=>s.A.patch("/trips/".concat(e),a),o=async e=>s.A.delete("/trips/".concat(e))}}]);
//# sourceMappingURL=1849.c1e854cf.chunk.js.map