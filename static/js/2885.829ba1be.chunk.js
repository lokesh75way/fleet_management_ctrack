"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[2885],{40965:(e,s,a)=>{a.d(s,{A:()=>d});var r=a(65043),l=a(14282),n=a(28334),o=a(74805),i=a(89698),t=(a(43),a(70579));const d=e=>{let{getValues:s,register:a,onSubmit:d,handleSubmit:c,errors:u,isFormSubmitting:m}=e;const[h,x]=(0,r.useState)(!1),[p,w]=(0,r.useState)(!1),[j,g]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"row",style:{width:"70%",margin:"auto"},children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"col-xl-6 mb-3 position-relative",children:[(0,t.jsxs)("label",{className:"form-label",children:["Old Password",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"position-relative",children:[(0,t.jsx)(o.A,{type:h?"text":"password",register:a,name:"oldPassword",label:"Old Password",placeholder:"",defaultValue:s("oldPassword")}),(0,t.jsx)("span",{className:"showPasswordIcon",onClick:()=>{x(!h)},children:h?(0,t.jsx)(i.mI_,{}):(0,t.jsx)(i.ZT8,{})})]}),(0,t.jsx)(n.A,{errorName:u.oldPassword})]}),(0,t.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,t.jsxs)("label",{className:"form-label",children:["New Password",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"position-relative",children:[(0,t.jsx)(o.A,{type:p?"text":"password",register:a,label:"New Password",name:"newPassword",placeholder:"",defaultValue:s("newPassword")}),(0,t.jsx)("span",{className:"showPasswordIcon",onClick:()=>{w(!p)},children:p?(0,t.jsx)(i.mI_,{}):(0,t.jsx)(i.ZT8,{})})]}),(0,t.jsx)(n.A,{errorName:u.newPassword})]}),(0,t.jsxs)("div",{className:"col-xl-6 mb-3 position-relative",children:[(0,t.jsxs)("label",{className:"form-label",children:["Retype Password",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("div",{className:"position-relative",children:[(0,t.jsx)(o.A,{type:j?"text":"password",register:a,label:"Retype Password",name:"confirmPassword",placeholder:""}),(0,t.jsx)("span",{className:"showPasswordIcon",onClick:()=>{g(!j)},children:j?(0,t.jsx)(i.mI_,{}):(0,t.jsx)(i.ZT8,{})})]}),(0,t.jsx)(n.A,{errorName:u.confirmPassword})]})]})}),(0,t.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,t.jsxs)(l.A,{type:"submit",disabled:m,onClick:c(d),style:{width:"10%"},children:[" ","Submit"]})})]})}},92885:(e,s,a)=>{a.r(s),a.d(s,{default:()=>P});var r=a(65043),l=a(73216),n=a(44816),o=a(86856),i=a(24858),t=a(18403),d=a(74117),c=a(63248),u=a(28261),m=a(47097),h=(a(9531),a(40399)),x=a(16613),p=a(40965),w=a(70228),j=a(42457),g=a(57288),v=a(272),b=a(87460),f=a(15395),N=a(70579);const P=()=>{var e,s;const{t:a}=(0,d.Bd)(),[P,A]=(0,r.useState)(0),{id:y}=(0,l.g)();let S=[a(y?"editBusinessGroup":"newBusinessGroup"),a("changePassword")],C=[x.A,p.A];const F=(0,l.Zp)(),V=(0,c.jE)();y||(S=[a("newBusinessGroup")],C=[x.A]);const{data:I,isLoading:k,isError:E}=(0,u.I)({queryKey:["group",y],queryFn:()=>(0,g.Qo)(y),enabled:!!y,staleTime:1/0});(0,r.useEffect)((()=>{E&&y&&((0,j.U)("Not able to fetch business group data"),F("/not-found"))}),[E&&y]);const T=(0,r.useMemo)((()=>{var e,s;return{...I,...null===I||void 0===I?void 0:I.businessGroupId,logo:null!==(e=null===I||void 0===I||null===(s=I.businessGroupId)||void 0===s?void 0:s.logo)&&void 0!==e?e:null}}),[I]),{register:G,formState:{errors:L},setValue:B,getValues:K,control:Z,handleSubmit:_}=(0,i.mN)({mode:"onChange",reValidateMode:"onChange",defaultValues:{userInfo:[{name:"",designation:"",mobileNumber:null,email:""}],timeFormat:null===(e=b.lD[1])||void 0===e?void 0:e.value,dateFormat:null===(s=b.wJ[1])||void 0===s?void 0:s.value},resolver:(0,t.t)(0===P?(0,w.eP)(y):w.Mw),values:T}),M=e=>(0,j.U)((0,v.SU)(e)),{mutate:O,isPending:Q}=(0,m.n)({mutationFn:e=>{let{data:s,id:a}=e;return(0,g.vW)(a,s)},onSuccess:()=>{(0,j.V)("Business group has been updated!"),V.invalidateQueries(["groups"]),F("/business")},onError:M}),{mutate:U,isPending:q}=(0,m.n)({mutationFn:g.wj,onSuccess:()=>{(0,j.V)("Business group created"),V.invalidateQueries(["groups"]),F("/business")},onError:M}),{mutate:R,isPending:D}=(0,m.n)({mutationFn:g.ec,onSuccess:()=>{(0,j.V)("Password has been changed"),F("/business")},onError:M}),J=async e=>{if(0===P)null!=e.logo&&0!==e.logo.length||delete e.logo,e.file&&0===e.file.length&&delete e.file,y?O({data:e,id:y}):U(e);else if(1===P){const s={password:e.newPassword,oldPassword:e.oldPassword,confirmPassword:e.confirmPassword,_id:y};R(s)}};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.A,{mainTitle:a("businessGroup"),pageTitle:a(y?"edit":"create"),parentTitle:a("businessGroup")}),(0,N.jsx)("div",{className:"m-2 p-2",children:(0,N.jsx)(i.Op,{children:(0,N.jsx)("form",{onSubmit:_(J),children:(0,N.jsx)("div",{className:"default-tab",children:(0,N.jsxs)(n.A.Container,{defaultActiveKey:S[0].toLowerCase(),children:[(0,N.jsx)(o.A,{as:"ul",className:"nav-tabs",children:S.map(((e,s)=>(0,N.jsx)(o.A.Item,{as:"li",children:(0,N.jsx)(o.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:s===P,onClick:()=>A(s),children:e})},s)))}),(0,N.jsx)(n.A.Content,{className:"pt-4",children:k?(0,N.jsx)(f.A,{height:500}):S.map(((e,s)=>{const a=C[s];return(0,N.jsx)(n.A.Pane,{eventKey:e.toLowerCase(),active:s===P,children:(0,N.jsx)(a,{data:S,control:Z,setValue:B,register:G,getValues:K,errors:L,handleSubmit:_,onSubmit:J,isFormSubmitting:q||Q||D})},s)}))})]})})})})})]})}}}]);
//# sourceMappingURL=2885.829ba1be.chunk.js.map