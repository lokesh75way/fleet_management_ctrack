"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[6444],{19889:(e,r,l)=>{l.d(r,{Up:()=>o,e:()=>s,f7:()=>n,ih:()=>i,lp:()=>t,nz:()=>c});var a=l(95441);const s=async e=>a.S.post("/vehicles",e),t=async(e,r)=>{let l=`/vehicles?page=${e}&limit=10`;r&&(Array.isArray(r)?r.forEach((e=>{l+=`&branchIds=${e}`})):l+=`&branchIds=${r}`);const{data:s}=await a.S.get(l);return{data:s.data.data,totalCount:s.data.totalCount}},i=async e=>a.S.delete(`/vehicles/${e}`),n=async(e,r)=>a.S.patch(`/vehicles/${r}`,e),o=async(e,r)=>{const{data:l}=await a.S.get(`/vehicles/tracking?${e}&status=${r}`);return{data:l.data.data,count:l.data.count,centerCoordinate:l.data.centerCoordinate}},c=async e=>{var r;const{data:l}=await a.S.get(`/vehicles/${e}`);return null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.data}},26444:(e,r,l)=>{l.r(r),l.d(r,{default:()=>L});var a=l(78109),s=l(36145),t=l(93576),i=l(86554),n=(l(1682),l(67236)),o=l(53252),c=l(34571),d=l(4900),m=l(67889),u=l(6986),x=l(32343),h=l(10457),b=l(29982),j=l(37235),N=l(85389),f=l(74563),p=l(75542),v=l(20460),g=l(91197),y=l(75383),A=l(47337);const w={control:e=>({...e,padding:".25rem 0 "})},C=e=>{let{register:r,setValue:l,getValues:s,errors:t,control:n,handleSubmit:o,onSubmit:d,isFormSubmitting:m}=e;const[u,x]=(0,a.useState)(!1),[h,b]=(0,a.useState)("registrationNumber"),{t:j}=(0,c.Bd)(),{id:C}=useParams();return useEffect((()=>{formData&&C&&(l("vehicleNumber",formData.vehicleNumber),l("registrationNumber",formData.registrationNumber),l("unitId",formData.unitId),l("description",formData.description),l("manufacture",formData.manufacture),l("color",formData.color),l("model",formData.model),l("group",formData.group),l("groupDescription",formData.groupDescription),l("year",formData.year),l("licenseNumber",formData.licenseNumber),l("licenseExpire",formData.licenseExpire),l("roadWorthy",formData.roadWorthy),l("roadWorthyExpire",formData.roadWorthyExpire),l("odo",formData.odo),l("odoNextService",formData.odoNextService),l("hours",formData.hours),l("hoursNextService",formData.hoursNextService),l("currentStatus",formData.currentStatus),l("currentDriver",formData.currentDriver),l("currentLocation",formData.currentLocation),l("speed",formData.speed),l("heading",formData.heading),l("skillSet",formData.skillSet))}),[formData,C]),(0,A.jsxs)("div",{className:"p-4 relative",children:[(0,A.jsx)("div",{className:"row",style:{width:"100%"},children:(0,A.jsxs)("div",{className:"border-container position-relative p-4 row",children:[(0,A.jsx)("div",{className:"heading-container d-flex align-items-center position-absolute",children:(0,A.jsx)("h4",{children:j("unitInformation")})}),(0,A.jsxs)("div",{className:"d-flex justify-content-between",style:{width:"100%"},children:[(0,A.jsxs)("div",{className:"row",style:{width:"78%"},children:[(0,A.jsxs)("div",{className:"d-flex flex-column",children:[(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:j("vehicleNumber")}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"vehicleNumber",label:"Vehicle Number",placeholder:"",defaultValue:s("vehicleNumber")}),(0,A.jsx)(p.A,{errorName:t.vehicleNumber})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("unitId")}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,label:"Unit Id",name:"unitId",placeholder:"",defaultValue:s("unitId")}),(0,A.jsx)(p.A,{errorName:t.unitId})]}),(0,A.jsxs)("div",{className:"row",children:[(0,A.jsxs)("div",{className:"col-xl-6",children:[(0,A.jsxs)("div",{className:"mb-3",children:[(0,A.jsxs)("label",{className:"form-label",children:[j("registrationNumber")," ",(0,A.jsx)("span",{className:"text-danger",children:"*"})]}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,label:"Registration Number",name:"registrationNumber",placeholder:"",defaultValue:s("registrationNumber"),disabled:"registrationNumber"!==h}),(0,A.jsx)(p.A,{errorName:t.registrationNumber})]}),(0,A.jsxs)("div",{className:"mb-3",children:[(0,A.jsxs)("label",{className:"form-label",children:[j("fleetnumber")," ",(0,A.jsx)("span",{className:"text-danger",children:"*"})]}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"fleetnumber",label:"Fleet Number",placeholder:"",defaultValue:s("fleetnumber"),disabled:"fleetNumber"!==h}),(0,A.jsx)(p.A,{errorName:t.fleetnumber})]})]}),(0,A.jsxs)("div",{className:"col-md-2 d-flex flex-column border rounded border-[#6e6e6e] custom-margin-checkbox gap-4",children:[(0,A.jsxs)("div",{className:"basic-form mt-2",children:[(0,A.jsx)("div",{className:"form-check custom-checkbox",children:(0,A.jsx)(i.xI,{name:"selectedInput",control:n,render:e=>{let{field:r}=e;return(0,A.jsx)("input",{type:"radio",className:"form-check-input",value:"registrationNumber",checked:"registrationNumber"===r.value,onChange:e=>{r.onChange(e.target.value),b(e.target.value)}})}})}),(0,A.jsx)("h5",{className:"my-4",style:{marginLeft:"20px"},children:j("Use In Reports")}),(0,A.jsx)("div",{className:"form-check custom-checkbox",children:(0,A.jsx)(i.xI,{name:"selectedInput",control:n,render:e=>{let{field:r}=e;return(0,A.jsx)("input",{type:"radio",className:"form-check-input",value:"fleetNumber",checked:"fleetNumber"===r.value,onChange:e=>{r.onChange(e.target.value),b(e.target.value)}})}})})]}),(0,A.jsx)(p.A,{errorName:t.selectedInput})]})]})]}),(0,A.jsxs)("div",{className:"row",children:[(0,A.jsxs)("div",{className:"col-xl-12 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("description")}),(0,A.jsx)(g.A,{type:"textarea",required:!0,register:r,label:"Description",name:"description",placeholder:"",defaultValue:s("description")}),(0,A.jsx)(p.A,{errorName:t.description})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("manufacture")}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,label:"Manu facture",name:"manufacture",placeholder:"",defaultValue:s("manufacture")}),(0,A.jsx)(p.A,{errorName:t.manufacture})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("year")}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,label:"Year",name:"year",placeholder:"",defaultValue:s("year")}),(0,A.jsx)(p.A,{errorName:t.year})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("model")}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,label:"Model",name:"model",placeholder:"",defaultValue:s("model")}),(0,A.jsx)(p.A,{errorName:t.model})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("color")}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,label:"Color",name:"color",placeholder:"",defaultValue:s("color")}),(0,A.jsx)(p.A,{errorName:t.color})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("vinNumber")}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,label:"VINNumber",name:"vinChassisNumber",placeholder:"",defaultValue:s("vinChassisNumber")}),(0,A.jsx)(p.A,{errorName:t.vinChassisNumber})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("engineNumber")}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,label:"Engine Number",name:"engineNumber",placeholder:"",defaultValue:s("engineNumber")}),(0,A.jsx)(p.A,{errorName:t.engineNumber})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("group")}),(0,A.jsx)(i.xI,{name:"group",control:n,rules:{required:!0},render:e=>{let{field:{onChange:r,value:a,name:t,ref:i}}=e;return(0,A.jsx)(f.Ay,{onChange:e=>{l("group",e.value)},options:v.$N,ref:i,name:t,styles:w,value:{label:s("group"),value:s("group")}})}}),(0,A.jsx)(p.A,{errorName:t.group})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("description")}),(0,A.jsx)(g.A,{type:"textarea",required:!0,register:r,label:"Description",name:"groupDescription",placeholder:"",defaultValue:s("groupDescription")}),(0,A.jsx)(p.A,{errorName:t.description})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("tollCategory")}),(0,A.jsx)(i.xI,{name:"tollCategory",control:n,rules:{required:!0},render:e=>{let{field:{onChange:r,value:a,name:t,ref:i}}=e;return(0,A.jsx)(f.Ay,{onChange:e=>{l("tollCategory",e.value)},options:v.MS,ref:i,name:t,styles:w,value:{label:s("tollCategory"),value:s("tollCategory")}})}}),(0,A.jsx)(p.A,{errorName:t.tollCategory})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,A.jsx)("label",{className:"form-label",children:j("tarrifType")}),(0,A.jsx)(i.xI,{name:"tarrifType",control:n,rules:{required:!0},render:e=>{let{field:{onChange:r,value:a,name:t,ref:i}}=e;return(0,A.jsx)(f.Ay,{onChange:e=>{l("tarrifType",e.value)},options:v.$N,ref:i,name:t,styles:w,value:{label:s("tarrifType"),value:s("tarrifType")}})}}),(0,A.jsx)(p.A,{errorName:t.tarrifType})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:j("licenseNumber")}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"licenseNumber",label:"License Number",placeholder:"",defaultValue:s("licenseNumber")}),(0,A.jsx)(p.A,{errorName:t.licenseNumber})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:j("licenseExpire")}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"licenseExpire",label:"License Expire",placeholder:"",defaultValue:s("licenseExpire")}),(0,A.jsx)(p.A,{errorName:t.licenseExpire})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:j("roadWorthy")}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"roadWorthy",label:"Road Worthy",placeholder:"",defaultValue:s("roadWorthy")}),(0,A.jsx)(p.A,{errorName:t.roadWorthy})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[j("roadWorthyExpire")," "]}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"roadWorthyExpire",label:"Road Worthy Expire",placeholder:"",defaultValue:s("roadWorthyExpire")}),(0,A.jsx)(p.A,{errorName:t.roadWorthyExpire})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{htmlFor:"exampleFormControlInput4",className:"form-label",children:j("odo")}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"odo",placeholder:""}),(0,A.jsx)(p.A,{errorName:t.odo})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{htmlFor:"exampleFormControlInput4",className:"form-label",children:j("nextService")}),(0,A.jsx)(g.A,{type:"number",register:r,name:"odoNextService",placeholder:"",defaultValue:s("odoNextService")}),(0,A.jsx)(p.A,{errorName:t.nextService})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("hours")}),(0,A.jsx)(g.A,{type:"number",register:r,name:"hours",placeholder:"",defaultValue:s("hours")}),(0,A.jsx)(p.A,{errorName:t.hours})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("nextService")}),(0,A.jsx)(g.A,{type:"number",register:r,name:"hoursNextService",placeholder:"",defaultValue:s("hoursNextService")}),(0,A.jsx)(p.A,{errorName:t.nextService})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("currentStatus")}),(0,A.jsx)(g.A,{type:"text",register:r,name:"currentStatus",placeholder:"",defaultValue:s("currentStatus")}),(0,A.jsx)(p.A,{errorName:t.currentStatus})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("speed")}),(0,A.jsx)(g.A,{type:"number",register:r,name:"speed",placeholder:"",defaultValue:s("speed")}),(0,A.jsx)(p.A,{errorName:t.speed})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("currentDriver")}),(0,A.jsx)(g.A,{type:"text",register:r,name:"currentDriver",placeholder:"",defaultValue:s("currentDriver")}),(0,A.jsx)(p.A,{errorName:t.currentDriver})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("heading")}),(0,A.jsx)(g.A,{type:"text",register:r,name:"heading",placeholder:"",defaultValue:s("heading")}),(0,A.jsx)(p.A,{errorName:t.heading})]}),(0,A.jsxs)("div",{className:"col-md-12 mb-3",children:[(0,A.jsxs)("label",{className:"form-label",children:[j("currentLocation")," "]}),(0,A.jsx)(g.A,{type:"text",register:r,name:"currentLocation",placeholder:"",defaultValue:s("currentLocation")}),(0,A.jsx)(p.A,{errorName:t.currentLocation})]})]}),(0,A.jsxs)("div",{className:"d-flex flex-column",children:[(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("skillSet")}),(0,A.jsx)(i.xI,{name:"skillSet",control:n,rules:{required:!0},render:e=>{let{field:{onChange:r,value:a,name:t,ref:i}}=e;return(0,A.jsx)(f.Ay,{onChange:e=>{l("skillSet",e.value)},options:v.KI,ref:i,name:t,styles:w,value:{label:s("skillSet"),value:s("skillSet")}})}}),(0,A.jsx)(p.A,{errorName:t.skillSet})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:j("profile")}),(0,A.jsx)(i.xI,{name:"profile",control:n,rules:{required:!0},render:e=>{let{field:{onChange:r,value:a,name:t,ref:i}}=e;return(0,A.jsx)(f.Ay,{onChange:e=>{l("profile",e.value)},options:v.Si,ref:i,name:t,styles:w,value:{label:s("profile"),value:s("profile")}})}}),(0,A.jsx)(p.A,{errorName:t.profileOwning})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsxs)("label",{className:"form-label",children:[j("owningCostCenter")," "]}),(0,A.jsx)(i.xI,{name:"owningCostCenter",control:n,rules:{required:!0},render:e=>{let{field:{onChange:r,value:a,name:t,ref:i}}=e;return(0,A.jsx)(f.Ay,{onChange:e=>{l("owningCostCenter",e.value)},options:v.H$,ref:i,name:t,styles:w,value:{label:s("owningCostCenter"),value:s("owningCostCenter")}})}}),(0,A.jsx)(p.A,{errorName:t.costCenter})]})]})]}),(0,A.jsx)("div",{className:"d-flex align-items-start flex-column",style:{width:"20%",marginLeft:"auto"},children:(0,A.jsxs)("div",{className:"d-flex flex-column align-items-center border border-[#6e6e6e] rounded p-4",children:[(0,A.jsx)(y.A,{setValue:l,register:r,label:"Business Group Logo",name:"logo",getValue:s,setLoading:x,loading:u}),(0,A.jsx)(p.A,{errorName:t.logo}),(0,A.jsxs)("div",{className:"d-flex align-items-center justify-content-center p-2 m-0",children:[(0,A.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox1"}),(0,A.jsx)("label",{className:"form-check-label",htmlFor:"customCheckBox1",children:j("syncOnce")})]})]})})]})]})}),(0,A.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,A.jsxs)(N.A,{type:"submit",disabled:m,onClick:o(d),style:{width:"10%"},children:[" ",j("next")]})})]})},S=e=>{let{register:r,name:l,label:a,checked:s,onChange:t,heading:i}=e;return(0,A.jsxs)("div",{className:"form-check",children:[(0,A.jsx)("input",{className:"form-check-input",type:"checkbox",...r(l),id:l,checked:s}),(0,A.jsx)("label",{className:"form-check-label",htmlFor:l,children:a})]})},D=e=>{let{register:r,getValues:l,errors:a,handleSubmit:s,onSubmit:t,watch:i,isFormSubmitting:n}=e;const{t:o}=(0,c.Bd)(),d=i("licenseReminder",!1),m=i("roadworthyReminder",!1);return(0,A.jsxs)("div",{className:"p-4 relative",children:[(0,A.jsx)("div",{className:"d-flex justify-content-between",style:{width:"100%"},children:(0,A.jsxs)("div",{className:"row",style:{width:"50%"},children:[(0,A.jsxs)("div",{className:"border border-1 p-3 row rounded",children:[(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:o("License number")}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,name:"licenseNumber_dupe",placeholder:"",disabled:!0,value:l("licenseNumber")}),(0,A.jsx)(p.A,{errorName:a.licenseNumber})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:o("Roadworthy number")}),(0,A.jsx)(g.A,{type:"text",required:!0,register:r,name:"roadWorthy_dupe",placeholder:"",disabled:!0,value:l("roadWorthy")}),(0,A.jsx)(p.A,{errorName:a.roadWorthy})]})]}),(0,A.jsxs)("div",{className:"border-container position-relative p-3 mt-5 row",children:[(0,A.jsx)("div",{className:"heading-container d-flex align-items-center position-absolute",children:(0,A.jsx)(S,{register:r,name:"licenseReminder",label:"License Reminder",checked:l("licenseReminder")})}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 mt-2",children:[(0,A.jsx)("label",{className:"form-label",children:o("Last renewal date")}),(0,A.jsx)(g.A,{type:"date",required:!0,register:r,name:"licenseLastRenewalDate",defaultValue:l("licenseLastRenewalDate"),disabled:!d}),(0,A.jsx)(p.A,{errorName:a.licenseLastRenewalDate})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:o("Period (months)")}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"licensePeriod",defaultValue:l("licensePeriod"),disabled:!d}),(0,A.jsx)(p.A,{errorName:a.licensePeriod})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:o("Next renewal due on")}),(0,A.jsx)(g.A,{type:"date",required:!0,register:r,name:"licenseNextRenewalDue",defaultValue:l("licenseNextRenewalDue"),disabled:!d}),(0,A.jsx)(p.A,{errorName:a.licenseNextRenewalDue})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:o("Reminder starts (weeks before expiry)")}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"licenseReminderStart",defaultValue:l("licenseReminderStart"),disabled:!d}),(0,A.jsx)(p.A,{errorName:a.licenseReminderStart})]})]}),(0,A.jsxs)("div",{className:"border-container position-relative p-3 mt-5 row",children:[(0,A.jsx)("div",{className:"heading-container d-flex align-items-center position-absolute",children:(0,A.jsx)(S,{register:r,name:"roadworthyReminder",label:"Roadworthy Reminder"})}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3 mt-2",children:[(0,A.jsx)("label",{className:"form-label",children:o("Last renewal date")}),(0,A.jsx)(g.A,{type:"date",required:!0,register:r,name:"roadworthyLastRenewalDate",defaultValue:l("roadworthyLastRenewalDate"),disabled:!m}),(0,A.jsx)(p.A,{errorName:a.roadworthyLastRenewalDate})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:o("Period (months)")}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"roadworthyPeriod",defaultValue:l("roadworthyPeriod"),disabled:!m}),(0,A.jsx)(p.A,{errorName:a.roadworthyPeriod})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:o("Next renewal due on")}),(0,A.jsx)(g.A,{type:"date",required:!0,register:r,name:"roadworthyNextRenewalDue",defaultValue:l("roadworthyNextRenewalDue"),disabled:!m}),(0,A.jsx)(p.A,{errorName:a.roadworthyNextRenewalDue})]}),(0,A.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,A.jsx)("label",{className:"form-label",children:o("Reminder starts (weeks before expiry)")}),(0,A.jsx)(g.A,{type:"number",required:!0,register:r,name:"roadworthyReminderStart",defaultValue:l("roadworthyReminderStart"),disabled:!m}),(0,A.jsx)(p.A,{errorName:a.roadworthyReminderStart})]})]})]})}),(0,A.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,A.jsx)(N.A,{type:"submit",onClick:s(t),disabled:n,style:{width:"10%"},children:o("next")})})]})};var V=l(44988),k=l(70529),I=l(19889),q=l(96152),R=l(20811);const L=()=>{const{t:e}=(0,c.Bd)(),r=(0,n.Zp)(),[l,N]=(0,a.useState)(0),{id:f}=(0,n.g)(),p=[e("information"),e("general"),e("licensing"),e("profile"),e("document")];let v=[C,b.A,D,h.A,j.A];const g=p.length,y=(0,d.jE)(),{data:w,isError:S,isLoading:L}=(0,m.I)({queryKey:["vehicle",f],queryFn:()=>(0,I.nz)(f),enabled:!!f,staleTime:1/0}),E=(0,a.useMemo)((()=>{var e;return{...w,selectedInput:null!==w&&void 0!==w&&w.fleetnumber?"fleetnumber":"registrationNumber",branchId:null===w||void 0===w||null===(e=w.branchId)||void 0===e?void 0:e._id}}),[w]);(0,a.useEffect)((()=>{S&&f&&((0,k.U)("Not able to fetch vehicle data"),r("/not-found"))}),[S&&f]);const F=(0,a.useCallback)((e=>{switch(e){case 0:return V.ac;case 1:return V.gs;case 2:return V.LL;case 3:return V.xN;case 4:return V.nJ}}),[]),{register:W,formState:{errors:P},setValue:T,getValues:$,control:U,handleSubmit:B,watch:K}=(0,i.mN)({defaultValues:{documents:[{documentType:{label:"INSURANCE",value:"INSURANCE"},file:"",expireDate:new Date,issueDate:new Date}],selectedInput:"registrationNumber"},resolver:(0,o.t)(F(l)),values:E}),M=e=>(0,k.U)((0,q.SU)(e)),{mutate:O,isPending:_}=(0,u.n)({mutationFn:I.e,onSuccess:()=>{(0,k.V)("New Vehicle Created"),y.invalidateQueries(["vehicles"]),r("/vehicle")},onError:M}),{mutate:z,isPending:Q}=(0,u.n)({mutationFn:e=>{let{data:r,id:l}=e;return(0,I.f7)(r,l)},onSuccess:()=>{(0,k.V)("Vehicle Updated Successfully"),y.invalidateQueries(["vehicles"]),r("/vehicle")},onError:M}),G=async e=>{if(l===g-1){const r=(async e=>{for(let l=0;l<g;l++){const a=F(l);try{await a.validate(e)}catch(r){return(0,k.U)("Please check all the fields are filled"),!1}}return!0})(e);if(!r)return;if(f){for(const r in e)void 0!==e[r]&&""!==e[r]||delete e[r];z({data:e,vehicleId:f})}else{for(const r in e)void 0!==e[r]&&""!==e[r]||delete e[r];delete e.test,O(e)}}else N((e=>Math.min(e+1,g-1)))};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(x.A,{mainTitle:e("vehicle"),pageTitle:e(f?"edit":"create"),parentTitle:e("vehicle")}),(0,A.jsx)("div",{className:"m-2 p-2",children:(0,A.jsx)(i.Op,{children:(0,A.jsx)("form",{onSubmit:B(G),children:(0,A.jsx)("div",{className:"default-tab",children:(0,A.jsxs)(s.A.Container,{defaultActiveKey:p[0].toLowerCase(),children:[(0,A.jsx)(t.A,{as:"ul",className:"nav-tabs",children:p.map(((e,r)=>(0,A.jsx)(t.A.Item,{as:"li",children:(0,A.jsx)(t.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:r===l,onClick:()=>N(r),children:e})},r)))}),(0,A.jsx)(s.A.Content,{className:"pt-4",children:L?(0,A.jsx)(R.A,{height:500}):p.map(((e,r)=>{const a=v[r];return(0,A.jsx)(s.A.Pane,{eventKey:e.toLowerCase(),active:r===l,children:(0,A.jsx)(a,{data:p,register:W,setValue:T,getValues:$,control:U,errors:P,handleSubmit:B,onSubmit:G,watch:K,isFormSubmitting:_||Q})},r)}))})]})})})})})]})}}}]);
//# sourceMappingURL=6444.275e96ae.chunk.js.map