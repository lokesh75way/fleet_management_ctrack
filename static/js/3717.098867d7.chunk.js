"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[3717],{68459:(e,l,a)=>{a.d(l,{A:()=>c});var s=a(78109),t=a(74563),n=(a(7695),a(55759)),r=a(97804),o=a(47337);const c=e=>{let{onChange:l,value:a,customStyles:c,branchids:m,ref:i,isDisabled:d,name:x}=e;const[h,u]=(0,s.useState)([]),[b,p]=(0,s.useState)(a),{page:j}=(0,r.A)();return(0,s.useEffect)((()=>{(async()=>{const e=(await(0,n.kw)(j,m||void 0)).data.map((e=>({label:null===e||void 0===e?void 0:e.vehicleName,value:null===e||void 0===e?void 0:e._id})));u(e)})()}),[j,m]),(0,s.useEffect)((()=>{if(a&&Array.isArray(a)){const e=h.filter((e=>a.some((l=>l===e.value))));p(e)}else p(a)}),[a,h,m]),(0,o.jsx)(t.Ay,{options:h,value:b,onChange:e=>l(e),styles:c,ref:i,name:x,isMulti:!0})}},63717:(e,l,a)=>{a.r(l),a.d(l,{default:()=>D});var s=a(78109),t=a(36145),n=a(93576),r=a(86554),o=a(53252),c=a(44988),m=a(67236),i=a(78292),d=a(75889),x=a.n(d),h=a(74563),u=(a(1682),a(34571)),b=a(91197),p=a(8668),j=a(75542),v=(a(68459),a(20460)),f=a(75383),N=a(47337);const g=e=>{var l,a;let{Title:t,editData:n,setEditData:o,register:c,setValue:d,getValues:g,handleSubmit:y,onSubmit:k,errors:A,control:D,clearErrors:C}=e;const[w,S]=(0,s.useState)(new Date),[I,F]=(0,s.useState)(new Date),[E,V]=(0,s.useState)(new Date),[L,B]=(0,s.useState)(!1),[T,R]=(0,s.useState)(null),[U,H]=(0,s.useState)(!1),[Z,P]=(0,s.useState)(null),[K,O]=(0,s.useState)(null),[X,$]=(0,s.useState)(),[z,Y]=(0,s.useState)([]),[_,J]=(0,s.useState)(null),M=((0,m.Zp)(),(0,m.zy)()),W=e=>{R(e.target.value),d("category",e.target.value)},q=e=>{P(e.target.value),d("jobAllocation",e.target.value)},G={control:e=>({...e,padding:".25rem 0 "})},[Q,ee]=(0,s.useState)(!1),{t:le}=(0,u.Bd)(),{id:ae}=(0,m.g)();return(0,s.useEffect)((()=>{if(ae){const e=M.state[0];Y(e)}}),[ae]),(0,s.useEffect)((()=>{if(ae&&null!==z&&void 0!==z&&z.fromDate&&null!==z&&void 0!==z&&z.toDate&&null!==z&&void 0!==z&&z.expenseDate){d("branch",null===z||void 0===z?void 0:z.branch),d("type",null===z||void 0===z?void 0:z.type),d("amount",null===z||void 0===z?void 0:z.amount),d("referenceNumber",null===z||void 0===z?void 0:z.referenceNumber),d("odometer",null===z||void 0===z?void 0:z.odometer),d("description",null===z||void 0===z?void 0:z.description),d("workHour",null===z||void 0===z?void 0:z.workHour);const e=new Date(null===z||void 0===z?void 0:z.fromDate);d("fromDate",e);const l=new Date(null===z||void 0===z?void 0:z.toDate);d("toDate",l);const a=new Date(null===z||void 0===z?void 0:z.expenseDate);d("expenseDate",a),d("bill",null===z||void 0===z?void 0:z.bill),d("category",null===z||void 0===z?void 0:z.category),J(null===z||void 0===z?void 0:z.bill)}}),[z,ae]),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"p-4",children:[(0,N.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsxs)("label",{className:"form-label",children:[le("branch"),(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(r.xI,{name:"branch",control:D,render:e=>{let{field:{onChange:l,value:a,name:s,ref:t}}=e;return(0,N.jsx)(p.A,{onChange:e=>{d("branch",e.value)},value:a,customStyles:G,ref:t,name:s})}}),!g("branch")&&(0,N.jsx)(j.A,{errorName:A.branch})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsxs)("label",{className:"form-label",children:[le("category"),(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,N.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,N.jsx)("input",{type:"radio",className:"form-check-input",value:"VARIABLE",checked:"VARIABLE"===(null!==(l=g("category"))&&void 0!==l?l:T),onChange:W}),(0,N.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:le("variable")})]}),(0,N.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,N.jsx)("input",{type:"radio",className:"form-check-input",value:"FIX",checked:"FIX"===(null!==(a=g("category"))&&void 0!==a?a:T),onChange:W}),(0,N.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:le("FIX")})]})]}),!g("category")&&(0,N.jsx)(j.A,{errorName:A.category})]}),"VARIABLE"===T&&(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsx)("label",{className:"form-label",children:le("considerJob")}),(0,N.jsx)("div",{className:""+("VARIABLE"!==T?"form-check custom-checkbox mb-3 pe-none":"form-check custom-checkbox mb-3"),children:(0,N.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox1",onClick:()=>H(!U)})})]}),U&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsx)("label",{className:"form-label",children:le("jobAllocation")}),(0,N.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,N.jsxs)("div",{className:""+(U?"form-check custom-checkbox form-check-inline":"form-check custom-checkbox form-check-inline pe-none"),children:[(0,N.jsx)("input",{type:"radio",className:"form-check-input",value:"inProgress",checked:"inProgress"===Z,onChange:q}),(0,N.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:le("inProgress")})]}),(0,N.jsxs)("div",{className:""+(U?"form-check custom-checkbox form-check-inline":"form-check custom-checkbox form-check-inline pe-none"),children:[(0,N.jsx)("input",{type:"radio",className:"form-check-input",value:"completed",checked:"completed"===Z,onChange:q}),(0,N.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:le("completed")})]})]})]}),"completed"===Z&&(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsx)("label",{className:"form-label",children:le("completedTill")}),(0,N.jsxs)("div",{className:""+("completed"!==Z?"d-flex align-items-center pe-none":"fd-flex align-items-center"),children:[(0,N.jsx)(r.xI,{name:"startDate",control:D,render:e=>{let{value:l,name:a}=e;return(0,N.jsx)(x(),{selected:g("startDate")||new Date,className:"form-control",onChange:e=>d("startDate",e)})}}),(0,N.jsx)("span",{className:"mx-2",children:le("to")}),(0,N.jsx)(r.xI,{name:"endDate",control:D,render:e=>{let{value:l,name:a}=e;return(0,N.jsx)(x(),{selected:g("endDate")||new Date,className:"form-control",onChange:e=>d("endDate",e)})}})]})]})}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,N.jsx)("label",{className:"form-label",children:le("job")}),(0,N.jsx)(r.xI,{name:"job",control:D,render:e=>{let{field:{onChange:l,value:a,name:s,ref:t}}=e;return(0,N.jsx)(h.Ay,{onChange:e=>d("job",e.value),ref:t,name:s,styles:G})}})]})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,N.jsxs)("label",{className:"form-label",children:[le("type"),(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(r.xI,{name:"type",control:D,render:e=>{var l;let{field:{onChange:a,value:s,name:t,ref:n}}=e;return(0,N.jsx)(h.Ay,{onChange:e=>{$(e.value),d("type",e.value)},options:v.r5,ref:n,name:t,styles:G,value:null===(l=v.r5.filter((e=>e.value==g("type"))))||void 0===l?void 0:l[0]})}}),!g("type")&&(0,N.jsx)(j.A,{errorName:A.type})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsxs)("label",{className:"form-label",children:[le("fromDate")," ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(r.xI,{name:"fromDate",control:D,render:e=>{let{value:l,name:a}=e;return(0,N.jsx)(x(),{selected:g("fromDate")||new Date,className:"form-control",onChange:e=>{d("fromDate",e)}})}}),!g("fromDate")&&(0,N.jsx)(j.A,{errorName:A.fromDate})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsxs)("label",{className:"form-label",children:[le("toDate")," ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(r.xI,{name:"toDate",control:D,render:e=>{let{value:l,name:a}=e;return(0,N.jsx)(x(),{selected:g("toDate")||new Date,className:"form-control",onChange:e=>{$(e),d("toDate",e)}})}}),!g("toDate")&&(0,N.jsx)(j.A,{errorName:A.toDate})]}),(0,N.jsxs)("div",{className:" col-xl-6 mb-3 ",children:[(0,N.jsxs)("label",{className:"form-label",children:[le("expenseDate")," ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(r.xI,{name:"expenseDate",control:D,render:e=>{let{value:l,name:a}=e;return(0,N.jsx)(x(),{selected:g("expenseDate")||new Date,className:"form-control",onChange:e=>d("expenseDate",e)})}}),!g("expenseDate")&&(0,N.jsx)(j.A,{errorName:A.expenseDate})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[le("amount")," ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(b.A,{type:"number",register:c,label:"Amount",name:"amount",placeholder:""}),(0,N.jsx)(j.A,{errorName:A.amount})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[le("referenceNumber")," ",(0,N.jsx)("span",{className:"text-danger",children:"*"})]}),(0,N.jsx)(b.A,{type:"number",register:c,label:"Reference Number",name:"referenceNumber",placeholder:""}),(0,N.jsx)(j.A,{errorName:A.referenceNumber})]}),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:""+("VARIABLE"!==T?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,N.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:le("odometer")}),(0,N.jsx)(b.A,{type:"number",register:c,label:"Odometer",name:"odometer",placeholder:""})]}),(0,N.jsxs)("div",{className:""+("VARIABLE"!==T?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,N.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:le("workHour")}),(0,N.jsx)(r.xI,{name:"workHour",control:D,render:e=>{let{value:l,name:a}=e;return(0,N.jsx)(x(),{selected:I,showTimeSelect:!0,showTimeSelectOnly:!0,dateFormat:"h:mm aa",timeIntervals:15,className:"form-control customDateHeight",onChange:e=>F(e),value:l,name:a})}})]})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:le("billUpload")}),(0,N.jsx)(f.A,{setValue:d,register:c,label:"bill",name:"bill",getValue:g,setLoading:ee,loading:Q,link:_}),Q&&(0,N.jsx)("small",{children:"Uploading..."})]}),(0,N.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,N.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:le("description")}),(0,N.jsx)(b.A,{type:"textarea",register:c,label:"Description",name:"description",placeholder:""})]})]}),(0,N.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:[(0,N.jsx)("button",{type:"submit",onClick:()=>{y(k)},className:"btn btn-primary me-1",children:ae?"Update":le("submit")}),(0,N.jsx)(i.N_,{to:"#",onClick:()=>B(!1),className:"btn btn-danger light ms-1",children:le("cancel")})]})]})})};var y=a(32343),k=a(45178),A=a(70529);const D=()=>{const[e,l]=(0,s.useState)(0),a=["Expense"],i=[g],{t:d}=(0,u.Bd)(),{id:x}=(0,m.g)(),{register:h,formState:{errors:b},setValue:p,getValues:j,control:v,handleSubmit:f}=(a.length,(0,r.mN)({resolver:(0,o.t)(c.gZ)})),D=(0,m.Zp)(),C=async e=>{if(x)try{await(0,k.eY)(x,e),(0,A.V)("Expense Updated!"),D("/settings/expense")}catch(l){console.log(l),(0,A.U)("Some error occured !!")}else try{0===e.bill.length&&delete e.bill,await(0,k.ZN)(e),(0,A.V)(d("New Expense Created")),D("/settings/expense")}catch(a){console.log(a),(0,A.U)("Some error occured !!")}};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(y.A,{mainTitle:d("expense"),pageTitle:d(x?"edit":"create"),parentTitle:d("expense")}),(0,N.jsx)("div",{className:"m-2 p-2",children:(0,N.jsx)(r.Op,{children:(0,N.jsx)("form",{onSubmit:f(C),children:(0,N.jsx)("div",{className:"default-tab",children:(0,N.jsxs)(t.A.Container,{defaultActiveKey:a[0].toLowerCase(),children:[(0,N.jsx)(n.A,{as:"ul",className:"nav-tabs",children:a.map(((a,s)=>(0,N.jsx)(n.A.Item,{as:"li",children:(0,N.jsx)(n.A.Link,{style:{padding:".5rem 2rem"},eventKey:a.toLowerCase(),active:s===e,onClick:()=>l(s),children:a})},s)))}),(0,N.jsx)(t.A.Content,{className:"pt-4",children:a.map(((l,s)=>{const n=i[s];return(0,N.jsx)(t.A.Pane,{eventKey:l.toLowerCase(),active:s===e,children:(0,N.jsx)(n,{data:a,control:v,setValue:p,register:h,getValues:j,errors:b,handleSubmit:f,onSubmit:C})},s)}))})]})})})})})]})}},45178:(e,l,a)=>{a.d(l,{Wz:()=>o,ZN:()=>n,ck:()=>t,eY:()=>r});var s=a(74763);(0,a(95441).A)();const t=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const{data:l}=await s.A.get(`/expenses?page=${e}&limit=10`);return{data:l.data.data,totalLength:l.data.totalCount}},n=async e=>s.A.post("/expenses",e),r=async(e,l)=>s.A.patch(`/expenses/${e}`,l),o=async e=>s.A.delete(`/expenses/${e}`)}}]);
//# sourceMappingURL=3717.098867d7.chunk.js.map