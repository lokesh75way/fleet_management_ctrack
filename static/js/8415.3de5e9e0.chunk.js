"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[8415],{5761:(e,a,t)=>{t.d(a,{LD:()=>c,Lb:()=>i,UT:()=>h,Vp:()=>l,aL:()=>d,aW:()=>s,lC:()=>m,vq:()=>o,x1:()=>r});var n=t(94505);const i=async e=>{const{data:a}=await n.S.get("/technicians/".concat(e));return a.data},c=async(e,a,t)=>{const i={page:e||1,limit:a||10,...t},{data:c}=await n.S.get("/technicians",{params:i});return{data:c.data.technicians,totalPage:c.data.totalPage,totalCount:c.data.count}},s=async e=>await n.S.delete("/technicians/".concat(e)),l=async e=>await n.S.post("/technicians",e),d=async(e,a)=>await n.S.patch("/technicians/".concat(a),e),r=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a="/technician-tasks?page=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,"&limit=").concat(e);const{data:t}=await n.S.get(a);return{data:t.data.data,totalPage:t.data.totalPage,totalCount:t.data.totalCount}},o=async e=>await n.S.delete("/technician-tasks/".concat(e)),h=async e=>await n.S.post("/technician-tasks",e),m=async(e,a)=>await n.S.patch("/technician-tasks/".concat(a),e)},68415:(e,a,t)=>{t.r(a),t.d(a,{default:()=>w});var n=t(65043),i=t(35475),c=t(74117),s=t(63248),l=t(28261),d=t(99723),r=t(47097),o=t(6720),h=t(60184),m=t(45350),x=t(95977),j=t(70579);const p=e=>{let{tableData:a,currentPage:t,itemsPerPage:n,onConfirmDelete:c}=e;const{can:s}=(0,m.A)(),l=s("technician","modify"),d=s("technician","delete"),r=(t-1)*n+1;return(0,j.jsx)(j.Fragment,{children:a.map(((e,a)=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:(0,j.jsx)("span",{children:r+a})}),(0,j.jsx)("td",{children:(0,j.jsx)("div",{className:"products",children:(0,j.jsx)("div",{children:(0,j.jsx)("h6",{children:e.firstName+e.lastName})})})}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{className:"text-primary",children:e.email})}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{children:e.mobileNumber})}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{children:e.address.country})}),(0,j.jsx)("td",{children:(0,j.jsx)("span",{children:e.technicianNo})}),(l||d)&&(0,j.jsx)("td",{children:(0,j.jsxs)("span",{className:"d-flex justify-content-center",children:[l&&(0,j.jsx)(i.N_,{to:"/technician/edit/".concat(null===e||void 0===e?void 0:e._id),children:(0,j.jsx)("span",{className:"cursor-pointer",children:(0,j.jsx)(h.uO9,{style:{color:"green",fontSize:"1.2rem"}})})}),d&&(0,j.jsx)(x.A,{className:"cursor-pointer ",onConfirmDelete:c,id:e._id,children:(0,j.jsx)(o.b6i,{style:{color:"red",fontSize:"1.2rem"}})})]})})]},a)))})};var u=t(18733),g=t(272),b=t(42457),v=t(94692),N=t(40399),f=t(19172),y=t(5761);const w=()=>{const{t:e}=(0,c.Bd)(),{can:a}=(0,m.A)(),{page:t,goToPage:o,setCount:h,totalCount:x}=(0,v.A)(),w=(0,s.jE)(),{data:C,isLoading:S,isFetching:P}=(0,l.I)({queryKey:["technicians",t],queryFn:()=>(0,y.LD)(t),placeholderData:d.rX,staleTime:1/0}),{mutate:T}=(0,r.n)({onError:e=>{(0,b.U)((0,g.SU)(e))},onSuccess:()=>{w.invalidateQueries("technicians")},mutationFn:y.aW});(0,n.useEffect)((()=>{C&&h(C.totalCount)}),[C]);const k=[e("technicianId"),e("technicianName"),e("email"),e("contactNumber"),e("location"),e("technicianNumber")];return(a("technician","modify")||a("technician","delete"))&&k.push(e("action")),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(N.A,{mainTitle:e("technicianDetails"),pageTitle:e("technicianDetails"),parentTitle:e("home")}),(0,j.jsx)("div",{className:"container-fluid",children:(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-xl-12",children:(0,j.jsx)("div",{className:"card",children:(0,j.jsx)("div",{className:"card-body p-0",children:(0,j.jsxs)("div",{className:"table-responsive active-projects style-1 ItemsCheckboxSec shorting",children:[(0,j.jsxs)("div",{className:"tbl-caption d-flex justify-content-between text-wrap align-items-center",children:[(0,j.jsx)("h4",{className:"heading mb-0",children:e("technician")}),(0,j.jsx)("div",{children:a("technician","add")&&(0,j.jsxs)(i.N_,{to:"/technician/create",className:"btn btn-primary btn-sm ms-1","data-bs-toggle":"offcanvas",children:["+ ",e("technician")]})})]}),(0,j.jsxs)("div",{id:"employee-tbl_wrapper",className:"dataTables_wrapper no-footer",children:[(0,j.jsx)("div",{className:"table-responsive",children:P||S?(0,j.jsx)(u.A,{}):(0,j.jsxs)("table",{id:"empoloyees-tblwrapper",className:"table ItemsCheckboxSec dataTable no-footer mb-0",children:[(0,j.jsx)("thead",{children:(0,j.jsx)("tr",{children:k.map((a=>(0,j.jsx)("th",{children:e(a)},a)))})}),(0,j.jsx)("tbody",{children:(0,j.jsx)(p,{onConfirmDelete:T,tableData:(null===C||void 0===C?void 0:C.data)||[],currentPage:t,itemsPerPage:10})})]})}),(0,j.jsxs)("div",{className:"d-sm-flex text-center justify-content-between align-items-center",children:[(0,j.jsxs)("div",{className:"dataTables_info",children:[e("showing")," ",10*(t-1)+1," ",e("to")," ",Math.min(10*t,x)," ",e("of")," ",x," ",e("entries")]}),(0,j.jsx)("div",{className:"dataTables_paginate paging_simple_numbers",id:"example2_paginate",children:(0,j.jsx)(f.A,{totalCount:x,itemsPerPage:10,handlePageClick:e=>{let{selected:a}=e;o(a+1)}})})]})]})]})})})})})})]})}}}]);
//# sourceMappingURL=8415.3de5e9e0.chunk.js.map