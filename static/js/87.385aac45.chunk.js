"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[87],{28338:(e,s,a)=>{a.d(s,{A:()=>d});var l=a(78109),r=a(43097),n=a(48989),t=a(91197),i=a(75542),o=a(47337);const d=e=>{let{heading:s,register:a,errors:d,id:m,getValues:c}=e;const[u,x]=(0,l.useState)(!1);return(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("h3",{className:"mt-4 mb-4",children:s}),(0,o.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[(0,n.t)("username")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(t.A,{type:"text",register:a,label:"userName",name:"userName",placeholder:"",defaultValue:c("userName"),disabled:!!m}),(0,o.jsx)(i.A,{errorName:d.userName})]}),!m&&(0,o.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,o.jsxs)("label",{className:"form-label",children:[(0,n.t)("password")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsx)(t.A,{type:u?"text":"password",register:a,label:"Password",name:"password",placeholder:""}),(0,o.jsx)("span",{className:"showPasswordIcon",onClick:()=>{x(!u)},children:u?(0,o.jsx)(r.mI_,{}):(0,o.jsx)(r.ZT8,{})})]}),!m&&(0,o.jsx)(i.A,{errorName:d.password})]})]})}},5614:(e,s,a)=>{a.d(s,{A:()=>r});a(78109);var l=a(47337);const r=e=>{let{height:s="100vh"}=e;return(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:s,marginTop:"-50px"},children:(0,l.jsx)("div",{class:"spinner-border",role:"status",children:(0,l.jsx)("span",{class:"sr-only",children:"Loading..."})})})}},93911:(e,s,a)=>{a.d(s,{A:()=>v});var l=a(78109),r=a(85389),n=a(86554),t=a(74563),i=a(67236),o=a(34571),d=a(75542),m=a(91197),c=a(20460),u=a(75383),x=a(4860),h=a(28338),p=a(38969),j=a(31029),b=a(70076),g=a(47337);const f={control:e=>({...e,padding:".25rem 0 "})},v=e=>{let{setValue:s,getValues:a,register:v,onSubmit:N,handleSubmit:y,errors:A,control:w,isFormSubmitting:C}=e;const{fields:V,append:I,remove:F}=(0,n.jz)({control:w,name:"userInfo"}),[S,L]=(0,l.useState)(!1),{t:P}=(0,o.Bd)(),{location:E,error:G}=(0,b.A)(),{id:k}=(0,i.g)();return(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsxs)("div",{className:"row",style:{width:"85%"},children:[(0,g.jsx)("div",{children:G&&(0,g.jsx)("p",{children:G})}),(0,g.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,g.jsxs)("label",{className:"form-label",children:[P("businessGroup"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(n.xI,{name:"businessGroupId",control:w,rules:{required:!0},render:e=>{let{field:{onChange:a,value:l,name:r,ref:n}}=e;return(0,g.jsx)(x.A,{onChange:e=>{s("businessGroupId",e.value)},defaultValue:l,ref:n,name:r,customStyles:f})}}),!a("businessGroupId")&&(0,g.jsx)(d.A,{errorName:A.businessGroupId})]}),(0,g.jsxs)("div",{className:"col-xl-3 mb-3 z-1",children:[(0,g.jsxs)("label",{className:"form-label",children:[P("companyName")," ",(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(m.A,{type:"text",register:v,required:!0,label:"Company Name",name:"companyName",defaultValue:a("companyName"),placeholder:""}),(0,g.jsx)(d.A,{errorName:A.companyName})]}),(0,g.jsxs)("div",{className:"col-xl-3 mb-3 z-1",children:[(0,g.jsx)("label",{className:"form-label",children:P("tradeLicenseNumber")}),(0,g.jsx)(m.A,{type:"text",register:v,label:"tradeLicenseNumber",name:"tradeLicenseNumber",placeholder:"",defaultValue:a("tradeLicenseNumber")}),(0,g.jsx)(d.A,{errorName:A.tradeLicenseNumber})]}),(0,g.jsxs)("span",{className:"absolute",style:{position:"absolute",top:"23%",right:"-42%",overflow:"hidden"},children:[(0,g.jsx)(u.A,{setValue:s,register:v,label:"Business Group Logo",name:"logo",getValue:a,setLoading:L,loading:S,link:a("logo")}),(0,g.jsx)(d.A,{errorName:A.logo})]}),(0,g.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,g.jsx)("label",{className:"form-label",children:P("officeNo")}),(0,g.jsx)(m.A,{type:"text",register:v,label:"officeNumber",name:"officeNumber",placeholder:"",defaultValue:a("officeNumber")}),(0,g.jsx)(d.A,{errorName:A.officeNumber})]}),(0,g.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,g.jsxs)("label",{className:"form-label",children:[P("email"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(m.A,{type:"email",register:v,label:"Email",name:"email",placeholder:"",defaultValue:a("email"),disabled:!!k}),(0,g.jsx)(d.A,{errorName:A.email})]}),(0,g.jsx)(j.A,{register:v,setValue:s,errors:A,getValues:a,locationData:E,id:k,showCity:!0,Comptype:"companyId"}),(0,g.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,g.jsx)("label",{className:"form-label",children:P("dateFormat")}),(0,g.jsx)(n.xI,{name:"dateFormat",control:w,render:e=>{let{field:{onChange:a,value:l,name:r,ref:n}}=e;return(0,g.jsx)(t.Ay,{onChange:e=>s("dateFormat",null===e||void 0===e?void 0:e.value),options:c.wJ,ref:n,name:r,styles:f,value:{value:l,label:l},defaultValue:c.wJ[1]})}}),(0,g.jsx)(d.A,{errorName:A.dateFormat})]}),(0,g.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,g.jsx)("label",{className:"form-label",children:P("timeFormat")}),(0,g.jsx)(n.xI,{name:"timeFormat",control:w,render:e=>{let{field:{onChange:a,value:l,name:r,ref:n}}=e;return(0,g.jsx)(t.Ay,{onChange:e=>s("timeFormat",e.value),options:c.lD,ref:n,name:r,styles:f,value:{value:l,label:l},defaultValue:c.lD[1]})}})]}),(0,g.jsx)(h.A,{heading:P("companyLoginDetails"),register:v,errors:A,id:k,getValues:a}),(0,g.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",margin:"2rem 0"},children:[(0,g.jsx)("h3",{children:P("contactDetails")}),(0,g.jsxs)(r.A,{type:"button",onClick:()=>{I({name:"",designation:"",mobileNumber:null,email:""})},style:{width:"10%"},children:[" ","ADD"]})]}),V.map(((e,s)=>(0,g.jsx)(p.A,{field:e,index:s,register:v,getValues:a,errors:A,fields:V,remove:F,id:k},e.id)))]}),(0,g.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,g.jsx)(r.A,{disabled:S||C,type:"submit",onClick:y(N),style:{width:"10%"},children:P("submit")})})]})}},60087:(e,s,a)=>{a.r(s),a.d(s,{default:()=>A});var l=a(78109),r=a(36145),n=a(93576),t=a(86554),i=(a(1682),a(53252)),o=a(67236),d=a(34571),m=a(4900),c=a(67889),u=a(6986),x=a(32343),h=a(93911),p=a(44988),j=a(70529),b=a(81757),g=a(91990),f=a(96152),v=a(20460),N=a(5614),y=a(47337);const A=()=>{var e,s;const{t:a}=(0,d.Bd)(),A=(0,o.Zp)(),{id:w}=(0,o.g)();let C=[a(w?"editCompany":"newCompany"),a("changePassword")],V=[h.A,b.A];const[I,F]=(0,l.useState)(0),S=(0,m.jE)();w||(C=[a("newCompany")],V=[h.A]);const{data:L,isError:P,isLoading:E}=(0,c.I)({queryKey:["company",w],queryFn:()=>(0,g.EG)(w),enabled:!!w,staleTime:1/0});(0,l.useEffect)((()=>{P&&w&&((0,j.U)("Not able to fetch company data"),A("/not-found"))}),[P&&w]);const G=(0,l.useMemo)((()=>{var e,s;return{...L,...null===L||void 0===L?void 0:L.companyId,businessGroupId:null===L||void 0===L?void 0:L.businessGroupId,logo:null!==(e=null===L||void 0===L||null===(s=L.companyDetails)||void 0===s?void 0:s.logo)&&void 0!==e?e:null,password:""}}),[L]),{register:k,formState:{errors:D},setValue:T,getValues:q,control:B,handleSubmit:K}=(0,t.mN)({defaultValues:{businessGroupId:"",userInfo:[{name:"",designation:"",mobileNumber:null,email:""}],timeFormat:null===(e=v.lD[1])||void 0===e?void 0:e.value,dateFormat:null===(s=v.wJ[1])||void 0===s?void 0:s.value},resolver:(0,i.t)(1===I?p.Mw:(0,p.QB)(w)),values:G}),U=e=>(0,j.U)((0,f.SU)(e)),{mutate:z,isPending:J}=(0,u.n)({mutationFn:e=>{let{data:s,id:a}=e;return(0,g.OG)(a,s)},onSuccess:()=>{(0,j.V)("Company Updated Successfully"),S.invalidateQueries(["companies"]),A("/company")},onError:U}),{mutate:Q,isPending:M}=(0,u.n)({mutationFn:g.P0,onSuccess:()=>{(0,j.V)("New Company Created"),S.invalidateQueries(["companies"]),A("/company")},onError:U}),{mutate:O,isPending:Z}=(0,u.n)({mutationFn:g.ec,onSuccess:()=>{(0,j.V)("Password has been changed"),A("/company")},onError:U}),_=async e=>{if(0===I)null!=e.logo&&0!==e.logo.length||delete e.logo,e.file&&0===e.file.length&&delete e.file,w?z({data:e,id:w}):Q(e);else if(1===I){const s={password:e.newPassword,oldPassword:e.oldPassword,confirmPassword:e.confirmPassword,_id:w};O(s)}};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.A,{mainTitle:a("company"),pageTitle:a(w?"edit":"create"),parentTitle:a("company")}),(0,y.jsx)("div",{className:"m-2 p-2",children:(0,y.jsx)(t.Op,{children:(0,y.jsx)("form",{onSubmit:K(_),children:(0,y.jsx)("div",{className:"default-tab",children:(0,y.jsxs)(r.A.Container,{defaultActiveKey:C[0].toLowerCase(),children:[(0,y.jsx)(n.A,{as:"ul",className:"nav-tabs",children:C.map(((e,s)=>(0,y.jsx)(n.A.Item,{as:"li",children:(0,y.jsx)(n.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:s===I,onClick:()=>F(s),children:e})},s)))}),(0,y.jsx)(r.A.Content,{className:"pt-4",children:E?(0,y.jsx)(N.A,{height:500}):C.map(((e,s)=>{const a=V[s];return(0,y.jsx)(r.A.Pane,{eventKey:e.toLowerCase(),active:s===I,children:(0,y.jsx)(a,{data:C,control:B,setValue:T,register:k,getValues:q,errors:D,handleSubmit:K,onSubmit:_,isFormSubmitting:M||J||Z})},s)}))})]})})})})})]})}}}]);
//# sourceMappingURL=87.385aac45.chunk.js.map