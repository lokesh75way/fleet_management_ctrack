{"version":3,"file":"static/js/8995.9ed933bb.chunk.js","mappings":"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","sources":["jsx/components/BranchDropdown/index.jsx","jsx/components/Tables/SubCompanyTable.jsx","jsx/pages/company/Branch.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getAllBranch } from '../../../services/api/BranchServices';\nimport Select from \"react-select\";\nimport usePagination from '../../../hooks/usePagination';\n\nconst BranchDropdown = ({\n    onChange,\n    value,\n    customStyles,\n    name,\n    companyId,\n    isDisabled,\n    ref\n}) => {\n    const [dropDownOptions, setdropDownOptions] = useState([]);\n    const [selectedOption, setSelectedOption] = useState(value);\n    const {page} = usePagination()\n    useEffect(() => {\n        const fetchBusinessGroups = async () => {\n            const response = await getAllBranch(undefined,companyId ? companyId : undefined);\n            const groupOptions = response.data.data.map(item => ({ value: item?._id, label: item?.branchName }));\n            console.log(response.data, \"this is Branch data\")\n            console.log(groupOptions, \"this is Branch options\")\n            setdropDownOptions(groupOptions);\n        };\n        fetchBusinessGroups();\n    }\n    , []);\n    useEffect(() => {\n        const selected = dropDownOptions.filter((option) => value && value.includes(option.value));\n        setSelectedOption(selected);\n    }, [value, dropDownOptions]);\n\n    return (\n            <Select\n                options = {dropDownOptions}\n                value={selectedOption}\n                onChange={(newValue) => onChange(newValue)}\n                styles={customStyles}\n                name={name}\n                ref={ref}\n                isDisabled={isDisabled || !companyId}\n                isMulti\n                />         \n    );\n}\nexport default BranchDropdown;","import React from 'react'\nimport { MdDelete } from 'react-icons/md'\nimport { FaEdit } from 'react-icons/fa'\nimport DeleteModal from '../Modal/DeleteModal'\nimport { Link } from 'react-router-dom'\nimport { IMAGES,SVGICON} from '../../constant/theme'; \nimport useStorage from '../../../hooks/useStorage'\nimport { usePermissions } from '../../../context/PermissionContext'\n\nconst SubCompanyTable = ({onConfirmDelete,params, tempValue,tempValue2,tableData,editDrawerOpen, setDataLength}) => {\n  var filterData = tableData;\n\n  const {can} = usePermissions()\n  const editPermission = can('branch','modify');\n  const deletePermission = can('branch','delete');\n  if(tempValue!=='All Companies'){\n    filterData = tableData.filter((item)=> item.role === 'branch' && item.parentCompany === tempValue)\n  }\n  if(tempValue2!=='All Branches'){\n    filterData = tableData.filter((item)=> item.role === 'branch' && item.parentBranch === tempValue2)\n  }\n  // console.log(\"this is data after filter\",filterData,tempValue,tempValue2);\n  var branchCount = []\n  for(var i=0;i<filterData.length;i++){\n    const branchName = filterData[i].userName\n    branchCount[i] = filterData.filter((item)=> item.parentBranch === branchName).length\n  }\n  // setDataLength(filterData.length)\n    return (\n      <>\n        {filterData.map((item, index) => (\n          <tr key={index}>\n            <td>\n              <span>{index + 1}</span>\n            </td>\n            <td>\n              <span className=\"text-primary\">{item.branchName}</span>\n            </td>\n            <td>\n              <span >{item.parentBranchId?.branchName ? item.parentBranchId?.branchName :<span className='ps-4'>-</span> }</span>\n            </td>\n            <td>\n              <span >{item.companyId?.companyName ? item.companyId?.companyName : <span className='ps-4'>-</span> }</span>\n            </td>\n            <td>\n              <span >{item.businessGroupId?.groupName ? item.businessGroupId?.groupName : <span className='ps-4'>-</span> }</span>\n            </td>\n            {/* <td>\n              <span>{item.mobileNumber}</span>\n            </td> */}\n            <td>\n              <span>{item.city}</span>\n            </td>\n\n            <td>\n            <Link\n              to={`/branch/bid/${item.id}`}\n              className=\"text-primary badge light border-0 badge-count\"\n            >\n              {branchCount[index]}\n            </Link>\n          </td>\n            {(editPermission || deletePermission) && <td>\n              <span className=\"d-flex justify-content-center\">\n                {editPermission && <span\n                  className=\"cursor-pointer\"\n                  onClick={() => editDrawerOpen(item._id)}\n                >\n                  <FaEdit style={{ color: \"green\", fontSize: \"1.2rem\" }} />\n                </span>}\n                {deletePermission && <DeleteModal\n                  className=\"cursor-pointer \"\n                  onConfirmDelete={onConfirmDelete}\n                  id={item._id}\n                >\n                  <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n                </DeleteModal>}\n              </span>\n            </td>}\n          </tr>\n        ))}\n      </>\n    );\n}\n\nexport default SubCompanyTable","import React, { useState, useRef, useEffect } from \"react\";\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\nimport MainPagetitle from \"../../layouts/MainPagetitle\";\nimport SubCompanyTable from \"../../components/Tables/SubCompanyTable\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport AsyncSelect from \"react-select/async\";\nimport useStorage from \"../../../hooks/useStorage\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { clsx } from \"clsx\";\n\nimport { useContext } from \"react\";\nimport { ThemeContext } from \"../../../context/ThemeContext\";\nimport { usePermissions } from \"../../../context/PermissionContext\";\nimport {\n  getAllBranch,\n  createBranch,\n  deleteBranch,\n} from \"../../../services/api/BranchServices\";\nimport { notifySuccess } from \"../../../utils/toast\";\nimport usePagination from \"../../../hooks/usePagination\";\nimport { getCompany } from \"../../../services/api/CompanyServices\";\nimport CompanyDropdown from \"../../components/CompanyDropdown\";\nimport BranchDropdown from \"../../components/BranchDropdown\";\nimport { getSelectValues } from \"../../../utils/helper\";\nimport ParentBranchDropdown from \"../../components/ParentBranch\";\n\n// import { SubCompanyData } from '../../components/Tables/Tables';\n\nconst Branch = () => {\n  const { isRtl } = useContext(ThemeContext);\n  const arrowleft = clsx({\n    \"fa-solid fa-angle-right\": isRtl,\n    \"fa-solid fa-angle-left\": !isRtl,\n  });\n  const arrowright = clsx({\n    \"fa-solid fa-angle-left\": isRtl,\n    \"fa-solid fa-angle-right\": !isRtl,\n  });\n  const { can, setUserPermission } = usePermissions();\n\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const params = useParams();\n\n  const [selectFilter, setFilter] = useState({\n    value: \"All Companies\",\n    label: \"All Companies\",\n  });\n  const [selectFilter2, setFilter2] = useState({\n    value: \"All Branches\",\n    label: \"All Branches\",\n  });\n  const [tempValue, setTempValue] = useState(\"All Companies\");\n  const [tempValue2, setTempValue2] = useState(\"All Branches\");\n  const [data, setData] = useState(\n    document.querySelectorAll(\"#employee-tbl_wrapper tbody tr\")\n  );\n  const customStyles = {\n    control: (base) => ({\n      ...base,\n      marginRight: \"1rem\",\n      marginLeft: \"1rem\",\n      width: \"15rem\",\n      height: \"0.6rem\",\n      menuPortal: (provided) => ({ ...provided, zIndex: 9999 }),\n      menu: (provided) => ({ ...provided, zIndex: 9999 }),\n    }),\n  };\n  const loggedinUser = localStorage.getItem(\"loginDetails-name\");\n  // const SubCompanyData = JSON.parse( localStorage.getItem('branchData'));\n  const role = localStorage.getItem(\"role\");\n  const { control, setValue, getValues, watch } = useForm();\n  const userData = JSON.parse(localStorage.getItem(\"userJsonData\"));\n  const SubCompanyData = userData.filter((item) => item.role === \"branch\");\n  const [companyId, setCompanyId] = useState(null);\n  const [tableData, setTableData] = useState([]);\n  const [editData, setEditData] = useState({\n    id: 0,\n    reseller: \"\",\n    contact: 0,\n    username: \"\",\n    status: \"\",\n    location: \"\",\n    usergroup: \"\",\n    branches: 0,\n  });\n\n  const [companies, setCompanies] = useState([]);\n  const [branches, setBranches] = useState([]);\n  const [selectedCompany, setSelectedCompany] = useState(null);\n\n  const defaultValues = getSelectValues();\n  const { page, nextPage, prevPage, goToPage, setCount, totalCount,setPage } =\n    usePagination();\n\n  const fetchAllBranch = async (page,id) => {\n    try {\n      console.log({id})\n      const { data, success } = await getAllBranch(page,id);\n      const permissions = JSON.parse(localStorage.getItem('permission'));\n      setUserPermission(permissions?.[0]?.permission);\n      setTableData(data.data);\n      setCount(data.totalCount);\n      setBranches(data.data);\n    } catch (error) {\n      console.log(\"Error in fetching data\", error);\n    }\n  };\n  useEffect(() => {\n    fetchAllBranch(page);\n  }, [page]);\n\n  //   // Map companies and branches to options for Select component\n  //   const companyOptions = companies.map(company => ({\n  //     value: company._id,\n  //     label: company.companyName\n  // }));\n\n  // Filter branches based on the selected company\n  const filteredBranches = branches.filter(\n    (branch) =>\n      selectedCompany && branch.companyId._id === selectedCompany.value\n  );\n  console.log({ filteredBranches });\n  const branchOptions = filteredBranches.map((branch) => ({\n    value: branch._id,\n    label: branch.branchName,\n  }));\n\n  const handleCompanyChange = (selectedOption) => {\n    setSelectedCompany(selectedOption); // Update selected company\n  };\n\n  //   const handleCompanyChange = selectedOption => {\n  //     setSelectedCompany(selectedOption);\n  //     setFilter({value: selectedOption.value, label: selectedOption.label}); // Update the filter for companies\n  //     setFilter2({value: 'All Branches', label: 'All Branches'}); // Reset the branch filter\n  // };\n\n  // Handler function for branch selection\n  const handleBranchChange = (selectedOption) => {\n    console.log(\"Selected branch:\", selectedOption.value);\n    setFilter(selectedOption);\n    setPage(1);\n    fetchAllBranch(1,selectedOption.value)\n  };\n\n  const onConfirmDelete = async (id) => {\n    await deleteBranch(id);\n    notifySuccess(\"Branch Deleted\");\n    await fetchAllBranch();\n  };\n\n  const editDrawerOpen = (item) => {\n    const filteredData = tableData.filter((data) => data._id === item);\n    navigate(`edit/${item}`, { state: filteredData });\n    // company.current.showModal();\n  };\n\n  const d = JSON.parse(localStorage.getItem(\"userJsonData\"));\n\n  useEffect(() => {\n    if (role === \"admin\") return;\n    else if (role === \"businessgroup\") {\n      const filteredData = SubCompanyData.filter(\n        (item) => item.parentBusinessGroup === loggedinUser\n      );\n      setTableData(filteredData);\n    } else if (role === \"company\") {\n      const filteredData = SubCompanyData.filter(\n        (item) => item.parentCompany === loggedinUser\n      );\n      setTableData(filteredData);\n    }\n  }, [loggedinUser, role, SubCompanyData]);\n\n  return (\n    <>\n      <MainPagetitle\n        mainTitle=\"Branch\"\n        pageTitle={\"Branch\"}\n        parentTitle={\"Home\"}\n      />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"table-responsive active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t(\"branches\")}</h4>\n                    <div className=\"d-flex align-items-center\">\n                      <Controller\n                        name=\"company\"\n                        control={control}\n                        rules={{ required: true }}\n                        render={({ field: { onChange, value, name, ref } }) => (\n                          <CompanyDropdown\n                            onChange={async (newValue) => {\n                              setValue(\"company\", newValue.value);\n                              setCompanyId(newValue.value);\n                              handleBranchChange(newValue)\n                            }}\n                            value={value}\n                            customStyles={customStyles}\n                            name={name}\n                            ref={ref}\n                            isDisabled={false}\n                          />\n                        )}\n                      />\n                      <Controller\n                        name=\"parent\"\n                        control={control}\n                        rules={{ required: true }}\n                        render={({ field: { onChange, value, name, ref } }) => (\n                          <BranchDropdown\n                          key={companyId}\n                          onChange={(newValue) => {\n                          const valuesArray = newValue.map(item => item.value);\n                          setValue(\"parent\", valuesArray);\n                          setValue(\"branchIds\", valuesArray);\n                          \n                        }}\n                            companyId={companyId}\n                            value={value}\n                            customStyles={customStyles}\n                            ref={ref}\n                            name={name}\n                            isDisabled={false}\n                          />\n                        )}\n                      />\n                      {can(\"branch\", \"add\") && (\n                        <Link\n                          to={\"/branch/create\"}\n                          className=\"btn btn-primary btn-sm ms-1\"\n                          style={{ paddingBlock: \"9px\" }}\n                          data-bs-toggle=\"offcanvas\"\n                          // onClick={()=>subCompany.current.showModal()}\n                        >\n                          + {t(\"addBranch\")}\n                        </Link>\n                      )}{\" \"}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    <table\n                      id=\"empoloyees-tblwrapper\"\n                      className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                    >\n                      <thead>\n                        <tr>\n                          <th>{t(\"id\")}</th>\n                          <th>{t(\"branchName\")}</th>\n                          <th>{t(\"parentBranch\")}</th>\n                          <th>{t(\"companyName\")}</th>\n                          <th>{t(\"businessGroup\")}</th>\n                          {/* <th>{t('mobileNumber')}</th> */}\n                          <th>{t(\"location\")}</th>\n                          <th>{t(\"childBranches\")}</th>\n                          {(can(\"branch\", \"modify\") ||\n                            can(\"branch\", \"delete\")) && <th>{t(\"action\")}</th>}\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <SubCompanyTable\n                          key={tableData}\n                          tempValue={tempValue}\n                          // setDataLength={setDataLength}\n                          tempValue2={tempValue2}\n                          editData={editData}\n                          tableData={tableData}\n                          onConfirmDelete={onConfirmDelete}\n                          editDrawerOpen={editDrawerOpen}\n                          setEditData={setEditData}\n                        />\n                      </tbody>\n                    </table>\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                        {t(\"showing\")} {(page - 1) * 10 + 1} {t(\"to\")}{\" \"}\n                        {Math.min(page * 10, totalCount)} {t(\"of\")} {totalCount}{\" \"}\n                        {t(\"entries\")}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                        <Link\n                          className={`paginate_button ${\n                            page === 1 ? \"previous disabled\" : \"previous\"\n                          }`}\n                          to=\"/branch\"\n                          onClick={() => prevPage(page - 1)}\n                        >\n                          <i className={arrowleft} />\n                        </Link>\n                        <span>\n                          {[...Array(Math.ceil(totalCount / 10)).keys()].map(\n                            (number) => (\n                              <Link\n                                key={number}\n                                className={`paginate_button ${\n                                  page === number + 1 ? \"current\" : \"\"\n                                }`}\n                                onClick={() => goToPage(number + 1)}\n                              >\n                                {number + 1}\n                              </Link>\n                            )\n                          )}\n                        </span>\n                        <Link\n                          className={`paginate_button ${\n                            page * 10 >= totalCount ? \"next disabled\" : \"next\"\n                          }`}\n                          to=\"/branch\"\n                          onClick={() => nextPage(page + 1)}\n                        >\n                          <i className={arrowright} />\n                        </Link>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* <SubCompanyOffcanvas\n                ref={subCompany}\n                editData={editData}\n                setEditData={setEditData}\n                handleSubmit={handleSubmit}\n                Title={ editData.id === 0 ? \"Add Branch\" : \"Edit Branch\"}\n            /> */}\n    </>\n  );\n};\nexport default Branch;\n"],"names":["_ref","onChange","value","customStyles","name","companyId","isDisabled","ref","dropDownOptions","setdropDownOptions","useState","selectedOption","setSelectedOption","page","usePagination","useEffect","async","response","getAllBranch","undefined","groupOptions","data","map","item","_id","label","branchName","console","log","fetchBusinessGroups","selected","filter","option","includes","_jsx","Select","options","newValue","styles","isMulti","onConfirmDelete","params","tempValue","tempValue2","tableData","editDrawerOpen","setDataLength","filterData","can","usePermissions","editPermission","deletePermission","role","parentCompany","parentBranch","branchCount","i","length","userName","_Fragment","children","index","_item$parentBranchId","_item$parentBranchId2","_item$companyId","_item$companyId2","_item$businessGroupId","_item$businessGroupId2","_jsxs","className","parentBranchId","companyName","businessGroupId","groupName","city","Link","to","concat","id","onClick","FaEdit","style","color","fontSize","DeleteModal","MdDelete","Branch","isRtl","useContext","ThemeContext","arrowleft","clsx","arrowright","setUserPermission","t","useTranslation","navigate","useNavigate","selectFilter","setFilter","useParams","selectFilter2","setFilter2","setTempValue","setTempValue2","setData","document","querySelectorAll","control","base","marginRight","marginLeft","width","height","menuPortal","provided","zIndex","menu","loggedinUser","localStorage","getItem","setValue","getValues","watch","useForm","SubCompanyData","JSON","parse","setCompanyId","setTableData","editData","setEditData","reseller","contact","username","status","location","usergroup","branches","companies","setCompanies","setBranches","selectedCompany","setSelectedCompany","nextPage","prevPage","goToPage","setCount","totalCount","setPage","getSelectValues","fetchAllBranch","_permissions$","success","permissions","permission","error","filteredBranches","branch","filteredData","parentBusinessGroup","MainPagetitle","mainTitle","pageTitle","parentTitle","Controller","rules","required","render","field","CompanyDropdown","_ref2","BranchDropdown","valuesArray","paddingBlock","SubCompanyTable","deleteBranch","notifySuccess","state","Math","min","Array","ceil","keys","number"],"sourceRoot":""}