{"version":3,"file":"static/js/5551.606c7f29.chunk.js","mappings":"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","sources":["features/company/components/Table.jsx","features/company/pages/List.jsx"],"sourcesContent":["import React from \"react\";\nimport { MdDelete } from \"react-icons/md\";\nimport { FaEdit } from \"react-icons/fa\";\nimport { Link } from \"react-router-dom\";\n\nimport DeleteModal from \"@/components/Modal/DeleteModal\";\nimport usePermissions from \"@/hooks/usePermissions\";\n\nconst CompanyTable = ({\n  tableData,\n  currentPage,\n  itemsPerPage,\n  onConfirmDelete,\n}) => {\n  const { can } = usePermissions();\n  const editPermission = can(\"company\", \"modify\");\n  const deletePermission = can(\"company\", \"delete\");\n\n  const startIndex = (currentPage - 1) * itemsPerPage + 1;\n  return (\n    <>\n      {tableData?.map((item, index) => {\n        return (\n          <tr key={index}>\n            <td>\n              <span>{startIndex + index}</span>\n            </td>\n            <td>\n              <span className=\"text-primary\">\n                {item?.companyId?.companyName}\n              </span>\n            </td>\n            <td>\n              <div className=\"products d-flex\">\n                <div>\n                  <h6>{item?.companyId?.businessGroupId?.groupName}</h6>\n                </div>\n              </div>\n            </td>\n\n            <td>\n              <span>{item.country}</span>\n            </td>\n            <td>\n              <span>{item?.email}</span>\n            </td>\n            <td>\n              <Link\n                to={`/branch/cid/${item?.companyId?._id}`}\n                className=\"text-primary badge light border-0 badge-count\"\n              >\n                {item?.branchIds?.length}\n              </Link>\n            </td>\n            {/* <td >\n            <span>{item?.companyId?.zipCode ? item?.companyId?.zipCode : <span className='ps-4'>-</span> }</span>\n          </td> */}\n            {(editPermission || deletePermission) && (\n              <td>\n                <span className=\"d-flex justify-content-center\">\n                  {editPermission && (\n                    <Link to={`/company/edit/${item?.companyId?._id}`}>\n                      <span className=\"cursor-pointer\">\n                        <FaEdit\n                          style={{ color: \"green\", fontSize: \"1.2rem\" }}\n                        />\n                      </span>\n                    </Link>\n                  )}\n                  {deletePermission && (\n                    <DeleteModal\n                      className=\"cursor-pointer \"\n                      onConfirmDelete={onConfirmDelete}\n                      id={item?.companyId?._id}\n                    >\n                      <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n                    </DeleteModal>\n                  )}\n                </span>\n              </td>\n            )}\n          </tr>\n        );\n      })}\n    </>\n  );\n};\n\nexport default CompanyTable;\n","import React, { useEffect } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  useQuery,\n  useQueryClient,\n  keepPreviousData,\n  useMutation,\n} from \"@tanstack/react-query\";\n\nimport MainPagetitle from \"@/components/MainPagetitle\";\nimport CompanyTable from \"../components/Table\";\nimport { deleteCompany, getAllCompanies } from \"../api\";\nimport { notifyError } from \"@/utils/toast\";\nimport usePagination from \"@/hooks/usePagination\";\nimport Paginate from \"@/components/Paginate\";\nimport TableSkeleton from \"@/components/Skeleton/Table\";\nimport GroupDropdownList from \"@/features/businessGroup/components/DropDownList\";\nimport { getApiErrorMessage } from \"@/utils/helper\";\nimport usePermissions from \"@/hooks/usePermissions\";\n\nconst customStyles = {\n  control: (base) => ({\n    ...base,\n    marginRight: \"1rem\",\n    marginLeft: \"1rem\",\n    width: \"15rem\",\n    height: \"0.6rem\",\n    menuPortal: (provided) => ({ ...provided, zIndex: 9999 }),\n    menu: (provided) => ({ ...provided, zIndex: 9999 }),\n  }),\n};\n\nconst CompanyList = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const { groupId } = useParams();\n  const { page, goToPage, setCount, totalCount } = usePagination();\n  const itemsPerPage = 10;\n  const { can } = usePermissions();\n  const queryClient = useQueryClient();\n  const { control } = useForm();\n\n  const { data, isLoading, isFetching } = useQuery({\n    queryKey: [\"companies\", page, groupId],\n    queryFn: () => getAllCompanies(page, groupId),\n    placeholderData: keepPreviousData,\n    staleTime: Infinity,\n  });\n\n  const { mutate } = useMutation({\n    onError: (err) => {\n      notifyError(getApiErrorMessage(err));\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries(\"companies\");\n    },\n    mutationFn: deleteCompany,\n  });\n\n  useEffect(() => {\n    if (data) setCount(data.totalCount);\n  }, [data]);\n\n  const handlePageClick = ({ selected }) => {\n    goToPage(selected + 1);\n  };\n\n  const handleClearFilter = () => {\n    navigate(\"/company\");\n  };\n\n  return (\n    <>\n      <MainPagetitle\n        mainTitle={t(\"company\")}\n        pageTitle={t(\"company\")}\n        parentTitle={t(\"home\")}\n      />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t(\"companies\")}</h4>\n                    <div className=\"d-flex align-items-center\">\n                      {can(\"business\", \"view\") && (\n                        <>\n                          <Link\n                            className=\"btn  btn-xxs\"\n                            data-bs-toggle=\"offcanvas\"\n                            onClick={handleClearFilter}\n                            to={\"/company\"}\n                            style={{\n                              background: \"gray\",\n                              border: \"gray\",\n                              color: \"white\",\n                            }}\n                          >\n                            Clear\n                          </Link>\n                          <Controller\n                            name=\"companyOptions\"\n                            control={control}\n                            rules={{ required: true }}\n                            render={({\n                              field: { onChange, value, name, ref },\n                            }) => (\n                              <GroupDropdownList\n                                onChange={(newValue) => {\n                                  navigate(`/company/gid/${newValue?.value}`);\n                                }}\n                                defaultValue={groupId}\n                                value={\n                                  !groupId && {\n                                    value: \"All Business Groups\",\n                                    label: t(\"allBusinessGroup\"),\n                                  }\n                                }\n                                customStyles={customStyles}\n                                ref={ref}\n                                isDisabled={!can(\"business\", \"view\")}\n                                name={name}\n                              />\n                            )}\n                          />\n                        </>\n                      )}\n\n                      {can(\"company\", \"add\") && (\n                        <Link\n                          to={\"/company/create\"}\n                          className=\"btn btn-primary btn-sm ms-1\"\n                          data-bs-toggle=\"offcanvas\"\n                          style={{ paddingBlock: \"9px\" }}\n                        >\n                          + {t(\"addCompany\")}\n                        </Link>\n                      )}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    <div className=\"table-responsive\">\n                      {isLoading || isFetching ? (\n                        <TableSkeleton />\n                      ) : (\n                        <table\n                          id=\"empoloyees-tblwrapper\"\n                          className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                        >\n                          <thead>\n                            <tr>\n                              <th>{t(\"id\")}</th>\n                              <th>{t(\"companyName\")}</th>\n                              <th>{t(\"businessGroup\")}</th>\n                              {/* <th>{t('mobileNumber')}</th> */}\n                              <th>{t(\"location\")}</th>\n                              <th>{t(\"email\")}</th>\n                              <th>{t(\"branches\")}</th>\n\n                              {(can(\"company\", \"modify\") ||\n                                can(\"company\", \"delete\")) && (\n                                <th className=\"d-flex justify-content-center\">\n                                  {t(\"action\")}\n                                </th>\n                              )}\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {data.data?.length ? (\n                              <CompanyTable\n                                tableData={data?.data ?? []}\n                                currentPage={page}\n                                itemsPerPage={itemsPerPage}\n                                onConfirmDelete={mutate}\n                              />\n                            ) : (\n                              <tr>\n                                <td colspan=\"10\" rowSpan={2} height={150}>\n                                  <h1 className=\"text-center\">\n                                    No Data found!\n                                  </h1>\n                                </td>\n                              </tr>\n                            )}\n                          </tbody>\n                        </table>\n                      )}\n                    </div>\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                        {t(\"showing\")} {(page - 1) * 10 + 1} {t(\"to\")}{\" \"}\n                        {Math.min(page * 10, totalCount)} {t(\"of\")} {totalCount}{\" \"}\n                        {t(\"entries\")}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                        <Paginate\n                          totalCount={totalCount}\n                          itemsPerPage={itemsPerPage}\n                          handlePageClick={handlePageClick}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\nexport default CompanyList;\n"],"names":["_ref","tableData","currentPage","itemsPerPage","onConfirmDelete","can","usePermissions","editPermission","deletePermission","startIndex","_jsx","_Fragment","children","map","item","index","_item$companyId","_item$companyId2","_item$companyId2$busi","_item$companyId3","_item$branchIds","_item$companyId4","_item$companyId5","_jsxs","className","companyId","companyName","businessGroupId","groupName","country","email","Link","to","_id","branchIds","length","FaEdit","style","color","fontSize","DeleteModal","id","MdDelete","customStyles","control","base","marginRight","marginLeft","width","height","menuPortal","provided","zIndex","menu","CompanyList","_data$data","_data$data2","t","useTranslation","navigate","useNavigate","groupId","useParams","page","goToPage","setCount","totalCount","usePagination","queryClient","useQueryClient","useForm","data","isLoading","isFetching","useQuery","queryKey","queryFn","getAllCompanies","placeholderData","keepPreviousData","staleTime","Infinity","mutate","useMutation","onError","err","notifyError","getApiErrorMessage","onSuccess","invalidateQueries","mutationFn","deleteCompany","useEffect","MainPagetitle","mainTitle","pageTitle","parentTitle","onClick","handleClearFilter","background","border","Controller","name","rules","required","render","_ref2","field","onChange","value","ref","GroupDropdownList","newValue","defaultValue","label","isDisabled","paddingBlock","TableSkeleton","CompanyTable","colspan","rowSpan","Math","min","Paginate","handlePageClick","selected"],"sourceRoot":""}