"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[1741],{28338:(e,s,a)=>{a.d(s,{A:()=>d});var l=a(78109),r=a(43097),n=a(48989),t=a(91197),i=a(75542),o=a(47337);const d=e=>{let{heading:s,register:a,errors:d,id:m,getValues:c}=e;const[u,x]=(0,l.useState)(!1);return(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("h3",{className:"mt-4 mb-4",children:s}),(0,o.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[(0,n.t)("username")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(t.A,{type:"text",register:a,label:"userName",name:"userName",placeholder:"",defaultValue:c("userName"),disabled:!!m}),(0,o.jsx)(i.A,{errorName:d.userName})]}),!m&&(0,o.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,o.jsxs)("label",{className:"form-label",children:[(0,n.t)("password")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsx)(t.A,{type:u?"text":"password",register:a,label:"Password",name:"password",placeholder:""}),(0,o.jsx)("span",{className:"showPasswordIcon",onClick:()=>{x(!u)},children:u?(0,o.jsx)(r.mI_,{}):(0,o.jsx)(r.ZT8,{})})]}),!m&&(0,o.jsx)(i.A,{errorName:d.password})]})]})}},5614:(e,s,a)=>{a.d(s,{A:()=>r});a(78109);var l=a(47337);const r=e=>{let{height:s="100vh"}=e;return(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:s,marginTop:"-50px"},children:(0,l.jsx)("div",{class:"spinner-border",role:"status",children:(0,l.jsx)("span",{class:"sr-only",children:"Loading..."})})})}},99021:(e,s,a)=>{a.d(s,{A:()=>p});var l=a(78109),r=a(85389),n=a(86554),t=a(74563),i=a(67236),o=a(34571),d=a(75542),m=a(91197),c=(a(7804),a(20460)),u=a(75383),x=a(28338),h=a(38969),b=a(31029),g=a(70076),j=a(47337);const p=e=>{let{setValue:s,getValues:a,register:p,onSubmit:v,handleSubmit:N,errors:f,control:A,isFormSubmitting:w}=e;const{fields:y,append:V,remove:C}=(0,n.jz)({control:A,name:"userInfo"}),[F,L]=(0,l.useState)(!1),{t:S}=(0,o.Bd)(),{id:P}=(0,i.g)(),{location:I,error:E}=(0,g.A)();return(0,j.jsxs)("div",{className:"p-4",children:[(0,j.jsxs)("div",{className:"row",style:{width:"85%"},children:[(0,j.jsx)("div",{children:E&&(0,j.jsx)("p",{children:E})}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,j.jsxs)("label",{className:"form-label",children:[S("businessGroupName")," ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(m.A,{type:"text",register:p,label:"groupName",name:"groupName",placeholder:"",defaultValue:a("groupName")}),(0,j.jsx)(d.A,{errorName:f.groupName})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 z-1",children:[(0,j.jsx)("label",{className:"form-label",children:S("tradeLicenseNumber")}),(0,j.jsx)(m.A,{type:"text",register:p,label:"tradeLicenseNumber",name:"tradeLicenseNumber",placeholder:"",defaultValue:a("tradeLicenseNumber")}),(0,j.jsx)(d.A,{errorName:f.tradeLicenseNumber})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 z-1",children:[(0,j.jsx)("label",{className:"form-label",children:S("officeNo")}),(0,j.jsx)(m.A,{type:"text",register:p,label:"officeNumber",name:"officeNumber",defaultValue:a("officeNumber")}),(0,j.jsx)(d.A,{errorName:f.officeNumber})]}),(0,j.jsxs)("span",{className:"absolute",style:{position:"absolute",top:"23%",right:"-42%",overflow:"hidden"},children:[(0,j.jsx)(u.A,{setValue:s,register:p,label:"Business Group Logo",name:"logo",getValue:a,setLoading:L,loading:F,link:a("logo")}),(0,j.jsx)(d.A,{errorName:f.logo})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,j.jsxs)("label",{className:"form-label",children:[S("email"),(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)(m.A,{type:"email",register:p,label:"Email",name:"email",placeholder:"",defaultValue:a("email"),disabled:!!P}),(0,j.jsx)(d.A,{errorName:f.email})]}),(0,j.jsx)(b.A,{register:p,setValue:s,errors:f,getValues:a,locationData:I,id:P,showCity:!0,Comptype:"businessGroupId"}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,j.jsx)("label",{className:"form-label",children:S("dateFormat")}),(0,j.jsx)(n.xI,{name:"dateFormat",control:A,render:e=>{let{field:{onChange:a,value:l,name:r,ref:n}}=e;return(0,j.jsx)(t.Ay,{onChange:e=>s("dateFormat",null===e||void 0===e?void 0:e.value),options:c.wJ,ref:n,name:r,styles:{control:e=>({...e,padding:".25rem 0 "})},value:{value:l,label:l}})}}),(0,j.jsx)(d.A,{errorName:f.dateFormat})]}),(0,j.jsxs)("div",{className:"col-xl-3 mb-3 ",children:[(0,j.jsx)("label",{className:"form-label",children:S("timeFormat")}),(0,j.jsx)(n.xI,{name:"timeFormat",control:A,render:e=>{let{field:{onChange:a,value:l,name:r,ref:n}}=e;return(0,j.jsx)(t.Ay,{onChange:e=>s("timeFormat",e.value),options:c.lD,ref:n,name:r,styles:{control:e=>({...e,padding:".25rem 0 "})},value:{value:l,label:l},defaultValue:c.lD[1]})}})]}),(0,j.jsx)(x.A,{heading:S("businessLoginDetails"),register:p,errors:f,id:P,getValues:a}),(0,j.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",margin:"2rem 0"},children:[(0,j.jsx)("h3",{children:S("contactDetails")}),(0,j.jsxs)(r.A,{type:"button",onClick:()=>{V({name:"",designation:"",mobileNumber:null,email:""})},style:{width:"10%"},children:[" ","ADD"]})]}),y.map(((e,s)=>(0,j.jsx)(h.A,{field:e,index:s,register:p,getValues:a,errors:f,fields:y,remove:C,id:P},e.id)))]}),(0,j.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,j.jsxs)(r.A,{type:"submit",disabled:F||w,onClick:N(v),style:{width:"10%"},children:[" ",S("submit")]})})]})}},31741:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var l=a(78109),r=a(67236),n=a(36145),t=a(93576),i=a(86554),o=a(53252),d=a(34571),m=a(4900),c=a(67889),u=a(6986),x=(a(1682),a(32343)),h=a(99021),b=a(81757),g=a(44988),j=a(70529),p=a(92704),v=a(96152),N=a(20460),f=a(5614),A=a(47337);const w=()=>{var e,s;const{t:a}=(0,d.Bd)(),[w,y]=(0,l.useState)(0),{id:V}=(0,r.g)();let C=[a(V?"editBusinessGroup":"newBusinessGroup"),a("changePassword")],F=[h.A,b.A];const L=(0,r.Zp)(),S=(0,m.jE)();V||(C=[a("newBusinessGroup")],F=[h.A]);const{data:P,isLoading:I,isError:E}=(0,c.I)({queryKey:["group",V],queryFn:()=>(0,p.Qo)(V),enabled:!!V,staleTime:1/0});(0,l.useEffect)((()=>{E&&V&&((0,j.U)("Not able to fetch business group data"),L("/not-found"))}),[E&&V]);const k=(0,l.useMemo)((()=>{var e,s;return{...P,...null===P||void 0===P?void 0:P.businessGroupId,logo:null!==(e=null===P||void 0===P||null===(s=P.businessGroupId)||void 0===s?void 0:s.logo)&&void 0!==e?e:null}}),[P]),{register:G,formState:{errors:B},setValue:D,getValues:T,control:K,handleSubmit:z}=(0,i.mN)({mode:"onChange",reValidateMode:"onChange",defaultValues:{userInfo:[{name:"",designation:"",mobileNumber:null,email:""}],timeFormat:null===(e=N.lD[1])||void 0===e?void 0:e.value,dateFormat:null===(s=N.wJ[1])||void 0===s?void 0:s.value},resolver:(0,o.t)(0===w?(0,g.eP)(V):g.Mw),values:k}),M=e=>(0,j.U)((0,v.SU)(e)),{mutate:Q,isPending:U}=(0,u.n)({mutationFn:e=>{let{data:s,id:a}=e;return(0,p.vW)(a,s)},onSuccess:()=>{(0,j.V)("Business group has been updated!"),S.invalidateQueries(["groups"]),L("/business")},onError:M}),{mutate:q,isPending:J}=(0,u.n)({mutationFn:p.wj,onSuccess:()=>{(0,j.V)("Business group created"),S.invalidateQueries(["groups"]),L("/business")},onError:M}),{mutate:Z,isPending:_}=(0,u.n)({mutationFn:p.ec,onSuccess:()=>{(0,j.V)("Password has been changed"),L("/business")},onError:M}),O=async e=>{if(0===w)null!=e.logo&&0!==e.logo.length||delete e.logo,e.file&&0===e.file.length&&delete e.file,V?Q({data:e,id:V}):q(e);else if(1===w){const s={password:e.newPassword,oldPassword:e.oldPassword,confirmPassword:e.confirmPassword,_id:V};Z(s)}};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(x.A,{mainTitle:a("businessGroup"),pageTitle:a(V?"edit":"create"),parentTitle:a("businessGroup")}),(0,A.jsx)("div",{className:"m-2 p-2",children:(0,A.jsx)(i.Op,{children:(0,A.jsx)("form",{onSubmit:z(O),children:(0,A.jsx)("div",{className:"default-tab",children:(0,A.jsxs)(n.A.Container,{defaultActiveKey:C[0].toLowerCase(),children:[(0,A.jsx)(t.A,{as:"ul",className:"nav-tabs",children:C.map(((e,s)=>(0,A.jsx)(t.A.Item,{as:"li",children:(0,A.jsx)(t.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:s===w,onClick:()=>y(s),children:e})},s)))}),(0,A.jsx)(n.A.Content,{className:"pt-4",children:I?(0,A.jsx)(f.A,{height:500}):C.map(((e,s)=>{const a=F[s];return(0,A.jsx)(n.A.Pane,{eventKey:e.toLowerCase(),active:s===w,children:(0,A.jsx)(a,{data:C,control:K,setValue:D,register:G,getValues:T,errors:B,handleSubmit:z,onSubmit:O,isFormSubmitting:J||U||_})},s)}))})]})})})})})]})}}}]);
//# sourceMappingURL=1741.5d4bd7f7.chunk.js.map