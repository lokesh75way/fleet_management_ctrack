"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[9807],{39807:(e,a,s)=>{s.r(a),s.d(a,{default:()=>_});var l=s(65043),n=s(35475),t=s(9866),r=s(6720),i=s(60184),c=s(51359),o=s(70579);const d=e=>{let{tableData:a,onConfirmDelete:s,editDrawerOpen:l,currentPage:n,itemsPerPage:t}=e;const d=(n-1)*t+1;return(0,o.jsx)(o.Fragment,{children:a.map(((e,a)=>{var n,t,m,x;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:d+a})}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{className:"products",children:(0,o.jsx)("div",{children:(0,o.jsx)("h6",{children:e.taskName})})})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:e.taskCategory})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:"".concat(null!==(n=null===(t=e.technician)||void 0===t?void 0:t.firstName)&&void 0!==n?n:""," ").concat(null!==(m=null===(x=e.technician)||void 0===x?void 0:x.lastName)&&void 0!==m?m:"")})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:e.serviceLocation})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"text-primary",children:e.reportingTime})}),(0,o.jsx)("td",{children:(0,o.jsxs)("span",{className:"d-flex justify-content-center",children:[(0,o.jsx)("span",{className:"cursor-pointer",onClick:()=>l(null===e||void 0===e?void 0:e._id),children:(0,o.jsx)(i.uO9,{style:{color:"green",fontSize:"1.2rem"}})}),(0,o.jsx)(c.A,{className:"cursor-pointer ",onConfirmDelete:s,id:e._id,children:(0,o.jsx)(r.b6i,{style:{color:"red",fontSize:"1.2rem"}})})]})})]},a)}))})};var m=s(28086),x=s(31899),h=s.n(x),j=(s(9531),s(24858)),u=s(2364),p=s(23764),g=s(69367),N=(s(72213),s(15075)),f=s(74117),b=s(94692),v=s(39343);const y=e=>{let{onChange:a,value:s,groupId:n,customStyles:t,name:r,ref:i,isDisabled:c}=e;const[d,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(s),{page:j}=(0,b.A)();return(0,l.useEffect)((()=>{(async()=>{const{technicians:e}=await(0,v.KZ)(j);console.log({technicians:e});const a=e.map((e=>{var a,s;return{value:null===e||void 0===e?void 0:e._id,label:"".concat(null!==(a=null===e||void 0===e?void 0:e.firstName)&&void 0!==a?a:""," ").concat(null!==(s=null===e||void 0===e?void 0:e.lastName)&&void 0!==s?s:"")}}));m(a)})()}),[]),(0,l.useEffect)((()=>{const e=d.find((e=>e.value===s));h(e)}),[s,d,n]),(0,o.jsx)(u.Ay,{options:d,value:x,onChange:e=>a(e),styles:t,name:r,ref:i,isDisabled:c})},k=(0,l.forwardRef)(((e,a)=>{let{Title:s,handleSubmit:t,editData:r,setEditData:i,control:c,setValue:d,getValues:x,register:b,errors:v,clearErrors:k,onSubmit:C,reset:T}=e;const[D,w]=(0,l.useState)(!1);(0,l.useImperativeHandle)(a,(()=>({showModal(){w(!0)},closeModal(){T(),k(),w(!1)}})));const{t:P}=(0,f.Bd)(),A={control:e=>({...e,padding:".25rem 0 "})};return(0,l.useEffect)((()=>{T({}),k(),D&&r?T({...r,technician:r.technician._id}):i()}),[D]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(m.A,{show:D,onHide:w,className:"offcanvas-end customeoff",placement:"end",children:[(0,o.jsxs)("div",{className:"offcanvas-header",children:[(0,o.jsx)("h5",{className:"modal-title",id:"#gridSystemModal",children:s}),(0,o.jsx)("button",{type:"button",className:"btn-close",onClick:()=>w(!1),children:(0,o.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,o.jsx)("div",{className:"offcanvas-body",children:(0,o.jsx)("div",{className:"container-fluid",children:(0,o.jsx)(j.Op,{children:(0,o.jsxs)("form",{noValidate:!0,onSubmit:t(C),children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[P("technician")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(j.xI,{name:"technician",control:c,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:n}}=e;return(0,o.jsx)(y,{onChange:e=>{d("technician",e.value)},value:s,customStyles:A,ref:n,name:l})}}),!x("technician")&&(0,o.jsx)(p.A,{errorName:v.technician})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[P("taskCategory"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(j.xI,{name:"c",control:c,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:n}}=e;return(0,o.jsx)(u.Ay,{onChange:e=>{d("taskCategory",e.value)},options:N.qf,ref:n,name:l,styles:A,value:x("taskCategory")})}}),!x("taskCategory")&&(0,o.jsx)(p.A,{errorName:v.taskCategory})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{htmlFor:"exampleFormControlInput2",className:"form-label",children:[P("taskName")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(g.A,{type:"text",register:b,name:"taskName",label:"Task Name",placeholder:""}),(0,o.jsx)(p.A,{errorName:v.taskName})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[P("taskPriority")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(j.xI,{name:"taskPriority",control:c,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:n}}=e;return(0,o.jsx)(u.Ay,{onChange:e=>{d("taskPriority",e.value)},options:N.YR,ref:n,name:l,styles:A,value:x("taskPriority")})}}),!x("taskPriority")&&(0,o.jsx)(p.A,{errorName:v.taskPriority})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsx)("label",{className:"form-label",children:P("contactPersonName")}),(0,o.jsx)(g.A,{type:"text",register:b,name:"contactPersonName",label:"Contact Person Name",placeholder:""})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:P("contactPersonNumber")}),(0,o.jsx)(g.A,{type:"number",register:b,name:"contactPersonNumber",label:"Contact Person Number",placeholder:""}),(0,o.jsx)(p.A,{errorName:v.contactPersonNumber})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[P("serviceLocation"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(g.A,{type:"text",name:"serviceLocation",register:b,label:"Service Location",placeholder:""}),(0,o.jsx)(p.A,{errorName:v.serviceLocation})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3 d-flex flex-column",children:[(0,o.jsxs)("label",{className:"form-label",children:[P("plannedReportingDate")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(j.xI,{name:"plannedReportingDate",control:c,render:e=>{let{value:a,name:s}=e;return(0,o.jsx)(h(),{selected:x("plannedReportingDate")?new Date(x("plannedReportingDate")):new Date,className:"form-control customDateHeight",onChange:e=>d("plannedReportingDate",e)})}}),!x("plannedReportingDate")&&(0,o.jsx)(p.A,{errorName:v.plannedReportingDate})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,o.jsxs)("label",{className:"form-label",children:[P("reportingTime"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(g.A,{type:"time",register:b,name:"reportingTime",label:"Reporting Time",placeholder:""}),(0,o.jsx)(p.A,{errorName:v.reportingTime})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsx)("label",{className:"form-label",children:P("description")}),(0,o.jsx)("div",{className:"mb-3 ",children:(0,o.jsx)("textarea",{className:"form-txtarea form-control",...b,name:"description",label:"Description",rows:"8",id:"comment"})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{type:"submit",onClick:()=>{console.log("clicked here"),t(C),console.log({errors:v})},className:"btn btn-primary me-1 m-1",children:P("submit")}),(0,o.jsx)(n.N_,{to:"#",onClick:()=>w(!1),className:"btn btn-danger light ms-1 m-1",children:P("cancel")})]})]})})})})]})})}));var C=s(18403),T=s(87742),D=s(58387),w=s(33723),P=s(42457),A=s(92157),S=s.n(A);const _=e=>{const{t:a}=(0,f.Bd)(),{isRtl:s}=(0,l.useContext)(w.D),[r,i]=((0,D.$)({"fa-solid fa-angle-right":s,"fa-solid fa-angle-left":!s}),(0,D.$)({"fa-solid fa-angle-left":s,"fa-solid fa-angle-right":!s}),(0,l.useState)([])),{page:c,nextPage:m,prevPage:x,goToPage:h,setCount:u,totalCount:p,setPage:g}=(0,b.A)(),[N,y]=(0,l.useState)();(0,l.useEffect)((()=>{(async(e,a)=>{try{const{data:a,totalCount:s}=await(0,v.x1)(e,10);i(a),u(s)}catch(s){(0,P.U)("Error in fetching data")}})(c)}),[c]);const{register:A,formState:{errors:_},setValue:E,getValues:L,control:R,handleSubmit:I,clearErrors:V,reset:F}=(0,j.mN)({resolver:(0,C.t)(T.l2)}),M=10*(c-1),q=(r.slice(M,M+10),(0,l.useRef)());return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.A,{mainTitle:a("technicianTask"),pageTitle:a("technicianTask"),parentTitle:a("technician")}),(0,o.jsx)("div",{className:"container-fluid",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-xl-12",children:(0,o.jsx)("div",{className:"card",children:(0,o.jsx)("div",{className:"card-body p-0",children:(0,o.jsxs)("div",{className:"table-responsive active-projects style-1 ItemsCheckboxSec shorting",children:[(0,o.jsxs)("div",{className:"tbl-caption d-flex justify-content-between text-wrap align-items-center",children:[(0,o.jsx)("h4",{className:"heading mb-0",children:a("technicianTask")}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(n.N_,{to:"#",className:"btn btn-primary btn-sm ms-1","data-bs-toggle":"offcanvas",onClick:()=>{V(),F(),q.current.showModal()},children:["+ ",a("addTechnicianTask")]})," "]})]}),(0,o.jsxs)("div",{id:"employee-tbl_wrapper",className:"dataTables_wrapper no-footer",children:[(0,o.jsxs)("table",{id:"empoloyees-tblwrapper",className:"table ItemsCheckboxSec dataTable no-footer mb-0",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:a("id")}),(0,o.jsx)("th",{children:a("taskName")}),(0,o.jsx)("th",{children:a("taskCategory")}),(0,o.jsx)("th",{children:a("technicianName")}),(0,o.jsx)("th",{children:a("serviceLocation")}),(0,o.jsx)("th",{children:a("reportingTime")}),(0,o.jsx)("th",{children:a("action")})]})}),(0,o.jsx)("tbody",{children:(0,o.jsx)(d,{tableData:r,onConfirmDelete:async e=>{try{await(0,v.vq)(e);const a=r.filter((a=>a._id!==e));i(a),u(p-1),(0,P.V)("Task Deleted")}catch(a){(0,P.U)("Something Went Wrong")}},editDrawerOpen:e=>{r.map((a=>a._id===e&&y(a))),q.current.showModal()},setEditData:y,currentPage:c,itemsPerPage:10})})]}),(0,o.jsxs)("div",{className:"d-sm-flex text-center justify-content-between align-items-center",children:[(0,o.jsxs)("div",{className:"dataTables_info",children:[a("showing")," ",10*(c-1)+1," ",a("to")," ",Math.min(10*c,p)," ",a("of")," ",p," ",a("entries")]}),(0,o.jsx)("div",{className:"dataTables_paginate paging_simple_numbers",id:"example2_paginate",children:(0,o.jsx)(S(),{previousLabel:(0,o.jsx)("i",{className:"fa-solid fa-angle-left"}),nextLabel:(0,o.jsx)("i",{className:"fa-solid fa-angle-right"}),breakLabel:"...",pageCount:Math.ceil(p/10),marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:e=>{let{selected:a}=e;h(a+1)},containerClassName:"pagination",activeClassName:"active",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link"})})]})]})]})})})})})}),(0,o.jsx)(k,{ref:q,editData:N,control:R,setValue:E,getValues:L,onSubmit:async e=>{try{e._id&&0!==e._id?(await(0,v.lC)(e,e._id),(0,P.V)("Task Added Successfully !!"),q.current.closeModal()):(await(0,v.UT)(e),(0,P.V)("Task Added Successfully !!"),q.current.closeModal())}catch(t){var s,l,n;const e=null===(s=t.response)||void 0===s||null===(l=s.data)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.errors;e&&e.length>0?(0,P.U)(e[0].msg):(0,P.U)(a("someErrorOccurred"))}},register:A,errors:_,setEditData:y,handleSubmit:I,clearErrors:V,reset:F,Title:N&&0!==N._id?a("editTask"):a("addTask")})]})}}}]);
//# sourceMappingURL=9807.feacb3cf.chunk.js.map