{"version":3,"file":"static/js/6519.a1f07245.chunk.js","mappings":"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","sources":["jsx/components/Tables/VehicleTable.jsx","jsx/pages/Vehicle.jsx"],"sourcesContent":["import React from \"react\";\nimport DeleteModal from \"../Modal/DeleteModal\";\nimport { MdDelete } from \"react-icons/md\";\nimport { FaEdit } from \"react-icons/fa\";\nimport { FaCar } from \"react-icons/fa6\";\nimport useStorage from \"../../../hooks/useStorage\";\nimport { usePermissions } from \"../../../context/PermissionContext\";\n\nconst VehicleTable = ({ tableData, onConfirmDelete, editDrawerOpen }) => {\n  // const { getData } = useStorage();\n  // const filteredItems = getData(tableData);\n  const {can} = usePermissions()\n  const editPermission = can('vehicle','modify')\n  const deletePermission = can('vehicle','delete')\n  if(tableData.length ===0){\n    return;\n  }\n  return tableData?.map((item, index) => (\n  \n    <tr key={item.id}>\n      <td>\n        <div className=\"products\">\n          <div>\n            <h6>{item.vehicleName}</h6>\n          </div>\n        </div>\n      </td>\n      <td>\n        <span>{item.plateNumber}</span>\n      </td>\n      <td>\n        <span className=\"text-primary\">{item?.branchId?.branchName}</span>\n      </td>\n      \n      <td>\n        <span>{item.simNumber}</span>\n      </td>\n      <td>\n        <span>{item.imeiNumber}</span>\n      </td>\n      <td>\n        <span className=\"text-primary\">{item.registrationNumber}</span>\n      </td>\n      <td>\n        <span>{item.weightCapacity}</span>\n      </td>\n      {/* <td>\n                <span className={`badge light border-0 ${item.status===\"Active\" ? 'badge-success' : 'badge-danger'} `}style={{width:\"45%\"}}>{item.status}</span>\n            </td> */}\n      {(deletePermission || editPermission) && <td>\n        <span className=\"d-flex justify-content-center\">\n          {editPermission && <span\n            className=\"cursor-pointer\"\n            onClick={() => editDrawerOpen(item._id)}\n          >\n            <FaEdit style={{ color: \"green\", fontSize: \"1.2rem\" }} />\n          </span>}\n          {deletePermission && <DeleteModal\n            className=\"cursor-pointer \"\n            onConfirmDelete={onConfirmDelete}\n            id={item._id}\n          >\n            <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n          </DeleteModal>}\n        </span>\n      </td>}\n    </tr>\n  ));\n};\n\nexport default VehicleTable;\n","import React, { useState, useRef, useEffect, useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport VehicleTable from \"../components/Tables/VehicleTable\";\nimport { ThemeContext } from \"../../context/ThemeContext\";\nimport MainPagetitle from \"../layouts/MainPagetitle\";\nimport { clsx } from \"clsx\";\nimport VehicleServices from \"../../services/api/VehicleService\";\nimport { usePermissions } from \"../../context/PermissionContext\";\nimport { deleteVehicles, getVehicles } from \"../../services/api/VehicleService\";\n\nimport {useTranslation} from 'react-i18next'\n\nconst Vehicle = () => {\n\n  const { t } = useTranslation();\n  const { isRtl } = useContext(ThemeContext);\n  const {can} = usePermissions()\n  const arrowleft = clsx({\n    \"fa-solid fa-angle-right\": isRtl,\n    \"fa-solid fa-angle-left\": !isRtl,\n  });\n  const arrowright = clsx({\n    \"fa-solid fa-angle-left\": isRtl,\n    \"fa-solid fa-angle-right\": !isRtl,\n  });\n  //   const { setAddVehicle, addVehicle } = useContext(ThemeContext);\n\n\n  const navigate = useNavigate();\n  const [deleteId, setDeleteId] = useState();\n  const [data, setData] = useState(\n    document.querySelectorAll(\"#employee-tbl_wrapper tbody tr\")\n  );\n  const [tableData, setTableData] = useState([]);\n  const [editData, setEditData] = useState({\n    id: 0,\n    vehicleName: \"\",\n    plateNumber: \"\",\n    simNumber: 0,\n    IMEINumber: 0,\n    GPSDeviceType: \"\",\n    distanceCounter: 0,\n  });\n  const sort = 10;\n  const activePage = useRef(0);\n  const [test, settest] = useState(0);\n  const chageData = (frist, sec) => {\n    for (var i = 0; i < data.length; ++i) {\n      if (i >= frist && i < sec) {\n        data[i].classList.remove(\"d-none\");\n      } else {\n        data[i].classList.add(\"d-none\");\n      }\n    }\n  };\n  async function getVehicleData() {\n    try {\n      const { data , totalLength} = await getVehicles();\n      setTableData(data);\n    } catch (error) {\n      console.log(\"Error in fetching data\", error);\n    }\n  }\n\n  useEffect(() => {\n    setData(document.querySelectorAll(\"#employee-tbl_wrapper tbody tr\"));\n  }, [test]);\n\n  useEffect(() => {\n    getVehicleData();\n  }, [deleteId]);\n\n  activePage.current === 0 && chageData(0, sort);\n  let paggination = Array(Math.ceil(data.length / sort))\n    .fill()\n    .map((_, i) => i + 1);\n\n  const onClick = (i) => {\n    activePage.current = i;\n    chageData(activePage.current * sort, (activePage.current + 1) * sort);\n    settest(i);\n  };\n\n  // delete function\n  const onConfirmDelete = (id) => {\n    deleteVehicles(id);\n    getVehicleData(id);\n    setDeleteId(id);\n  };\n  // Edit function\n  const editDrawerOpen = (id) => {\n    // tableData.map((table) => table.id === id && setEditData(table));\n\n    const data = tableData.filter((item) => item._id === id);\n\n    navigate(`edit/${id}`,{ state: { formData: data } });\n    // vehicle.current.showModal();\n  };\n\n\n  const vehicle = useRef();\n  return (\n    <>\n      <MainPagetitle\n        mainTitle={t('vehicle')}\n        pageTitle={t('vehicle')}\n        parentTitle={t('home')}\n      />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"table-responsive active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t('vehicle')}</h4>\n                    <div>\n                     {can('vehicle','add') && <Link\n                        to={\"/vehicle/create\"}\n                        className=\"btn btn-primary btn-sm ms-1\"\n                        data-bs-toggle=\"offcanvas\"\n                      >\n                        + {t('addVehicleInfo')}\n                      </Link>}{\" \"}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    <table\n                      id=\"empoloyees-tblwrapper\"\n                      className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                    >\n                      <thead>\n                        <tr>\n                          <th>{t('vehicleName')}</th>\n                          <th>{t('plateNumber')}</th>\n                          <th>{t('branch')}</th>\n                          <th>{t('simNumber')}</th>\n                          <th>{t('IMEINumber')}</th>\n                          <th>{t('registrationNumber')}</th>\n                          <th>{t('weightCapacity')}</th>\n                          {(can('vehicle','modify') || can('vehicle','delete')) && <th>{t('action')}</th>}\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <VehicleTable\n                          tableData={tableData}\n                          onConfirmDelete={onConfirmDelete}\n                          editDrawerOpen={editDrawerOpen}\n                        />\n                      </tbody>\n                    </table>\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                      {t('showing')} {activePage.current * sort + 1} {t('to')}{\" \"}\n                        {data.length > (activePage.current + 1) * sort\n                          ? (activePage.current + 1) * sort\n                          : data.length}{\" \"}\n                        {t('of')} {data.length} {t('entries')}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                        <Link\n                          className=\"paginate_button previous disabled\"\n                          to=\"/vehicle\"\n                          onClick={() =>\n                            activePage.current > 0 &&\n                            onClick(activePage.current - 1)\n                          }\n                        >\n                          <i className={arrowleft} />\n                        </Link>\n                        <span>\n                          {paggination.map((number, i) => (\n                            <Link\n                              key={i}\n                              to=\"/vehicle\"\n                              className={`paginate_button  ${\n                                activePage.current === i ? \"current\" : \"\"\n                              } `}\n                              onClick={() => onClick(i)}\n                            >\n                              {number}\n                            </Link>\n                          ))}\n                        </span>\n                        <Link\n                          className=\"paginate_button next\"\n                          to=\"/vehicle\"\n                          onClick={() =>\n                            activePage.current + 1 < paggination.length &&\n                            onClick(activePage.current + 1)\n                          }\n                        >\n                          <i className={arrowright} />\n                        </Link>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Vehicle;\n"],"names":["_ref","tableData","onConfirmDelete","editDrawerOpen","can","usePermissions","editPermission","deletePermission","length","map","item","index","_item$branchId","_jsxs","children","_jsx","className","vehicleName","plateNumber","branchId","branchName","simNumber","imeiNumber","registrationNumber","weightCapacity","onClick","_id","FaEdit","style","color","fontSize","DeleteModal","id","MdDelete","Vehicle","t","useTranslation","isRtl","useContext","ThemeContext","arrowleft","clsx","arrowright","navigate","useNavigate","deleteId","setDeleteId","useState","data","setData","document","querySelectorAll","setTableData","editData","setEditData","IMEINumber","GPSDeviceType","distanceCounter","sort","activePage","useRef","test","settest","chageData","frist","sec","i","classList","remove","add","async","getVehicleData","totalLength","getVehicles","error","console","log","useEffect","current","paggination","Array","Math","ceil","fill","_","_Fragment","MainPagetitle","mainTitle","pageTitle","parentTitle","Link","to","VehicleTable","deleteVehicles","filter","concat","state","formData","number"],"sourceRoot":""}