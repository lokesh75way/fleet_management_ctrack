"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[9807],{39807:(e,a,s)=>{s.r(a),s.d(a,{default:()=>A});var l=s(65043),t=s(35475),n=s(9866),r=s(6720),i=s(60184),c=s(51359),o=s(70579);const d=e=>{let{tableData:a,onConfirmDelete:s,editDrawerOpen:l}=e;return(0,o.jsx)(o.Fragment,{children:a.map(((e,a)=>{var t,n,d,m;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:e._id})}),(0,o.jsx)("td",{children:(0,o.jsx)("div",{className:"products",children:(0,o.jsx)("div",{children:(0,o.jsx)("h6",{children:e.taskName})})})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:e.taskCategory})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:"".concat(null!==(t=null===(n=e.technician)||void 0===n?void 0:n.firstName)&&void 0!==t?t:""," ").concat(null!==(d=null===(m=e.technician)||void 0===m?void 0:m.lastName)&&void 0!==d?d:"")})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{children:e.serviceLocation})}),(0,o.jsx)("td",{children:(0,o.jsx)("span",{className:"text-primary",children:e.reportingTime})}),(0,o.jsx)("td",{children:(0,o.jsxs)("span",{className:"d-flex justify-content-center",children:[(0,o.jsx)("span",{className:"cursor-pointer",onClick:()=>l(null===e||void 0===e?void 0:e._id),children:(0,o.jsx)(i.uO9,{style:{color:"green",fontSize:"1.2rem"}})}),(0,o.jsx)(c.A,{className:"cursor-pointer ",onConfirmDelete:s,id:e._id,children:(0,o.jsx)(r.b6i,{style:{color:"red",fontSize:"1.2rem"}})})]})})]},a)}))})};var m=s(28086),x=s(31899),h=s.n(x),j=(s(9531),s(24858)),u=s(2364),p=s(23764),N=s(69367),b=(s(72213),s(15075)),g=s(74117),f=s(94692),v=s(39343);const y=e=>{let{onChange:a,value:s,groupId:t,customStyles:n,name:r,ref:i,isDisabled:c}=e;const[d,m]=(0,l.useState)([]),[x,h]=(0,l.useState)(s),{page:j}=(0,f.A)();return(0,l.useEffect)((()=>{(async()=>{const{technicians:e}=await(0,v.KZ)(j);console.log({technicians:e});const a=e.map((e=>{var a,s;return{value:null===e||void 0===e?void 0:e._id,label:"".concat(null!==(a=null===e||void 0===e?void 0:e.firstName)&&void 0!==a?a:""," ").concat(null!==(s=null===e||void 0===e?void 0:e.lastName)&&void 0!==s?s:"")}}));m(a)})()}),[]),(0,l.useEffect)((()=>{const e=d.find((e=>e.value===s));h(e)}),[s,d,t]),(0,o.jsx)(u.Ay,{options:d,value:x,onChange:e=>a(e),styles:n,name:r,ref:i,isDisabled:c})},k=(0,l.forwardRef)(((e,a)=>{let{Title:s,handleSubmit:n,editData:r,setEditData:i,control:c,setValue:d,getValues:x,register:f,errors:v,clearErrors:k,onSubmit:C,reset:T}=e;const[D,w]=(0,l.useState)(!1);(0,l.useImperativeHandle)(a,(()=>({showModal(){w(!0)},closeModal(){T(),k(),w(!1)}})));const{t:_}=(0,g.Bd)(),A={control:e=>({...e,padding:".25rem 0 "})};return(0,l.useEffect)((()=>{T({}),k(),D&&r?T({...r,technician:r.technician._id}):i()}),[D]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(m.A,{show:D,onHide:w,className:"offcanvas-end customeoff",placement:"end",children:[(0,o.jsxs)("div",{className:"offcanvas-header",children:[(0,o.jsx)("h5",{className:"modal-title",id:"#gridSystemModal",children:s}),(0,o.jsx)("button",{type:"button",className:"btn-close",onClick:()=>w(!1),children:(0,o.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,o.jsx)("div",{className:"offcanvas-body",children:(0,o.jsx)("div",{className:"container-fluid",children:(0,o.jsx)(j.Op,{children:(0,o.jsxs)("form",{noValidate:!0,onSubmit:n(C),children:[(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[_("technician")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(j.xI,{name:"technician",control:c,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:t}}=e;return(0,o.jsx)(y,{onChange:e=>{d("technician",e.value)},value:s,customStyles:A,ref:t,name:l})}}),!x("technician")&&(0,o.jsx)(p.A,{errorName:v.technician})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[_("taskCategory"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(j.xI,{name:"c",control:c,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:t}}=e;return(0,o.jsx)(u.Ay,{onChange:e=>{d("taskCategory",e.value)},options:b.qf,ref:t,name:l,styles:A,value:x("taskCategory")})}}),!x("taskCategory")&&(0,o.jsx)(p.A,{errorName:v.taskCategory})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{htmlFor:"exampleFormControlInput2",className:"form-label",children:[_("taskName")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(N.A,{type:"text",register:f,name:"taskName",label:"Task Name",placeholder:""}),(0,o.jsx)(p.A,{errorName:v.taskName})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[_("taskPriority")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(j.xI,{name:"taskPriority",control:c,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:l,ref:t}}=e;return(0,o.jsx)(u.Ay,{onChange:e=>{d("taskPriority",e.value)},options:b.YR,ref:t,name:l,styles:A,value:x("taskPriority")})}}),!x("taskPriority")&&(0,o.jsx)(p.A,{errorName:v.taskPriority})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsx)("label",{className:"form-label",children:_("contactPersonName")}),(0,o.jsx)(N.A,{type:"text",register:f,name:"contactPersonName",label:"Contact Person Name",placeholder:""})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:_("contactPersonNumber")}),(0,o.jsx)(N.A,{type:"number",register:f,name:"contactPersonNumber",label:"Contact Person Number",placeholder:""}),(0,o.jsx)(p.A,{errorName:v.contactPersonNumber})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsxs)("label",{className:"form-label",children:[_("serviceLocation"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(N.A,{type:"text",name:"serviceLocation",register:f,label:"Service Location",placeholder:""}),(0,o.jsx)(p.A,{errorName:v.serviceLocation})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3 d-flex flex-column",children:[(0,o.jsxs)("label",{className:"form-label",children:[_("plannedReportingDate")," ",(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(j.xI,{name:"plannedReportingDate",control:c,render:e=>{let{value:a,name:s}=e;return(0,o.jsx)(h(),{selected:x("plannedReportingDate")?new Date(x("plannedReportingDate")):new Date,className:"form-control customDateHeight",onChange:e=>d("plannedReportingDate",e)})}}),!x("plannedReportingDate")&&(0,o.jsx)(p.A,{errorName:v.plannedReportingDate})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,o.jsxs)("label",{className:"form-label",children:[_("reportingTime"),(0,o.jsx)("span",{className:"text-danger",children:"*"})]}),(0,o.jsx)(N.A,{type:"time",register:f,name:"reportingTime",label:"Reporting Time",placeholder:""}),(0,o.jsx)(p.A,{errorName:v.reportingTime})]}),(0,o.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,o.jsx)("label",{className:"form-label",children:_("description")}),(0,o.jsx)("div",{className:"mb-3 ",children:(0,o.jsx)("textarea",{className:"form-txtarea form-control",...f,name:"description",label:"Description",rows:"8",id:"comment"})})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{type:"submit",onClick:()=>{console.log("clicked here"),n(C),console.log({errors:v})},className:"btn btn-primary me-1 m-1",children:_("submit")}),(0,o.jsx)(t.N_,{to:"#",onClick:()=>w(!1),className:"btn btn-danger light ms-1 m-1",children:_("cancel")})]})]})})})})]})})}));var C=s(18403),T=s(87742),D=s(58387),w=s(33723),_=s(42457);const A=e=>{const{t:a}=(0,g.Bd)(),{isRtl:s}=(0,l.useContext)(w.D),r=(0,D.$)({"fa-solid fa-angle-right":s,"fa-solid fa-angle-left":!s}),i=(0,D.$)({"fa-solid fa-angle-left":s,"fa-solid fa-angle-right":!s}),[c,m]=(0,l.useState)([]),{page:x,nextPage:h,prevPage:u,goToPage:p,setCount:N,totalCount:b,setPage:y}=(0,f.A)(),[A,S]=(0,l.useState)();(0,l.useEffect)((()=>{(async(e,a)=>{try{const{data:a,totalCount:s}=await(0,v.x1)(e,10);m(a),N(s)}catch(s){(0,_.U)("Error in fetching data")}})(x)}),[x]);const{register:P,formState:{errors:E},setValue:R,getValues:I,control:V,handleSubmit:F,clearErrors:M,reset:L}=(0,j.mN)({resolver:(0,C.t)(T.l2)}),q=(0,l.useRef)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.A,{mainTitle:a("technicianTask"),pageTitle:a("technicianTask"),parentTitle:a("technician")}),(0,o.jsx)("div",{className:"container-fluid",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-xl-12",children:(0,o.jsx)("div",{className:"card",children:(0,o.jsx)("div",{className:"card-body p-0",children:(0,o.jsxs)("div",{className:"table-responsive active-projects style-1 ItemsCheckboxSec shorting",children:[(0,o.jsxs)("div",{className:"tbl-caption d-flex justify-content-between text-wrap align-items-center",children:[(0,o.jsx)("h4",{className:"heading mb-0",children:a("technicianTask")}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(t.N_,{to:"#",className:"btn btn-primary btn-sm ms-1","data-bs-toggle":"offcanvas",onClick:()=>{M(),L(),q.current.showModal()},children:["+ ",a("addTechnicianTask")]})," "]})]}),(0,o.jsxs)("div",{id:"employee-tbl_wrapper",className:"dataTables_wrapper no-footer",children:[(0,o.jsxs)("table",{id:"empoloyees-tblwrapper",className:"table ItemsCheckboxSec dataTable no-footer mb-0",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:a("id")}),(0,o.jsx)("th",{children:a("taskName")}),(0,o.jsx)("th",{children:a("taskCategory")}),(0,o.jsx)("th",{children:a("technicianName")}),(0,o.jsx)("th",{children:a("serviceLocation")}),(0,o.jsx)("th",{children:a("reportingTime")}),(0,o.jsx)("th",{children:a("action")})]})}),(0,o.jsx)("tbody",{children:(0,o.jsx)(d,{tableData:c,onConfirmDelete:async e=>{try{await(0,v.vq)(e);const a=c.filter((a=>a._id!==e));m(a),N(b-1),(0,_.V)("Task Deleted")}catch(a){(0,_.U)("Something Went Wrong")}},editDrawerOpen:e=>{c.map((a=>a._id===e&&S(a))),q.current.showModal()},setEditData:S})})]}),(0,o.jsxs)("div",{className:"d-sm-flex text-center justify-content-between align-items-center",children:[(0,o.jsxs)("div",{className:"dataTables_info",children:[a("showing")," ",10*(x-1)+1," ",a("to")," ",Math.min(10*x,b)," ",a("of")," ",b," ",a("entries")]}),(0,o.jsxs)("div",{className:"dataTables_paginate paging_simple_numbers",id:"example2_paginate",children:[(0,o.jsx)(t.N_,{className:"paginate_button ".concat(1===x?"previous disabled":"previous"),to:"#",onClick:()=>u(x-1),children:(0,o.jsx)("i",{className:r})}),(0,o.jsx)("span",{children:[...Array(Math.ceil(b/10)).keys()].map((e=>(0,o.jsx)(t.N_,{className:"paginate_button ".concat(x===e+1?"current":""),onClick:()=>p(e+1),children:e+1},e)))}),(0,o.jsx)(t.N_,{className:"paginate_button ".concat(10*x>=b?"next disabled":"next"),to:"#",onClick:()=>h(x+1),children:(0,o.jsx)("i",{className:i})})]})]})]})]})})})})})}),(0,o.jsx)(k,{ref:q,editData:A,control:V,setValue:R,getValues:I,onSubmit:async e=>{try{e._id&&0!==e._id?(await(0,v.lC)(e,e._id),(0,_.V)("Task Added Successfully !!"),q.current.closeModal()):(await(0,v.UT)(e),(0,_.V)("Task Added Successfully !!"),q.current.closeModal())}catch(n){var s,l,t;const e=null===(s=n.response)||void 0===s||null===(l=s.data)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.errors;e&&e.length>0?(0,_.U)(e[0].msg):(0,_.U)(a("someErrorOccurred"))}},register:P,errors:E,setEditData:S,handleSubmit:F,clearErrors:M,reset:L,Title:A&&0!==A._id?a("editTask"):a("addTask")})]})}}}]);
//# sourceMappingURL=9807.e4058c64.chunk.js.map