"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[6411],{6411:(e,l,a)=>{a.r(l),a.d(l,{default:()=>A});var s=a(65043),t=a(44816),n=a(86856),r=a(24858),c=a(18403),o=a(70228),m=a(73216),i=a(35475),d=a(31899),x=a.n(d),h=a(42297),u=(a(9531),a(74117)),b=a(74805),j=a(4437),p=a(28334),v=(a(50377),a(94692),a(70579));var f=a(87460),N=a(87407);const g=e=>{var l,a;let{Title:t,editData:n,setEditData:c,register:o,setValue:d,getValues:g,handleSubmit:y,onSubmit:k,errors:D,control:A,clearErrors:C}=e;const[w,I]=(0,s.useState)(new Date),[S,F]=(0,s.useState)(new Date),[E,V]=(0,s.useState)(new Date),[L,B]=(0,s.useState)(!1),[T,R]=(0,s.useState)(null),[U,H]=(0,s.useState)(!1),[Z,P]=(0,s.useState)(null),[K,O]=(0,s.useState)(null),[X,z]=(0,s.useState)(),[Y,J]=(0,s.useState)([]),[W,_]=(0,s.useState)(null),q=((0,m.Zp)(),(0,m.zy)()),G=e=>{R(e.target.value),d("category",e.target.value)},M=e=>{P(e.target.value),d("jobAllocation",e.target.value)},Q={control:e=>({...e,padding:".25rem 0 "})},[$,ee]=(0,s.useState)(!1),{t:le}=(0,u.Bd)(),{id:ae}=(0,m.g)();return(0,s.useEffect)((()=>{if(ae){const e=q.state[0];J(e)}}),[ae]),(0,s.useEffect)((()=>{if(ae&&null!==Y&&void 0!==Y&&Y.fromDate&&null!==Y&&void 0!==Y&&Y.toDate&&null!==Y&&void 0!==Y&&Y.expenseDate){d("branch",null===Y||void 0===Y?void 0:Y.branch),d("type",null===Y||void 0===Y?void 0:Y.type),d("amount",null===Y||void 0===Y?void 0:Y.amount),d("referenceNumber",null===Y||void 0===Y?void 0:Y.referenceNumber),d("odometer",null===Y||void 0===Y?void 0:Y.odometer),d("description",null===Y||void 0===Y?void 0:Y.description),d("workHour",null===Y||void 0===Y?void 0:Y.workHour);const e=new Date(null===Y||void 0===Y?void 0:Y.fromDate);d("fromDate",e);const l=new Date(null===Y||void 0===Y?void 0:Y.toDate);d("toDate",l);const a=new Date(null===Y||void 0===Y?void 0:Y.expenseDate);d("expenseDate",a),d("bill",null===Y||void 0===Y?void 0:Y.bill),d("category",null===Y||void 0===Y?void 0:Y.category),_(null===Y||void 0===Y?void 0:Y.bill)}}),[Y,ae]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"p-4",children:[(0,v.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsxs)("label",{className:"form-label",children:[le("branch"),(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(r.xI,{name:"branch",control:A,render:e=>{let{field:{onChange:l,value:a,name:s,ref:t}}=e;return(0,v.jsx)(j.A,{onChange:e=>{d("branch",null===e||void 0===e?void 0:e.value)},value:a,customStyles:Q,ref:t,name:s})}}),!g("branch")&&(0,v.jsx)(p.A,{errorName:D.branch})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsxs)("label",{className:"form-label",children:[le("category"),(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"VARIABLE",checked:"VARIABLE"===(null!==(l=g("category"))&&void 0!==l?l:T),onChange:G}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:le("variable")})]}),(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"FIX",checked:"FIX"===(null!==(a=g("category"))&&void 0!==a?a:T),onChange:G}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:le("FIX")})]})]}),!g("category")&&(0,v.jsx)(p.A,{errorName:D.category})]}),"VARIABLE"===T&&(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsx)("label",{className:"form-label",children:le("considerJob")}),(0,v.jsx)("div",{className:"".concat("VARIABLE"!==T?"form-check custom-checkbox mb-3 pe-none":"form-check custom-checkbox mb-3"),children:(0,v.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox1",onClick:()=>H(!U)})})]}),U&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsx)("label",{className:"form-label",children:le("jobAllocation")}),(0,v.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,v.jsxs)("div",{className:"".concat(U?"form-check custom-checkbox form-check-inline":"form-check custom-checkbox form-check-inline pe-none"),children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"inProgress",checked:"inProgress"===Z,onChange:M}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:le("inProgress")})]}),(0,v.jsxs)("div",{className:"".concat(U?"form-check custom-checkbox form-check-inline":"form-check custom-checkbox form-check-inline pe-none"),children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"completed",checked:"completed"===Z,onChange:M}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:le("completed")})]})]})]}),"completed"===Z&&(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsx)("label",{className:"form-label",children:le("completedTill")}),(0,v.jsxs)("div",{className:"".concat("completed"!==Z?"d-flex align-items-center pe-none":"fd-flex align-items-center"),children:[(0,v.jsx)(r.xI,{name:"startDate",control:A,render:e=>{let{value:l,name:a}=e;return(0,v.jsx)(x(),{selected:g("startDate")||new Date,className:"form-control",onChange:e=>d("startDate",e)})}}),(0,v.jsx)("span",{className:"mx-2",children:le("to")}),(0,v.jsx)(r.xI,{name:"endDate",control:A,render:e=>{let{value:l,name:a}=e;return(0,v.jsx)(x(),{selected:g("endDate")||new Date,className:"form-control",onChange:e=>d("endDate",e)})}})]})]})}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,v.jsx)("label",{className:"form-label",children:le("job")}),(0,v.jsx)(r.xI,{name:"job",control:A,render:e=>{let{field:{onChange:l,value:a,name:s,ref:t}}=e;return(0,v.jsx)(h.Ay,{onChange:e=>d("job",e.value),ref:t,name:s,styles:Q})}})]})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,v.jsxs)("label",{className:"form-label",children:[le("type"),(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(r.xI,{name:"type",control:A,render:e=>{var l;let{field:{onChange:a,value:s,name:t,ref:n}}=e;return(0,v.jsx)(h.Ay,{onChange:e=>{z(e.value),d("type",e.value)},options:f.r5,ref:n,name:t,styles:Q,value:null===(l=f.r5.filter((e=>e.value==g("type"))))||void 0===l?void 0:l[0]})}}),!g("type")&&(0,v.jsx)(p.A,{errorName:D.type})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsxs)("label",{className:"form-label",children:[le("fromDate")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(r.xI,{name:"fromDate",control:A,render:e=>{let{value:l,name:a}=e;return(0,v.jsx)(x(),{selected:g("fromDate")||new Date,className:"form-control",onChange:e=>{d("fromDate",e)}})}}),!g("fromDate")&&(0,v.jsx)(p.A,{errorName:D.fromDate})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsxs)("label",{className:"form-label",children:[le("toDate")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(r.xI,{name:"toDate",control:A,render:e=>{let{value:l,name:a}=e;return(0,v.jsx)(x(),{selected:g("toDate")||new Date,className:"form-control",onChange:e=>{z(e),d("toDate",e)}})}}),!g("toDate")&&(0,v.jsx)(p.A,{errorName:D.toDate})]}),(0,v.jsxs)("div",{className:" col-xl-6 mb-3 ",children:[(0,v.jsxs)("label",{className:"form-label",children:[le("expenseDate")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(r.xI,{name:"expenseDate",control:A,render:e=>{let{value:l,name:a}=e;return(0,v.jsx)(x(),{selected:g("expenseDate")||new Date,className:"form-control",onChange:e=>d("expenseDate",e)})}}),!g("expenseDate")&&(0,v.jsx)(p.A,{errorName:D.expenseDate})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[le("amount")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(b.A,{type:"number",register:o,label:"Amount",name:"amount",placeholder:""}),(0,v.jsx)(p.A,{errorName:D.amount})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[le("referenceNumber")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(b.A,{type:"number",register:o,label:"Reference Number",name:"referenceNumber",placeholder:""}),(0,v.jsx)(p.A,{errorName:D.referenceNumber})]}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"".concat("VARIABLE"!==T?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,v.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:le("odometer")}),(0,v.jsx)(b.A,{type:"number",register:o,label:"Odometer",name:"odometer",placeholder:""})]}),(0,v.jsxs)("div",{className:"".concat("VARIABLE"!==T?"col-xl-6 mb-3 pe-none":"col-xl-6 mb-3"),children:[(0,v.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:le("workHour")}),(0,v.jsx)(r.xI,{name:"workHour",control:A,render:e=>{let{value:l,name:a}=e;return(0,v.jsx)(x(),{selected:S,showTimeSelect:!0,showTimeSelectOnly:!0,dateFormat:"h:mm aa",timeIntervals:15,className:"form-control customDateHeight",onChange:e=>F(e),value:l,name:a})}})]})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:le("billUpload")}),(0,v.jsx)(N.A,{setValue:d,register:o,label:"bill",name:"bill",getValue:g,setLoading:ee,loading:$,link:W}),$&&(0,v.jsx)("small",{children:"Uploading..."})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:le("description")}),(0,v.jsx)(b.A,{type:"textarea",register:o,label:"Description",name:"description",placeholder:""})]})]}),(0,v.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:[(0,v.jsx)("button",{type:"submit",onClick:()=>{y(k)},className:"btn btn-primary me-1",children:ae?"Update":le("submit")}),(0,v.jsx)(i.N_,{to:"#",onClick:()=>B(!1),className:"btn btn-danger light ms-1",children:le("cancel")})]})]})})};var y=a(40399),k=a(79826),D=a(42457);const A=()=>{const[e,l]=(0,s.useState)(0),a=["Expense"],i=[g],{t:d}=(0,u.Bd)(),{id:x}=(0,m.g)(),{register:h,formState:{errors:b},setValue:j,getValues:p,control:f,handleSubmit:N}=(a.length,(0,r.mN)({resolver:(0,c.t)(o.gZ)})),A=(0,m.Zp)(),C=async e=>{if(x)try{await(0,k.eY)(x,e),(0,D.V)("Expense Updated!"),A("/settings/expense")}catch(l){console.log(l),(0,D.U)("Some error occured !!")}else try{0===e.bill.length&&delete e.bill,await(0,k.ZN)(e),(0,D.V)(d("New Expense Created")),A("/settings/expense")}catch(a){console.log(a),(0,D.U)("Some error occured !!")}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(y.A,{mainTitle:d("expense"),pageTitle:d(x?"edit":"create"),parentTitle:d("expense")}),(0,v.jsx)("div",{className:"m-2 p-2",children:(0,v.jsx)(r.Op,{children:(0,v.jsx)("form",{onSubmit:N(C),children:(0,v.jsx)("div",{className:"default-tab",children:(0,v.jsxs)(t.A.Container,{defaultActiveKey:a[0].toLowerCase(),children:[(0,v.jsx)(n.A,{as:"ul",className:"nav-tabs",children:a.map(((a,s)=>(0,v.jsx)(n.A.Item,{as:"li",children:(0,v.jsx)(n.A.Link,{style:{padding:".5rem 2rem"},eventKey:a.toLowerCase(),active:s===e,onClick:()=>l(s),children:a})},s)))}),(0,v.jsx)(t.A.Content,{className:"pt-4",children:a.map(((l,s)=>{const n=i[s];return(0,v.jsx)(t.A.Pane,{eventKey:l.toLowerCase(),active:s===e,children:(0,v.jsx)(n,{data:a,control:f,setValue:j,register:h,getValues:p,errors:b,handleSubmit:N,onSubmit:C})},s)}))})]})})})})})]})}},79826:(e,l,a)=>{a.d(l,{Wz:()=>c,ZN:()=>n,ck:()=>t,eY:()=>r});var s=a(77154);(0,a(94505).A)();const t=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const{data:l}=await s.A.get("/expenses?page=".concat(e,"&limit=",10));return{data:l.data.data,totalLength:l.data.totalCount}},n=async e=>s.A.post("/expenses",e),r=async(e,l)=>s.A.patch("/expenses/".concat(e),l),c=async e=>s.A.delete("/expenses/".concat(e))}}]);
//# sourceMappingURL=6411.250532b3.chunk.js.map