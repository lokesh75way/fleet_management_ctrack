"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[8675],{38089:(e,a,l)=>{l.d(a,{A:()=>t});l(65043);var s=l(6720),c=l(60184),n=l(51359),r=l(70579);const t=e=>{let{tableData:a,onConfirmDelete:l,editDrawerOpen:t}=e;return(0,r.jsx)(r.Fragment,{children:a.map(((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("span",{children:e.basedOn})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"products",children:(0,r.jsx)("h6",{children:e.alertName})})}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{children:e.alertType})}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{children:e.notification})}),(0,r.jsx)("td",{children:(0,r.jsx)("span",{children:e.reason})}),(0,r.jsx)("td",{children:(0,r.jsxs)("span",{className:"d-flex justify-content-center",children:[(0,r.jsx)("span",{className:"cursor-pointer",onClick:()=>t(null===e||void 0===e?void 0:e._id),children:(0,r.jsx)(c.uO9,{style:{color:"green",fontSize:"1.2rem"}})}),(0,r.jsx)(n.A,{className:"cursor-pointer ",onConfirmDelete:l,id:e._id,children:(0,r.jsx)(s.b6i,{style:{color:"red",fontSize:"1.2rem"}})})]})})]},a)))})}},58675:(e,a,l)=>{l.r(a),l.d(a,{default:()=>C});var s=l(65043),c=l(35475),n=l(9866),r=l(28086),t=l(2364),i=(l(9531),l(24858)),o=l(23764),d=l(15075),m=l(69367),h=(l(72213),l(31899)),x=l.n(h),u=l(74117),j=l(85539),v=l(70579);const b=(0,s.forwardRef)(((e,a)=>{var l,n,h,b,f,p,N,g,y;let{Title:k,register:C,setValue:T,getValues:A,control:E,errors:S,handleSubmit:w,onSubmit:D,clearErrors:_,reset:O,editData:I,setEditData:V}=e;const[M,H]=(0,s.useState)(!1),[B,L]=(0,s.useState)(""),[F,P]=(0,s.useState)(""),[R,U]=(0,s.useState)(""),[G,Y]=(0,s.useState)(),{t:q}=(0,u.Bd)(),z=JSON.parse(localStorage.getItem("userDetails"));(0,s.useImperativeHandle)(a,(()=>({showModal(){H(!0)},closeModal(){O(),_(),H(!1)}}))),(0,s.useEffect)((()=>{"COMPANY"===z.user.role&&Y(null===z||void 0===z?void 0:z.user.companyId)}),[]);const W={control:e=>({...e,padding:".25rem 0 "})};(0,s.useEffect)((()=>{O({}),_(),M&&I?O({...I}):V()}),[M]);const J=e=>{L(e.target.value),T("basedOn",e.target.value)},K=e=>{P(e.target.value),T("value",e.target.value)},Q=e=>{U(e.target.value),T("validDays",e.target.value)},X=e=>{console.log({e:e});A(e.target.name);T(e.target.name,e.target.checked)};return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(r.A,{show:M,onHide:H,className:"offcanvas-end customeoff",placement:"end",children:[(0,v.jsxs)("div",{className:"offcanvas-header",children:[(0,v.jsx)("h5",{className:"modal-title",id:"#gridSystemModal",children:k}),(0,v.jsx)("button",{type:"button",className:"btn-close",onClick:()=>H(!1),children:(0,v.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,v.jsx)("div",{className:"offcanvas-body",children:(0,v.jsx)("div",{className:"container-fluid",children:(0,v.jsx)(i.Op,{children:(0,v.jsxs)("form",{onSubmit:w(D),children:[(0,v.jsxs)("div",{className:"row",children:[(0,v.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,v.jsx)("label",{className:"form-label",children:q("branch")}),(0,v.jsx)(i.xI,{name:"branch",control:E,render:e=>{let{field:{onChange:a,value:l,name:s,ref:c}}=e;return(0,v.jsx)(j.A,{onChange:e=>{T("branch",e.value)},value:l,customStyles:W,ref:c,companyId:G,name:s})}}),!A("branch")&&(0,v.jsx)(o.A,{errorName:S.branch})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsxs)("label",{className:"form-label",children:[q("basedOn"),(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"VEHICLE",checked:"VEHICLE"===(null!==(l=A("basedOn"))&&void 0!==l?l:B),onChange:J}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:q("vehicle")})]}),(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"VEHICLE_GROUP",checked:"VEHICLE_GROUP"===(null!==(n=A("basedOn"))&&void 0!==n?n:B),onChange:J}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:q("vehicleGroup")})]}),(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"VEHICLE_TYPE",checked:"VEHICLE_TYPE"===(null!==(h=A("basedOn"))&&void 0!==h?h:B),onChange:J}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:q("vehicleType")})]})]}),!A("basedOn")&&(0,v.jsx)(o.A,{errorName:S.basedOn})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,v.jsxs)("label",{className:"form-label",children:[q("object")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(i.xI,{name:"object",control:E,rules:{required:!0},render:e=>{var a;let{field:{onChange:l,value:s,name:c,ref:n}}=e;return(0,v.jsx)(t.Ay,{onChange:e=>{T("object",e.value)},options:d.oT,ref:n,name:c,styles:W,value:null===(a=d.oT.filter((e=>e.value==A("object"))))||void 0===a?void 0:a[0]})}}),!A("object")&&(0,v.jsx)(o.A,{errorName:S.object})]}),(0,v.jsxs)("div",{className:"".concat("VEHICLE_GROUP"!==(null!==(b=A("basedOn"))&&void 0!==b?b:B)?"col-xl-6 mb-3 pe-none red":"col-xl-6 mb-3"),children:[(0,v.jsxs)("label",{className:"form-label",children:[q("objectGroup")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(m.A,{type:"text",register:C,label:"Object Group",name:"objectGroup",placeholder:""}),(0,v.jsx)(o.A,{errorName:S.objectGroup})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,v.jsxs)("label",{className:"form-label",children:[q("alertName")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(m.A,{type:"text",register:C,label:"Alert Name",name:"alertName",placeholder:""}),(0,v.jsx)(o.A,{errorName:S.alertName})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,v.jsxs)("label",{className:"form-label",children:[q("alertType")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(i.xI,{name:"alertType",control:E,rules:{required:!0},render:e=>{var a;let{field:{onChange:l,value:s,name:c,ref:n}}=e;return(0,v.jsx)(t.Ay,{onChange:e=>{T("alertType",e.value)},options:d.xw,ref:n,name:c,styles:W,value:null===(a=d.oT.filter((e=>e.value==A("alertType"))))||void 0===a?void 0:a[0]})}}),!A("alertType")&&(0,v.jsx)(o.A,{errorName:S.alertType})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsxs)("label",{className:"form-label",children:["Value",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"START",checked:"START"===(null!==(f=A("value"))&&void 0!==f?f:F),onChange:K}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:q("start")})]}),(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"CANCEL",checked:"CANCEL"===(null!==(p=A("value"))&&void 0!==p?p:F),onChange:K}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:q("cancel")})]}),(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"BOTH",checked:"BOTH"===(null!==(N=A("value"))&&void 0!==N?N:F),onChange:K}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:q("both")})]})]}),!A("value")&&(0,v.jsx)(o.A,{errorName:S.value})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,v.jsx)("label",{className:"form-label",children:q("validDays")}),(0,v.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"EVERYDAY",checked:"EVERYDAY"===(null!==(g=A("value"))&&void 0!==g?g:R),onChange:Q}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:q("everyday")})]}),(0,v.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,v.jsx)("input",{type:"radio",className:"form-check-input",value:"CUSTOM",checked:"CUSTOM"===(null!==(y=A("value"))&&void 0!==y?y:R),onChange:Q}),(0,v.jsx)("label",{className:"form-check-label",style:{marginBottom:"0"},children:q("custom")})]})]})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,v.jsx)("label",{className:"form-label",children:q("validTimeFrom")}),(0,v.jsxs)("div",{className:"d-flex align-items-center justify-content-evenly",children:[(0,v.jsx)(i.xI,{name:"validFrom",control:E,render:e=>{let{value:a,name:l}=e;return(0,v.jsx)(x(),{selected:A("validFrom")?new Date(A("validFrom")):new Date,className:"form-control customDateHeight",onChange:e=>T("validFrom",e)})}}),(0,v.jsx)("span",{className:"px-1",children:q("to")}),(0,v.jsx)(i.xI,{name:"validTo",control:E,render:e=>{let{value:a,name:l}=e;return(0,v.jsx)(x(),{selected:A("validTo")?new Date(A("validTo")):new Date,className:"form-control customDateHeight",onChange:e=>T("validTo",e)})}})]})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,v.jsxs)("label",{className:"form-label",children:[q("action")," "]}),(0,v.jsxs)("div",{className:"d-flex align-items-center",children:[(0,v.jsx)("div",{className:"form-check form-check-inline",children:(0,v.jsxs)("label",{className:"form-check-label",children:[(0,v.jsx)("input",{type:"checkbox",className:"form-check-input",name:"action.SMS",checked:A("action.SMS"),onInput:X}),q("sms")]})}),(0,v.jsx)("div",{className:"form-check form-check-inline",children:(0,v.jsxs)("label",{className:"form-check-label",children:[(0,v.jsx)("input",{type:"checkbox",className:"form-check-input",name:"action.Email",checked:A("action.Email"),onInput:X}),q("email")]})}),(0,v.jsx)("div",{className:"form-check form-check-inline",children:(0,v.jsxs)("label",{className:"form-check-label",children:[(0,v.jsx)("input",{type:"checkbox",className:"form-check-input",name:"action.Notification",checked:A("action.Notification"),onInput:X}),q("notification")]})})]})]})]}),(0,v.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,v.jsxs)("label",{className:"form-label",children:[q("severity")," ",(0,v.jsx)("span",{className:"text-danger",children:"*"})]}),(0,v.jsx)(i.xI,{name:"severity",control:E,rules:{required:!0},render:e=>{var a;let{field:{onChange:l,value:s,name:c,ref:n}}=e;return(0,v.jsx)(t.Ay,{onChange:e=>{T("severity",e.value)},options:d.YR,ref:n,name:c,styles:W,value:null===(a=d.oT.filter((e=>e.value==A("severity"))))||void 0===a?void 0:a[0]})}}),!A("severity")&&(0,v.jsx)(o.A,{errorName:S.severity})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("button",{type:"submit",onClick:()=>{w(D)},className:"btn btn-primary me-1 m-1",children:q("submit")}),(0,v.jsx)(c.N_,{to:"#",onClick:()=>H(!1),className:"btn btn-danger light ms-1 m-1",children:q("cancel")})]})]})})})})]})})}));l(31412);var f=l(38089),p=l(18403),N=l(87742),g=l(94692),y=l(42457),k=l(77154);(0,l(88472).A)();const C=()=>{const{t:e}=(0,u.Bd)(),{register:a,formState:{errors:l},setValue:r,getValues:t,control:o,clearErrors:d,handleSubmit:m,reset:h}=(0,i.mN)({resolver:(0,p.t)(N.cA)}),[x,j]=(0,s.useState)([]),{page:C,nextPage:T,prevPage:A,goToPage:E,setCount:S,totalCount:w,setPage:D}=(0,g.A)(),[_,O]=(0,s.useState)(),I=async(e,a)=>{try{const{data:a,count:l}=await async function(){var e;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l="/alerts?page=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,"&limit=").concat(a);const s=await k.A.get(l);return null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.data}(e,10);j(a),S(l)}catch(l){(0,y.U)("Error in fetching data")}};(0,s.useEffect)((()=>{I(C)}),[C]);const V=(0,s.useRef)();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(n.A,{mainTitle:e("alert"),pageTitle:e("alert"),parentTitle:e("settings")}),(0,v.jsx)("div",{className:"container-fluid",children:(0,v.jsx)("div",{className:"row",children:(0,v.jsx)("div",{className:"col-xl-12",children:(0,v.jsx)("div",{className:"card",children:(0,v.jsx)("div",{className:"card-body p-0",children:(0,v.jsxs)("div",{className:"table-responsive active-projects style-1 ItemsCheckboxSec shorting",children:[(0,v.jsxs)("div",{className:"tbl-caption d-flex justify-content-between text-wrap align-items-center",children:[(0,v.jsx)("h4",{className:"heading mb-0",style:{flex:1},children:e("alert")}),(0,v.jsx)("div",{className:"d-flex",children:(0,v.jsxs)("div",{children:[(0,v.jsxs)(c.N_,{to:"#",className:"btn btn-primary btn-sm ms-1","data-bs-toggle":"offcanvas",onClick:()=>{d(),h(),V.current.showModal()},children:["+ ",e("addAlert")]})," "]})})]}),(0,v.jsxs)("div",{id:"employee-tbl_wrapper",className:"dataTables_wrapper no-footer",children:[(0,v.jsxs)("table",{id:"empoloyees-tblwrapper",className:"table ItemsCheckboxSec dataTable no-footer mb-0",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:e("alerts")}),(0,v.jsx)("th",{children:e("alertName")}),(0,v.jsx)("th",{children:e("alertType")}),(0,v.jsx)("th",{children:e("createdDate")}),(0,v.jsx)("th",{children:e("notification")}),(0,v.jsx)("th",{children:e("reason")}),(0,v.jsx)("th",{children:e("action")})]})}),(0,v.jsx)("tbody",{children:(0,v.jsx)(f.A,{editData:_,tableData:x,onConfirmDelete:async e=>{try{await(async e=>{var a;const l=await k.A.delete("/alerts/".concat(e));return null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.data})(e);const a=x.filter((a=>a._id!==e));j(a),S(w-1),(0,y.V)("Task Deleted")}catch(a){(0,y.U)("Something Went Wrong")}},editDrawerOpen:e=>{x.map((a=>a._id===e&&O(a))),V.current.showModal()},setEditData:O})})]}),(0,v.jsxs)("div",{className:"d-sm-flex text-center justify-content-between align-items-center",children:[(0,v.jsxs)("div",{className:"dataTables_info",children:[e("showing")," ",10*(C-1)+1," ",e("to")," ",Math.min(10*C,w)," ",e("of")," ",w," ",e("entries")]}),(0,v.jsxs)("div",{className:"dataTables_paginate paging_simple_numbers",id:"example2_paginate",children:[(0,v.jsx)(c.N_,{className:"paginate_button ".concat(1===C?"previous disabled":"previous"),to:"#",onClick:()=>A(C-1),children:(0,v.jsx)("i",{className:"fa-solid fa-angle-left"})}),(0,v.jsx)("span",{children:[...Array(Math.ceil(w/10)).keys()].map((e=>(0,v.jsx)(c.N_,{className:"paginate_button ".concat(C===e+1?"current":""),onClick:()=>E(e+1),children:e+1},e)))}),(0,v.jsx)(c.N_,{className:"paginate_button ".concat(10*C>=w?"next disabled":"next"),to:"#",onClick:()=>T(C+1),children:(0,v.jsx)("i",{className:"fa-solid fa-angle-right"})})]})]})]})]})})})})})}),(0,v.jsx)(b,{ref:V,Title:_&&0!==_._id?"Edit Alert":e("addAlert"),editData:_,setEditData:O,register:a,setValue:r,onSubmit:async a=>{try{a._id&&0!==a._id?(await(async(e,a)=>{var l;const s=await k.A.put("/alerts/".concat(a),e);return null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.data})(a,a._id),(0,y.V)("Task Added Successfully !!"),V.current.closeModal()):(await(async e=>{var a;const l=await k.A.post("/alerts",e);return null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.data})(a),(0,y.V)("Task Added Successfully !!"),V.current.closeModal())}catch(n){var l,s,c;const a=null===(l=n.response)||void 0===l||null===(s=l.data)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.errors;a&&a.length>0?(0,y.U)(a[0].msg):(0,y.U)(e("someErrorOccurred"))}},getValues:t,control:o,errors:l,handleSubmit:m,clearErrors:d,reset:h})]})}}}]);
//# sourceMappingURL=8675.8c698af8.chunk.js.map