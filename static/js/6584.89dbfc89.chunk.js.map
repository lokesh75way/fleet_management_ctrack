{"version":3,"file":"static/js/6584.89dbfc89.chunk.js","mappings":"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","sources":["features/vehicle/api.js","features/vehicle/components/Table.jsx","features/vehicle/pages/List.jsx"],"sourcesContent":["import { axiosInstance as axios } from \"@/services/api\";\n\nexport const createVehicles = async (body) => {\n  return axios.post(\"/vehicles\", body);\n};\n\nexport const getAllVehicles = async (page, branchIds) => {\n  let url = `/vehicles?page=${page}&limit=10`;\n\n  if (branchIds) {\n    if (Array.isArray(branchIds)) {\n      // If branchIds is an array, append each branchId to the URL\n      branchIds.forEach((id) => {\n        url += `&branchIds=${id}`;\n      });\n    } else {\n      // If branchIds is a single value, append it directly to the URL\n      url += `&branchIds=${branchIds}`;\n    }\n  }\n\n  const { data } = await axios.get(url);\n  return { data: data.data.data, totalCount: data.data.totalCount };\n};\n\nexport const getUnassignedVehicle = async (page) => {\n  const { data } = await axios.get(\n    `/vehicles/unassigned?page=${page}&limit=${10}`\n  );\n  return { data: data.data.data, totalLength: data.data.totalCount };\n};\n\nexport const deleteVehicle = async (body) => {\n  return axios.delete(`/vehicles/${body}`);\n};\n\nexport const updateVehicles = async (body, id) => {\n  return axios.patch(`/vehicles/${id}`, body);\n};\n\nexport const getVehiclesByCompany = async (search = \"\") => {\n  const { data } = await axios.get(`/vehicles/list?search=${search}`);\n  return { data: data.data };\n};\n\nexport const getVehiclesTraking = async (id, status) => {\n  const { data } = await axios.get(`/vehicles/tracking?${id}&status=${status}`);\n  return {\n    data: data.data.data,\n    count: data.data.count,\n    centerCoordinate: data.data.centerCoordinate,\n  };\n};\n\nexport const getVehicleById = async (id) => {\n  const { data } = await axios.get(`/vehicles/${id}`);\n  return data?.data?.data;\n};\n","import React from \"react\";\nimport { MdDelete } from \"react-icons/md\";\nimport { FaEdit } from \"react-icons/fa\";\nimport { Link } from \"react-router-dom\";\n\nimport DeleteModal from \"@/components/Modal/DeleteModal\";\nimport usePermissions from \"@/hooks/usePermissions\";\n\nconst VehicleTable = ({ tableData, onConfirmDelete }) => {\n  const { can } = usePermissions();\n  const editPermission = can(\"vehicle\", \"modify\");\n  const deletePermission = can(\"vehicle\", \"delete\");\n\n  return tableData?.map((item) => (\n    <tr key={item.id}>\n      <td>\n        <div className=\"products\">\n          <div>\n            <h6>{item.vehicleName}</h6>\n          </div>\n        </div>\n      </td>\n      <td>\n        <span>{item.registrationNumber}</span>\n      </td>\n      <td>\n        <span className=\"text-primary\">{item?.branchId?.branchName}</span>\n      </td>\n\n      <td>\n        <span>{item.simNumber}</span>\n      </td>\n      <td>\n        <span>{item.imeiNumber}</span>\n      </td>\n      <td>\n        <span className=\"text-primary\">{item.registrationNumber}</span>\n      </td>\n      <td>\n        <span>{item.weightCapacity}</span>\n      </td>\n      {(deletePermission || editPermission) && (\n        <td>\n          <span className=\"d-flex justify-content-center\">\n            {editPermission && (\n              <Link to={`/vehicle/edit/${item?._id}`}>\n                <span className=\"cursor-pointer\">\n                  <FaEdit style={{ color: \"green\", fontSize: \"1.2rem\" }} />\n                </span>\n              </Link>\n            )}\n            {deletePermission && (\n              <DeleteModal\n                className=\"cursor-pointer \"\n                onConfirmDelete={onConfirmDelete}\n                id={item._id}\n              >\n                <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n              </DeleteModal>\n            )}\n          </span>\n        </td>\n      )}\n    </tr>\n  ));\n};\n\nexport default VehicleTable;\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  useMutation,\n  useQuery,\n  keepPreviousData,\n  useQueryClient,\n} from \"@tanstack/react-query\";\n\nimport TableSkeleton from \"@/components/Skeleton/Table\";\nimport VehicleTable from \"../components/Table\";\nimport MainPagetitle from \"@/components/MainPagetitle\";\nimport Paginate from \"@/components/Paginate\";\nimport { deleteVehicle, getAllVehicles } from \"../api\";\nimport usePagination from \"@/hooks/usePagination\";\nimport { getApiErrorMessage } from \"@/utils/helper\";\nimport usePermissions from \"@/hooks/usePermissions\";\n\nconst VehicleList = () => {\n  const { t } = useTranslation();\n  const { can } = usePermissions();\n  const { page, goToPage, setCount, totalCount } = usePagination();\n  const itemsPerPage = 10;\n  const queryClient = useQueryClient();\n\n  const { data, isLoading, isFetching } = useQuery({\n    queryKey: [\"vehicles\", page],\n    queryFn: () => getAllVehicles(page),\n    placeholderData: keepPreviousData,\n    staleTime: Infinity,\n  });\n\n  const { mutate: removeVehicle } = useMutation({\n    onError: (err) => {\n      notifyError(getApiErrorMessage(err));\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries(\"vehicles\");\n    },\n    mutationFn: deleteVehicle,\n  });\n\n  useEffect(() => {\n    if (data) setCount(data.totalCount);\n  }, [data]);\n\n  const handlePageClick = ({ selected }) => {\n    goToPage(selected + 1);\n  };\n\n  const headers = [\n    \"vehicleName\",\n    \"plateNumber\",\n    \"branch\",\n    \"simNumber\",\n    \"IMEINumber\",\n    \"registrationNumber\",\n    \"weightCapacity\",\n  ];\n\n  if (can(\"vehicle\", \"modify\") || can(\"vehicle\", \"delete\")) {\n    headers.push(\"action\");\n  }\n\n  return (\n    <>\n      <MainPagetitle\n        mainTitle={t(\"vehicle\")}\n        pageTitle={t(\"vehicle\")}\n        parentTitle={t(\"home\")}\n      />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t(\"vehicle\")}</h4>\n                    <div>\n                      {can(\"vehicle\", \"add\") && (\n                        <Link\n                          to={\"/vehicle/create\"}\n                          className=\"btn btn-primary btn-sm ms-1\"\n                          data-bs-toggle=\"offcanvas\"\n                        >\n                          + {t(\"addVehicleInfo\")}\n                        </Link>\n                      )}{\" \"}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    <div className=\"table-responsive\">\n                      {isLoading || isFetching ? (\n                        <TableSkeleton />\n                      ) : (\n                        <table\n                          id=\"empoloyees-tblwrapper\"\n                          className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                        >\n                          <thead>\n                            <tr>\n                              {headers.map((header) => (\n                                <th key={header}>{t(header)}</th>\n                              ))}\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {data.data?.length ? (\n                              <VehicleTable\n                                tableData={data.data}\n                                onConfirmDelete={removeVehicle}\n                                currentPage={page}\n                                itemsPerPage={itemsPerPage}\n                              />\n                            ) : (\n                              <tr>\n                                <td colspan=\"10\" rowSpan={2} height={150}>\n                                  <h1 className=\"text-center\">\n                                    No Data found!\n                                  </h1>\n                                </td>\n                              </tr>\n                            )}\n                          </tbody>\n                        </table>\n                      )}\n                    </div>\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                        {t(\"showing\")} {(page - 1) * 10 + 1} {t(\"to\")}{\" \"}\n                        {Math.min(page * 10, totalCount)} {t(\"of\")} {totalCount}{\" \"}\n                        {t(\"entries\")}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                        <Paginate\n                          totalCount={totalCount}\n                          itemsPerPage={itemsPerPage}\n                          handlePageClick={handlePageClick}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default VehicleList;\n"],"names":["createVehicles","async","axios","post","body","getAllVehicles","page","branchIds","url","Array","isArray","forEach","id","data","get","totalCount","deleteVehicle","delete","updateVehicles","patch","getVehiclesTraking","status","count","centerCoordinate","getVehicleById","_data$data","_ref","tableData","onConfirmDelete","can","usePermissions","editPermission","deletePermission","map","item","_item$branchId","_jsxs","children","_jsx","className","vehicleName","registrationNumber","branchId","branchName","simNumber","imeiNumber","weightCapacity","Link","to","_id","FaEdit","style","color","fontSize","DeleteModal","MdDelete","VehicleList","t","useTranslation","goToPage","setCount","usePagination","queryClient","useQueryClient","isLoading","isFetching","useQuery","queryKey","queryFn","placeholderData","keepPreviousData","staleTime","Infinity","mutate","removeVehicle","useMutation","onError","err","notifyError","getApiErrorMessage","onSuccess","invalidateQueries","mutationFn","useEffect","headers","push","_Fragment","MainPagetitle","mainTitle","pageTitle","parentTitle","TableSkeleton","header","length","VehicleTable","currentPage","itemsPerPage","colspan","rowSpan","height","Math","min","Paginate","handlePageClick","selected"],"sourceRoot":""}