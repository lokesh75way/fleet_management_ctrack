"use strict";(self.webpackChunkFLEET=self.webpackChunkFLEET||[]).push([[1730],{79055:(e,l,a)=>{a.d(l,{A:()=>x});var s=a(65043),t=a(13052),n=a(28334),r=a(74805),i=a(42297),o=a(85756),c=a(74117),d=a(70579);const m=e=>{let{countryCode:l,customStyle:a,setValue:t,id:n,dValues:r,Comptype:m}=e;const{t:u}=(0,c.Bd)(),[x,v]=(0,s.useState)([]),[h,b]=(0,s.useState)(null);(0,s.useEffect)((()=>{const e=o.Ay.getCountry(l);if(e){const l=e.timezones;l&&l.length>0&&(v(l.map((e=>({label:"(GMT ".concat(p(e),") ").concat(e," "),value:e})))),b({label:"(GMT ".concat(p(l[0]),") ").concat(l[0]," "),value:l[0]}),t("timezone",l[0]))}}),[l]),(0,s.useEffect)((()=>{if(r&&n){var e,l;const a="companyId"===m?null===(e=r.companyId)||void 0===e?void 0:e.timezone:"businessGroupId"===m?null===(l=r.businessGroupId)||void 0===l?void 0:l.timezone:r.timezone;t("timezone",a),a&&(b({label:"(GMT ".concat(p(a),") ").concat(a),value:a}),console.log(h,"hi"))}}),[r,n]);const p=e=>{const l=o.Ay.getTimezone(e).utcOffset,a=Math.abs(Math.floor(l/60)),s=Math.abs(l%60);return"".concat(l>=0?"+":"-").concat(a,":").concat(s.toString().padStart(2,"0"))};return(0,d.jsxs)("div",{className:"col-xl-3",children:[(0,d.jsxs)("label",{htmlFor:"timezone",children:[u("timezone"),":"]}),(0,d.jsx)(i.Ay,{id:"timezone",value:h,styles:a,onChange:e=>{t("timezone",e.value),b(e)},options:x})]})},u={control:e=>({...e,padding:".25rem 0 "})},x=e=>{let{register:l,setValue:a,errors:o,getValues:x,locationData:v,dValues:h,id:b,showCity:p,Comptype:f,showtimeZone:j=!0}=e;const{t:N}=(0,c.Bd)(),[y,g]=(0,s.useState)(null),[D,A]=(0,s.useState)(null),[I,C]=(0,s.useState)(null),[S,w]=(0,s.useState)([]),[E,V]=(0,s.useState)([]),[F,k]=(0,s.useState)([]),[T,O]=(0,s.useState)("IND"),[B,L]=(0,s.useState)(null);(0,s.useEffect)((()=>{(0,t.xb)().then((e=>{w(e)}))}),[]),(0,s.useEffect)((()=>{if(b){if(null!==h&&void 0!==h&&h.city&&(a("city",h.city),C({value:h.city,label:h.city})),null!==h&&void 0!==h&&h.country){a("country",h.country);const e=_.find((e=>e.value===(null===h||void 0===h?void 0:h.country)));e&&M(e)}if(null!==h&&void 0!==h&&h.state&&(a("state",h.state||""),A({value:h.state,label:h.state||""}),null!==h&&void 0!==h&&h.country&&null!==h&&void 0!==h&&h.state&&B)){const e=E.find((e=>R(e)===h.state));e&&G(B,e.id)}}else{var e;if(null!==v&&void 0!==v&&null!==(e=v.country)&&void 0!==e&&e.isoAlpha3){var l,s,n,r,i,o,c;g({value:null===v||void 0===v||null===(l=v.country)||void 0===l?void 0:l.isoAlpha3,label:null===v||void 0===v||null===(s=v.country)||void 0===s?void 0:s.isoName}),a("country",null===v||void 0===v||null===(n=v.country)||void 0===n?void 0:n.isoAlpha3),O(null===v||void 0===v||null===(r=v.country)||void 0===r?void 0:r.isoAlpha2);const e=z(null===v||void 0===v||null===(i=v.country)||void 0===i?void 0:i.isoAlpha3);var d,m,u,x,p,f;if(L(e),null!==v&&void 0!==v&&null!==(o=v.location)&&void 0!==o&&o.principalSubdivision)A({value:null===v||void 0===v||null===(d=v.location)||void 0===d?void 0:d.principalSubdivision,label:(null===v||void 0===v||null===(m=v.location)||void 0===m?void 0:m.principalSubdivision)||""}),a("state",(null===v||void 0===v||null===(u=v.location)||void 0===u?void 0:u.principalSubdivision)||""),(0,t.Wm)(e).then((l=>{V(l);const a=l.find((e=>{var l;return R(e)===(null===v||void 0===v||null===(l=v.location)||void 0===l?void 0:l.principalSubdivision)}));a&&G(e,a.id)}));else(0,t.Wm)(e).then((e=>{V(e)}));if(null!==v&&void 0!==v&&null!==(c=v.location)&&void 0!==c&&c.city)a("city",null===v||void 0===v||null===(x=v.location)||void 0===x?void 0:x.city),C({value:null===v||void 0===v||null===(p=v.location)||void 0===p?void 0:p.city,label:null===v||void 0===v||null===(f=v.location)||void 0===f?void 0:f.city})}}}),[v,b,h,S]);const z=e=>{const l=S.find((l=>l.iso3===e));return l?l.id:null},G=async(e,l)=>{if(e&&l)try{const a=await(0,t.mA)(e,l);k(a)}catch(a){console.error("Error loading cities:",a),k([])}else k([])},M=async e=>{const l=e.value,s=z(l);L(s);const n=S.find((e=>e.iso3===l));O(n.iso2),a("country",l),g({value:l,label:n.name}),V([]),k([]),A(null),C(null),a("state",""),a("city","");const r=await(0,t.Wm)(s);V(r)},R=e=>"United Arab Emirates"===(null===y||void 0===y?void 0:y.label)&&e.name.endsWith(" Emirate")?e.name.replace(" Emirate",""):e.name,_=S.map((e=>({value:e.iso3,label:e.name}))),H=E.map((e=>({value:e.name,label:R(e)}))),P=F.map((e=>({value:e.name,label:e.name})));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,d.jsx)("label",{className:"form-label",children:N("country")}),(0,d.jsx)(i.Ay,{options:_,value:y,styles:u,onChange:M},"country-".concat(null===y||void 0===y?void 0:y.value)),!y&&(0,d.jsx)(n.A,{errorName:o.country})]}),(0,d.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,d.jsx)("label",{className:"form-label",children:N("state")}),(0,d.jsx)(i.Ay,{options:H,value:D,styles:u,onChange:async e=>{const l=e.value,s=E.find((e=>e.name===l)),t=R(s);a("state",t),A({value:t,label:t}),k([]),C(null),a("city",""),await G(B,s.id)},isDisabled:!y},"state-".concat(null===D||void 0===D?void 0:D.value)),!D&&(0,d.jsx)(n.A,{errorName:o.state})]}),p&&(0,d.jsxs)("div",{className:"col-xl-3 mb-3",children:[(0,d.jsx)("label",{className:"form-label",children:N("city")}),F.length>0?(0,d.jsx)(i.Ay,{options:P,value:I,styles:u,onChange:e=>{const l=e.value;a("city",l),C({value:l,label:l})},isDisabled:!D},"city-".concat(null===I||void 0===I?void 0:I.value)):(0,d.jsx)(r.A,{type:"text",register:l,label:"City",name:"city",placeholder:"",defaultValue:x("city")}),(0,d.jsx)(n.A,{errorName:o.city})]}),p&&j&&(0,d.jsx)(m,{setValue:a,id:b,countryCode:T,customStyle:u,Comptype:f})]})}},61730:(e,l,a)=>{a.r(l),a.d(l,{default:()=>_});var s=a(65043),t=a(73216),n=a(44816),r=a(86856),i=a(24858),o=(a(9531),a(18403)),c=a(74117),d=a(63248),m=a(28261),u=a(47097),x=a(40399),v=a(14282),h=a(28334),b=a(74805),p=a(92548),f=a(95474),j=a(4437),N=a(79055),y=a(75636),g=a(70579);const D={control:e=>({...e,padding:".25rem 0 "})},A=e=>{let{setValue:l,register:a,handleSubmit:n,onSubmit:r,getValues:o,errors:d,control:m,isFormSubmitting:u,watch:x}=e;const[A,I]=(0,s.useState)({name:""}),[C,S]=(0,s.useState)(0),[w,E]=(0,s.useState)(!0),{t:V}=(0,c.Bd)(),[F,k]=(0,s.useState)(),[T,O]=(0,s.useState)(),{location:B,error:L}=(0,y.A)(),{id:z}=(0,t.g)();return(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,g.jsx)("div",{children:L&&(0,g.jsx)("p",{children:L})}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsxs)("label",{className:"form-label",children:[V("businessGroup")," ",(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(i.xI,{name:"businessGroupId",control:m,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:t,ref:n}}=e;return(0,g.jsx)(p.A,{onChange:e=>{e.value!=o("businessGroupId")&&(l("businessGroupId",e.value),k(null),O(null),l("companyId",""),l("branchId",""))},defaultValue:s,customStyles:D,ref:n,name:t})}}),(0,g.jsx)(h.A,{errorName:d.businessGroupId})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsxs)("label",{className:"form-label",children:[V("company")," ",(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(i.xI,{name:"companyId",control:m,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:t,ref:n}}=e;return(0,g.jsx)(f.A,{groupId:x("businessGroupId"),onChange:e=>{e.value!=o("companyId")&&(l("companyId",e.value),k(e),O(null),l("branchId",""))},defaultValue:s,value:F,customStyles:D,ref:n,name:t})}}),(0,g.jsx)(h.A,{errorName:d.companyId})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsx)("label",{className:"form-label",children:V("branch")}),(0,g.jsx)(i.xI,{name:"branchId",control:m,rules:{required:!0},render:e=>{let{field:{onChange:a,value:s,name:t,ref:n}}=e;return(0,g.jsx)(j.A,{companyId:x("companyId"),groupId:x("businessGroupId"),onChange:e=>{(null===e||void 0===e?void 0:e.value)!=o("branchId")&&(l("branchId",null===e||void 0===e?void 0:e.value),O(e))},defaultValue:s,value:T,customStyles:D,ref:n,isDisabled:!1,name:t})}}),(0,g.jsx)(h.A,{errorName:d.branchId})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsxs)("label",{className:"form-label",children:[V("firstName"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(b.A,{type:"text",register:a,label:"First Name",name:"firstName",placeholder:V("firstName"),defaultValue:""}),(0,g.jsx)(h.A,{errorName:d.firstName})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsxs)("label",{className:"form-label",children:[V("lastName")," ",(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(b.A,{type:"text",register:a,label:"Last Name",name:"lastName",placeholder:V("lastName"),defaultValue:""}),(0,g.jsx)(h.A,{errorName:d.lastName})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,g.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[V("employeeNumber")," ",(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(b.A,{type:"number",register:a,label:"Employee Number",name:"employeeNumber",placeholder:"",defaultValue:""}),(0,g.jsx)(h.A,{errorName:d.employeeNumber})]}),(0,g.jsx)(N.A,{register:a,setValue:l,dValues:{country:o("country"),state:o("state"),city:o("city")},errors:d,getValues:o,locationData:B,id:z,showCity:!0,showtimeZone:!1,Comptype:""}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,g.jsx)("label",{htmlFor:"exampleFormControlInput4",className:"form-label",children:V("zipCode")}),(0,g.jsx)(b.A,{type:"number",register:a,label:"zipCode",name:"zipCode",min:"0",onInput:e=>{const l=Math.max(0,e.target.value);e.target.value=l<1?"":l},placeholder:"",defaultValue:""}),(0,g.jsx)(h.A,{errorName:d.zipCode})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,g.jsxs)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:[V("street1")," ",(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(b.A,{type:"text",register:a,label:"Street1",name:"street1",placeholder:"",defaultValue:""}),(0,g.jsx)(h.A,{errorName:d.street1})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,g.jsx)("label",{htmlFor:"exampleFormControlInput3",className:"form-label",children:V("street2")}),(0,g.jsx)(b.A,{type:"text",register:a,label:"Street2",name:"street2",placeholder:"",defaultValue:""})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,g.jsxs)("label",{htmlFor:"exampleFormControlInput4",className:"form-label",children:[V("contactNumber1")," ",(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(b.A,{type:"number",register:a,label:"Contact Number1",name:"contact1",min:"0",onInput:e=>{const l=Math.max(0,e.target.value);e.target.value=l<1?"":l},placeholder:"",defaultValue:""}),(0,g.jsx)(h.A,{errorName:d.contact1})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,g.jsxs)("label",{htmlFor:"exampleFormControlInput4",className:"form-label",children:[V("contactNumber2")," ",(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(b.A,{type:"number",register:a,label:"Contact Number2",name:"contact2",min:"0",onInput:e=>{const l=Math.max(0,e.target.value);e.target.value=l<1?"":l},placeholder:"",defaultValue:""}),(0,g.jsx)(h.A,{errorName:d.contact2})]})]}),(0,g.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,g.jsxs)(v.A,{type:"submit",onClick:n(r),style:{width:"10%"},disabled:u,children:[" ",V("next")]})})]})};var I=a(31899),C=a.n(I),S=a(42297),w=a(60446),E=a.n(w),V=a(87460);a(43);const F={control:e=>({...e,padding:".25rem 0 "})},k=e=>{let{setValue:l,register:a,handleSubmit:t,onSubmit:n,getValues:r,control:o,errors:d,isFormSubmitting:m,watch:u}=e;const{t:x}=(0,c.Bd)(),[p,f]=(0,s.useState)(""),j=e=>{const a="yes"===e.target.value;l("licenseAvailable",a)},N=new Date;N.setFullYear(N.getFullYear()-100);const y=new Date,D=e=>{const a=(e=>{if(!e)return null;const l=E()(),a=E()(e);return l.diff(a,"year")})(e);l("age",a),a<16?(f(x("Driver must be above 16")),l("ageValid",!1)):(f(""),l("ageValid",!0))};return(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,g.jsxs)("div",{className:"col-xl-6 mb-3 d-flex flex-column",children:[(0,g.jsxs)("label",{className:"form-label",children:[x("dateOfBirth"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(i.xI,{name:"dateOfBirth",control:o,render:e=>{let{value:a,name:s}=e;return(0,g.jsx)(C(),{selected:r("dateOfBirth")?new Date(r("dateOfBirth")):null,minDate:N,maxDate:y,className:"form-control customDateHeight",onChange:e=>{l("dateOfBirth",e),D(e)},showYearDropdown:!0,scrollableYearDropdown:!0,popperClassName:"date-picker-reports",yearDropdownItemNumber:50,placeholderText:x("selectDateOfBirth")})}}),(0,g.jsx)(h.A,{errorName:d.dateOfBirth})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsxs)("label",{className:"form-label",children:[x("age"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(b.A,{type:"number",register:a,label:"Age",name:"age",placeholder:"",value:r("age"),disabled:!0}),p&&(0,g.jsx)("div",{className:"text-danger mt-1",children:p}),(0,g.jsx)(h.A,{errorName:d.age})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 d-flex flex-column",children:[(0,g.jsx)("label",{className:"form-label",children:x("dateOfJoining")}),(0,g.jsx)(i.xI,{name:"dateOfJoining",control:o,render:e=>{let{value:a,name:s}=e;return(0,g.jsx)(C(),{selected:r("dateOfJoining")?new Date(r("dateOfJoining")):new Date,className:"form-control customDateHeight",onChange:e=>{l("dateOfJoining",e)},maxDate:r("dateOfLeaving")})}})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 d-flex flex-column",children:[(0,g.jsx)("label",{className:"form-label",children:x("dateOfLeaving")}),(0,g.jsx)(i.xI,{name:"dateOfLeaving",control:o,render:e=>{let{value:a,name:s}=e;return(0,g.jsx)(C(),{selected:r("dateOfLeaving")?new Date(r("dateOfLeaving")):new Date,className:"form-control customDateHeight",onChange:e=>{l("dateOfLeaving",e)},minDate:r("dateOfJoining")})}})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsxs)("label",{className:"form-label",children:[x("drivingExperienceSince"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(b.A,{type:"number",register:a,label:"Driving Experience Since",name:"drivingExperience",placeholder:""}),(0,g.jsx)(h.A,{errorName:d.drivingExperience})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,g.jsxs)("label",{className:"form-label",children:[x("licenseAvailable"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsxs)("div",{className:"basic-form",style:{marginTop:".5rem"},children:[(0,g.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,g.jsx)("input",{type:"radio",className:"form-check-input",id:"customRadioBox987",name:"optradioCustom1",value:"yes",checked:u("licenseAvailable"),onChange:j}),(0,g.jsx)("label",{className:"form-check-label",htmlFor:"customRadioBox987",style:{marginBottom:"0"},children:x("yes")})]}),(0,g.jsxs)("div",{className:"form-check custom-checkbox form-check-inline",children:[(0,g.jsx)("input",{type:"radio",className:"form-check-input",id:"customRadioBox988",value:"no",checked:!u("licenseAvailable"),onChange:j,name:"optradioCustom1"}),(0,g.jsx)("label",{className:"form-check-label",htmlFor:"customRadioBox988",style:{marginBottom:"0"},children:x("no")})]})]})]}),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsx)("label",{className:"form-label",children:x("licenseNumber")}),(0,g.jsxs)("div",{className:"".concat(r("licenseAvailable")?"d-flex align-items-center":"d-flex align-items-center pe-none"),children:[(0,g.jsx)(b.A,{type:"number",register:a,label:"License Number",style:{marginRight:".5rem"},name:"licenseNumber",placeholder:""}),(0,g.jsx)(h.A,{errorName:d.licenseNumber})]})]}),(0,g.jsxs)("div",{className:"".concat(r("licenseAvailable")?"col-xl-6 mb-3 ":"col-xl-6 mb-3  pe-none"),children:[(0,g.jsx)("label",{className:"form-label",children:x("licenseToDrive")}),(0,g.jsx)(i.xI,{name:"licenseToDrive",control:o,render:e=>{let{field:{onChange:a,value:s,name:t,ref:n}}=e;return(0,g.jsx)(S.Ay,{onChange:e=>l("licenseToDrive",e.value),options:V.rG,ref:n,name:t,styles:F,defaultValue:{value:r("licenseToDrive"),label:r("licenseToDrive")}})}}),!r("licenseToDrive")&&(0,g.jsx)(h.A,{errorName:d.licenseToDrive})]}),(0,g.jsxs)("div",{className:"".concat(r("licenseAvailable")?"col-xl-6 mb-3 d-flex flex-column":"col-xl-6 mb-3 d-flex flex-column  pe-none"),children:[(0,g.jsxs)("label",{className:"form-label",children:[x("licenseIssueDate"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(i.xI,{name:"licenseIssueDate",control:o,render:e=>{let{value:a,name:s}=e;return(0,g.jsx)(C(),{selected:r("licenseIssueDate")?new Date(r("licenseIssueDate")):new Date,className:"form-control customDateHeight",onChange:e=>{l("licenseIssueDate",e)}})}}),(0,g.jsx)(h.A,{errorName:d.licenseNumber})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 d-flex flex-column",children:[(0,g.jsxs)("label",{className:"form-label",children:[x("licenseExpiryDate"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(i.xI,{name:"licenseExpiryDate",control:o,render:e=>{let{value:a,name:s}=e;return(0,g.jsx)(C(),{selected:r("licenseExpiryDate")?new Date(r("licenseExpiryDate")):new Date,className:"form-control customDateHeight",onChange:e=>{l("licenseExpiryDate",e)}})}})]})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsx)("label",{className:"form-label",children:x("lifeInsuranceNumber")}),(0,g.jsx)(b.A,{type:"text",register:a,label:"Life Insurance Number",name:"lifeInsuranceNumber",placeholder:""})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 d-flex flex-column",children:[(0,g.jsx)("label",{className:"form-label",children:x("lifeInsuranceExpiry")}),(0,g.jsx)(i.xI,{name:"lifeInsuranceExpiry",control:o,render:e=>{let{value:a,name:s}=e;return(0,g.jsx)(C(),{selected:r("lifeInsuranceExpiry")?new Date(r("lifeInsuranceExpiry")):new Date,className:"form-control customDateHeight",onChange:e=>{l("lifeInsuranceExpiry",e)}})}})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 ",children:[(0,g.jsx)("label",{className:"form-label",children:x("mediclaimNumber")}),(0,g.jsx)(b.A,{type:"text",register:a,label:"Mediclaim Number",name:"mediclaimNumber",placeholder:""})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3 d-flex flex-column",children:[(0,g.jsx)("label",{className:"form-label",children:x("mediclaimExpiryDate")}),(0,g.jsx)(i.xI,{name:"mediclaimExpiryDate",control:o,render:e=>{let{value:a,name:s}=e;return(0,g.jsx)(C(),{selected:r("mediclaimExpiryDate")?new Date(r("mediclaimExpiryDate")):new Date,className:"form-control customDateHeight",onChange:e=>{l("mediclaimExpiryDate",e)}})}})]}),(0,g.jsxs)("div",{className:"col-xl-6 mb-3",children:[(0,g.jsx)("label",{className:"form-label",children:x("active")}),(0,g.jsx)("div",{className:"d-flex align-items-center",children:(0,g.jsx)("input",{type:"checkbox",className:"form-check-input",id:"customCheckBox1",name:"active",checked:u("active"),onClick:()=>{l("active",!r("active"))}})})]})]}),(0,g.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,g.jsxs)(v.A,{type:"submit",onClick:t(n),style:{width:"10%"},disabled:m,children:[" ",x("next")]})})]})};var T=a(87407);const O={control:e=>({...e,padding:".25rem 0 "})},B=e=>{let{setValue:l,handleSubmit:a,onSubmit:t,getValues:n,control:r,errors:o,register:d,isFormSubmitting:m}=e;const{fields:u,append:x}=(0,i.jz)({control:r,name:"documents"}),[b,p]=(0,s.useState)(!1),[f,j]=(0,s.useState)([]),{t:N}=(0,c.Bd)(),y=[{value:"DRIVING_LICENSE",label:"DRIVING_LICENSE"},{value:"AADHAR_CARD",label:"AADHAR_CARD"},{value:"PAN_CARD",label:"PAN_CARD"},{value:"BANK_ACCOUNT",label:"BANK_ACCOUNT"},{value:"MEDICLAIM",label:"MEDICLAIM"}];return(0,g.jsx)("div",{className:"p-4",children:(0,g.jsxs)("div",{className:"row",style:{width:"70%",margin:"auto"},children:[(0,g.jsx)("div",{className:"col-xl-12 d-flex align-items-center mb-4",children:(0,g.jsxs)(v.A,{onClick:()=>{x({documentType:"",file:null,issueDate:new Date,expireDate:new Date})},className:"ms-auto",children:["+ ",N("addDocument")]})}),u.map(((e,a)=>{var s,t,c,m,u,x,v,D,A;return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"row mb-4 ",children:[(0,g.jsxs)("div",{className:"col-xl-3 mb-2",children:[(0,g.jsxs)("label",{className:"form-label",children:[N("selectDocument"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(i.xI,{name:"documents.".concat(a,".documentType"),control:r,render:e=>{var s,t;let{field:{value:r,name:i,ref:o}}=e;return(0,g.jsx)(S.Ay,{onChange:e=>{l("documents[".concat(a,"].documentType"),e.value)},options:y,ref:o,name:i,styles:O,defaultValue:{value:null!==(s=n("documents.".concat(a,".documentType")))&&void 0!==s?s:y[1].value,label:null!==(t=n("documents.".concat(a,".documentType")))&&void 0!==t?t:y[1].label}})}}),!n("documents.".concat(a,".documentType"))&&(0,g.jsx)(h.A,{errorName:null===o||void 0===o||null===(s=o.documents)||void 0===s||null===(t=s[a])||void 0===t?void 0:t.documentType})]}),(0,g.jsxs)("div",{className:"col-xl-3 mb-2",children:[(0,g.jsxs)("label",{className:"form-label",children:[N("uploadFile"),(0,g.jsx)("span",{className:"text-danger",children:"*"})]}),(0,g.jsx)(T.A,{getValue:n,link:null!==(c=n("documents.".concat(a,".file")))&&void 0!==c&&c,register:d,name:"documents.".concat(a,".file"),label:"Select File",defaultValue:"",setValue:l,setLoading:p,loading:b}),(0,g.jsx)(h.A,{errorName:null!==o&&void 0!==o&&null!==(m=o.documents)&&void 0!==m&&null!==(u=m[a])&&void 0!==u&&u.file?"File is required":""})]}),(0,g.jsxs)("div",{className:"col-xl-3 d-flex flex-column mb-2 ",children:[(0,g.jsx)("label",{className:"form-label",children:N("issueDate")}),(0,g.jsx)(i.xI,{name:"documents.".concat(a,".issueDate"),control:r,render:e=>{let{value:s,name:t}=e;return(0,g.jsx)(C(),{selected:new Date(n("documents.".concat(a,".issueDate"))),className:"form-control customDateHeight",onChange:e=>{if(l("documents.".concat(a,".issueDate"),e),f[a]){let l=[...f];l[a].issueDate=e,j(l)}else{let l=[...f];l[a]={documentType:n("documents.".concat(a,".fieldName")),file:n("documents.".concat(a,".file")),issueDate:e,expireDate:n("documents.".concat(a,".expireDate"))},j(l)}}})}}),!n("documents.".concat(a,".issueDate"))&&(0,g.jsx)(h.A,{errorName:null===o||void 0===o||null===(x=o.documents)||void 0===x||null===(v=x[a])||void 0===v?void 0:v.issueDate})]}),(0,g.jsxs)("div",{className:"col-xl-3 d-flex flex-column mb-2",children:[(0,g.jsx)("label",{className:"form-label",children:N("expiryDate")}),(0,g.jsx)(i.xI,{name:"documents.".concat(a,".expireDate"),control:r,render:e=>{let{value:s,name:t}=e;return(0,g.jsx)(C(),{selected:new Date(n("documents.".concat(a,".expireDate"))),className:"form-control customDateHeight",onChange:e=>{if(l("documents.".concat(a,".expireDate"),e),f[a]){let l=[...f];l[a].expireDate=e,j(l)}else{[...f][a]={documentType:n("documents.".concat(a,".fieldName")),file:n("documents.".concat(a,".file")),issueDate:n("documents.".concat(a,".IssueDate")),expireDate:e}}}})}}),!n("documents.".concat(a,".expireDate"))&&(0,g.jsx)(h.A,{errorName:null===o||void 0===o||null===(D=o.documents)||void 0===D||null===(A=D[a])||void 0===A?void 0:A.expireDate})]})]},e.id)})})),(0,g.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"2rem 0"},children:(0,g.jsxs)(v.A,{type:"submit",disabled:m||b,onClick:a(t),children:[" ",N("submit")]})})]})})};var L=a(70228),z=a(42457),G=a(50377),M=a(272),R=a(15395);const _=()=>{const{t:e}=(0,c.Bd)(),l=(0,t.Zp)(),[a,v]=(0,s.useState)(0),h=[e("profile"),e("additionalInfo"),e("document")],b=[A,k,B],p=h.length,{id:f}=(0,t.g)(),j=(0,d.jE)(),{data:N,isError:y,isLoading:D}=(0,m.I)({queryKey:["driver",f],queryFn:()=>(0,G.jF)(f),enabled:!!f,staleTime:1/0}),I=(0,s.useMemo)((()=>{var e,l,a;return{...N,businessGroupId:null===N||void 0===N||null===(e=N.businessGroupId)||void 0===e?void 0:e._id,companyId:null===N||void 0===N||null===(l=N.companyId)||void 0===l?void 0:l._id,branchId:null===N||void 0===N||null===(a=N.branchId)||void 0===a?void 0:a._id}}),[N]);(0,s.useEffect)((()=>{y&&f&&((0,z.U)("Not able to fetch driver data"),l("/not-found"))}),[y&&f]);const C=(0,s.useCallback)((e=>{switch(e){case 0:return L.no;case 1:return L.Ez;case 2:return L.zP}}),[]),{register:S,formState:{errors:w},setValue:E,getValues:V,control:F,handleSubmit:T,watch:O}=(0,i.mN)({resolver:(0,o.t)(C(a)),values:I}),_=e=>(0,z.U)((0,M.SU)(e)),{mutate:H,isPending:P}=(0,u.n)({mutationFn:G.fO,onSuccess:()=>{(0,z.V)("New Driver Created"),j.invalidateQueries(["drivers"]),l("/driver")},onError:_}),{mutate:U,isPending:q}=(0,u.n)({mutationFn:e=>{let{data:l,id:a}=e;return(0,G.cI)(a,l)},onSuccess:()=>{(0,z.V)("Driver Updated Successfully"),j.invalidateQueries(["drivers"]),l("/driver")},onError:_}),J=async e=>{if(a===p-1){const l=(async e=>{for(let a=0;a<p;a++){const s=C(a);try{await s.validate(e)}catch(l){return(0,z.U)("Please check all the fields are filled"),!1}}return!0})(e);if(!l)return;f?U({id:f,data:e}):H(e)}else v((e=>Math.min(e+1,p-1)))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.A,{mainTitle:e("driver"),pageTitle:e(f?"edit":"create"),parentTitle:e("driver")}),(0,g.jsx)("div",{className:"m-2 p-2",children:(0,g.jsx)(i.Op,{children:(0,g.jsx)("form",{onSubmit:T(J),children:(0,g.jsx)("div",{className:"default-tab",children:(0,g.jsxs)(n.A.Container,{defaultActiveKey:h[0].toLowerCase(),children:[(0,g.jsx)(r.A,{as:"ul",className:"nav-tabs",children:h.map(((e,l)=>(0,g.jsx)(r.A.Item,{as:"li",children:(0,g.jsx)(r.A.Link,{style:{padding:".5rem 2rem"},eventKey:e.toLowerCase(),active:l===a,onClick:()=>v(l),children:e})},l)))}),(0,g.jsx)(n.A.Content,{className:"pt-4",children:D?(0,g.jsx)(R.A,{height:500}):h.map(((e,l)=>{const s=b[l];return(0,g.jsx)(n.A.Pane,{eventKey:e.toLowerCase(),active:l===a,children:(0,g.jsx)(s,{data:h,control:F,setValue:E,register:S,getValues:V,errors:w,handleSubmit:T,onSubmit:J,isFormSubmitting:q||P,watch:O})},l)}))})]})})})})})]})}},75636:(e,l,a)=>{a.d(l,{A:()=>n});var s=a(65043),t=a(77154);const n=()=>{const[e,l]=(0,s.useState)(null),[a,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(null),[o,c]=(0,s.useState)(null),[d,m]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(async()=>{try{m(!0);const e="bdc_031d6a642ab94e0b8f5376a97ded1793";if(!e)throw new Error("API key is missing.");const a=await t.A.get("https://api.bigdatacloud.net/data/ip-geolocation?key=".concat(e));l(a.data.location.latitude),n(a.data.location.longitude);const s=a.data;c(s),i(null)}catch(r){i("Error getting location data: "+r.message)}finally{m(!1)}})()}),[]),{location:o,lat:e,lng:a,isLoading:d,error:r}}}}]);
//# sourceMappingURL=1730.9ac5584e.chunk.js.map