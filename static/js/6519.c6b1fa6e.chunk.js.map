{"version":3,"file":"static/js/6519.c6b1fa6e.chunk.js","mappings":"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","sources":["jsx/components/Tables/VehicleTable.jsx","jsx/pages/Vehicle.jsx"],"sourcesContent":["import React from \"react\";\nimport DeleteModal from \"../Modal/DeleteModal\";\nimport { MdDelete } from \"react-icons/md\";\nimport { FaEdit } from \"react-icons/fa\";\nimport { FaCar } from \"react-icons/fa6\";\nimport useStorage from \"../../../hooks/useStorage\";\nimport { usePermissions } from \"../../../context/PermissionContext\";\n\nconst VehicleTable = ({ tableData, onConfirmDelete, editDrawerOpen }) => {\n  // const { getData } = useStorage();\n  // const filteredItems = getData(tableData);\n  const {can} = usePermissions()\n  const editPermission = can('vehicle','modify')\n  const deletePermission = can('vehicle','delete')\n  if(tableData.length ===0){\n    return;\n  }\n  return tableData?.map((item, index) => (\n  \n    <tr key={item.id}>\n      <td>\n        <div className=\"products\">\n          <div>\n            <h6>{item.vehicleName}</h6>\n          </div>\n        </div>\n      </td>\n      <td>\n        <span>{item.plateNumber}</span>\n      </td>\n      <td>\n        <span className=\"text-primary\">{item?.branchId?.branchName}</span>\n      </td>\n      \n      <td>\n        <span>{item.simNumber}</span>\n      </td>\n      <td>\n        <span>{item.imeiNumber}</span>\n      </td>\n      <td>\n        <span className=\"text-primary\">{item.registrationNumber}</span>\n      </td>\n      <td>\n        <span>{item.weightCapacity}</span>\n      </td>\n      {/* <td>\n                <span className={`badge light border-0 ${item.status===\"Active\" ? 'badge-success' : 'badge-danger'} `}style={{width:\"45%\"}}>{item.status}</span>\n            </td> */}\n      {(deletePermission || editPermission) && <td>\n        <span className=\"d-flex justify-content-center\">\n          {editPermission && <span\n            className=\"cursor-pointer\"\n            onClick={() => editDrawerOpen(item._id)}\n          >\n            <FaEdit style={{ color: \"green\", fontSize: \"1.2rem\" }} />\n          </span>}\n          {deletePermission && <DeleteModal\n            className=\"cursor-pointer \"\n            onConfirmDelete={onConfirmDelete}\n            id={item._id}\n          >\n            <MdDelete style={{ color: \"red\", fontSize: \"1.2rem\" }} />\n          </DeleteModal>}\n        </span>\n      </td>}\n    </tr>\n  ));\n};\n\nexport default VehicleTable;\n","import React, { useState, useRef, useEffect, useContext } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport VehicleTable from \"../components/Tables/VehicleTable\";\nimport { ThemeContext } from \"../../context/ThemeContext\";\nimport MainPagetitle from \"../layouts/MainPagetitle\";\nimport { clsx } from \"clsx\";\nimport VehicleServices from \"../../services/api/VehicleService\";\nimport { usePermissions } from \"../../context/PermissionContext\";\nimport { deleteVehicles, getVehicles } from \"../../services/api/VehicleService\";\nimport usePagination from \"../../hooks/usePagination\";\nimport {useTranslation} from 'react-i18next'\nimport ReactPaginate from \"react-paginate\";\n\nconst Vehicle = () => {\n\n  const { t } = useTranslation();\n  const { isRtl } = useContext(ThemeContext);\n  const {can} = usePermissions()\n  const arrowleft = clsx({\n    \"fa-solid fa-angle-right\": isRtl,\n    \"fa-solid fa-angle-left\": !isRtl,\n  });\n  const arrowright = clsx({\n    \"fa-solid fa-angle-left\": isRtl,\n    \"fa-solid fa-angle-right\": !isRtl,\n  });\n  //   const { setAddVehicle, addVehicle } = useContext(ThemeContext);\n\n\n  const navigate = useNavigate();\n  const [deleteId, setDeleteId] = useState();\n  const [tableData, setTableData] = useState([]);\n  const [editData, setEditData] = useState({\n    id: 0,\n    vehicleName: \"\",\n    plateNumber: \"\",\n    simNumber: 0,\n    IMEINumber: 0,\n    GPSDeviceType: \"\",\n    distanceCounter: 0,\n  });\n\n  const { page, nextPage, prevPage, goToPage, setCount, count, totalCount } =\n  usePagination();\n  const itemsPerPage=10;\n\n  const handlePageClick = ({ selected }) => {\n    goToPage(selected + 1); \n  };\n\n  const startIndex = (page - 1) * itemsPerPage;\n  const slicedData = tableData.slice(startIndex, startIndex + itemsPerPage);\n  \n  async function getVehicleData(page) {\n    try {\n      const { data , totalLength} = await getVehicles(page);\n      console.log(data)\n      setCount(totalLength)\n      setTableData(data);\n      // setCount(totalCount);\n    } catch (error) {\n      console.log(\"Error in fetching data\", error);\n    }\n  }\n\n\n  useEffect(() => {\n    getVehicleData(page);\n  }, [deleteId,page]);\n\n  // delete function\n  const onConfirmDelete = (id) => {\n    deleteVehicles(id);\n    getVehicleData(id);\n    setDeleteId(id);\n  };\n  // Edit function\n  const editDrawerOpen = (id) => {\n    // tableData.map((table) => table.id === id && setEditData(table));\n\n    const data = tableData.filter((item) => item._id === id);\n\n    navigate(`edit/${id}`,{ state: { formData: data } });\n    // vehicle.current.showModal();\n  };\n\n\n  const vehicle = useRef();\n  return (\n    <>\n      <MainPagetitle\n        mainTitle={t('vehicle')}\n        pageTitle={t('vehicle')}\n        parentTitle={t('home')}\n      />\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-xl-12\">\n            <div className=\"card\">\n              <div className=\"card-body p-0\">\n                <div className=\"table-responsive active-projects style-1 ItemsCheckboxSec shorting\">\n                  <div className=\"tbl-caption d-flex justify-content-between text-wrap align-items-center\">\n                    <h4 className=\"heading mb-0\">{t('vehicle')}</h4>\n                    <div>\n                     {can('vehicle','add') && <Link\n                        to={\"/vehicle/create\"}\n                        className=\"btn btn-primary btn-sm ms-1\"\n                        data-bs-toggle=\"offcanvas\"\n                      >\n                        + {t('addVehicleInfo')}\n                      </Link>}{\" \"}\n                    </div>\n                  </div>\n                  <div\n                    id=\"employee-tbl_wrapper\"\n                    className=\"dataTables_wrapper no-footer\"\n                  >\n                    <table\n                      id=\"empoloyees-tblwrapper\"\n                      className=\"table ItemsCheckboxSec dataTable no-footer mb-0\"\n                    >\n                      <thead>\n                        <tr>\n                          <th>{t('vehicleName')}</th>\n                          <th>{t('plateNumber')}</th>\n                          <th>{t('branch')}</th>\n                          <th>{t('simNumber')}</th>\n                          <th>{t('IMEINumber')}</th>\n                          <th>{t('registrationNumber')}</th>\n                          <th>{t('weightCapacity')}</th>\n                          {(can('vehicle','modify') || can('vehicle','delete')) && <th>{t('action')}</th>}\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <VehicleTable\n                          tableData={tableData}\n                          onConfirmDelete={onConfirmDelete}\n                          editDrawerOpen={editDrawerOpen}\n                          currentPage={page} \n                            itemsPerPage={itemsPerPage}\n                        />\n                      </tbody>\n                    </table>\n                    <div className=\"d-sm-flex text-center justify-content-between align-items-center\">\n                      <div className=\"dataTables_info\">\n                      {t(\"showing\")} {(page - 1) * 10 + 1} {t(\"to\")}{\" \"}\n                          {Math.min(page * 10, totalCount)} {t(\"of\")}{\" \"}\n                          {totalCount} {t(\"entries\")}\n                      </div>\n                      <div\n                        className=\"dataTables_paginate paging_simple_numbers\"\n                        id=\"example2_paginate\"\n                      >\n                        <ReactPaginate\n                            previousLabel={<i className=\"fa-solid fa-angle-left\"></i>}\n                            nextLabel={<i className=\"fa-solid fa-angle-right\"></i>}\n                            breakLabel={\"...\"}\n                            pageCount={Math.ceil(totalCount / itemsPerPage)} // Calculate pageCount based on totalCount and itemsPerPage\n                            marginPagesDisplayed={2}\n                            pageRangeDisplayed={5}\n                            onPageChange={handlePageClick}\n                            containerClassName={\"pagination\"}\n                            activeClassName={\"active\"}\n                            pageClassName=\"page-item\"\n                            pageLinkClassName=\"page-link\"\n                            previousClassName=\"page-item\"\n                            previousLinkClassName=\"page-link\"\n                            nextClassName=\"page-item\"\n                            nextLinkClassName=\"page-link\"\n                          />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Vehicle;\n"],"names":["_ref","tableData","onConfirmDelete","editDrawerOpen","can","usePermissions","editPermission","deletePermission","length","map","item","index","_item$branchId","_jsxs","children","_jsx","className","vehicleName","plateNumber","branchId","branchName","simNumber","imeiNumber","registrationNumber","weightCapacity","onClick","_id","FaEdit","style","color","fontSize","DeleteModal","id","MdDelete","Vehicle","t","useTranslation","isRtl","useContext","ThemeContext","navigate","clsx","useNavigate","deleteId","setDeleteId","useState","setTableData","editData","setEditData","IMEINumber","GPSDeviceType","distanceCounter","page","nextPage","prevPage","goToPage","setCount","count","totalCount","usePagination","startIndex","slice","async","getVehicleData","data","totalLength","getVehicles","console","log","error","useEffect","useRef","_Fragment","MainPagetitle","mainTitle","pageTitle","parentTitle","Link","to","VehicleTable","deleteVehicles","filter","concat","state","formData","currentPage","itemsPerPage","Math","min","ReactPaginate","previousLabel","nextLabel","breakLabel","pageCount","ceil","marginPagesDisplayed","pageRangeDisplayed","onPageChange","selected","containerClassName","activeClassName","pageClassName","pageLinkClassName","previousClassName","previousLinkClassName","nextClassName","nextLinkClassName"],"sourceRoot":""}