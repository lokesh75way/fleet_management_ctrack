{"version":3,"file":"static/js/5311.45af7a0c.chunk.js","mappings":"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","sources":["../node_modules/src/plugins/thumbnail/lg-thumbnail-settings.ts","../node_modules/src/lg-events.ts","../node_modules/src/plugins/thumbnail/lg-thumbnail.ts","../node_modules/src/plugins/zoom/lg-zoom-settings.ts","../node_modules/src/plugins/zoom/lg-zoom.ts","../node_modules/dist/lightgallery.es5.js"],"sourcesContent":["interface ThumbnailStrings {\n    toggleThumbnails: string;\n}\n\nexport interface ThumbnailsSettings {\n    /**\n     * Enable thumbnails for the gallery\n     */\n    thumbnail: boolean;\n\n    /*\n     * Enable thumbnail animation.\n     */\n    animateThumb: boolean;\n\n    /**\n     * Position of selected thumbnail.\n     */\n    currentPagerPosition: 'left' | 'middle' | 'right';\n\n    /**\n     * Position of thumbnails when the width of all thumbnails combined is less than the gallery's width.\n     *\n     */\n    alignThumbnails: 'left' | 'middle' | 'right';\n\n    /**\n     * Width of each thumbnails.\n     */\n    thumbWidth: number;\n\n    /**\n     * Height of each thumbnails.\n     */\n    thumbHeight: string;\n\n    /**\n     * Spacing between each thumbnails\n     */\n    thumbMargin: number;\n\n    /**\n     * control where the thumbnails should be appended.\n     * By default, thumbnails are appended to '.lg-components' which has inbuilt open close transitions\n     * If you don't want initial thumbnails transitions, or want to do more customization,\n     * you can append thumbnails to the lightGalley outer div -\n     * <a href=\"/demos/thumbnails/#static-thumbnails\">Demo</a>\n     */\n    appendThumbnailsTo: '.lg-outer' | '.lg-components';\n\n    /**\n     * Enable toggle captions and thumbnails.\n     * @description not applicable if allowMediaOverlap is false\n     */\n    toggleThumb: boolean;\n\n    /**\n     * Enables desktop mouse drag support for thumbnails.\n     */\n    enableThumbDrag: boolean;\n\n    /**\n     * Enables thumbnail touch/swipe support for touch devices\n     */\n    enableThumbSwipe: boolean;\n\n    /**\n     * By setting the thumbnailSwipeThreshold (in px) you can set how far the user must swipe for the next/prev slide.\n     */\n    thumbnailSwipeThreshold: number;\n\n    /**\n     * You can automatically load thumbnails for YouTube videos from YouTube by setting loadYouTubeThumbnail true\n     */\n    loadYouTubeThumbnail: boolean;\n\n    /**\n     * You can specify the thumbnail size by setting respective number.\n     */\n    //@todo add demo\n    youTubeThumbSize: number;\n\n    /**\n     * Custom translation strings for aria-labels\n     */\n    thumbnailPluginStrings: ThumbnailStrings;\n}\n\nexport const thumbnailsSettings: ThumbnailsSettings = {\n    thumbnail: true,\n\n    animateThumb: true,\n    currentPagerPosition: 'middle',\n    alignThumbnails: 'middle',\n\n    thumbWidth: 100,\n    thumbHeight: '80px',\n    thumbMargin: 5,\n\n    appendThumbnailsTo: '.lg-components',\n    toggleThumb: false,\n\n    enableThumbDrag: true,\n    enableThumbSwipe: true,\n    thumbnailSwipeThreshold: 10,\n\n    loadYouTubeThumbnail: true,\n    youTubeThumbSize: 1,\n\n    thumbnailPluginStrings: {\n        toggleThumbnails: 'Toggle thumbnails',\n    } as ThumbnailStrings,\n};\n","import { LightGallery } from './lightgallery';\nimport { VideoSource } from './plugins/video/types';\n\n/**\n * List of lightGallery events\n * All events should be documented here\n * Below interfaces are used to build the website documentations\n * */\nexport const lGEvents: {\n    [key: string]: string;\n} = {\n    afterAppendSlide: 'lgAfterAppendSlide',\n    init: 'lgInit',\n    hasVideo: 'lgHasVideo',\n    containerResize: 'lgContainerResize',\n    updateSlides: 'lgUpdateSlides',\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\n    beforeOpen: 'lgBeforeOpen',\n    afterOpen: 'lgAfterOpen',\n    slideItemLoad: 'lgSlideItemLoad',\n    beforeSlide: 'lgBeforeSlide',\n    afterSlide: 'lgAfterSlide',\n    posterClick: 'lgPosterClick',\n    dragStart: 'lgDragStart',\n    dragMove: 'lgDragMove',\n    dragEnd: 'lgDragEnd',\n    beforeNextSlide: 'lgBeforeNextSlide',\n    beforePrevSlide: 'lgBeforePrevSlide',\n    beforeClose: 'lgBeforeClose',\n    afterClose: 'lgAfterClose',\n    rotateLeft: 'lgRotateLeft',\n    rotateRight: 'lgRotateRight',\n    flipHorizontal: 'lgFlipHorizontal',\n    flipVertical: 'lgFlipVertical',\n    autoplay: 'lgAutoplay',\n    autoplayStart: 'lgAutoplayStart',\n    autoplayStop: 'lgAutoplayStop',\n};\n\n// Follow the below format for the event documentation\n// @method is the method name when event is used with Angular/React components\n\n/**\n * Fired only once when lightGallery is initialized\n * @name lgInit\n * @method onInit\n * @example\n *   const lg = document.getElementById('custom-events-demo');\n *   // Perform any action on lightGallery initialization.\n *   // Init event returns the plugin instance that can be used to call any lightGalley public method\n *   let pluginInstance = null;\n *   lg.addEventListener('lgInit', (event) => {\n *      pluginInstance = event.detail.instance;\n *   });\n *   lightGallery(lg);\n * @see <a href=\"/docs/methods\">Methods<a>\n */\nexport interface InitDetail {\n    /**\n     * lightGallery plugin instance\n     */\n    instance: LightGallery;\n}\n\n/**\n * Fired when the slide content has been inserted into it's slide container.\n * @name lgAfterAppendSlide\n * @method onAfterAppendSlide\n */\nexport interface AfterAppendSlideEventDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired immediately before opening the gallery\n * @name lgBeforeOpen\n * @method onBeforeOpen\n */\nexport interface BeforeOpenDetail {}\n\n/**\n * Fired immediately after opening the gallery\n * @name lgAfterOpen\n * @method onAfterOpen\n */\nexport interface AfterOpenDetail {}\n\n/**\n * Fired once the media inside the slide has been completely loaded .\n * @name lgSlideItemLoad\n * @method onSlideItemLoad\n */\nexport interface SlideItemLoadDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * For the first slide, lightGallery adds some delay for displaying the loaded slide item.\n     * This delay is required for the transition effect when the slide item is displayed\n     * Respect the delay when you use this event\n     */\n    delay: number;\n\n    // Will be true for the first slide\n    isFirstSlide: boolean;\n}\n\n/**\n * Fired immediately before each slide transition.\n * @name lgBeforeSlide\n * @method onBeforeSlide\n * @example\n *   const lg = document.getElementById('custom-events-demo');\n *   // Perform any action before each slide transition\n *   lg.addEventListener('lgBeforeSlide', (event) => {\n *       const { index, prevIndex } = event.detail;\n *       alert(index, prevIndex);\n *   });\n *   lightGallery(lg);\n */\nexport interface BeforeSlideDetail {\n    /**\n     * Index of the previous slide\n     */\n    prevIndex: number;\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n    /**\n     * true if slide function called via thumbnail click\n     */\n    fromThumb: boolean;\n}\n\n/**\n * Fired immediately after each slide transition.\n * @name lgAfterSlide\n * @method onAfterSlide\n */\nexport interface AfterSlideDetail {\n    /**\n     * Index of the previous slide\n     */\n    prevIndex: number;\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n    /**\n     * true if slide function called via thumbnail click\n     */\n    fromThumb: boolean;\n}\n\n/**\n * Fired when the video poster is clicked.\n * @name lgPosterClick\n * @method onPosterClick\n */\nexport interface PosterClickDetail {}\n\n/**\n * Fired when the drag event to move to different slide starts.\n * @name lgDragStart\n * @method onDragStart\n */\nexport interface DragStartDetail {}\n\n/**\n * Fired periodically during the drag operation.\n * @name lgDragMove\n * @method onDragMove\n */\nexport interface DragMoveDetail {}\n\n/**\n * Fired when the user has finished the drag operation\n * @name lgDragEnd\n * @method onDragEnd\n */\nexport interface DragEndDetail {}\n\n/**\n * Fired immediately before the start of the close process.\n * @name lgBeforeClose\n * @method onBeforeClose\n */\nexport interface BeforeCloseDetail {}\n\n/**\n * Fired immediately once lightGallery is closed.\n * @name lgAfterClose\n * @method onAfterClose\n */\nexport interface AfterCloseDetail {\n    /**\n     * lightGallery plugin instance\n     */\n    instance: LightGallery;\n}\n\n/**\n * Fired immediately before each \"next\" slide transition\n * @name lgBeforeNextSlide\n * @method onBeforeNextSlide\n */\nexport interface BeforeNextSlideDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n}\n\n/**\n * Fired immediately before each \"prev\" slide transition\n * @name lgBeforePrevSlide\n * @method onBeforePrevSlide\n */\nexport interface BeforePrevSlideDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n}\n\n/**\n * Fired when the sub-html content (ex : title/ description) has been appended into the slide.\n * @name lgAfterAppendSubHtml\n * @method onAfterAppendSubHtml\n */\nexport interface AfterAppendSubHtmlDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the lightGallery container has been resized.\n * @name lgContainerResize\n * @method onContainerResize\n */\nexport interface ContainerResizeDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when lightGallery detects video slide\n * @name lgHasVideo\n * @method onHasVideo\n */\nexport interface HasVideoDetail {\n    /**\n     * Index of the slide,\n     */\n    index: number;\n    /**\n     * Video source\n     */\n    src: string;\n    /**\n     * HTML5 video source if available\n     * <p>\n       HTML5 video source = source: {\n            src: string;\n            type: string;\n        }[];\n        attributes: HTMLVideoElement;\n     * </p>\n     */\n    html5Video: VideoSource;\n    /**\n     * True if video has poster\n     */\n    hasPoster: boolean;\n}\n\n/**\n * Fired when the image is rotated in anticlockwise direction\n * @name lgRotateLeft\n * @method onRotateLeft\n */\nexport interface RotateLeftDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the image is rotated in clockwise direction\n * @name lgRotateRight\n * @method onRotateRight\n */\nexport interface RotateRightDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the image is flipped horizontally\n * @name lgFlipHorizontal\n * @method onFlipHorizontal\n */\nexport interface FlipHorizontalDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the image is flipped vertically\n * @name lgFlipVertical\n * @method onFlipVertical\n */\nexport interface FlipVerticalDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n","import {\n    ThumbnailsSettings,\n    thumbnailsSettings,\n} from './lg-thumbnail-settings';\nimport { LgQuery, lgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\nimport { GalleryItem } from '../../lg-utils';\nimport { lGEvents } from '../../lg-events';\n\ninterface ThumbDragUtils {\n    cords: {\n        startX: number;\n        endX: number;\n    };\n    isMoved: boolean;\n    newTranslateX: number;\n    startTime: Date;\n    endTime: Date;\n    touchMoveTime: number;\n}\ninterface ThumbnailGalleryItem extends GalleryItem {\n    thumb: string;\n}\nexport default class Thumbnail {\n    private core: LightGallery;\n    private $thumbOuter!: lgQuery;\n    private $lgThumb!: lgQuery;\n    private thumbOuterWidth = 0;\n    private thumbTotalWidth = 0;\n    private translateX = 0;\n    private thumbClickable = false;\n    private settings!: ThumbnailsSettings;\n    private $LG!: LgQuery;\n    constructor(instance: LightGallery, $LG: LgQuery) {\n        // get lightGallery core plugin instance\n        this.core = instance;\n        this.$LG = $LG;\n\n        return this;\n    }\n\n    init(): void {\n        // extend module default settings with lightGallery core settings\n        this.settings = {\n            ...thumbnailsSettings,\n            ...this.core.settings,\n        };\n        this.thumbOuterWidth = 0;\n        this.thumbTotalWidth =\n            this.core.galleryItems.length *\n            (this.settings.thumbWidth + this.settings.thumbMargin);\n\n        // Thumbnail animation value\n        this.translateX = 0;\n\n        this.setAnimateThumbStyles();\n\n        if (!this.core.settings.allowMediaOverlap) {\n            this.settings.toggleThumb = false;\n        }\n\n        if (this.settings.thumbnail) {\n            this.build();\n            if (this.settings.animateThumb) {\n                if (this.settings.enableThumbDrag) {\n                    this.enableThumbDrag();\n                }\n\n                if (this.settings.enableThumbSwipe) {\n                    this.enableThumbSwipe();\n                }\n\n                this.thumbClickable = false;\n            } else {\n                this.thumbClickable = true;\n            }\n\n            this.toggleThumbBar();\n            this.thumbKeyPress();\n        }\n    }\n\n    build(): void {\n        this.setThumbMarkup();\n        this.manageActiveClassOnSlideChange();\n        this.$lgThumb.first().on('click.lg touchend.lg', (e: CustomEvent) => {\n            const $target = this.$LG(e.target);\n            if (!$target.hasAttribute('data-lg-item-id')) {\n                return;\n            }\n            setTimeout(() => {\n                // In IE9 and bellow touch does not support\n                // Go to slide if browser does not support css transitions\n                if (this.thumbClickable && !this.core.lgBusy) {\n                    const index = parseInt($target.attr('data-lg-item-id'));\n                    this.core.slide(index, false, true, false);\n                }\n            }, 50);\n        });\n\n        this.core.LGel.on(`${lGEvents.beforeSlide}.thumb`, (event) => {\n            const { index } = event.detail;\n            this.animateThumb(index);\n        });\n        this.core.LGel.on(`${lGEvents.beforeOpen}.thumb`, () => {\n            this.thumbOuterWidth = this.core.outer.get().offsetWidth;\n        });\n\n        this.core.LGel.on(`${lGEvents.updateSlides}.thumb`, () => {\n            this.rebuildThumbnails();\n        });\n        this.core.LGel.on(`${lGEvents.containerResize}.thumb`, () => {\n            if (!this.core.lgOpened) return;\n            setTimeout(() => {\n                this.thumbOuterWidth = this.core.outer.get().offsetWidth;\n                this.animateThumb(this.core.index);\n                this.thumbOuterWidth = this.core.outer.get().offsetWidth;\n            }, 50);\n        });\n    }\n\n    setThumbMarkup(): void {\n        let thumbOuterClassNames = 'lg-thumb-outer ';\n\n        if (this.settings.alignThumbnails) {\n            thumbOuterClassNames += `lg-thumb-align-${this.settings.alignThumbnails}`;\n        }\n\n        const html = `<div class=\"${thumbOuterClassNames}\">\n        <div class=\"lg-thumb lg-group\">\n        </div>\n        </div>`;\n\n        this.core.outer.addClass('lg-has-thumb');\n\n        if (this.settings.appendThumbnailsTo === '.lg-components') {\n            this.core.$lgComponents.append(html);\n        } else {\n            this.core.outer.append(html);\n        }\n\n        this.$thumbOuter = this.core.outer.find('.lg-thumb-outer').first();\n        this.$lgThumb = this.core.outer.find('.lg-thumb').first();\n\n        if (this.settings.animateThumb) {\n            this.core.outer\n                .find('.lg-thumb')\n                .css('transition-duration', this.core.settings.speed + 'ms')\n                .css('width', this.thumbTotalWidth + 'px')\n                .css('position', 'relative');\n        }\n\n        this.setThumbItemHtml(\n            (this.core.galleryItems as unknown) as ThumbnailGalleryItem[],\n        );\n    }\n\n    enableThumbDrag(): void {\n        let thumbDragUtils: ThumbDragUtils = {\n            cords: {\n                startX: 0,\n                endX: 0,\n            },\n            isMoved: false,\n            newTranslateX: 0,\n            startTime: new Date(),\n            endTime: new Date(),\n            touchMoveTime: 0,\n        };\n\n        let isDragging = false;\n\n        this.$thumbOuter.addClass('lg-grab');\n\n        this.core.outer\n            .find('.lg-thumb')\n            .first()\n            .on('mousedown.lg.thumb', (e) => {\n                if (this.thumbTotalWidth > this.thumbOuterWidth) {\n                    // execute only on .lg-object\n                    e.preventDefault();\n                    thumbDragUtils.cords.startX = e.pageX;\n\n                    thumbDragUtils.startTime = new Date();\n                    this.thumbClickable = false;\n\n                    isDragging = true;\n\n                    // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                    this.core.outer.get().scrollLeft += 1;\n                    this.core.outer.get().scrollLeft -= 1;\n\n                    // *\n                    this.$thumbOuter\n                        .removeClass('lg-grab')\n                        .addClass('lg-grabbing');\n                }\n            });\n\n        this.$LG(window).on(\n            `mousemove.lg.thumb.global${this.core.lgId}`,\n            (e) => {\n                if (!this.core.lgOpened) return;\n                if (isDragging) {\n                    thumbDragUtils.cords.endX = e.pageX;\n\n                    thumbDragUtils = this.onThumbTouchMove(thumbDragUtils);\n                }\n            },\n        );\n\n        this.$LG(window).on(`mouseup.lg.thumb.global${this.core.lgId}`, () => {\n            if (!this.core.lgOpened) return;\n            if (thumbDragUtils.isMoved) {\n                thumbDragUtils = this.onThumbTouchEnd(thumbDragUtils);\n            } else {\n                this.thumbClickable = true;\n            }\n\n            if (isDragging) {\n                isDragging = false;\n                this.$thumbOuter.removeClass('lg-grabbing').addClass('lg-grab');\n            }\n        });\n    }\n\n    enableThumbSwipe(): void {\n        let thumbDragUtils: ThumbDragUtils = {\n            cords: {\n                startX: 0,\n                endX: 0,\n            },\n            isMoved: false,\n            newTranslateX: 0,\n            startTime: new Date(),\n            endTime: new Date(),\n            touchMoveTime: 0,\n        };\n\n        this.$lgThumb.on('touchstart.lg', (e: TouchEvent) => {\n            if (this.thumbTotalWidth > this.thumbOuterWidth) {\n                e.preventDefault();\n                thumbDragUtils.cords.startX = e.targetTouches[0].pageX;\n                this.thumbClickable = false;\n                thumbDragUtils.startTime = new Date();\n            }\n        });\n\n        this.$lgThumb.on('touchmove.lg', (e: TouchEvent) => {\n            if (this.thumbTotalWidth > this.thumbOuterWidth) {\n                e.preventDefault();\n                thumbDragUtils.cords.endX = e.targetTouches[0].pageX;\n                thumbDragUtils = this.onThumbTouchMove(thumbDragUtils);\n            }\n        });\n\n        this.$lgThumb.on('touchend.lg', () => {\n            if (thumbDragUtils.isMoved) {\n                thumbDragUtils = this.onThumbTouchEnd(thumbDragUtils);\n            } else {\n                this.thumbClickable = true;\n            }\n        });\n    }\n\n    // Rebuild thumbnails\n    rebuildThumbnails(): void {\n        // Remove transitions\n        this.$thumbOuter.addClass('lg-rebuilding-thumbnails');\n        setTimeout(() => {\n            this.thumbTotalWidth =\n                this.core.galleryItems.length *\n                (this.settings.thumbWidth + this.settings.thumbMargin);\n            this.$lgThumb.css('width', this.thumbTotalWidth + 'px');\n            this.$lgThumb.empty();\n            this.setThumbItemHtml(\n                (this.core.galleryItems as unknown) as ThumbnailGalleryItem[],\n            );\n            this.animateThumb(this.core.index);\n        }, 50);\n        setTimeout(() => {\n            this.$thumbOuter.removeClass('lg-rebuilding-thumbnails');\n        }, 200);\n    }\n\n    // @ts-check\n\n    setTranslate(value: number): void {\n        this.$lgThumb.css(\n            'transform',\n            'translate3d(-' + value + 'px, 0px, 0px)',\n        );\n    }\n\n    getPossibleTransformX(left: number): number {\n        if (left > this.thumbTotalWidth - this.thumbOuterWidth) {\n            left = this.thumbTotalWidth - this.thumbOuterWidth;\n        }\n\n        if (left < 0) {\n            left = 0;\n        }\n        return left;\n    }\n\n    animateThumb(index: number): void {\n        this.$lgThumb.css(\n            'transition-duration',\n            this.core.settings.speed + 'ms',\n        );\n        if (this.settings.animateThumb) {\n            let position = 0;\n            switch (this.settings.currentPagerPosition) {\n                case 'left':\n                    position = 0;\n                    break;\n                case 'middle':\n                    position =\n                        this.thumbOuterWidth / 2 - this.settings.thumbWidth / 2;\n                    break;\n                case 'right':\n                    position = this.thumbOuterWidth - this.settings.thumbWidth;\n            }\n            this.translateX =\n                (this.settings.thumbWidth + this.settings.thumbMargin) * index -\n                1 -\n                position;\n            if (this.translateX > this.thumbTotalWidth - this.thumbOuterWidth) {\n                this.translateX = this.thumbTotalWidth - this.thumbOuterWidth;\n            }\n\n            if (this.translateX < 0) {\n                this.translateX = 0;\n            }\n\n            this.setTranslate(this.translateX);\n        }\n    }\n\n    onThumbTouchMove(thumbDragUtils: ThumbDragUtils): ThumbDragUtils {\n        thumbDragUtils.newTranslateX = this.translateX;\n        thumbDragUtils.isMoved = true;\n\n        thumbDragUtils.touchMoveTime = new Date().valueOf();\n\n        thumbDragUtils.newTranslateX -=\n            thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n\n        thumbDragUtils.newTranslateX = this.getPossibleTransformX(\n            thumbDragUtils.newTranslateX,\n        );\n\n        // move current slide\n        this.setTranslate(thumbDragUtils.newTranslateX);\n        this.$thumbOuter.addClass('lg-dragging');\n\n        return thumbDragUtils;\n    }\n\n    onThumbTouchEnd(thumbDragUtils: ThumbDragUtils): ThumbDragUtils {\n        thumbDragUtils.isMoved = false;\n        thumbDragUtils.endTime = new Date();\n        this.$thumbOuter.removeClass('lg-dragging');\n\n        const touchDuration =\n            thumbDragUtils.endTime.valueOf() -\n            thumbDragUtils.startTime.valueOf();\n        let distanceXnew =\n            thumbDragUtils.cords.endX - thumbDragUtils.cords.startX;\n        let speedX = Math.abs(distanceXnew) / touchDuration;\n        // Some magical numbers\n        // Can be improved\n        if (\n            speedX > 0.15 &&\n            thumbDragUtils.endTime.valueOf() - thumbDragUtils.touchMoveTime < 30\n        ) {\n            speedX += 1;\n\n            if (speedX > 2) {\n                speedX += 1;\n            }\n            speedX =\n                speedX +\n                speedX * (Math.abs(distanceXnew) / this.thumbOuterWidth);\n            this.$lgThumb.css(\n                'transition-duration',\n                Math.min(speedX - 1, 2) + 'settings',\n            );\n\n            distanceXnew = distanceXnew * speedX;\n\n            this.translateX = this.getPossibleTransformX(\n                this.translateX - distanceXnew,\n            );\n            this.setTranslate(this.translateX);\n        } else {\n            this.translateX = thumbDragUtils.newTranslateX;\n        }\n        if (\n            Math.abs(thumbDragUtils.cords.endX - thumbDragUtils.cords.startX) <\n            this.settings.thumbnailSwipeThreshold\n        ) {\n            this.thumbClickable = true;\n        }\n\n        return thumbDragUtils;\n    }\n\n    getThumbHtml(thumb: string, index: number, alt?: string): string {\n        const slideVideoInfo =\n            this.core.galleryItems[index].__slideVideoInfo || {};\n        let thumbImg;\n\n        if (slideVideoInfo.youtube) {\n            if (this.settings.loadYouTubeThumbnail) {\n                thumbImg =\n                    '//img.youtube.com/vi/' +\n                    slideVideoInfo.youtube[1] +\n                    '/' +\n                    this.settings.youTubeThumbSize +\n                    '.jpg';\n            } else {\n                thumbImg = thumb;\n            }\n        } else {\n            thumbImg = thumb;\n        }\n\n        const altAttr = alt ? 'alt=\"' + alt + '\"' : '';\n\n        return `<div data-lg-item-id=\"${index}\" class=\"lg-thumb-item ${\n            index === this.core.index ? ' active' : ''\n        }\"\n        style=\"width:${this.settings.thumbWidth}px; height: ${\n            this.settings.thumbHeight\n        };\n            margin-right: ${this.settings.thumbMargin}px;\">\n            <img ${altAttr} data-lg-item-id=\"${index}\" src=\"${thumbImg}\" />\n        </div>`;\n    }\n\n    getThumbItemHtml(items: ThumbnailGalleryItem[]): string {\n        let thumbList = '';\n        for (let i = 0; i < items.length; i++) {\n            thumbList += this.getThumbHtml(items[i].thumb, i, items[i].alt);\n        }\n\n        return thumbList;\n    }\n\n    setThumbItemHtml(items: ThumbnailGalleryItem[]): void {\n        const thumbList = this.getThumbItemHtml(items);\n        this.$lgThumb.html(thumbList);\n    }\n\n    setAnimateThumbStyles(): void {\n        if (this.settings.animateThumb) {\n            this.core.outer.addClass('lg-animate-thumb');\n        }\n    }\n\n    // Manage thumbnail active calss\n    manageActiveClassOnSlideChange(): void {\n        // manage active class for thumbnail\n        this.core.LGel.on(\n            `${lGEvents.beforeSlide}.thumb`,\n            (event: CustomEvent) => {\n                const $thumb = this.core.outer.find('.lg-thumb-item');\n                const { index } = event.detail;\n                $thumb.removeClass('active');\n                $thumb.eq(index).addClass('active');\n            },\n        );\n    }\n\n    // Toggle thumbnail bar\n    toggleThumbBar(): void {\n        if (this.settings.toggleThumb) {\n            this.core.outer.addClass('lg-can-toggle');\n            this.core.$toolbar.append(\n                '<button type=\"button\" aria-label=\"' +\n                    this.settings.thumbnailPluginStrings['toggleThumbnails'] +\n                    '\" class=\"lg-toggle-thumb lg-icon\"></button>',\n            );\n            this.core.outer\n                .find('.lg-toggle-thumb')\n                .first()\n                .on('click.lg', () => {\n                    this.core.outer.toggleClass('lg-components-open');\n                });\n        }\n    }\n\n    thumbKeyPress(): void {\n        this.$LG(window).on(`keydown.lg.thumb.global${this.core.lgId}`, (e) => {\n            if (!this.core.lgOpened || !this.settings.toggleThumb) return;\n\n            if (e.keyCode === 38) {\n                e.preventDefault();\n                this.core.outer.addClass('lg-components-open');\n            } else if (e.keyCode === 40) {\n                e.preventDefault();\n                this.core.outer.removeClass('lg-components-open');\n            }\n        });\n    }\n\n    destroy(): void {\n        if (this.settings.thumbnail) {\n            this.$LG(window).off(`.lg.thumb.global${this.core.lgId}`);\n            this.core.LGel.off('.lg.thumb');\n            this.core.LGel.off('.thumb');\n            this.$thumbOuter.remove();\n            this.core.outer.removeClass('lg-has-thumb');\n        }\n    }\n}\n","export interface ActualSizeIcons {\n    zoomIn: 'lg-zoom-in' | 'lg-actual-size';\n    zoomOut: 'lg-zoom-out' | 'lg-actual-size';\n}\n\nexport interface ZoomStrings {\n    zoomIn: string;\n    zoomOut: string;\n    viewActualSize: string;\n}\n\nexport interface ZoomSettings {\n    /**\n     * Value of zoom should be incremented/decremented\n     */\n    scale: number;\n\n    /**\n     * Enable/Disable zoom option\n     */\n    zoom: boolean;\n\n    /**\n     * Enable/Disable infinite zoom\n     * @description If you set this to true, you can zoom in more than the original size of the image.\n     */\n    infiniteZoom: boolean;\n\n    /**\n     * Enable actual size icon.\n     */\n    actualSize: boolean;\n\n    /**\n     * Once the slide transition is completed, how much time should take zoom plugin to activate\n     * @description Some css styles will be added to the images if zoom is enabled.\n     * So it might conflict if you add any custom styles to the images such as the initial transition while opening the gallery.\n     * So you can delay adding zoom related styles to the images by changing the value of enableZoomAfter.\n     */\n    enableZoomAfter: number;\n\n    /**\n     * Show zoom in, zoom out icons\n     */\n    showZoomInOutIcons: boolean;\n\n    /**\n     * Actual size icons classnames.\n     * Specify classnames for both ZoomIn and ZoomOut states\n     * You can use `actualSizeIcons: { zoomIn: 'lg-actual-size', zoomOut: 'lg-zoom-out' }`\n     * to show actual size icons instead of zoom in and zoom out icons.\n     */\n    actualSizeIcons: ActualSizeIcons;\n\n    /**\n     * Custom translation strings for aria-labels\n     */\n    zoomPluginStrings: ZoomStrings;\n}\n\nexport const zoomSettings: ZoomSettings = {\n    scale: 1,\n    zoom: true,\n    infiniteZoom: true,\n    actualSize: true,\n    showZoomInOutIcons: false,\n    actualSizeIcons: {\n        zoomIn: 'lg-zoom-in',\n        zoomOut: 'lg-zoom-out',\n    } as ActualSizeIcons,\n    enableZoomAfter: 300,\n    zoomPluginStrings: {\n        zoomIn: 'Zoom in',\n        zoomOut: 'Zoom out',\n        viewActualSize: 'View actual size',\n    } as ZoomStrings,\n};\n","import { ZoomSettings, zoomSettings } from './lg-zoom-settings';\nimport { LgQuery, lgQuery } from '../../lgQuery';\nimport { LightGallery } from '../../lightgallery';\nimport { lGEvents } from '../../lg-events';\n\ninterface Coords {\n    x: number;\n    y: number;\n}\n\ninterface DragAllowedAxises {\n    allowX: boolean;\n    allowY: boolean;\n}\ninterface ZoomTouchEvent {\n    pageX: number;\n    touches: { pageY: number; pageX: number }[];\n    pageY: number;\n}\ninterface PossibleCords {\n    minX: number;\n    minY: number;\n    maxX: number;\n    maxY: number;\n}\n\nconst ZOOM_TRANSITION_DURATION = 500;\n\nexport default class Zoom {\n    private core: LightGallery;\n    private settings: ZoomSettings;\n    private $LG!: LgQuery;\n    private imageReset!: number | boolean;\n    zoomableTimeout: any;\n    positionChanged!: boolean;\n    zoomInProgress!: boolean;\n    pageX!: number;\n    pageY!: number;\n    scale!: number;\n\n    containerRect!: ClientRect;\n    dragAllowedAxises!: DragAllowedAxises;\n    top!: number;\n    left!: number;\n    scrollTop!: number;\n    constructor(instance: LightGallery, $LG: LgQuery) {\n        // get lightGallery core plugin instance\n        this.core = instance;\n        this.$LG = $LG;\n\n        this.settings = { ...zoomSettings, ...this.core.settings };\n\n        return this;\n    }\n\n    // Append Zoom controls. Actual size, Zoom-in, Zoom-out\n    buildTemplates(): void {\n        let zoomIcons = this.settings.showZoomInOutIcons\n            ? `<button id=\"${this.core.getIdName(\n                  'lg-zoom-in',\n              )}\" type=\"button\" aria-label=\"${\n                  this.settings.zoomPluginStrings['zoomIn']\n              }\" class=\"lg-zoom-in lg-icon\"></button><button id=\"${this.core.getIdName(\n                  'lg-zoom-out',\n              )}\" type=\"button\" aria-label=\"${\n                  this.settings.zoomPluginStrings['zoomIn']\n              }\" class=\"lg-zoom-out lg-icon\"></button>`\n            : '';\n\n        if (this.settings.actualSize) {\n            zoomIcons += `<button id=\"${this.core.getIdName(\n                'lg-actual-size',\n            )}\" type=\"button\" aria-label=\"${\n                this.settings.zoomPluginStrings['viewActualSize']\n            }\" class=\"${\n                this.settings.actualSizeIcons.zoomIn\n            } lg-icon\"></button>`;\n        }\n\n        this.core.outer.addClass('lg-use-transition-for-zoom');\n\n        this.core.$toolbar.first().append(zoomIcons);\n    }\n\n    /**\n     * @desc Enable zoom option only once the image is completely loaded\n     * If zoomFromOrigin is true, Zoom is enabled once the dummy image has been inserted\n     *\n     * Zoom styles are defined under lg-zoomable CSS class.\n     */\n    enableZoom(event: CustomEvent): void {\n        // delay will be 0 except first time\n        let _speed = this.settings.enableZoomAfter + event.detail.delay;\n\n        // set _speed value 0 if gallery opened from direct url and if it is first slide\n        if (\n            this.$LG('body').first().hasClass('lg-from-hash') &&\n            event.detail.delay\n        ) {\n            // will execute only once\n            _speed = 0;\n        } else {\n            // Remove lg-from-hash to enable starting animation.\n            this.$LG('body').first().removeClass('lg-from-hash');\n        }\n\n        this.zoomableTimeout = setTimeout(() => {\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n            this.core.getSlideItem(event.detail.index).addClass('lg-zoomable');\n            if (event.detail.index === this.core.index) {\n                this.setZoomEssentials();\n            }\n        }, _speed + 30);\n    }\n\n    enableZoomOnSlideItemLoad(): void {\n        // Add zoomable class\n        this.core.LGel.on(\n            `${lGEvents.slideItemLoad}.zoom`,\n            this.enableZoom.bind(this),\n        );\n    }\n\n    getDragCords(e: MouseEvent): Coords {\n        return {\n            x: e.pageX,\n            y: e.pageY,\n        };\n    }\n    getSwipeCords(e: TouchEvent): Coords {\n        const x = e.touches[0].pageX;\n        const y = e.touches[0].pageY;\n        return {\n            x,\n            y,\n        };\n    }\n\n    getDragAllowedAxises(scale: number, scaleDiff?: number): DragAllowedAxises {\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first()\n            .get();\n\n        let height = 0;\n        let width = 0;\n        const rect = $image.getBoundingClientRect();\n        if (scale) {\n            height = $image.offsetHeight * scale;\n            width = $image.offsetWidth * scale;\n        } else if (scaleDiff) {\n            height = rect.height + scaleDiff * rect.height;\n            width = rect.width + scaleDiff * rect.width;\n        } else {\n            height = rect.height;\n            width = rect.width;\n        }\n        const allowY = height > this.containerRect.height;\n        const allowX = width > this.containerRect.width;\n        return {\n            allowX,\n            allowY,\n        };\n    }\n\n    setZoomEssentials(): void {\n        this.containerRect = this.core.$content.get().getBoundingClientRect();\n    }\n\n    /**\n     * @desc Image zoom\n     * Translate the wrap and scale the image to get better user experience\n     *\n     * @param {String} scale - Zoom decrement/increment value\n     */\n    zoomImage(\n        scale: number,\n        scaleDiff: number,\n        reposition: boolean,\n        resetToMax: boolean,\n    ): void {\n        if (Math.abs(scaleDiff) <= 0) return;\n\n        const offsetX = this.containerRect.width / 2 + this.containerRect.left;\n\n        const offsetY =\n            this.containerRect.height / 2 +\n            this.containerRect.top +\n            this.scrollTop;\n\n        let originalX;\n        let originalY;\n\n        if (scale === 1) {\n            this.positionChanged = false;\n        }\n\n        const dragAllowedAxises = this.getDragAllowedAxises(0, scaleDiff);\n\n        const { allowY, allowX } = dragAllowedAxises;\n        if (this.positionChanged) {\n            originalX = this.left / (this.scale - scaleDiff);\n            originalY = this.top / (this.scale - scaleDiff);\n            this.pageX = offsetX - originalX;\n            this.pageY = offsetY - originalY;\n\n            this.positionChanged = false;\n        }\n\n        const possibleSwipeCords = this.getPossibleSwipeDragCords(scaleDiff);\n\n        let x;\n        let y;\n        let _x = offsetX - this.pageX;\n        let _y = offsetY - this.pageY;\n\n        if (scale - scaleDiff > 1) {\n            const scaleVal = (scale - scaleDiff) / Math.abs(scaleDiff);\n            _x =\n                (scaleDiff < 0 ? -_x : _x) +\n                this.left * (scaleVal + (scaleDiff < 0 ? -1 : 1));\n            _y =\n                (scaleDiff < 0 ? -_y : _y) +\n                this.top * (scaleVal + (scaleDiff < 0 ? -1 : 1));\n            x = _x / scaleVal;\n            y = _y / scaleVal;\n        } else {\n            const scaleVal = (scale - scaleDiff) * scaleDiff;\n            x = _x * scaleVal;\n            y = _y * scaleVal;\n        }\n\n        if (reposition) {\n            if (allowX) {\n                if (this.isBeyondPossibleLeft(x, possibleSwipeCords.minX)) {\n                    x = possibleSwipeCords.minX;\n                } else if (\n                    this.isBeyondPossibleRight(x, possibleSwipeCords.maxX)\n                ) {\n                    x = possibleSwipeCords.maxX;\n                }\n            } else {\n                if (scale > 1) {\n                    if (x < possibleSwipeCords.minX) {\n                        x = possibleSwipeCords.minX;\n                    } else if (x > possibleSwipeCords.maxX) {\n                        x = possibleSwipeCords.maxX;\n                    }\n                }\n            }\n            // @todo fix this\n            if (allowY) {\n                if (this.isBeyondPossibleTop(y, possibleSwipeCords.minY)) {\n                    y = possibleSwipeCords.minY;\n                } else if (\n                    this.isBeyondPossibleBottom(y, possibleSwipeCords.maxY)\n                ) {\n                    y = possibleSwipeCords.maxY;\n                }\n            } else {\n                // If the translate value based on index of beyond the viewport, utilize the available space to prevent image being cut out\n                if (scale > 1) {\n                    //If image goes beyond viewport top, use the minim possible translate value\n                    if (y < possibleSwipeCords.minY) {\n                        y = possibleSwipeCords.minY;\n                    } else if (y > possibleSwipeCords.maxY) {\n                        y = possibleSwipeCords.maxY;\n                    }\n                }\n            }\n        }\n\n        this.setZoomStyles({\n            x: x,\n            y: y,\n            scale,\n        });\n\n        this.left = x;\n        this.top = y;\n\n        if (resetToMax) {\n            this.setZoomImageSize();\n        }\n    }\n\n    resetImageTranslate(index: number): void {\n        if (!this.isImageSlide(index)) {\n            return;\n        }\n        const $image = this.core.getSlideItem(index).find('.lg-image').first();\n        this.imageReset = false;\n        $image.removeClass(\n            'reset-transition reset-transition-y reset-transition-x',\n        );\n        this.core.outer.removeClass('lg-actual-size');\n        $image.css('width', 'auto').css('height', 'auto');\n        setTimeout(() => {\n            $image.removeClass('no-transition');\n        }, 10);\n    }\n\n    setZoomImageSize(): void {\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first();\n\n        setTimeout(() => {\n            const actualSizeScale = this.getCurrentImageActualSizeScale();\n\n            if (this.scale >= actualSizeScale) {\n                $image.addClass('no-transition');\n                this.imageReset = true;\n            }\n        }, ZOOM_TRANSITION_DURATION);\n\n        setTimeout(() => {\n            const actualSizeScale = this.getCurrentImageActualSizeScale();\n\n            if (this.scale >= actualSizeScale) {\n                const dragAllowedAxises = this.getDragAllowedAxises(this.scale);\n\n                $image\n                    .css(\n                        'width',\n                        ($image.get() as HTMLImageElement).naturalWidth + 'px',\n                    )\n                    .css(\n                        'height',\n                        ($image.get() as HTMLImageElement).naturalHeight + 'px',\n                    );\n\n                this.core.outer.addClass('lg-actual-size');\n\n                if (dragAllowedAxises.allowX && dragAllowedAxises.allowY) {\n                    $image.addClass('reset-transition');\n                } else if (\n                    dragAllowedAxises.allowX &&\n                    !dragAllowedAxises.allowY\n                ) {\n                    $image.addClass('reset-transition-x');\n                } else if (\n                    !dragAllowedAxises.allowX &&\n                    dragAllowedAxises.allowY\n                ) {\n                    $image.addClass('reset-transition-y');\n                }\n            }\n        }, ZOOM_TRANSITION_DURATION + 50);\n    }\n\n    /**\n     * @desc apply scale3d to image and translate to image wrap\n     * @param {style} X,Y and scale\n     */\n    setZoomStyles(style: { x: number; y: number; scale: number }): void {\n        const $imageWrap = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-img-wrap')\n            .first();\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first();\n        const $dummyImage = this.core.outer\n            .find('.lg-current .lg-dummy-img')\n            .first();\n        this.scale = style.scale;\n        $image.css(\n            'transform',\n            'scale3d(' + style.scale + ', ' + style.scale + ', 1)',\n        );\n\n        $dummyImage.css(\n            'transform',\n            'scale3d(' + style.scale + ', ' + style.scale + ', 1)',\n        );\n\n        const transform =\n            'translate3d(' + style.x + 'px, ' + style.y + 'px, 0)';\n        $imageWrap.css('transform', transform);\n    }\n\n    /**\n     * @param index - Index of the current slide\n     * @param event - event will be available only if the function is called on clicking/taping the imags\n     */\n    setActualSize(index: number, event?: ZoomTouchEvent): void {\n        if (this.zoomInProgress) {\n            return;\n        }\n        this.zoomInProgress = true;\n        const currentItem = this.core.galleryItems[this.core.index];\n        this.resetImageTranslate(index);\n        setTimeout(() => {\n            // Allow zoom only on image\n            if (\n                !currentItem.src ||\n                this.core.outer.hasClass('lg-first-slide-loading')\n            ) {\n                return;\n            }\n            const scale = this.getCurrentImageActualSizeScale();\n            const prevScale = this.scale;\n            if (this.core.outer.hasClass('lg-zoomed')) {\n                this.scale = 1;\n            } else {\n                this.scale = this.getScale(scale);\n            }\n            this.setPageCords(event);\n\n            this.beginZoom(this.scale);\n            this.zoomImage(this.scale, this.scale - prevScale, true, true);\n        }, 50);\n        setTimeout(() => {\n            this.core.outer.removeClass('lg-grabbing').addClass('lg-grab');\n        }, 60);\n        setTimeout(() => {\n            this.zoomInProgress = false;\n        }, ZOOM_TRANSITION_DURATION + 110);\n    }\n\n    getNaturalWidth(index: number): number {\n        const $image = this.core.getSlideItem(index).find('.lg-image').first();\n\n        const naturalWidth = this.core.galleryItems[index].width;\n        return naturalWidth\n            ? parseFloat(naturalWidth)\n            : undefined || ($image.get() as any).naturalWidth;\n    }\n\n    getActualSizeScale(naturalWidth: number, width: number): number {\n        let _scale;\n        let scale;\n        if (naturalWidth >= width) {\n            _scale = naturalWidth / width;\n            scale = _scale || 2;\n        } else {\n            scale = 1;\n        }\n        return scale;\n    }\n\n    getCurrentImageActualSizeScale(): number {\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first();\n        const width = $image.get().offsetWidth;\n        const naturalWidth = this.getNaturalWidth(this.core.index) || width;\n        return this.getActualSizeScale(naturalWidth, width);\n    }\n\n    getPageCords(event?: ZoomTouchEvent): Coords {\n        const cords: Coords = {} as Coords;\n        if (event) {\n            cords.x = event.pageX || event.touches[0].pageX;\n            cords.y = event.pageY || event.touches[0].pageY;\n        } else {\n            const containerRect = this.core.$content\n                .get()\n                .getBoundingClientRect();\n            cords.x = containerRect.width / 2 + containerRect.left;\n            cords.y =\n                containerRect.height / 2 + this.scrollTop + containerRect.top;\n        }\n        return cords;\n    }\n\n    setPageCords(event?: ZoomTouchEvent): void {\n        const pageCords = this.getPageCords(event);\n\n        this.pageX = pageCords.x;\n        this.pageY = pageCords.y;\n    }\n\n    manageActualPixelClassNames(): void {\n        const $actualSize = this.core.getElementById('lg-actual-size');\n        $actualSize\n            .removeClass(this.settings.actualSizeIcons.zoomIn)\n            .addClass(this.settings.actualSizeIcons.zoomOut);\n    }\n\n    // If true, zoomed - in else zoomed out\n    beginZoom(scale: number): boolean {\n        this.core.outer.removeClass('lg-zoom-drag-transition lg-zoom-dragging');\n        if (scale > 1) {\n            this.core.outer.addClass('lg-zoomed');\n            this.manageActualPixelClassNames();\n        } else {\n            this.resetZoom();\n        }\n        return scale > 1;\n    }\n\n    getScale(scale: number): number {\n        const actualSizeScale = this.getCurrentImageActualSizeScale();\n        if (scale < 1) {\n            scale = 1;\n        } else if (scale > actualSizeScale) {\n            scale = actualSizeScale;\n        }\n        return scale;\n    }\n\n    init(): void {\n        if (!this.settings.zoom) {\n            return;\n        }\n        this.buildTemplates();\n        this.enableZoomOnSlideItemLoad();\n\n        let tapped: ReturnType<typeof setTimeout> | null = null;\n\n        this.core.outer.on('dblclick.lg', (event) => {\n            if (!this.$LG(event.target).hasClass('lg-image')) {\n                return;\n            }\n            this.setActualSize(this.core.index, event);\n        });\n\n        this.core.outer.on('touchstart.lg', (event) => {\n            const $target = this.$LG(event.target);\n            if (event.touches.length === 1 && $target.hasClass('lg-image')) {\n                if (!tapped) {\n                    tapped = setTimeout(() => {\n                        tapped = null;\n                    }, 300);\n                } else {\n                    clearTimeout(tapped);\n                    tapped = null;\n                    event.preventDefault();\n                    this.setActualSize(this.core.index, event);\n                }\n            }\n        });\n\n        this.core.LGel.on(\n            `${lGEvents.containerResize}.zoom ${lGEvents.rotateRight}.zoom ${lGEvents.rotateLeft}.zoom ${lGEvents.flipHorizontal}.zoom ${lGEvents.flipVertical}.zoom`,\n            () => {\n                if (\n                    !this.core.lgOpened ||\n                    !this.isImageSlide(this.core.index) ||\n                    this.core.touchAction\n                ) {\n                    return;\n                }\n                const _LGel = this.core\n                    .getSlideItem(this.core.index)\n                    .find('.lg-img-wrap')\n                    .first();\n                this.top = 0;\n                this.left = 0;\n                this.setZoomEssentials();\n                this.setZoomSwipeStyles(_LGel, { x: 0, y: 0 });\n                this.positionChanged = true;\n            },\n        );\n        // Update zoom on resize and orientationchange\n        this.$LG(window).on(`scroll.lg.zoom.global${this.core.lgId}`, () => {\n            if (!this.core.lgOpened) return;\n            this.scrollTop = this.$LG(window).scrollTop();\n        });\n\n        this.core.getElementById('lg-zoom-out').on('click.lg', () => {\n            // Allow zoom only on image\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n\n            let timeout = 0;\n            if (this.imageReset) {\n                this.resetImageTranslate(this.core.index);\n                timeout = 50;\n            }\n            setTimeout(() => {\n                let scale = this.scale - this.settings.scale;\n\n                if (scale < 1) {\n                    scale = 1;\n                }\n                this.beginZoom(scale);\n                this.zoomImage(\n                    scale,\n                    -this.settings.scale,\n                    true,\n                    !this.settings.infiniteZoom,\n                );\n            }, timeout);\n        });\n\n        this.core.getElementById('lg-zoom-in').on('click.lg', () => {\n            this.zoomIn();\n        });\n\n        this.core.getElementById('lg-actual-size').on('click.lg', () => {\n            this.setActualSize(this.core.index);\n        });\n\n        this.core.LGel.on(`${lGEvents.beforeOpen}.zoom`, () => {\n            this.core.outer.find('.lg-item').removeClass('lg-zoomable');\n        });\n        this.core.LGel.on(`${lGEvents.afterOpen}.zoom`, () => {\n            this.scrollTop = this.$LG(window).scrollTop();\n\n            // Set the initial value center\n            this.pageX = this.core.outer.width() / 2;\n            this.pageY = this.core.outer.height() / 2 + this.scrollTop;\n\n            this.scale = 1;\n        });\n\n        // Reset zoom on slide change\n        this.core.LGel.on(\n            `${lGEvents.afterSlide}.zoom`,\n            (event: CustomEvent) => {\n                const { prevIndex } = event.detail;\n                this.scale = 1;\n                this.positionChanged = false;\n                this.zoomInProgress = false;\n                this.resetZoom(prevIndex);\n                this.resetImageTranslate(prevIndex);\n                if (this.isImageSlide(this.core.index)) {\n                    this.setZoomEssentials();\n                }\n            },\n        );\n\n        // Drag option after zoom\n        this.zoomDrag();\n\n        this.pinchZoom();\n\n        this.zoomSwipe();\n\n        // Store the zoomable timeout value just to clear it while closing\n        this.zoomableTimeout = false;\n        this.positionChanged = false;\n        this.zoomInProgress = false;\n    }\n\n    zoomIn(): void {\n        // Allow zoom only on image\n        if (!this.isImageSlide(this.core.index)) {\n            return;\n        }\n\n        let scale = this.scale + this.settings.scale;\n\n        if (!this.settings.infiniteZoom) {\n            scale = this.getScale(scale);\n        }\n        this.beginZoom(scale);\n        this.zoomImage(\n            scale,\n            Math.min(this.settings.scale, scale - this.scale),\n            true,\n            !this.settings.infiniteZoom,\n        );\n    }\n\n    // Reset zoom effect\n    resetZoom(index?: number): void {\n        this.core.outer.removeClass('lg-zoomed lg-zoom-drag-transition');\n        const $actualSize = this.core.getElementById('lg-actual-size');\n        const $item = this.core.getSlideItem(\n            index !== undefined ? index : this.core.index,\n        );\n        $actualSize\n            .removeClass(this.settings.actualSizeIcons.zoomOut)\n            .addClass(this.settings.actualSizeIcons.zoomIn);\n        $item.find('.lg-img-wrap').first().removeAttr('style');\n        $item.find('.lg-image').first().removeAttr('style');\n        this.scale = 1;\n        this.left = 0;\n        this.top = 0;\n\n        // Reset pagx pagy values to center\n        this.setPageCords();\n    }\n\n    getTouchDistance(e: TouchEvent): number {\n        return Math.sqrt(\n            (e.touches[0].pageX - e.touches[1].pageX) *\n                (e.touches[0].pageX - e.touches[1].pageX) +\n                (e.touches[0].pageY - e.touches[1].pageY) *\n                    (e.touches[0].pageY - e.touches[1].pageY),\n        );\n    }\n\n    pinchZoom(): void {\n        let startDist = 0;\n        let pinchStarted = false;\n        let initScale = 1;\n        let prevScale = 0;\n\n        let $item = this.core.getSlideItem(this.core.index);\n\n        this.core.outer.on('touchstart.lg', (e) => {\n            $item = this.core.getSlideItem(this.core.index);\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n            if (e.touches.length === 2) {\n                e.preventDefault();\n                if (this.core.outer.hasClass('lg-first-slide-loading')) {\n                    return;\n                }\n                initScale = this.scale || 1;\n                this.core.outer.removeClass(\n                    'lg-zoom-drag-transition lg-zoom-dragging',\n                );\n\n                this.setPageCords(e);\n                this.resetImageTranslate(this.core.index);\n\n                this.core.touchAction = 'pinch';\n\n                startDist = this.getTouchDistance(e);\n            }\n        });\n\n        this.core.$inner.on('touchmove.lg', (e) => {\n            if (\n                e.touches.length === 2 &&\n                this.core.touchAction === 'pinch' &&\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target))\n            ) {\n                e.preventDefault();\n                const endDist = this.getTouchDistance(e);\n\n                const distance = startDist - endDist;\n                if (!pinchStarted && Math.abs(distance) > 5) {\n                    pinchStarted = true;\n                }\n                if (pinchStarted) {\n                    prevScale = this.scale;\n                    const _scale = Math.max(1, initScale + -distance * 0.02);\n                    this.scale =\n                        Math.round((_scale + Number.EPSILON) * 100) / 100;\n                    const diff = this.scale - prevScale;\n                    this.zoomImage(\n                        this.scale,\n                        Math.round((diff + Number.EPSILON) * 100) / 100,\n                        false,\n                        false,\n                    );\n                }\n            }\n        });\n\n        this.core.$inner.on('touchend.lg', (e) => {\n            if (\n                this.core.touchAction === 'pinch' &&\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target))\n            ) {\n                pinchStarted = false;\n                startDist = 0;\n                if (this.scale <= 1) {\n                    this.resetZoom();\n                } else {\n                    const actualSizeScale = this.getCurrentImageActualSizeScale();\n\n                    if (this.scale >= actualSizeScale) {\n                        let scaleDiff = actualSizeScale - this.scale;\n                        if (scaleDiff === 0) {\n                            scaleDiff = 0.01;\n                        }\n                        this.zoomImage(actualSizeScale, scaleDiff, false, true);\n                    }\n                    this.manageActualPixelClassNames();\n\n                    this.core.outer.addClass('lg-zoomed');\n                }\n                this.core.touchAction = undefined;\n            }\n        });\n    }\n\n    touchendZoom(\n        startCoords: Coords,\n        endCoords: Coords,\n        allowX: boolean,\n        allowY: boolean,\n        touchDuration: number,\n    ): void {\n        let distanceXnew = endCoords.x - startCoords.x;\n        let distanceYnew = endCoords.y - startCoords.y;\n\n        let speedX = Math.abs(distanceXnew) / touchDuration + 1;\n        let speedY = Math.abs(distanceYnew) / touchDuration + 1;\n\n        if (speedX > 2) {\n            speedX += 1;\n        }\n\n        if (speedY > 2) {\n            speedY += 1;\n        }\n\n        distanceXnew = distanceXnew * speedX;\n        distanceYnew = distanceYnew * speedY;\n\n        const _LGel = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-img-wrap')\n            .first();\n        const distance: Coords = {} as Coords;\n\n        distance.x = this.left + distanceXnew;\n        distance.y = this.top + distanceYnew;\n\n        const possibleSwipeCords = this.getPossibleSwipeDragCords();\n\n        if (Math.abs(distanceXnew) > 15 || Math.abs(distanceYnew) > 15) {\n            if (allowY) {\n                if (\n                    this.isBeyondPossibleTop(\n                        distance.y,\n                        possibleSwipeCords.minY,\n                    )\n                ) {\n                    distance.y = possibleSwipeCords.minY;\n                } else if (\n                    this.isBeyondPossibleBottom(\n                        distance.y,\n                        possibleSwipeCords.maxY,\n                    )\n                ) {\n                    distance.y = possibleSwipeCords.maxY;\n                }\n            }\n\n            if (allowX) {\n                if (\n                    this.isBeyondPossibleLeft(\n                        distance.x,\n                        possibleSwipeCords.minX,\n                    )\n                ) {\n                    distance.x = possibleSwipeCords.minX;\n                } else if (\n                    this.isBeyondPossibleRight(\n                        distance.x,\n                        possibleSwipeCords.maxX,\n                    )\n                ) {\n                    distance.x = possibleSwipeCords.maxX;\n                }\n            }\n\n            if (allowY) {\n                this.top = distance.y;\n            } else {\n                distance.y = this.top;\n            }\n\n            if (allowX) {\n                this.left = distance.x;\n            } else {\n                distance.x = this.left;\n            }\n\n            this.setZoomSwipeStyles(_LGel, distance);\n\n            this.positionChanged = true;\n        }\n    }\n\n    getZoomSwipeCords(\n        startCoords: Coords,\n        endCoords: Coords,\n        allowX: boolean,\n        allowY: boolean,\n        possibleSwipeCords: PossibleCords,\n    ): Coords {\n        const distance: Coords = {} as Coords;\n        if (allowY) {\n            distance.y = this.top + (endCoords.y - startCoords.y);\n            if (this.isBeyondPossibleTop(distance.y, possibleSwipeCords.minY)) {\n                const diffMinY = possibleSwipeCords.minY - distance.y;\n                distance.y = possibleSwipeCords.minY - diffMinY / 6;\n            } else if (\n                this.isBeyondPossibleBottom(distance.y, possibleSwipeCords.maxY)\n            ) {\n                const diffMaxY = distance.y - possibleSwipeCords.maxY;\n                distance.y = possibleSwipeCords.maxY + diffMaxY / 6;\n            }\n        } else {\n            distance.y = this.top;\n        }\n\n        if (allowX) {\n            distance.x = this.left + (endCoords.x - startCoords.x);\n            if (\n                this.isBeyondPossibleLeft(distance.x, possibleSwipeCords.minX)\n            ) {\n                const diffMinX = possibleSwipeCords.minX - distance.x;\n                distance.x = possibleSwipeCords.minX - diffMinX / 6;\n            } else if (\n                this.isBeyondPossibleRight(distance.x, possibleSwipeCords.maxX)\n            ) {\n                const difMaxX = distance.x - possibleSwipeCords.maxX;\n                distance.x = possibleSwipeCords.maxX + difMaxX / 6;\n            }\n        } else {\n            distance.x = this.left;\n        }\n\n        return distance;\n    }\n\n    private isBeyondPossibleLeft(x: number, minX: number) {\n        return x >= minX;\n    }\n    private isBeyondPossibleRight(x: number, maxX: number) {\n        return x <= maxX;\n    }\n    private isBeyondPossibleTop(y: number, minY: number) {\n        return y >= minY;\n    }\n    private isBeyondPossibleBottom(y: number, maxY: number) {\n        return y <= maxY;\n    }\n\n    isImageSlide(index: number): boolean {\n        const currentItem = this.core.galleryItems[index];\n        return this.core.getSlideType(currentItem) === 'image';\n    }\n\n    getPossibleSwipeDragCords(scale?: number): PossibleCords {\n        const $image = this.core\n            .getSlideItem(this.core.index)\n            .find('.lg-image')\n            .first();\n\n        const { bottom } = this.core.mediaContainerPosition;\n\n        const imgRect = $image.get().getBoundingClientRect();\n\n        let imageHeight = imgRect.height;\n        let imageWidth = imgRect.width;\n\n        if (scale) {\n            imageHeight = imageHeight + scale * imageHeight;\n            imageWidth = imageWidth + scale * imageWidth;\n        }\n\n        const minY = (imageHeight - this.containerRect.height) / 2;\n        const maxY = (this.containerRect.height - imageHeight) / 2 + bottom;\n\n        const minX = (imageWidth - this.containerRect.width) / 2;\n\n        const maxX = (this.containerRect.width - imageWidth) / 2;\n\n        const possibleSwipeCords = {\n            minY: minY,\n            maxY: maxY,\n            minX: minX,\n            maxX: maxX,\n        };\n        return possibleSwipeCords;\n    }\n\n    setZoomSwipeStyles(\n        LGel: lgQuery,\n        distance: { x: number; y: number },\n    ): void {\n        LGel.css(\n            'transform',\n            'translate3d(' + distance.x + 'px, ' + distance.y + 'px, 0)',\n        );\n    }\n\n    zoomSwipe(): void {\n        let startCoords = {} as Coords;\n        let endCoords = {} as Coords;\n        let isMoved = false;\n\n        // Allow x direction drag\n        let allowX = false;\n\n        // Allow Y direction drag\n        let allowY = false;\n\n        let startTime: Date = new Date();\n        let endTime: Date = new Date();\n        let possibleSwipeCords: PossibleCords;\n\n        let _LGel: lgQuery;\n\n        let $item = this.core.getSlideItem(this.core.index);\n\n        this.core.$inner.on('touchstart.lg', (e) => {\n            // Allow zoom only on image\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n            $item = this.core.getSlideItem(this.core.index);\n            if (\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target)) &&\n                e.touches.length === 1 &&\n                this.core.outer.hasClass('lg-zoomed')\n            ) {\n                e.preventDefault();\n                startTime = new Date();\n                this.core.touchAction = 'zoomSwipe';\n                _LGel = this.core\n                    .getSlideItem(this.core.index)\n                    .find('.lg-img-wrap')\n                    .first();\n\n                const dragAllowedAxises = this.getDragAllowedAxises(0);\n\n                allowY = dragAllowedAxises.allowY;\n                allowX = dragAllowedAxises.allowX;\n                if (allowX || allowY) {\n                    startCoords = this.getSwipeCords(e);\n                }\n\n                possibleSwipeCords = this.getPossibleSwipeDragCords();\n\n                // reset opacity and transition duration\n                this.core.outer.addClass(\n                    'lg-zoom-dragging lg-zoom-drag-transition',\n                );\n            }\n        });\n\n        this.core.$inner.on('touchmove.lg', (e) => {\n            if (\n                e.touches.length === 1 &&\n                this.core.touchAction === 'zoomSwipe' &&\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target))\n            ) {\n                e.preventDefault();\n                this.core.touchAction = 'zoomSwipe';\n\n                endCoords = this.getSwipeCords(e);\n\n                const distance = this.getZoomSwipeCords(\n                    startCoords,\n                    endCoords,\n                    allowX,\n                    allowY,\n                    possibleSwipeCords,\n                );\n\n                if (\n                    Math.abs(endCoords.x - startCoords.x) > 15 ||\n                    Math.abs(endCoords.y - startCoords.y) > 15\n                ) {\n                    isMoved = true;\n                    this.setZoomSwipeStyles(_LGel, distance);\n                }\n            }\n        });\n\n        this.core.$inner.on('touchend.lg', (e) => {\n            if (\n                this.core.touchAction === 'zoomSwipe' &&\n                (this.$LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target))\n            ) {\n                e.preventDefault();\n                this.core.touchAction = undefined;\n                this.core.outer.removeClass('lg-zoom-dragging');\n                if (!isMoved) {\n                    return;\n                }\n                isMoved = false;\n                endTime = new Date();\n                const touchDuration = endTime.valueOf() - startTime.valueOf();\n                this.touchendZoom(\n                    startCoords,\n                    endCoords,\n                    allowX,\n                    allowY,\n                    touchDuration,\n                );\n            }\n        });\n    }\n\n    zoomDrag(): void {\n        let startCoords: Coords = {} as Coords;\n        let endCoords: Coords = {} as Coords;\n        let isDragging = false;\n        let isMoved = false;\n\n        // Allow x direction drag\n        let allowX = false;\n\n        // Allow Y direction drag\n        let allowY = false;\n\n        let startTime: number | Date;\n        let endTime;\n\n        let possibleSwipeCords: PossibleCords;\n\n        let _LGel: lgQuery;\n\n        this.core.outer.on('mousedown.lg.zoom', (e) => {\n            // Allow zoom only on image\n            if (!this.isImageSlide(this.core.index)) {\n                return;\n            }\n            const $item = this.core.getSlideItem(this.core.index);\n            if (\n                this.$LG(e.target).hasClass('lg-item') ||\n                $item.get().contains(e.target)\n            ) {\n                startTime = new Date();\n                _LGel = this.core\n                    .getSlideItem(this.core.index)\n                    .find('.lg-img-wrap')\n                    .first();\n\n                const dragAllowedAxises = this.getDragAllowedAxises(0);\n\n                allowY = dragAllowedAxises.allowY;\n                allowX = dragAllowedAxises.allowX;\n\n                if (this.core.outer.hasClass('lg-zoomed')) {\n                    if (\n                        this.$LG(e.target).hasClass('lg-object') &&\n                        (allowX || allowY)\n                    ) {\n                        e.preventDefault();\n                        startCoords = this.getDragCords(e);\n\n                        possibleSwipeCords = this.getPossibleSwipeDragCords();\n\n                        isDragging = true;\n\n                        this.core.outer\n                            .removeClass('lg-grab')\n                            .addClass(\n                                'lg-grabbing lg-zoom-drag-transition lg-zoom-dragging',\n                            );\n                        // reset opacity and transition duration\n                    }\n                }\n            }\n        });\n\n        this.$LG(window).on(\n            `mousemove.lg.zoom.global${this.core.lgId}`,\n            (e) => {\n                if (isDragging) {\n                    isMoved = true;\n                    endCoords = this.getDragCords(e);\n\n                    const distance = this.getZoomSwipeCords(\n                        startCoords,\n                        endCoords,\n                        allowX,\n                        allowY,\n                        possibleSwipeCords,\n                    );\n\n                    this.setZoomSwipeStyles(_LGel, distance);\n                }\n            },\n        );\n\n        this.$LG(window).on(`mouseup.lg.zoom.global${this.core.lgId}`, (e) => {\n            if (isDragging) {\n                endTime = new Date();\n                isDragging = false;\n                this.core.outer.removeClass('lg-zoom-dragging');\n\n                // Fix for chrome mouse move on click\n                if (\n                    isMoved &&\n                    (startCoords.x !== endCoords.x ||\n                        startCoords.y !== endCoords.y)\n                ) {\n                    endCoords = this.getDragCords(e);\n\n                    const touchDuration =\n                        endTime.valueOf() - startTime.valueOf();\n                    this.touchendZoom(\n                        startCoords,\n                        endCoords,\n                        allowX,\n                        allowY,\n                        touchDuration,\n                    );\n                }\n\n                isMoved = false;\n            }\n\n            this.core.outer.removeClass('lg-grabbing').addClass('lg-grab');\n        });\n    }\n\n    closeGallery(): void {\n        this.resetZoom();\n        this.zoomInProgress = false;\n    }\n\n    destroy(): void {\n        // Unbind all events added by lightGallery zoom plugin\n        this.$LG(window).off(`.lg.zoom.global${this.core.lgId}`);\n        this.core.LGel.off('.lg.zoom');\n        this.core.LGel.off('.zoom');\n        clearTimeout(this.zoomableTimeout);\n        this.zoomableTimeout = false;\n    }\n}\n","/*!\n * lightgallery | 2.7.2 | September 20th 2023\n * http://www.lightgalleryjs.com/\n * Copyright (c) 2020 Sachin Neravath;\n * @license GPLv3\n */\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\n/**\r\n * List of lightGallery events\r\n * All events should be documented here\r\n * Below interfaces are used to build the website documentations\r\n * */\r\nvar lGEvents = {\r\n    afterAppendSlide: 'lgAfterAppendSlide',\r\n    init: 'lgInit',\r\n    hasVideo: 'lgHasVideo',\r\n    containerResize: 'lgContainerResize',\r\n    updateSlides: 'lgUpdateSlides',\r\n    afterAppendSubHtml: 'lgAfterAppendSubHtml',\r\n    beforeOpen: 'lgBeforeOpen',\r\n    afterOpen: 'lgAfterOpen',\r\n    slideItemLoad: 'lgSlideItemLoad',\r\n    beforeSlide: 'lgBeforeSlide',\r\n    afterSlide: 'lgAfterSlide',\r\n    posterClick: 'lgPosterClick',\r\n    dragStart: 'lgDragStart',\r\n    dragMove: 'lgDragMove',\r\n    dragEnd: 'lgDragEnd',\r\n    beforeNextSlide: 'lgBeforeNextSlide',\r\n    beforePrevSlide: 'lgBeforePrevSlide',\r\n    beforeClose: 'lgBeforeClose',\r\n    afterClose: 'lgAfterClose',\r\n    rotateLeft: 'lgRotateLeft',\r\n    rotateRight: 'lgRotateRight',\r\n    flipHorizontal: 'lgFlipHorizontal',\r\n    flipVertical: 'lgFlipVertical',\r\n    autoplay: 'lgAutoplay',\r\n    autoplayStart: 'lgAutoplayStart',\r\n    autoplayStop: 'lgAutoplayStop',\r\n};\n\nvar lightGalleryCoreSettings = {\r\n    mode: 'lg-slide',\r\n    easing: 'ease',\r\n    speed: 400,\r\n    licenseKey: '0000-0000-000-0000',\r\n    height: '100%',\r\n    width: '100%',\r\n    addClass: '',\r\n    startClass: 'lg-start-zoom',\r\n    backdropDuration: 300,\r\n    container: '',\r\n    startAnimationDuration: 400,\r\n    zoomFromOrigin: true,\r\n    hideBarsDelay: 0,\r\n    showBarsAfter: 10000,\r\n    slideDelay: 0,\r\n    supportLegacyBrowser: true,\r\n    allowMediaOverlap: false,\r\n    videoMaxSize: '1280-720',\r\n    loadYouTubePoster: true,\r\n    defaultCaptionHeight: 0,\r\n    ariaLabelledby: '',\r\n    ariaDescribedby: '',\r\n    resetScrollPosition: true,\r\n    hideScrollbar: false,\r\n    closable: true,\r\n    swipeToClose: true,\r\n    closeOnTap: true,\r\n    showCloseIcon: true,\r\n    showMaximizeIcon: false,\r\n    loop: true,\r\n    escKey: true,\r\n    keyPress: true,\r\n    trapFocus: true,\r\n    controls: true,\r\n    slideEndAnimation: true,\r\n    hideControlOnEnd: false,\r\n    mousewheel: false,\r\n    getCaptionFromTitleOrAlt: true,\r\n    appendSubHtmlTo: '.lg-sub-html',\r\n    subHtmlSelectorRelative: false,\r\n    preload: 2,\r\n    numberOfSlideItemsInDom: 10,\r\n    selector: '',\r\n    selectWithin: '',\r\n    nextHtml: '',\r\n    prevHtml: '',\r\n    index: 0,\r\n    iframeWidth: '100%',\r\n    iframeHeight: '100%',\r\n    iframeMaxWidth: '100%',\r\n    iframeMaxHeight: '100%',\r\n    download: true,\r\n    counter: true,\r\n    appendCounterTo: '.lg-toolbar',\r\n    swipeThreshold: 50,\r\n    enableSwipe: true,\r\n    enableDrag: true,\r\n    dynamic: false,\r\n    dynamicEl: [],\r\n    extraProps: [],\r\n    exThumbImage: '',\r\n    isMobile: undefined,\r\n    mobileSettings: {\r\n        controls: false,\r\n        showCloseIcon: false,\r\n        download: false,\r\n    },\r\n    plugins: [],\r\n    strings: {\r\n        closeGallery: 'Close gallery',\r\n        toggleMaximize: 'Toggle maximize',\r\n        previousSlide: 'Previous slide',\r\n        nextSlide: 'Next slide',\r\n        download: 'Download',\r\n        playVideo: 'Play video',\r\n        mediaLoadingFailed: 'Oops... Failed to load content...',\r\n    },\r\n};\n\nfunction initLgPolyfills() {\r\n    (function () {\r\n        if (typeof window.CustomEvent === 'function')\r\n            return false;\r\n        function CustomEvent(event, params) {\r\n            params = params || {\r\n                bubbles: false,\r\n                cancelable: false,\r\n                detail: null,\r\n            };\r\n            var evt = document.createEvent('CustomEvent');\r\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n            return evt;\r\n        }\r\n        window.CustomEvent = CustomEvent;\r\n    })();\r\n    (function () {\r\n        if (!Element.prototype.matches) {\r\n            Element.prototype.matches =\r\n                Element.prototype.msMatchesSelector ||\r\n                    Element.prototype.webkitMatchesSelector;\r\n        }\r\n    })();\r\n}\r\nvar lgQuery = /** @class */ (function () {\r\n    function lgQuery(selector) {\r\n        this.cssVenderPrefixes = [\r\n            'TransitionDuration',\r\n            'TransitionTimingFunction',\r\n            'Transform',\r\n            'Transition',\r\n        ];\r\n        this.selector = this._getSelector(selector);\r\n        this.firstElement = this._getFirstEl();\r\n        return this;\r\n    }\r\n    lgQuery.generateUUID = function () {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\r\n            return v.toString(16);\r\n        });\r\n    };\r\n    lgQuery.prototype._getSelector = function (selector, context) {\r\n        if (context === void 0) { context = document; }\r\n        if (typeof selector !== 'string') {\r\n            return selector;\r\n        }\r\n        context = context || document;\r\n        var fl = selector.substring(0, 1);\r\n        if (fl === '#') {\r\n            return context.querySelector(selector);\r\n        }\r\n        else {\r\n            return context.querySelectorAll(selector);\r\n        }\r\n    };\r\n    lgQuery.prototype._each = function (func) {\r\n        if (!this.selector) {\r\n            return this;\r\n        }\r\n        if (this.selector.length !== undefined) {\r\n            [].forEach.call(this.selector, func);\r\n        }\r\n        else {\r\n            func(this.selector, 0);\r\n        }\r\n        return this;\r\n    };\r\n    lgQuery.prototype._setCssVendorPrefix = function (el, cssProperty, value) {\r\n        // prettier-ignore\r\n        var property = cssProperty.replace(/-([a-z])/gi, function (s, group1) {\r\n            return group1.toUpperCase();\r\n        });\r\n        if (this.cssVenderPrefixes.indexOf(property) !== -1) {\r\n            el.style[property.charAt(0).toLowerCase() + property.slice(1)] = value;\r\n            el.style['webkit' + property] = value;\r\n            el.style['moz' + property] = value;\r\n            el.style['ms' + property] = value;\r\n            el.style['o' + property] = value;\r\n        }\r\n        else {\r\n            el.style[property] = value;\r\n        }\r\n    };\r\n    lgQuery.prototype._getFirstEl = function () {\r\n        if (this.selector && this.selector.length !== undefined) {\r\n            return this.selector[0];\r\n        }\r\n        else {\r\n            return this.selector;\r\n        }\r\n    };\r\n    lgQuery.prototype.isEventMatched = function (event, eventName) {\r\n        var eventNamespace = eventName.split('.');\r\n        return event\r\n            .split('.')\r\n            .filter(function (e) { return e; })\r\n            .every(function (e) {\r\n            return eventNamespace.indexOf(e) !== -1;\r\n        });\r\n    };\r\n    lgQuery.prototype.attr = function (attr, value) {\r\n        if (value === undefined) {\r\n            if (!this.firstElement) {\r\n                return '';\r\n            }\r\n            return this.firstElement.getAttribute(attr);\r\n        }\r\n        this._each(function (el) {\r\n            el.setAttribute(attr, value);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.find = function (selector) {\r\n        return $LG(this._getSelector(selector, this.selector));\r\n    };\r\n    lgQuery.prototype.first = function () {\r\n        if (this.selector && this.selector.length !== undefined) {\r\n            return $LG(this.selector[0]);\r\n        }\r\n        else {\r\n            return $LG(this.selector);\r\n        }\r\n    };\r\n    lgQuery.prototype.eq = function (index) {\r\n        return $LG(this.selector[index]);\r\n    };\r\n    lgQuery.prototype.parent = function () {\r\n        return $LG(this.selector.parentElement);\r\n    };\r\n    lgQuery.prototype.get = function () {\r\n        return this._getFirstEl();\r\n    };\r\n    lgQuery.prototype.removeAttr = function (attributes) {\r\n        var attrs = attributes.split(' ');\r\n        this._each(function (el) {\r\n            attrs.forEach(function (attr) { return el.removeAttribute(attr); });\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.wrap = function (className) {\r\n        if (!this.firstElement) {\r\n            return this;\r\n        }\r\n        var wrapper = document.createElement('div');\r\n        wrapper.className = className;\r\n        this.firstElement.parentNode.insertBefore(wrapper, this.firstElement);\r\n        this.firstElement.parentNode.removeChild(this.firstElement);\r\n        wrapper.appendChild(this.firstElement);\r\n        return this;\r\n    };\r\n    lgQuery.prototype.addClass = function (classNames) {\r\n        if (classNames === void 0) { classNames = ''; }\r\n        this._each(function (el) {\r\n            // IE doesn't support multiple arguments\r\n            classNames.split(' ').forEach(function (className) {\r\n                if (className) {\r\n                    el.classList.add(className);\r\n                }\r\n            });\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.removeClass = function (classNames) {\r\n        this._each(function (el) {\r\n            // IE doesn't support multiple arguments\r\n            classNames.split(' ').forEach(function (className) {\r\n                if (className) {\r\n                    el.classList.remove(className);\r\n                }\r\n            });\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.hasClass = function (className) {\r\n        if (!this.firstElement) {\r\n            return false;\r\n        }\r\n        return this.firstElement.classList.contains(className);\r\n    };\r\n    lgQuery.prototype.hasAttribute = function (attribute) {\r\n        if (!this.firstElement) {\r\n            return false;\r\n        }\r\n        return this.firstElement.hasAttribute(attribute);\r\n    };\r\n    lgQuery.prototype.toggleClass = function (className) {\r\n        if (!this.firstElement) {\r\n            return this;\r\n        }\r\n        if (this.hasClass(className)) {\r\n            this.removeClass(className);\r\n        }\r\n        else {\r\n            this.addClass(className);\r\n        }\r\n        return this;\r\n    };\r\n    lgQuery.prototype.css = function (property, value) {\r\n        var _this = this;\r\n        this._each(function (el) {\r\n            _this._setCssVendorPrefix(el, property, value);\r\n        });\r\n        return this;\r\n    };\r\n    // Need to pass separate namespaces for separate elements\r\n    lgQuery.prototype.on = function (events, listener) {\r\n        var _this = this;\r\n        if (!this.selector) {\r\n            return this;\r\n        }\r\n        events.split(' ').forEach(function (event) {\r\n            if (!Array.isArray(lgQuery.eventListeners[event])) {\r\n                lgQuery.eventListeners[event] = [];\r\n            }\r\n            lgQuery.eventListeners[event].push(listener);\r\n            _this.selector.addEventListener(event.split('.')[0], listener);\r\n        });\r\n        return this;\r\n    };\r\n    // @todo - test this\r\n    lgQuery.prototype.once = function (event, listener) {\r\n        var _this = this;\r\n        this.on(event, function () {\r\n            _this.off(event);\r\n            listener(event);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.off = function (event) {\r\n        var _this = this;\r\n        if (!this.selector) {\r\n            return this;\r\n        }\r\n        Object.keys(lgQuery.eventListeners).forEach(function (eventName) {\r\n            if (_this.isEventMatched(event, eventName)) {\r\n                lgQuery.eventListeners[eventName].forEach(function (listener) {\r\n                    _this.selector.removeEventListener(eventName.split('.')[0], listener);\r\n                });\r\n                lgQuery.eventListeners[eventName] = [];\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.trigger = function (event, detail) {\r\n        if (!this.firstElement) {\r\n            return this;\r\n        }\r\n        var customEvent = new CustomEvent(event.split('.')[0], {\r\n            detail: detail || null,\r\n        });\r\n        this.firstElement.dispatchEvent(customEvent);\r\n        return this;\r\n    };\r\n    // Does not support IE\r\n    lgQuery.prototype.load = function (url) {\r\n        var _this = this;\r\n        fetch(url)\r\n            .then(function (res) { return res.text(); })\r\n            .then(function (html) {\r\n            _this.selector.innerHTML = html;\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.html = function (html) {\r\n        if (html === undefined) {\r\n            if (!this.firstElement) {\r\n                return '';\r\n            }\r\n            return this.firstElement.innerHTML;\r\n        }\r\n        this._each(function (el) {\r\n            el.innerHTML = html;\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.append = function (html) {\r\n        this._each(function (el) {\r\n            if (typeof html === 'string') {\r\n                el.insertAdjacentHTML('beforeend', html);\r\n            }\r\n            else {\r\n                el.appendChild(html);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.prepend = function (html) {\r\n        this._each(function (el) {\r\n            el.insertAdjacentHTML('afterbegin', html);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.remove = function () {\r\n        this._each(function (el) {\r\n            el.parentNode.removeChild(el);\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.empty = function () {\r\n        this._each(function (el) {\r\n            el.innerHTML = '';\r\n        });\r\n        return this;\r\n    };\r\n    lgQuery.prototype.scrollTop = function (scrollTop) {\r\n        if (scrollTop !== undefined) {\r\n            document.body.scrollTop = scrollTop;\r\n            document.documentElement.scrollTop = scrollTop;\r\n            return this;\r\n        }\r\n        else {\r\n            return (window.pageYOffset ||\r\n                document.documentElement.scrollTop ||\r\n                document.body.scrollTop ||\r\n                0);\r\n        }\r\n    };\r\n    lgQuery.prototype.scrollLeft = function (scrollLeft) {\r\n        if (scrollLeft !== undefined) {\r\n            document.body.scrollLeft = scrollLeft;\r\n            document.documentElement.scrollLeft = scrollLeft;\r\n            return this;\r\n        }\r\n        else {\r\n            return (window.pageXOffset ||\r\n                document.documentElement.scrollLeft ||\r\n                document.body.scrollLeft ||\r\n                0);\r\n        }\r\n    };\r\n    lgQuery.prototype.offset = function () {\r\n        if (!this.firstElement) {\r\n            return {\r\n                left: 0,\r\n                top: 0,\r\n            };\r\n        }\r\n        var rect = this.firstElement.getBoundingClientRect();\r\n        var bodyMarginLeft = $LG('body').style().marginLeft;\r\n        // Minus body margin - https://stackoverflow.com/questions/30711548/is-getboundingclientrect-left-returning-a-wrong-value\r\n        return {\r\n            left: rect.left - parseFloat(bodyMarginLeft) + this.scrollLeft(),\r\n            top: rect.top + this.scrollTop(),\r\n        };\r\n    };\r\n    lgQuery.prototype.style = function () {\r\n        if (!this.firstElement) {\r\n            return {};\r\n        }\r\n        return (this.firstElement.currentStyle ||\r\n            window.getComputedStyle(this.firstElement));\r\n    };\r\n    // Width without padding and border even if box-sizing is used.\r\n    lgQuery.prototype.width = function () {\r\n        var style = this.style();\r\n        return (this.firstElement.clientWidth -\r\n            parseFloat(style.paddingLeft) -\r\n            parseFloat(style.paddingRight));\r\n    };\r\n    // Height without padding and border even if box-sizing is used.\r\n    lgQuery.prototype.height = function () {\r\n        var style = this.style();\r\n        return (this.firstElement.clientHeight -\r\n            parseFloat(style.paddingTop) -\r\n            parseFloat(style.paddingBottom));\r\n    };\r\n    lgQuery.eventListeners = {};\r\n    return lgQuery;\r\n}());\r\nfunction $LG(selector) {\r\n    initLgPolyfills();\r\n    return new lgQuery(selector);\r\n}\n\nvar defaultDynamicOptions = [\r\n    'src',\r\n    'sources',\r\n    'subHtml',\r\n    'subHtmlUrl',\r\n    'html',\r\n    'video',\r\n    'poster',\r\n    'slideName',\r\n    'responsive',\r\n    'srcset',\r\n    'sizes',\r\n    'iframe',\r\n    'downloadUrl',\r\n    'download',\r\n    'width',\r\n    'facebookShareUrl',\r\n    'tweetText',\r\n    'iframeTitle',\r\n    'twitterShareUrl',\r\n    'pinterestShareUrl',\r\n    'pinterestText',\r\n    'fbHtml',\r\n    'disqusIdentifier',\r\n    'disqusUrl',\r\n];\r\n// Convert html data-attribute to camalcase\r\nfunction convertToData(attr) {\r\n    // FInd a way for lgsize\r\n    if (attr === 'href') {\r\n        return 'src';\r\n    }\r\n    attr = attr.replace('data-', '');\r\n    attr = attr.charAt(0).toLowerCase() + attr.slice(1);\r\n    attr = attr.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); });\r\n    return attr;\r\n}\r\nvar utils = {\r\n    /**\r\n     * get possible width and height from the lgSize attribute. Used for ZoomFromOrigin option\r\n     */\r\n    getSize: function (el, container, spacing, defaultLgSize) {\r\n        if (spacing === void 0) { spacing = 0; }\r\n        var LGel = $LG(el);\r\n        var lgSize = LGel.attr('data-lg-size') || defaultLgSize;\r\n        if (!lgSize) {\r\n            return;\r\n        }\r\n        var isResponsiveSizes = lgSize.split(',');\r\n        // if at-least two viewport sizes are available\r\n        if (isResponsiveSizes[1]) {\r\n            var wWidth = window.innerWidth;\r\n            for (var i = 0; i < isResponsiveSizes.length; i++) {\r\n                var size_1 = isResponsiveSizes[i];\r\n                var responsiveWidth = parseInt(size_1.split('-')[2], 10);\r\n                if (responsiveWidth > wWidth) {\r\n                    lgSize = size_1;\r\n                    break;\r\n                }\r\n                // take last item as last option\r\n                if (i === isResponsiveSizes.length - 1) {\r\n                    lgSize = size_1;\r\n                }\r\n            }\r\n        }\r\n        var size = lgSize.split('-');\r\n        var width = parseInt(size[0], 10);\r\n        var height = parseInt(size[1], 10);\r\n        var cWidth = container.width();\r\n        var cHeight = container.height() - spacing;\r\n        var maxWidth = Math.min(cWidth, width);\r\n        var maxHeight = Math.min(cHeight, height);\r\n        var ratio = Math.min(maxWidth / width, maxHeight / height);\r\n        return { width: width * ratio, height: height * ratio };\r\n    },\r\n    /**\r\n     * @desc Get transform value based on the imageSize. Used for ZoomFromOrigin option\r\n     * @param {jQuery Element}\r\n     * @returns {String} Transform CSS string\r\n     */\r\n    getTransform: function (el, container, top, bottom, imageSize) {\r\n        if (!imageSize) {\r\n            return;\r\n        }\r\n        var LGel = $LG(el).find('img').first();\r\n        if (!LGel.get()) {\r\n            return;\r\n        }\r\n        var containerRect = container.get().getBoundingClientRect();\r\n        var wWidth = containerRect.width;\r\n        // using innerWidth to include mobile safari bottom bar\r\n        var wHeight = container.height() - (top + bottom);\r\n        var elWidth = LGel.width();\r\n        var elHeight = LGel.height();\r\n        var elStyle = LGel.style();\r\n        var x = (wWidth - elWidth) / 2 -\r\n            LGel.offset().left +\r\n            (parseFloat(elStyle.paddingLeft) || 0) +\r\n            (parseFloat(elStyle.borderLeft) || 0) +\r\n            $LG(window).scrollLeft() +\r\n            containerRect.left;\r\n        var y = (wHeight - elHeight) / 2 -\r\n            LGel.offset().top +\r\n            (parseFloat(elStyle.paddingTop) || 0) +\r\n            (parseFloat(elStyle.borderTop) || 0) +\r\n            $LG(window).scrollTop() +\r\n            top;\r\n        var scX = elWidth / imageSize.width;\r\n        var scY = elHeight / imageSize.height;\r\n        var transform = 'translate3d(' +\r\n            (x *= -1) +\r\n            'px, ' +\r\n            (y *= -1) +\r\n            'px, 0) scale3d(' +\r\n            scX +\r\n            ', ' +\r\n            scY +\r\n            ', 1)';\r\n        return transform;\r\n    },\r\n    getIframeMarkup: function (iframeWidth, iframeHeight, iframeMaxWidth, iframeMaxHeight, src, iframeTitle) {\r\n        var title = iframeTitle ? 'title=\"' + iframeTitle + '\"' : '';\r\n        return \"<div class=\\\"lg-video-cont lg-has-iframe\\\" style=\\\"width:\" + iframeWidth + \"; max-width:\" + iframeMaxWidth + \"; height: \" + iframeHeight + \"; max-height:\" + iframeMaxHeight + \"\\\">\\n                    <iframe class=\\\"lg-object\\\" frameborder=\\\"0\\\" \" + title + \" src=\\\"\" + src + \"\\\"  allowfullscreen=\\\"true\\\"></iframe>\\n                </div>\";\r\n    },\r\n    getImgMarkup: function (index, src, altAttr, srcset, sizes, sources) {\r\n        var srcsetAttr = srcset ? \"srcset=\\\"\" + srcset + \"\\\"\" : '';\r\n        var sizesAttr = sizes ? \"sizes=\\\"\" + sizes + \"\\\"\" : '';\r\n        var imgMarkup = \"<img \" + altAttr + \" \" + srcsetAttr + \"  \" + sizesAttr + \" class=\\\"lg-object lg-image\\\" data-index=\\\"\" + index + \"\\\" src=\\\"\" + src + \"\\\" />\";\r\n        var sourceTag = '';\r\n        if (sources) {\r\n            var sourceObj = typeof sources === 'string' ? JSON.parse(sources) : sources;\r\n            sourceTag = sourceObj.map(function (source) {\r\n                var attrs = '';\r\n                Object.keys(source).forEach(function (key) {\r\n                    // Do not remove the first space as it is required to separate the attributes\r\n                    attrs += \" \" + key + \"=\\\"\" + source[key] + \"\\\"\";\r\n                });\r\n                return \"<source \" + attrs + \"></source>\";\r\n            });\r\n        }\r\n        return \"\" + sourceTag + imgMarkup;\r\n    },\r\n    // Get src from responsive src\r\n    getResponsiveSrc: function (srcItms) {\r\n        var rsWidth = [];\r\n        var rsSrc = [];\r\n        var src = '';\r\n        for (var i = 0; i < srcItms.length; i++) {\r\n            var _src = srcItms[i].split(' ');\r\n            // Manage empty space\r\n            if (_src[0] === '') {\r\n                _src.splice(0, 1);\r\n            }\r\n            rsSrc.push(_src[0]);\r\n            rsWidth.push(_src[1]);\r\n        }\r\n        var wWidth = window.innerWidth;\r\n        for (var j = 0; j < rsWidth.length; j++) {\r\n            if (parseInt(rsWidth[j], 10) > wWidth) {\r\n                src = rsSrc[j];\r\n                break;\r\n            }\r\n        }\r\n        return src;\r\n    },\r\n    isImageLoaded: function (img) {\r\n        if (!img)\r\n            return false;\r\n        // During the onload event, IE correctly identifies any images that\r\n        // werent downloaded as not complete. Others should too. Gecko-based\r\n        // browsers act like NS4 in that they report this incorrectly.\r\n        if (!img.complete) {\r\n            return false;\r\n        }\r\n        // However, they do have two very useful properties: naturalWidth and\r\n        // naturalHeight. These give the true size of the image. If it failed\r\n        // to load, either of these should be zero.\r\n        if (img.naturalWidth === 0) {\r\n            return false;\r\n        }\r\n        // No other way of checking: assume its ok.\r\n        return true;\r\n    },\r\n    getVideoPosterMarkup: function (_poster, dummyImg, videoContStyle, playVideoString, _isVideo) {\r\n        var videoClass = '';\r\n        if (_isVideo && _isVideo.youtube) {\r\n            videoClass = 'lg-has-youtube';\r\n        }\r\n        else if (_isVideo && _isVideo.vimeo) {\r\n            videoClass = 'lg-has-vimeo';\r\n        }\r\n        else {\r\n            videoClass = 'lg-has-html5';\r\n        }\r\n        return \"<div class=\\\"lg-video-cont \" + videoClass + \"\\\" style=\\\"\" + videoContStyle + \"\\\">\\n                <div class=\\\"lg-video-play-button\\\">\\n                <svg\\n                    viewBox=\\\"0 0 20 20\\\"\\n                    preserveAspectRatio=\\\"xMidYMid\\\"\\n                    focusable=\\\"false\\\"\\n                    aria-labelledby=\\\"\" + playVideoString + \"\\\"\\n                    role=\\\"img\\\"\\n                    class=\\\"lg-video-play-icon\\\"\\n                >\\n                    <title>\" + playVideoString + \"</title>\\n                    <polygon class=\\\"lg-video-play-icon-inner\\\" points=\\\"1,0 20,10 1,20\\\"></polygon>\\n                </svg>\\n                <svg class=\\\"lg-video-play-icon-bg\\\" viewBox=\\\"0 0 50 50\\\" focusable=\\\"false\\\">\\n                    <circle cx=\\\"50%\\\" cy=\\\"50%\\\" r=\\\"20\\\"></circle></svg>\\n                <svg class=\\\"lg-video-play-icon-circle\\\" viewBox=\\\"0 0 50 50\\\" focusable=\\\"false\\\">\\n                    <circle cx=\\\"50%\\\" cy=\\\"50%\\\" r=\\\"20\\\"></circle>\\n                </svg>\\n            </div>\\n            \" + (dummyImg || '') + \"\\n            <img class=\\\"lg-object lg-video-poster\\\" src=\\\"\" + _poster + \"\\\" />\\n        </div>\";\r\n    },\r\n    getFocusableElements: function (container) {\r\n        var elements = container.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type=\"text\"]:not([disabled]), input[type=\"radio\"]:not([disabled]), input[type=\"checkbox\"]:not([disabled]), select:not([disabled])');\r\n        var visibleElements = [].filter.call(elements, function (element) {\r\n            var style = window.getComputedStyle(element);\r\n            return style.display !== 'none' && style.visibility !== 'hidden';\r\n        });\r\n        return visibleElements;\r\n    },\r\n    /**\r\n     * @desc Create dynamic elements array from gallery items when dynamic option is false\r\n     * It helps to avoid frequent DOM interaction\r\n     * and avoid multiple checks for dynamic elments\r\n     *\r\n     * @returns {Array} dynamicEl\r\n     */\r\n    getDynamicOptions: function (items, extraProps, getCaptionFromTitleOrAlt, exThumbImage) {\r\n        var dynamicElements = [];\r\n        var availableDynamicOptions = __spreadArrays(defaultDynamicOptions, extraProps);\r\n        [].forEach.call(items, function (item) {\r\n            var dynamicEl = {};\r\n            for (var i = 0; i < item.attributes.length; i++) {\r\n                var attr = item.attributes[i];\r\n                if (attr.specified) {\r\n                    var dynamicAttr = convertToData(attr.name);\r\n                    var label = '';\r\n                    if (availableDynamicOptions.indexOf(dynamicAttr) > -1) {\r\n                        label = dynamicAttr;\r\n                    }\r\n                    if (label) {\r\n                        dynamicEl[label] = attr.value;\r\n                    }\r\n                }\r\n            }\r\n            var currentItem = $LG(item);\r\n            var alt = currentItem.find('img').first().attr('alt');\r\n            var title = currentItem.attr('title');\r\n            var thumb = exThumbImage\r\n                ? currentItem.attr(exThumbImage)\r\n                : currentItem.find('img').first().attr('src');\r\n            dynamicEl.thumb = thumb;\r\n            if (getCaptionFromTitleOrAlt && !dynamicEl.subHtml) {\r\n                dynamicEl.subHtml = title || alt || '';\r\n            }\r\n            dynamicEl.alt = alt || title || '';\r\n            dynamicElements.push(dynamicEl);\r\n        });\r\n        return dynamicElements;\r\n    },\r\n    isMobile: function () {\r\n        return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n    },\r\n    /**\r\n     * @desc Check the given src is video\r\n     * @param {String} src\r\n     * @return {Object} video type\r\n     * Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\r\n     *\r\n     * @todo - this information can be moved to dynamicEl to avoid frequent calls\r\n     */\r\n    isVideo: function (src, isHTML5VIdeo, index) {\r\n        if (!src) {\r\n            if (isHTML5VIdeo) {\r\n                return {\r\n                    html5: true,\r\n                };\r\n            }\r\n            else {\r\n                console.error('lightGallery :- data-src is not provided on slide item ' +\r\n                    (index + 1) +\r\n                    '. Please make sure the selector property is properly configured. More info - https://www.lightgalleryjs.com/demos/html-markup/');\r\n                return;\r\n            }\r\n        }\r\n        var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)([\\&|?][\\S]*)*/i);\r\n        var vimeo = src.match(/\\/\\/(?:www\\.)?(?:player\\.)?vimeo.com\\/(?:video\\/)?([0-9a-z\\-_]+)(.*)?/i);\r\n        var wistia = src.match(/https?:\\/\\/(.+)?(wistia\\.com|wi\\.st)\\/(medias|embed)\\/([0-9a-z\\-_]+)(.*)/);\r\n        if (youtube) {\r\n            return {\r\n                youtube: youtube,\r\n            };\r\n        }\r\n        else if (vimeo) {\r\n            return {\r\n                vimeo: vimeo,\r\n            };\r\n        }\r\n        else if (wistia) {\r\n            return {\r\n                wistia: wistia,\r\n            };\r\n        }\r\n    },\r\n};\n\n// @ref - https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio\r\n// @ref - https://2ality.com/2017/04/setting-up-multi-platform-packages.html\r\n// Unique id for each gallery\r\nvar lgId = 0;\r\nvar LightGallery = /** @class */ (function () {\r\n    function LightGallery(element, options) {\r\n        this.lgOpened = false;\r\n        this.index = 0;\r\n        // lightGallery modules\r\n        this.plugins = [];\r\n        // false when lightGallery load first slide content;\r\n        this.lGalleryOn = false;\r\n        // True when a slide animation is in progress\r\n        this.lgBusy = false;\r\n        this.currentItemsInDom = [];\r\n        // Scroll top value before lightGallery is opened\r\n        this.prevScrollTop = 0;\r\n        this.bodyPaddingRight = 0;\r\n        this.isDummyImageRemoved = false;\r\n        this.dragOrSwipeEnabled = false;\r\n        this.mediaContainerPosition = {\r\n            top: 0,\r\n            bottom: 0,\r\n        };\r\n        if (!element) {\r\n            return this;\r\n        }\r\n        lgId++;\r\n        this.lgId = lgId;\r\n        this.el = element;\r\n        this.LGel = $LG(element);\r\n        this.generateSettings(options);\r\n        this.buildModules();\r\n        // When using dynamic mode, ensure dynamicEl is an array\r\n        if (this.settings.dynamic &&\r\n            this.settings.dynamicEl !== undefined &&\r\n            !Array.isArray(this.settings.dynamicEl)) {\r\n            throw 'When using dynamic mode, you must also define dynamicEl as an Array.';\r\n        }\r\n        this.galleryItems = this.getItems();\r\n        this.normalizeSettings();\r\n        // Gallery items\r\n        this.init();\r\n        this.validateLicense();\r\n        return this;\r\n    }\r\n    LightGallery.prototype.generateSettings = function (options) {\r\n        // lightGallery settings\r\n        this.settings = __assign(__assign({}, lightGalleryCoreSettings), options);\r\n        if (this.settings.isMobile &&\r\n            typeof this.settings.isMobile === 'function'\r\n            ? this.settings.isMobile()\r\n            : utils.isMobile()) {\r\n            var mobileSettings = __assign(__assign({}, this.settings.mobileSettings), this.settings.mobileSettings);\r\n            this.settings = __assign(__assign({}, this.settings), mobileSettings);\r\n        }\r\n    };\r\n    LightGallery.prototype.normalizeSettings = function () {\r\n        if (this.settings.slideEndAnimation) {\r\n            this.settings.hideControlOnEnd = false;\r\n        }\r\n        if (!this.settings.closable) {\r\n            this.settings.swipeToClose = false;\r\n        }\r\n        // And reset it on close to get the correct value next time\r\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\r\n        // At the moment, Zoom from image doesn't support dynamic options\r\n        // @todo add zoomFromOrigin support for dynamic images\r\n        if (this.settings.dynamic) {\r\n            this.zoomFromOrigin = false;\r\n        }\r\n        if (!this.settings.container) {\r\n            this.settings.container = document.body;\r\n        }\r\n        // settings.preload should not be grater than $item.length\r\n        this.settings.preload = Math.min(this.settings.preload, this.galleryItems.length);\r\n    };\r\n    LightGallery.prototype.init = function () {\r\n        var _this = this;\r\n        this.addSlideVideoInfo(this.galleryItems);\r\n        this.buildStructure();\r\n        this.LGel.trigger(lGEvents.init, {\r\n            instance: this,\r\n        });\r\n        if (this.settings.keyPress) {\r\n            this.keyPress();\r\n        }\r\n        setTimeout(function () {\r\n            _this.enableDrag();\r\n            _this.enableSwipe();\r\n            _this.triggerPosterClick();\r\n        }, 50);\r\n        this.arrow();\r\n        if (this.settings.mousewheel) {\r\n            this.mousewheel();\r\n        }\r\n        if (!this.settings.dynamic) {\r\n            this.openGalleryOnItemClick();\r\n        }\r\n    };\r\n    LightGallery.prototype.openGalleryOnItemClick = function () {\r\n        var _this = this;\r\n        var _loop_1 = function (index) {\r\n            var element = this_1.items[index];\r\n            var $element = $LG(element);\r\n            // Using different namespace for click because click event should not unbind if selector is same object('this')\r\n            // @todo manage all event listners - should have namespace that represent element\r\n            var uuid = lgQuery.generateUUID();\r\n            $element\r\n                .attr('data-lg-id', uuid)\r\n                .on(\"click.lgcustom-item-\" + uuid, function (e) {\r\n                e.preventDefault();\r\n                var currentItemIndex = _this.settings.index || index;\r\n                _this.openGallery(currentItemIndex, element);\r\n            });\r\n        };\r\n        var this_1 = this;\r\n        // Using for loop instead of using bubbling as the items can be any html element.\r\n        for (var index = 0; index < this.items.length; index++) {\r\n            _loop_1(index);\r\n        }\r\n    };\r\n    /**\r\n     * Module constructor\r\n     * Modules are build incrementally.\r\n     * Gallery should be opened only once all the modules are initialized.\r\n     * use moduleBuildTimeout to make sure this\r\n     */\r\n    LightGallery.prototype.buildModules = function () {\r\n        var _this = this;\r\n        this.settings.plugins.forEach(function (plugin) {\r\n            _this.plugins.push(new plugin(_this, $LG));\r\n        });\r\n    };\r\n    LightGallery.prototype.validateLicense = function () {\r\n        if (!this.settings.licenseKey) {\r\n            console.error('Please provide a valid license key');\r\n        }\r\n        else if (this.settings.licenseKey === '0000-0000-000-0000') {\r\n            console.warn(\"lightGallery: \" + this.settings.licenseKey + \" license key is not valid for production use\");\r\n        }\r\n    };\r\n    LightGallery.prototype.getSlideItem = function (index) {\r\n        return $LG(this.getSlideItemId(index));\r\n    };\r\n    LightGallery.prototype.getSlideItemId = function (index) {\r\n        return \"#lg-item-\" + this.lgId + \"-\" + index;\r\n    };\r\n    LightGallery.prototype.getIdName = function (id) {\r\n        return id + \"-\" + this.lgId;\r\n    };\r\n    LightGallery.prototype.getElementById = function (id) {\r\n        return $LG(\"#\" + this.getIdName(id));\r\n    };\r\n    LightGallery.prototype.manageSingleSlideClassName = function () {\r\n        if (this.galleryItems.length < 2) {\r\n            this.outer.addClass('lg-single-item');\r\n        }\r\n        else {\r\n            this.outer.removeClass('lg-single-item');\r\n        }\r\n    };\r\n    LightGallery.prototype.buildStructure = function () {\r\n        var _this = this;\r\n        var container = this.$container && this.$container.get();\r\n        if (container) {\r\n            return;\r\n        }\r\n        var controls = '';\r\n        var subHtmlCont = '';\r\n        // Create controls\r\n        if (this.settings.controls) {\r\n            controls = \"<button type=\\\"button\\\" id=\\\"\" + this.getIdName('lg-prev') + \"\\\" aria-label=\\\"\" + this.settings.strings['previousSlide'] + \"\\\" class=\\\"lg-prev lg-icon\\\"> \" + this.settings.prevHtml + \" </button>\\n                <button type=\\\"button\\\" id=\\\"\" + this.getIdName('lg-next') + \"\\\" aria-label=\\\"\" + this.settings.strings['nextSlide'] + \"\\\" class=\\\"lg-next lg-icon\\\"> \" + this.settings.nextHtml + \" </button>\";\r\n        }\r\n        if (this.settings.appendSubHtmlTo !== '.lg-item') {\r\n            subHtmlCont =\r\n                '<div class=\"lg-sub-html\" role=\"status\" aria-live=\"polite\"></div>';\r\n        }\r\n        var addClasses = '';\r\n        if (this.settings.allowMediaOverlap) {\r\n            // Do not remove space before last single quote\r\n            addClasses += 'lg-media-overlap ';\r\n        }\r\n        var ariaLabelledby = this.settings.ariaLabelledby\r\n            ? 'aria-labelledby=\"' + this.settings.ariaLabelledby + '\"'\r\n            : '';\r\n        var ariaDescribedby = this.settings.ariaDescribedby\r\n            ? 'aria-describedby=\"' + this.settings.ariaDescribedby + '\"'\r\n            : '';\r\n        var containerClassName = \"lg-container \" + this.settings.addClass + \" \" + (document.body !== this.settings.container ? 'lg-inline' : '');\r\n        var closeIcon = this.settings.closable && this.settings.showCloseIcon\r\n            ? \"<button type=\\\"button\\\" aria-label=\\\"\" + this.settings.strings['closeGallery'] + \"\\\" id=\\\"\" + this.getIdName('lg-close') + \"\\\" class=\\\"lg-close lg-icon\\\"></button>\"\r\n            : '';\r\n        var maximizeIcon = this.settings.showMaximizeIcon\r\n            ? \"<button type=\\\"button\\\" aria-label=\\\"\" + this.settings.strings['toggleMaximize'] + \"\\\" id=\\\"\" + this.getIdName('lg-maximize') + \"\\\" class=\\\"lg-maximize lg-icon\\\"></button>\"\r\n            : '';\r\n        var template = \"\\n        <div class=\\\"\" + containerClassName + \"\\\" id=\\\"\" + this.getIdName('lg-container') + \"\\\" tabindex=\\\"-1\\\" aria-modal=\\\"true\\\" \" + ariaLabelledby + \" \" + ariaDescribedby + \" role=\\\"dialog\\\"\\n        >\\n            <div id=\\\"\" + this.getIdName('lg-backdrop') + \"\\\" class=\\\"lg-backdrop\\\"></div>\\n\\n            <div id=\\\"\" + this.getIdName('lg-outer') + \"\\\" class=\\\"lg-outer lg-use-css3 lg-css3 lg-hide-items \" + addClasses + \" \\\">\\n\\n              <div id=\\\"\" + this.getIdName('lg-content') + \"\\\" class=\\\"lg-content\\\">\\n                <div id=\\\"\" + this.getIdName('lg-inner') + \"\\\" class=\\\"lg-inner\\\">\\n                </div>\\n                \" + controls + \"\\n              </div>\\n                <div id=\\\"\" + this.getIdName('lg-toolbar') + \"\\\" class=\\\"lg-toolbar lg-group\\\">\\n                    \" + maximizeIcon + \"\\n                    \" + closeIcon + \"\\n                    </div>\\n                    \" + (this.settings.appendSubHtmlTo === '.lg-outer'\r\n            ? subHtmlCont\r\n            : '') + \"\\n                <div id=\\\"\" + this.getIdName('lg-components') + \"\\\" class=\\\"lg-components\\\">\\n                    \" + (this.settings.appendSubHtmlTo === '.lg-sub-html'\r\n            ? subHtmlCont\r\n            : '') + \"\\n                </div>\\n            </div>\\n        </div>\\n        \";\r\n        $LG(this.settings.container).append(template);\r\n        if (document.body !== this.settings.container) {\r\n            $LG(this.settings.container).css('position', 'relative');\r\n        }\r\n        this.outer = this.getElementById('lg-outer');\r\n        this.$lgComponents = this.getElementById('lg-components');\r\n        this.$backdrop = this.getElementById('lg-backdrop');\r\n        this.$container = this.getElementById('lg-container');\r\n        this.$inner = this.getElementById('lg-inner');\r\n        this.$content = this.getElementById('lg-content');\r\n        this.$toolbar = this.getElementById('lg-toolbar');\r\n        this.$backdrop.css('transition-duration', this.settings.backdropDuration + 'ms');\r\n        var outerClassNames = this.settings.mode + \" \";\r\n        this.manageSingleSlideClassName();\r\n        if (this.settings.enableDrag) {\r\n            outerClassNames += 'lg-grab ';\r\n        }\r\n        this.outer.addClass(outerClassNames);\r\n        this.$inner.css('transition-timing-function', this.settings.easing);\r\n        this.$inner.css('transition-duration', this.settings.speed + 'ms');\r\n        if (this.settings.download) {\r\n            this.$toolbar.append(\"<a id=\\\"\" + this.getIdName('lg-download') + \"\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\" aria-label=\\\"\" + this.settings.strings['download'] + \"\\\" download class=\\\"lg-download lg-icon\\\"></a>\");\r\n        }\r\n        this.counter();\r\n        $LG(window).on(\"resize.lg.global\" + this.lgId + \" orientationchange.lg.global\" + this.lgId, function () {\r\n            _this.refreshOnResize();\r\n        });\r\n        this.hideBars();\r\n        this.manageCloseGallery();\r\n        this.toggleMaximize();\r\n        this.initModules();\r\n    };\r\n    LightGallery.prototype.refreshOnResize = function () {\r\n        if (this.lgOpened) {\r\n            var currentGalleryItem = this.galleryItems[this.index];\r\n            var __slideVideoInfo = currentGalleryItem.__slideVideoInfo;\r\n            this.mediaContainerPosition = this.getMediaContainerPosition();\r\n            var _a = this.mediaContainerPosition, top_1 = _a.top, bottom = _a.bottom;\r\n            this.currentImageSize = utils.getSize(this.items[this.index], this.outer, top_1 + bottom, __slideVideoInfo && this.settings.videoMaxSize);\r\n            if (__slideVideoInfo) {\r\n                this.resizeVideoSlide(this.index, this.currentImageSize);\r\n            }\r\n            if (this.zoomFromOrigin && !this.isDummyImageRemoved) {\r\n                var imgStyle = this.getDummyImgStyles(this.currentImageSize);\r\n                this.outer\r\n                    .find('.lg-current .lg-dummy-img')\r\n                    .first()\r\n                    .attr('style', imgStyle);\r\n            }\r\n            this.LGel.trigger(lGEvents.containerResize);\r\n        }\r\n    };\r\n    LightGallery.prototype.resizeVideoSlide = function (index, imageSize) {\r\n        var lgVideoStyle = this.getVideoContStyle(imageSize);\r\n        var currentSlide = this.getSlideItem(index);\r\n        currentSlide.find('.lg-video-cont').attr('style', lgVideoStyle);\r\n    };\r\n    /**\r\n     * Update slides dynamically.\r\n     * Add, edit or delete slides dynamically when lightGallery is opened.\r\n     * Modify the current gallery items and pass it via updateSlides method\r\n     * @note\r\n     * - Do not mutate existing lightGallery items directly.\r\n     * - Always pass new list of gallery items\r\n     * - You need to take care of thumbnails outside the gallery if any\r\n     * - user this method only if you want to update slides when the gallery is opened. Otherwise, use `refresh()` method.\r\n     * @param items Gallery items\r\n     * @param index After the update operation, which slide gallery should navigate to\r\n     * @category lGPublicMethods\r\n     * @example\r\n     * const plugin = lightGallery();\r\n     *\r\n     * // Adding slides dynamically\r\n     * let galleryItems = [\r\n     * // Access existing lightGallery items\r\n     * // galleryItems are automatically generated internally from the gallery HTML markup\r\n     * // or directly from galleryItems when dynamic gallery is used\r\n     *   ...plugin.galleryItems,\r\n     *     ...[\r\n     *       {\r\n     *         src: 'img/img-1.png',\r\n     *           thumb: 'img/thumb1.png',\r\n     *         },\r\n     *     ],\r\n     *   ];\r\n     *   plugin.updateSlides(\r\n     *     galleryItems,\r\n     *     plugin.index,\r\n     *   );\r\n     *\r\n     *\r\n     * // Remove slides dynamically\r\n     * galleryItems = JSON.parse(\r\n     *   JSON.stringify(updateSlideInstance.galleryItems),\r\n     * );\r\n     * galleryItems.shift();\r\n     * updateSlideInstance.updateSlides(galleryItems, 1);\r\n     * @see <a href=\"/demos/update-slides/\">Demo</a>\r\n     */\r\n    LightGallery.prototype.updateSlides = function (items, index) {\r\n        if (this.index > items.length - 1) {\r\n            this.index = items.length - 1;\r\n        }\r\n        if (items.length === 1) {\r\n            this.index = 0;\r\n        }\r\n        if (!items.length) {\r\n            this.closeGallery();\r\n            return;\r\n        }\r\n        var currentSrc = this.galleryItems[index].src;\r\n        this.galleryItems = items;\r\n        this.updateControls();\r\n        this.$inner.empty();\r\n        this.currentItemsInDom = [];\r\n        var _index = 0;\r\n        // Find the current index based on source value of the slide\r\n        this.galleryItems.some(function (galleryItem, itemIndex) {\r\n            if (galleryItem.src === currentSrc) {\r\n                _index = itemIndex;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        this.currentItemsInDom = this.organizeSlideItems(_index, -1);\r\n        this.loadContent(_index, true);\r\n        this.getSlideItem(_index).addClass('lg-current');\r\n        this.index = _index;\r\n        this.updateCurrentCounter(_index);\r\n        this.LGel.trigger(lGEvents.updateSlides);\r\n    };\r\n    // Get gallery items based on multiple conditions\r\n    LightGallery.prototype.getItems = function () {\r\n        // Gallery items\r\n        this.items = [];\r\n        if (!this.settings.dynamic) {\r\n            if (this.settings.selector === 'this') {\r\n                this.items.push(this.el);\r\n            }\r\n            else if (this.settings.selector) {\r\n                if (typeof this.settings.selector === 'string') {\r\n                    if (this.settings.selectWithin) {\r\n                        var selectWithin = $LG(this.settings.selectWithin);\r\n                        this.items = selectWithin\r\n                            .find(this.settings.selector)\r\n                            .get();\r\n                    }\r\n                    else {\r\n                        this.items = this.el.querySelectorAll(this.settings.selector);\r\n                    }\r\n                }\r\n                else {\r\n                    this.items = this.settings.selector;\r\n                }\r\n            }\r\n            else {\r\n                this.items = this.el.children;\r\n            }\r\n            return utils.getDynamicOptions(this.items, this.settings.extraProps, this.settings.getCaptionFromTitleOrAlt, this.settings.exThumbImage);\r\n        }\r\n        else {\r\n            return this.settings.dynamicEl || [];\r\n        }\r\n    };\r\n    LightGallery.prototype.shouldHideScrollbar = function () {\r\n        return (this.settings.hideScrollbar &&\r\n            document.body === this.settings.container);\r\n    };\r\n    LightGallery.prototype.hideScrollbar = function () {\r\n        if (!this.shouldHideScrollbar()) {\r\n            return;\r\n        }\r\n        this.bodyPaddingRight = parseFloat($LG('body').style().paddingRight);\r\n        var bodyRect = document.documentElement.getBoundingClientRect();\r\n        var scrollbarWidth = window.innerWidth - bodyRect.width;\r\n        $LG(document.body).css('padding-right', scrollbarWidth + this.bodyPaddingRight + 'px');\r\n        $LG(document.body).addClass('lg-overlay-open');\r\n    };\r\n    LightGallery.prototype.resetScrollBar = function () {\r\n        if (!this.shouldHideScrollbar()) {\r\n            return;\r\n        }\r\n        $LG(document.body).css('padding-right', this.bodyPaddingRight + 'px');\r\n        $LG(document.body).removeClass('lg-overlay-open');\r\n    };\r\n    /**\r\n     * Open lightGallery.\r\n     * Open gallery with specific slide by passing index of the slide as parameter.\r\n     * @category lGPublicMethods\r\n     * @param {Number} index  - index of the slide\r\n     * @param {HTMLElement} element - Which image lightGallery should zoom from\r\n     *\r\n     * @example\r\n     * const $dynamicGallery = document.getElementById('dynamic-gallery-demo');\r\n     * const dynamicGallery = lightGallery($dynamicGallery, {\r\n     *     dynamic: true,\r\n     *     dynamicEl: [\r\n     *         {\r\n     *              src: 'img/1.jpg',\r\n     *              thumb: 'img/thumb-1.jpg',\r\n     *              subHtml: '<h4>Image 1 title</h4><p>Image 1 descriptions.</p>',\r\n     *         },\r\n     *         ...\r\n     *     ],\r\n     * });\r\n     * $dynamicGallery.addEventListener('click', function () {\r\n     *     // Starts with third item.(Optional).\r\n     *     // This is useful if you want use dynamic mode with\r\n     *     // custom thumbnails (thumbnails outside gallery),\r\n     *     dynamicGallery.openGallery(2);\r\n     * });\r\n     *\r\n     */\r\n    LightGallery.prototype.openGallery = function (index, element) {\r\n        var _this = this;\r\n        if (index === void 0) { index = this.settings.index; }\r\n        // prevent accidental double execution\r\n        if (this.lgOpened)\r\n            return;\r\n        this.lgOpened = true;\r\n        this.outer.removeClass('lg-hide-items');\r\n        this.hideScrollbar();\r\n        // Add display block, but still has opacity 0\r\n        this.$container.addClass('lg-show');\r\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, index);\r\n        this.currentItemsInDom = itemsToBeInsertedToDom;\r\n        var items = '';\r\n        itemsToBeInsertedToDom.forEach(function (item) {\r\n            items = items + (\"<div id=\\\"\" + item + \"\\\" class=\\\"lg-item\\\"></div>\");\r\n        });\r\n        this.$inner.append(items);\r\n        this.addHtml(index);\r\n        var transform = '';\r\n        this.mediaContainerPosition = this.getMediaContainerPosition();\r\n        var _a = this.mediaContainerPosition, top = _a.top, bottom = _a.bottom;\r\n        if (!this.settings.allowMediaOverlap) {\r\n            this.setMediaContainerPosition(top, bottom);\r\n        }\r\n        var __slideVideoInfo = this.galleryItems[index].__slideVideoInfo;\r\n        if (this.zoomFromOrigin && element) {\r\n            this.currentImageSize = utils.getSize(element, this.outer, top + bottom, __slideVideoInfo && this.settings.videoMaxSize);\r\n            transform = utils.getTransform(element, this.outer, top, bottom, this.currentImageSize);\r\n        }\r\n        if (!this.zoomFromOrigin || !transform) {\r\n            this.outer.addClass(this.settings.startClass);\r\n            this.getSlideItem(index).removeClass('lg-complete');\r\n        }\r\n        var timeout = this.settings.zoomFromOrigin\r\n            ? 100\r\n            : this.settings.backdropDuration;\r\n        setTimeout(function () {\r\n            _this.outer.addClass('lg-components-open');\r\n        }, timeout);\r\n        this.index = index;\r\n        this.LGel.trigger(lGEvents.beforeOpen);\r\n        // add class lg-current to remove initial transition\r\n        this.getSlideItem(index).addClass('lg-current');\r\n        this.lGalleryOn = false;\r\n        // Store the current scroll top value to scroll back after closing the gallery..\r\n        this.prevScrollTop = $LG(window).scrollTop();\r\n        setTimeout(function () {\r\n            // Need to check both zoomFromOrigin and transform values as we need to set set the\r\n            // default opening animation if user missed to add the lg-size attribute\r\n            if (_this.zoomFromOrigin && transform) {\r\n                var currentSlide_1 = _this.getSlideItem(index);\r\n                currentSlide_1.css('transform', transform);\r\n                setTimeout(function () {\r\n                    currentSlide_1\r\n                        .addClass('lg-start-progress lg-start-end-progress')\r\n                        .css('transition-duration', _this.settings.startAnimationDuration + 'ms');\r\n                    _this.outer.addClass('lg-zoom-from-image');\r\n                });\r\n                setTimeout(function () {\r\n                    currentSlide_1.css('transform', 'translate3d(0, 0, 0)');\r\n                }, 100);\r\n            }\r\n            setTimeout(function () {\r\n                _this.$backdrop.addClass('in');\r\n                _this.$container.addClass('lg-show-in');\r\n            }, 10);\r\n            setTimeout(function () {\r\n                if (_this.settings.trapFocus &&\r\n                    document.body === _this.settings.container) {\r\n                    _this.trapFocus();\r\n                }\r\n            }, _this.settings.backdropDuration + 50);\r\n            // lg-visible class resets gallery opacity to 1\r\n            if (!_this.zoomFromOrigin || !transform) {\r\n                setTimeout(function () {\r\n                    _this.outer.addClass('lg-visible');\r\n                }, _this.settings.backdropDuration);\r\n            }\r\n            // initiate slide function\r\n            _this.slide(index, false, false, false);\r\n            _this.LGel.trigger(lGEvents.afterOpen);\r\n        });\r\n        if (document.body === this.settings.container) {\r\n            $LG('html').addClass('lg-on');\r\n        }\r\n    };\r\n    /**\r\n     * Note - Changing the position of the media on every slide transition creates a flickering effect.\r\n     * Therefore,The height of the caption is calculated dynamically, only once based on the first slide caption.\r\n     * if you have dynamic captions for each media,\r\n     * you can provide an appropriate height for the captions via allowMediaOverlap option\r\n     */\r\n    LightGallery.prototype.getMediaContainerPosition = function () {\r\n        if (this.settings.allowMediaOverlap) {\r\n            return {\r\n                top: 0,\r\n                bottom: 0,\r\n            };\r\n        }\r\n        var top = this.$toolbar.get().clientHeight || 0;\r\n        var subHtml = this.outer.find('.lg-components .lg-sub-html').get();\r\n        var captionHeight = this.settings.defaultCaptionHeight ||\r\n            (subHtml && subHtml.clientHeight) ||\r\n            0;\r\n        var thumbContainer = this.outer.find('.lg-thumb-outer').get();\r\n        var thumbHeight = thumbContainer ? thumbContainer.clientHeight : 0;\r\n        var bottom = thumbHeight + captionHeight;\r\n        return {\r\n            top: top,\r\n            bottom: bottom,\r\n        };\r\n    };\r\n    LightGallery.prototype.setMediaContainerPosition = function (top, bottom) {\r\n        if (top === void 0) { top = 0; }\r\n        if (bottom === void 0) { bottom = 0; }\r\n        this.$content.css('top', top + 'px').css('bottom', bottom + 'px');\r\n    };\r\n    LightGallery.prototype.hideBars = function () {\r\n        var _this = this;\r\n        // Hide controllers if mouse doesn't move for some period\r\n        setTimeout(function () {\r\n            _this.outer.removeClass('lg-hide-items');\r\n            if (_this.settings.hideBarsDelay > 0) {\r\n                _this.outer.on('mousemove.lg click.lg touchstart.lg', function () {\r\n                    _this.outer.removeClass('lg-hide-items');\r\n                    clearTimeout(_this.hideBarTimeout);\r\n                    // Timeout will be cleared on each slide movement also\r\n                    _this.hideBarTimeout = setTimeout(function () {\r\n                        _this.outer.addClass('lg-hide-items');\r\n                    }, _this.settings.hideBarsDelay);\r\n                });\r\n                _this.outer.trigger('mousemove.lg');\r\n            }\r\n        }, this.settings.showBarsAfter);\r\n    };\r\n    LightGallery.prototype.initPictureFill = function ($img) {\r\n        if (this.settings.supportLegacyBrowser) {\r\n            try {\r\n                picturefill({\r\n                    elements: [$img.get()],\r\n                });\r\n            }\r\n            catch (e) {\r\n                console.warn('lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.');\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     *  @desc Create image counter\r\n     *  Ex: 1/10\r\n     */\r\n    LightGallery.prototype.counter = function () {\r\n        if (this.settings.counter) {\r\n            var counterHtml = \"<div class=\\\"lg-counter\\\" role=\\\"status\\\" aria-live=\\\"polite\\\">\\n                <span id=\\\"\" + this.getIdName('lg-counter-current') + \"\\\" class=\\\"lg-counter-current\\\">\" + (this.index + 1) + \" </span> /\\n                <span id=\\\"\" + this.getIdName('lg-counter-all') + \"\\\" class=\\\"lg-counter-all\\\">\" + this.galleryItems.length + \" </span></div>\";\r\n            this.outer.find(this.settings.appendCounterTo).append(counterHtml);\r\n        }\r\n    };\r\n    /**\r\n     *  @desc add sub-html into the slide\r\n     *  @param {Number} index - index of the slide\r\n     */\r\n    LightGallery.prototype.addHtml = function (index) {\r\n        var subHtml;\r\n        var subHtmlUrl;\r\n        if (this.galleryItems[index].subHtmlUrl) {\r\n            subHtmlUrl = this.galleryItems[index].subHtmlUrl;\r\n        }\r\n        else {\r\n            subHtml = this.galleryItems[index].subHtml;\r\n        }\r\n        if (!subHtmlUrl) {\r\n            if (subHtml) {\r\n                // get first letter of sub-html\r\n                // if first letter starts with . or # get the html form the jQuery object\r\n                var fL = subHtml.substring(0, 1);\r\n                if (fL === '.' || fL === '#') {\r\n                    if (this.settings.subHtmlSelectorRelative &&\r\n                        !this.settings.dynamic) {\r\n                        subHtml = $LG(this.items)\r\n                            .eq(index)\r\n                            .find(subHtml)\r\n                            .first()\r\n                            .html();\r\n                    }\r\n                    else {\r\n                        subHtml = $LG(subHtml).first().html();\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                subHtml = '';\r\n            }\r\n        }\r\n        if (this.settings.appendSubHtmlTo !== '.lg-item') {\r\n            if (subHtmlUrl) {\r\n                this.outer.find('.lg-sub-html').load(subHtmlUrl);\r\n            }\r\n            else {\r\n                this.outer.find('.lg-sub-html').html(subHtml);\r\n            }\r\n        }\r\n        else {\r\n            var currentSlide = $LG(this.getSlideItemId(index));\r\n            if (subHtmlUrl) {\r\n                currentSlide.load(subHtmlUrl);\r\n            }\r\n            else {\r\n                currentSlide.append(\"<div class=\\\"lg-sub-html\\\">\" + subHtml + \"</div>\");\r\n            }\r\n        }\r\n        // Add lg-empty-html class if title doesn't exist\r\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\r\n            if (subHtml === '') {\r\n                this.outer\r\n                    .find(this.settings.appendSubHtmlTo)\r\n                    .addClass('lg-empty-html');\r\n            }\r\n            else {\r\n                this.outer\r\n                    .find(this.settings.appendSubHtmlTo)\r\n                    .removeClass('lg-empty-html');\r\n            }\r\n        }\r\n        this.LGel.trigger(lGEvents.afterAppendSubHtml, {\r\n            index: index,\r\n        });\r\n    };\r\n    /**\r\n     *  @desc Preload slides\r\n     *  @param {Number} index - index of the slide\r\n     * @todo preload not working for the first slide, Also, should work for the first and last slide as well\r\n     */\r\n    LightGallery.prototype.preload = function (index) {\r\n        for (var i = 1; i <= this.settings.preload; i++) {\r\n            if (i >= this.galleryItems.length - index) {\r\n                break;\r\n            }\r\n            this.loadContent(index + i, false);\r\n        }\r\n        for (var j = 1; j <= this.settings.preload; j++) {\r\n            if (index - j < 0) {\r\n                break;\r\n            }\r\n            this.loadContent(index - j, false);\r\n        }\r\n    };\r\n    LightGallery.prototype.getDummyImgStyles = function (imageSize) {\r\n        if (!imageSize)\r\n            return '';\r\n        return \"width:\" + imageSize.width + \"px;\\n                margin-left: -\" + imageSize.width / 2 + \"px;\\n                margin-top: -\" + imageSize.height / 2 + \"px;\\n                height:\" + imageSize.height + \"px\";\r\n    };\r\n    LightGallery.prototype.getVideoContStyle = function (imageSize) {\r\n        if (!imageSize)\r\n            return '';\r\n        return \"width:\" + imageSize.width + \"px;\\n                height:\" + imageSize.height + \"px\";\r\n    };\r\n    LightGallery.prototype.getDummyImageContent = function ($currentSlide, index, alt) {\r\n        var $currentItem;\r\n        if (!this.settings.dynamic) {\r\n            $currentItem = $LG(this.items).eq(index);\r\n        }\r\n        if ($currentItem) {\r\n            var _dummyImgSrc = void 0;\r\n            if (!this.settings.exThumbImage) {\r\n                _dummyImgSrc = $currentItem.find('img').first().attr('src');\r\n            }\r\n            else {\r\n                _dummyImgSrc = $currentItem.attr(this.settings.exThumbImage);\r\n            }\r\n            if (!_dummyImgSrc)\r\n                return '';\r\n            var imgStyle = this.getDummyImgStyles(this.currentImageSize);\r\n            var dummyImgContent = \"<img \" + alt + \" style=\\\"\" + imgStyle + \"\\\" class=\\\"lg-dummy-img\\\" src=\\\"\" + _dummyImgSrc + \"\\\" />\";\r\n            $currentSlide.addClass('lg-first-slide');\r\n            this.outer.addClass('lg-first-slide-loading');\r\n            return dummyImgContent;\r\n        }\r\n        return '';\r\n    };\r\n    LightGallery.prototype.setImgMarkup = function (src, $currentSlide, index) {\r\n        var currentGalleryItem = this.galleryItems[index];\r\n        var alt = currentGalleryItem.alt, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\r\n        // Use the thumbnail as dummy image which will be resized to actual image size and\r\n        // displayed on top of actual image\r\n        var imgContent = '';\r\n        var altAttr = alt ? 'alt=\"' + alt + '\"' : '';\r\n        if (this.isFirstSlideWithZoomAnimation()) {\r\n            imgContent = this.getDummyImageContent($currentSlide, index, altAttr);\r\n        }\r\n        else {\r\n            imgContent = utils.getImgMarkup(index, src, altAttr, srcset, sizes, sources);\r\n        }\r\n        var imgMarkup = \"<picture class=\\\"lg-img-wrap\\\"> \" + imgContent + \"</picture>\";\r\n        $currentSlide.prepend(imgMarkup);\r\n    };\r\n    LightGallery.prototype.onSlideObjectLoad = function ($slide, isHTML5VideoWithoutPoster, onLoad, onError) {\r\n        var mediaObject = $slide.find('.lg-object').first();\r\n        if (utils.isImageLoaded(mediaObject.get()) ||\r\n            isHTML5VideoWithoutPoster) {\r\n            onLoad();\r\n        }\r\n        else {\r\n            mediaObject.on('load.lg error.lg', function () {\r\n                onLoad && onLoad();\r\n            });\r\n            mediaObject.on('error.lg', function () {\r\n                onError && onError();\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     *\r\n     * @param $el Current slide item\r\n     * @param index\r\n     * @param delay Delay is 0 except first time\r\n     * @param speed Speed is same as delay, except it is 0 if gallery is opened via hash plugin\r\n     * @param isFirstSlide\r\n     */\r\n    LightGallery.prototype.onLgObjectLoad = function (currentSlide, index, delay, speed, isFirstSlide, isHTML5VideoWithoutPoster) {\r\n        var _this = this;\r\n        this.onSlideObjectLoad(currentSlide, isHTML5VideoWithoutPoster, function () {\r\n            _this.triggerSlideItemLoad(currentSlide, index, delay, speed, isFirstSlide);\r\n        }, function () {\r\n            currentSlide.addClass('lg-complete lg-complete_');\r\n            currentSlide.html('<span class=\"lg-error-msg\">' +\r\n                _this.settings.strings['mediaLoadingFailed'] +\r\n                '</span>');\r\n        });\r\n    };\r\n    LightGallery.prototype.triggerSlideItemLoad = function ($currentSlide, index, delay, speed, isFirstSlide) {\r\n        var _this = this;\r\n        var currentGalleryItem = this.galleryItems[index];\r\n        // Adding delay for video slides without poster for better performance and user experience\r\n        // Videos should start playing once once the gallery is completely loaded\r\n        var _speed = isFirstSlide &&\r\n            this.getSlideType(currentGalleryItem) === 'video' &&\r\n            !currentGalleryItem.poster\r\n            ? speed\r\n            : 0;\r\n        setTimeout(function () {\r\n            $currentSlide.addClass('lg-complete lg-complete_');\r\n            _this.LGel.trigger(lGEvents.slideItemLoad, {\r\n                index: index,\r\n                delay: delay || 0,\r\n                isFirstSlide: isFirstSlide,\r\n            });\r\n        }, _speed);\r\n    };\r\n    LightGallery.prototype.isFirstSlideWithZoomAnimation = function () {\r\n        return !!(!this.lGalleryOn &&\r\n            this.zoomFromOrigin &&\r\n            this.currentImageSize);\r\n    };\r\n    // Add video slideInfo\r\n    LightGallery.prototype.addSlideVideoInfo = function (items) {\r\n        var _this = this;\r\n        items.forEach(function (element, index) {\r\n            element.__slideVideoInfo = utils.isVideo(element.src, !!element.video, index);\r\n            if (element.__slideVideoInfo &&\r\n                _this.settings.loadYouTubePoster &&\r\n                !element.poster &&\r\n                element.__slideVideoInfo.youtube) {\r\n                element.poster = \"//img.youtube.com/vi/\" + element.__slideVideoInfo.youtube[1] + \"/maxresdefault.jpg\";\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     *  Load slide content into slide.\r\n     *  This is used to load content into slides that is not visible too\r\n     *  @param {Number} index - index of the slide.\r\n     *  @param {Boolean} rec - if true call loadcontent() function again.\r\n     */\r\n    LightGallery.prototype.loadContent = function (index, rec) {\r\n        var _this = this;\r\n        var currentGalleryItem = this.galleryItems[index];\r\n        var $currentSlide = $LG(this.getSlideItemId(index));\r\n        var poster = currentGalleryItem.poster, srcset = currentGalleryItem.srcset, sizes = currentGalleryItem.sizes, sources = currentGalleryItem.sources;\r\n        var src = currentGalleryItem.src;\r\n        var video = currentGalleryItem.video;\r\n        var _html5Video = video && typeof video === 'string' ? JSON.parse(video) : video;\r\n        if (currentGalleryItem.responsive) {\r\n            var srcDyItms = currentGalleryItem.responsive.split(',');\r\n            src = utils.getResponsiveSrc(srcDyItms) || src;\r\n        }\r\n        var videoInfo = currentGalleryItem.__slideVideoInfo;\r\n        var lgVideoStyle = '';\r\n        var iframe = !!currentGalleryItem.iframe;\r\n        var isFirstSlide = !this.lGalleryOn;\r\n        // delay for adding complete class. it is 0 except first time.\r\n        var delay = 0;\r\n        if (isFirstSlide) {\r\n            if (this.zoomFromOrigin && this.currentImageSize) {\r\n                delay = this.settings.startAnimationDuration + 10;\r\n            }\r\n            else {\r\n                delay = this.settings.backdropDuration + 10;\r\n            }\r\n        }\r\n        if (!$currentSlide.hasClass('lg-loaded')) {\r\n            if (videoInfo) {\r\n                var _a = this.mediaContainerPosition, top_2 = _a.top, bottom = _a.bottom;\r\n                var videoSize = utils.getSize(this.items[index], this.outer, top_2 + bottom, videoInfo && this.settings.videoMaxSize);\r\n                lgVideoStyle = this.getVideoContStyle(videoSize);\r\n            }\r\n            if (iframe) {\r\n                var markup = utils.getIframeMarkup(this.settings.iframeWidth, this.settings.iframeHeight, this.settings.iframeMaxWidth, this.settings.iframeMaxHeight, src, currentGalleryItem.iframeTitle);\r\n                $currentSlide.prepend(markup);\r\n            }\r\n            else if (poster) {\r\n                var dummyImg = '';\r\n                var hasStartAnimation = isFirstSlide &&\r\n                    this.zoomFromOrigin &&\r\n                    this.currentImageSize;\r\n                if (hasStartAnimation) {\r\n                    dummyImg = this.getDummyImageContent($currentSlide, index, '');\r\n                }\r\n                var markup = utils.getVideoPosterMarkup(poster, dummyImg || '', lgVideoStyle, this.settings.strings['playVideo'], videoInfo);\r\n                $currentSlide.prepend(markup);\r\n            }\r\n            else if (videoInfo) {\r\n                var markup = \"<div class=\\\"lg-video-cont \\\" style=\\\"\" + lgVideoStyle + \"\\\"></div>\";\r\n                $currentSlide.prepend(markup);\r\n            }\r\n            else {\r\n                this.setImgMarkup(src, $currentSlide, index);\r\n                if (srcset || sources) {\r\n                    var $img = $currentSlide.find('.lg-object');\r\n                    this.initPictureFill($img);\r\n                }\r\n            }\r\n            if (poster || videoInfo) {\r\n                this.LGel.trigger(lGEvents.hasVideo, {\r\n                    index: index,\r\n                    src: src,\r\n                    html5Video: _html5Video,\r\n                    hasPoster: !!poster,\r\n                });\r\n            }\r\n            this.LGel.trigger(lGEvents.afterAppendSlide, { index: index });\r\n            if (this.lGalleryOn &&\r\n                this.settings.appendSubHtmlTo === '.lg-item') {\r\n                this.addHtml(index);\r\n            }\r\n        }\r\n        // For first time add some delay for displaying the start animation.\r\n        var _speed = 0;\r\n        // Do not change the delay value because it is required for zoom plugin.\r\n        // If gallery opened from direct url (hash) speed value should be 0\r\n        if (delay && !$LG(document.body).hasClass('lg-from-hash')) {\r\n            _speed = delay;\r\n        }\r\n        // Only for first slide and zoomFromOrigin is enabled\r\n        if (this.isFirstSlideWithZoomAnimation()) {\r\n            setTimeout(function () {\r\n                $currentSlide\r\n                    .removeClass('lg-start-end-progress lg-start-progress')\r\n                    .removeAttr('style');\r\n            }, this.settings.startAnimationDuration + 100);\r\n            if (!$currentSlide.hasClass('lg-loaded')) {\r\n                setTimeout(function () {\r\n                    if (_this.getSlideType(currentGalleryItem) === 'image') {\r\n                        var alt = currentGalleryItem.alt;\r\n                        var altAttr = alt ? 'alt=\"' + alt + '\"' : '';\r\n                        $currentSlide\r\n                            .find('.lg-img-wrap')\r\n                            .append(utils.getImgMarkup(index, src, altAttr, srcset, sizes, currentGalleryItem.sources));\r\n                        if (srcset || sources) {\r\n                            var $img = $currentSlide.find('.lg-object');\r\n                            _this.initPictureFill($img);\r\n                        }\r\n                    }\r\n                    if (_this.getSlideType(currentGalleryItem) === 'image' ||\r\n                        (_this.getSlideType(currentGalleryItem) === 'video' &&\r\n                            poster)) {\r\n                        _this.onLgObjectLoad($currentSlide, index, delay, _speed, true, false);\r\n                        // load remaining slides once the slide is completely loaded\r\n                        _this.onSlideObjectLoad($currentSlide, !!(videoInfo && videoInfo.html5 && !poster), function () {\r\n                            _this.loadContentOnFirstSlideLoad(index, $currentSlide, _speed);\r\n                        }, function () {\r\n                            _this.loadContentOnFirstSlideLoad(index, $currentSlide, _speed);\r\n                        });\r\n                    }\r\n                }, this.settings.startAnimationDuration + 100);\r\n            }\r\n        }\r\n        // SLide content has been added to dom\r\n        $currentSlide.addClass('lg-loaded');\r\n        if (!this.isFirstSlideWithZoomAnimation() ||\r\n            (this.getSlideType(currentGalleryItem) === 'video' && !poster)) {\r\n            this.onLgObjectLoad($currentSlide, index, delay, _speed, isFirstSlide, !!(videoInfo && videoInfo.html5 && !poster));\r\n        }\r\n        // When gallery is opened once content is loaded (second time) need to add lg-complete class for css styling\r\n        if ((!this.zoomFromOrigin || !this.currentImageSize) &&\r\n            $currentSlide.hasClass('lg-complete_') &&\r\n            !this.lGalleryOn) {\r\n            setTimeout(function () {\r\n                $currentSlide.addClass('lg-complete');\r\n            }, this.settings.backdropDuration);\r\n        }\r\n        // Content loaded\r\n        // Need to set lGalleryOn before calling preload function\r\n        this.lGalleryOn = true;\r\n        if (rec === true) {\r\n            if (!$currentSlide.hasClass('lg-complete_')) {\r\n                $currentSlide\r\n                    .find('.lg-object')\r\n                    .first()\r\n                    .on('load.lg error.lg', function () {\r\n                    _this.preload(index);\r\n                });\r\n            }\r\n            else {\r\n                this.preload(index);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @desc Remove dummy image content and load next slides\r\n     * Called only for the first time if zoomFromOrigin animation is enabled\r\n     * @param index\r\n     * @param $currentSlide\r\n     * @param speed\r\n     */\r\n    LightGallery.prototype.loadContentOnFirstSlideLoad = function (index, $currentSlide, speed) {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            $currentSlide.find('.lg-dummy-img').remove();\r\n            $currentSlide.removeClass('lg-first-slide');\r\n            _this.outer.removeClass('lg-first-slide-loading');\r\n            _this.isDummyImageRemoved = true;\r\n            _this.preload(index);\r\n        }, speed + 300);\r\n    };\r\n    LightGallery.prototype.getItemsToBeInsertedToDom = function (index, prevIndex, numberOfItems) {\r\n        var _this = this;\r\n        if (numberOfItems === void 0) { numberOfItems = 0; }\r\n        var itemsToBeInsertedToDom = [];\r\n        // Minimum 2 items should be there\r\n        var possibleNumberOfItems = Math.max(numberOfItems, 3);\r\n        possibleNumberOfItems = Math.min(possibleNumberOfItems, this.galleryItems.length);\r\n        var prevIndexItem = \"lg-item-\" + this.lgId + \"-\" + prevIndex;\r\n        if (this.galleryItems.length <= 3) {\r\n            this.galleryItems.forEach(function (_element, index) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + _this.lgId + \"-\" + index);\r\n            });\r\n            return itemsToBeInsertedToDom;\r\n        }\r\n        if (index < (this.galleryItems.length - 1) / 2) {\r\n            for (var idx = index; idx > index - possibleNumberOfItems / 2 && idx >= 0; idx--) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\r\n            }\r\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\r\n            for (var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index + idx + 1));\r\n            }\r\n        }\r\n        else {\r\n            for (var idx = index; idx <= this.galleryItems.length - 1 &&\r\n                idx < index + possibleNumberOfItems / 2; idx++) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + idx);\r\n            }\r\n            var numberOfExistingItems = itemsToBeInsertedToDom.length;\r\n            for (var idx = 0; idx < possibleNumberOfItems - numberOfExistingItems; idx++) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (index - idx - 1));\r\n            }\r\n        }\r\n        if (this.settings.loop) {\r\n            if (index === this.galleryItems.length - 1) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + 0);\r\n            }\r\n            else if (index === 0) {\r\n                itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + (this.galleryItems.length - 1));\r\n            }\r\n        }\r\n        if (itemsToBeInsertedToDom.indexOf(prevIndexItem) === -1) {\r\n            itemsToBeInsertedToDom.push(\"lg-item-\" + this.lgId + \"-\" + prevIndex);\r\n        }\r\n        return itemsToBeInsertedToDom;\r\n    };\r\n    LightGallery.prototype.organizeSlideItems = function (index, prevIndex) {\r\n        var _this = this;\r\n        var itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(index, prevIndex, this.settings.numberOfSlideItemsInDom);\r\n        itemsToBeInsertedToDom.forEach(function (item) {\r\n            if (_this.currentItemsInDom.indexOf(item) === -1) {\r\n                _this.$inner.append(\"<div id=\\\"\" + item + \"\\\" class=\\\"lg-item\\\"></div>\");\r\n            }\r\n        });\r\n        this.currentItemsInDom.forEach(function (item) {\r\n            if (itemsToBeInsertedToDom.indexOf(item) === -1) {\r\n                $LG(\"#\" + item).remove();\r\n            }\r\n        });\r\n        return itemsToBeInsertedToDom;\r\n    };\r\n    /**\r\n     * Get previous index of the slide\r\n     */\r\n    LightGallery.prototype.getPreviousSlideIndex = function () {\r\n        var prevIndex = 0;\r\n        try {\r\n            var currentItemId = this.outer\r\n                .find('.lg-current')\r\n                .first()\r\n                .attr('id');\r\n            prevIndex = parseInt(currentItemId.split('-')[3]) || 0;\r\n        }\r\n        catch (error) {\r\n            prevIndex = 0;\r\n        }\r\n        return prevIndex;\r\n    };\r\n    LightGallery.prototype.setDownloadValue = function (index) {\r\n        if (this.settings.download) {\r\n            var currentGalleryItem = this.galleryItems[index];\r\n            var hideDownloadBtn = currentGalleryItem.downloadUrl === false ||\r\n                currentGalleryItem.downloadUrl === 'false';\r\n            if (hideDownloadBtn) {\r\n                this.outer.addClass('lg-hide-download');\r\n            }\r\n            else {\r\n                var $download = this.getElementById('lg-download');\r\n                this.outer.removeClass('lg-hide-download');\r\n                $download.attr('href', currentGalleryItem.downloadUrl ||\r\n                    currentGalleryItem.src);\r\n                if (currentGalleryItem.download) {\r\n                    $download.attr('download', currentGalleryItem.download);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.makeSlideAnimation = function (direction, currentSlideItem, previousSlideItem) {\r\n        var _this = this;\r\n        if (this.lGalleryOn) {\r\n            previousSlideItem.addClass('lg-slide-progress');\r\n        }\r\n        setTimeout(function () {\r\n            // remove all transitions\r\n            _this.outer.addClass('lg-no-trans');\r\n            _this.outer\r\n                .find('.lg-item')\r\n                .removeClass('lg-prev-slide lg-next-slide');\r\n            if (direction === 'prev') {\r\n                //prevslide\r\n                currentSlideItem.addClass('lg-prev-slide');\r\n                previousSlideItem.addClass('lg-next-slide');\r\n            }\r\n            else {\r\n                // next slide\r\n                currentSlideItem.addClass('lg-next-slide');\r\n                previousSlideItem.addClass('lg-prev-slide');\r\n            }\r\n            // give 50 ms for browser to add/remove class\r\n            setTimeout(function () {\r\n                _this.outer.find('.lg-item').removeClass('lg-current');\r\n                currentSlideItem.addClass('lg-current');\r\n                // reset all transitions\r\n                _this.outer.removeClass('lg-no-trans');\r\n            }, 50);\r\n        }, this.lGalleryOn ? this.settings.slideDelay : 0);\r\n    };\r\n    /**\r\n     * Goto a specific slide.\r\n     * @param {Number} index - index of the slide\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\r\n     * @param {Boolean} fromThumb - true if slide function called via thumbnail click\r\n     * @param {String} direction - Direction of the slide(next/prev)\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  // to go to 3rd slide\r\n     *  plugin.slide(2);\r\n     *\r\n     */\r\n    LightGallery.prototype.slide = function (index, fromTouch, fromThumb, direction) {\r\n        var _this = this;\r\n        var prevIndex = this.getPreviousSlideIndex();\r\n        this.currentItemsInDom = this.organizeSlideItems(index, prevIndex);\r\n        // Prevent multiple call, Required for hsh plugin\r\n        if (this.lGalleryOn && prevIndex === index) {\r\n            return;\r\n        }\r\n        var numberOfGalleryItems = this.galleryItems.length;\r\n        if (!this.lgBusy) {\r\n            if (this.settings.counter) {\r\n                this.updateCurrentCounter(index);\r\n            }\r\n            var currentSlideItem = this.getSlideItem(index);\r\n            var previousSlideItem_1 = this.getSlideItem(prevIndex);\r\n            var currentGalleryItem = this.galleryItems[index];\r\n            var videoInfo = currentGalleryItem.__slideVideoInfo;\r\n            this.outer.attr('data-lg-slide-type', this.getSlideType(currentGalleryItem));\r\n            this.setDownloadValue(index);\r\n            if (videoInfo) {\r\n                var _a = this.mediaContainerPosition, top_3 = _a.top, bottom = _a.bottom;\r\n                var videoSize = utils.getSize(this.items[index], this.outer, top_3 + bottom, videoInfo && this.settings.videoMaxSize);\r\n                this.resizeVideoSlide(index, videoSize);\r\n            }\r\n            this.LGel.trigger(lGEvents.beforeSlide, {\r\n                prevIndex: prevIndex,\r\n                index: index,\r\n                fromTouch: !!fromTouch,\r\n                fromThumb: !!fromThumb,\r\n            });\r\n            this.lgBusy = true;\r\n            clearTimeout(this.hideBarTimeout);\r\n            this.arrowDisable(index);\r\n            if (!direction) {\r\n                if (index < prevIndex) {\r\n                    direction = 'prev';\r\n                }\r\n                else if (index > prevIndex) {\r\n                    direction = 'next';\r\n                }\r\n            }\r\n            if (!fromTouch) {\r\n                this.makeSlideAnimation(direction, currentSlideItem, previousSlideItem_1);\r\n            }\r\n            else {\r\n                this.outer\r\n                    .find('.lg-item')\r\n                    .removeClass('lg-prev-slide lg-current lg-next-slide');\r\n                var touchPrev = void 0;\r\n                var touchNext = void 0;\r\n                if (numberOfGalleryItems > 2) {\r\n                    touchPrev = index - 1;\r\n                    touchNext = index + 1;\r\n                    if (index === 0 && prevIndex === numberOfGalleryItems - 1) {\r\n                        // next slide\r\n                        touchNext = 0;\r\n                        touchPrev = numberOfGalleryItems - 1;\r\n                    }\r\n                    else if (index === numberOfGalleryItems - 1 &&\r\n                        prevIndex === 0) {\r\n                        // prev slide\r\n                        touchNext = 0;\r\n                        touchPrev = numberOfGalleryItems - 1;\r\n                    }\r\n                }\r\n                else {\r\n                    touchPrev = 0;\r\n                    touchNext = 1;\r\n                }\r\n                if (direction === 'prev') {\r\n                    this.getSlideItem(touchNext).addClass('lg-next-slide');\r\n                }\r\n                else {\r\n                    this.getSlideItem(touchPrev).addClass('lg-prev-slide');\r\n                }\r\n                currentSlideItem.addClass('lg-current');\r\n            }\r\n            // Do not put load content in set timeout as it needs to load immediately when the gallery is opened\r\n            if (!this.lGalleryOn) {\r\n                this.loadContent(index, true);\r\n            }\r\n            else {\r\n                setTimeout(function () {\r\n                    _this.loadContent(index, true);\r\n                    // Add title if this.settings.appendSubHtmlTo === lg-sub-html\r\n                    if (_this.settings.appendSubHtmlTo !== '.lg-item') {\r\n                        _this.addHtml(index);\r\n                    }\r\n                }, this.settings.speed + 50 + (fromTouch ? 0 : this.settings.slideDelay));\r\n            }\r\n            setTimeout(function () {\r\n                _this.lgBusy = false;\r\n                previousSlideItem_1.removeClass('lg-slide-progress');\r\n                _this.LGel.trigger(lGEvents.afterSlide, {\r\n                    prevIndex: prevIndex,\r\n                    index: index,\r\n                    fromTouch: fromTouch,\r\n                    fromThumb: fromThumb,\r\n                });\r\n            }, (this.lGalleryOn ? this.settings.speed + 100 : 100) + (fromTouch ? 0 : this.settings.slideDelay));\r\n        }\r\n        this.index = index;\r\n    };\r\n    LightGallery.prototype.updateCurrentCounter = function (index) {\r\n        this.getElementById('lg-counter-current').html(index + 1 + '');\r\n    };\r\n    LightGallery.prototype.updateCounterTotal = function () {\r\n        this.getElementById('lg-counter-all').html(this.galleryItems.length + '');\r\n    };\r\n    LightGallery.prototype.getSlideType = function (item) {\r\n        if (item.__slideVideoInfo) {\r\n            return 'video';\r\n        }\r\n        else if (item.iframe) {\r\n            return 'iframe';\r\n        }\r\n        else {\r\n            return 'image';\r\n        }\r\n    };\r\n    LightGallery.prototype.touchMove = function (startCoords, endCoords, e) {\r\n        var distanceX = endCoords.pageX - startCoords.pageX;\r\n        var distanceY = endCoords.pageY - startCoords.pageY;\r\n        var allowSwipe = false;\r\n        if (this.swipeDirection) {\r\n            allowSwipe = true;\r\n        }\r\n        else {\r\n            if (Math.abs(distanceX) > 15) {\r\n                this.swipeDirection = 'horizontal';\r\n                allowSwipe = true;\r\n            }\r\n            else if (Math.abs(distanceY) > 15) {\r\n                this.swipeDirection = 'vertical';\r\n                allowSwipe = true;\r\n            }\r\n        }\r\n        if (!allowSwipe) {\r\n            return;\r\n        }\r\n        var $currentSlide = this.getSlideItem(this.index);\r\n        if (this.swipeDirection === 'horizontal') {\r\n            e === null || e === void 0 ? void 0 : e.preventDefault();\r\n            // reset opacity and transition duration\r\n            this.outer.addClass('lg-dragging');\r\n            // move current slide\r\n            this.setTranslate($currentSlide, distanceX, 0);\r\n            // move next and prev slide with current slide\r\n            var width = $currentSlide.get().offsetWidth;\r\n            var slideWidthAmount = (width * 15) / 100;\r\n            var gutter = slideWidthAmount - Math.abs((distanceX * 10) / 100);\r\n            this.setTranslate(this.outer.find('.lg-prev-slide').first(), -width + distanceX - gutter, 0);\r\n            this.setTranslate(this.outer.find('.lg-next-slide').first(), width + distanceX + gutter, 0);\r\n        }\r\n        else if (this.swipeDirection === 'vertical') {\r\n            if (this.settings.swipeToClose) {\r\n                e === null || e === void 0 ? void 0 : e.preventDefault();\r\n                this.$container.addClass('lg-dragging-vertical');\r\n                var opacity = 1 - Math.abs(distanceY) / window.innerHeight;\r\n                this.$backdrop.css('opacity', opacity);\r\n                var scale = 1 - Math.abs(distanceY) / (window.innerWidth * 2);\r\n                this.setTranslate($currentSlide, 0, distanceY, scale, scale);\r\n                if (Math.abs(distanceY) > 100) {\r\n                    this.outer\r\n                        .addClass('lg-hide-items')\r\n                        .removeClass('lg-components-open');\r\n                }\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.touchEnd = function (endCoords, startCoords, event) {\r\n        var _this = this;\r\n        var distance;\r\n        // keep slide animation for any mode while dragg/swipe\r\n        if (this.settings.mode !== 'lg-slide') {\r\n            this.outer.addClass('lg-slide');\r\n        }\r\n        // set transition duration\r\n        setTimeout(function () {\r\n            _this.$container.removeClass('lg-dragging-vertical');\r\n            _this.outer\r\n                .removeClass('lg-dragging lg-hide-items')\r\n                .addClass('lg-components-open');\r\n            var triggerClick = true;\r\n            if (_this.swipeDirection === 'horizontal') {\r\n                distance = endCoords.pageX - startCoords.pageX;\r\n                var distanceAbs = Math.abs(endCoords.pageX - startCoords.pageX);\r\n                if (distance < 0 &&\r\n                    distanceAbs > _this.settings.swipeThreshold) {\r\n                    _this.goToNextSlide(true);\r\n                    triggerClick = false;\r\n                }\r\n                else if (distance > 0 &&\r\n                    distanceAbs > _this.settings.swipeThreshold) {\r\n                    _this.goToPrevSlide(true);\r\n                    triggerClick = false;\r\n                }\r\n            }\r\n            else if (_this.swipeDirection === 'vertical') {\r\n                distance = Math.abs(endCoords.pageY - startCoords.pageY);\r\n                if (_this.settings.closable &&\r\n                    _this.settings.swipeToClose &&\r\n                    distance > 100) {\r\n                    _this.closeGallery();\r\n                    return;\r\n                }\r\n                else {\r\n                    _this.$backdrop.css('opacity', 1);\r\n                }\r\n            }\r\n            _this.outer.find('.lg-item').removeAttr('style');\r\n            if (triggerClick &&\r\n                Math.abs(endCoords.pageX - startCoords.pageX) < 5) {\r\n                // Trigger click if distance is less than 5 pix\r\n                var target = $LG(event.target);\r\n                if (_this.isPosterElement(target)) {\r\n                    _this.LGel.trigger(lGEvents.posterClick);\r\n                }\r\n            }\r\n            _this.swipeDirection = undefined;\r\n        });\r\n        // remove slide class once drag/swipe is completed if mode is not slide\r\n        setTimeout(function () {\r\n            if (!_this.outer.hasClass('lg-dragging') &&\r\n                _this.settings.mode !== 'lg-slide') {\r\n                _this.outer.removeClass('lg-slide');\r\n            }\r\n        }, this.settings.speed + 100);\r\n    };\r\n    LightGallery.prototype.enableSwipe = function () {\r\n        var _this = this;\r\n        var startCoords = {};\r\n        var endCoords = {};\r\n        var isMoved = false;\r\n        var isSwiping = false;\r\n        if (this.settings.enableSwipe) {\r\n            this.$inner.on('touchstart.lg', function (e) {\r\n                _this.dragOrSwipeEnabled = true;\r\n                var $item = _this.getSlideItem(_this.index);\r\n                if (($LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target)) &&\r\n                    !_this.outer.hasClass('lg-zoomed') &&\r\n                    !_this.lgBusy &&\r\n                    e.touches.length === 1) {\r\n                    isSwiping = true;\r\n                    _this.touchAction = 'swipe';\r\n                    _this.manageSwipeClass();\r\n                    startCoords = {\r\n                        pageX: e.touches[0].pageX,\r\n                        pageY: e.touches[0].pageY,\r\n                    };\r\n                }\r\n            });\r\n            this.$inner.on('touchmove.lg', function (e) {\r\n                if (isSwiping &&\r\n                    _this.touchAction === 'swipe' &&\r\n                    e.touches.length === 1) {\r\n                    endCoords = {\r\n                        pageX: e.touches[0].pageX,\r\n                        pageY: e.touches[0].pageY,\r\n                    };\r\n                    _this.touchMove(startCoords, endCoords, e);\r\n                    isMoved = true;\r\n                }\r\n            });\r\n            this.$inner.on('touchend.lg', function (event) {\r\n                if (_this.touchAction === 'swipe') {\r\n                    if (isMoved) {\r\n                        isMoved = false;\r\n                        _this.touchEnd(endCoords, startCoords, event);\r\n                    }\r\n                    else if (isSwiping) {\r\n                        var target = $LG(event.target);\r\n                        if (_this.isPosterElement(target)) {\r\n                            _this.LGel.trigger(lGEvents.posterClick);\r\n                        }\r\n                    }\r\n                    _this.touchAction = undefined;\r\n                    isSwiping = false;\r\n                }\r\n            });\r\n        }\r\n    };\r\n    LightGallery.prototype.enableDrag = function () {\r\n        var _this = this;\r\n        var startCoords = {};\r\n        var endCoords = {};\r\n        var isDraging = false;\r\n        var isMoved = false;\r\n        if (this.settings.enableDrag) {\r\n            this.outer.on('mousedown.lg', function (e) {\r\n                _this.dragOrSwipeEnabled = true;\r\n                var $item = _this.getSlideItem(_this.index);\r\n                if ($LG(e.target).hasClass('lg-item') ||\r\n                    $item.get().contains(e.target)) {\r\n                    if (!_this.outer.hasClass('lg-zoomed') && !_this.lgBusy) {\r\n                        e.preventDefault();\r\n                        if (!_this.lgBusy) {\r\n                            _this.manageSwipeClass();\r\n                            startCoords = {\r\n                                pageX: e.pageX,\r\n                                pageY: e.pageY,\r\n                            };\r\n                            isDraging = true;\r\n                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\r\n                            _this.outer.get().scrollLeft += 1;\r\n                            _this.outer.get().scrollLeft -= 1;\r\n                            // *\r\n                            _this.outer\r\n                                .removeClass('lg-grab')\r\n                                .addClass('lg-grabbing');\r\n                            _this.LGel.trigger(lGEvents.dragStart);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            $LG(window).on(\"mousemove.lg.global\" + this.lgId, function (e) {\r\n                if (isDraging && _this.lgOpened) {\r\n                    isMoved = true;\r\n                    endCoords = {\r\n                        pageX: e.pageX,\r\n                        pageY: e.pageY,\r\n                    };\r\n                    _this.touchMove(startCoords, endCoords);\r\n                    _this.LGel.trigger(lGEvents.dragMove);\r\n                }\r\n            });\r\n            $LG(window).on(\"mouseup.lg.global\" + this.lgId, function (event) {\r\n                if (!_this.lgOpened) {\r\n                    return;\r\n                }\r\n                var target = $LG(event.target);\r\n                if (isMoved) {\r\n                    isMoved = false;\r\n                    _this.touchEnd(endCoords, startCoords, event);\r\n                    _this.LGel.trigger(lGEvents.dragEnd);\r\n                }\r\n                else if (_this.isPosterElement(target)) {\r\n                    _this.LGel.trigger(lGEvents.posterClick);\r\n                }\r\n                // Prevent execution on click\r\n                if (isDraging) {\r\n                    isDraging = false;\r\n                    _this.outer.removeClass('lg-grabbing').addClass('lg-grab');\r\n                }\r\n            });\r\n        }\r\n    };\r\n    LightGallery.prototype.triggerPosterClick = function () {\r\n        var _this = this;\r\n        this.$inner.on('click.lg', function (event) {\r\n            if (!_this.dragOrSwipeEnabled &&\r\n                _this.isPosterElement($LG(event.target))) {\r\n                _this.LGel.trigger(lGEvents.posterClick);\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.manageSwipeClass = function () {\r\n        var _touchNext = this.index + 1;\r\n        var _touchPrev = this.index - 1;\r\n        if (this.settings.loop && this.galleryItems.length > 2) {\r\n            if (this.index === 0) {\r\n                _touchPrev = this.galleryItems.length - 1;\r\n            }\r\n            else if (this.index === this.galleryItems.length - 1) {\r\n                _touchNext = 0;\r\n            }\r\n        }\r\n        this.outer.find('.lg-item').removeClass('lg-next-slide lg-prev-slide');\r\n        if (_touchPrev > -1) {\r\n            this.getSlideItem(_touchPrev).addClass('lg-prev-slide');\r\n        }\r\n        this.getSlideItem(_touchNext).addClass('lg-next-slide');\r\n    };\r\n    /**\r\n     * Go to next slide\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.goToNextSlide();\r\n     * @see <a href=\"/demos/methods/\">Demo</a>\r\n     */\r\n    LightGallery.prototype.goToNextSlide = function (fromTouch) {\r\n        var _this = this;\r\n        var _loop = this.settings.loop;\r\n        if (fromTouch && this.galleryItems.length < 3) {\r\n            _loop = false;\r\n        }\r\n        if (!this.lgBusy) {\r\n            if (this.index + 1 < this.galleryItems.length) {\r\n                this.index++;\r\n                this.LGel.trigger(lGEvents.beforeNextSlide, {\r\n                    index: this.index,\r\n                });\r\n                this.slide(this.index, !!fromTouch, false, 'next');\r\n            }\r\n            else {\r\n                if (_loop) {\r\n                    this.index = 0;\r\n                    this.LGel.trigger(lGEvents.beforeNextSlide, {\r\n                        index: this.index,\r\n                    });\r\n                    this.slide(this.index, !!fromTouch, false, 'next');\r\n                }\r\n                else if (this.settings.slideEndAnimation && !fromTouch) {\r\n                    this.outer.addClass('lg-right-end');\r\n                    setTimeout(function () {\r\n                        _this.outer.removeClass('lg-right-end');\r\n                    }, 400);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Go to previous slides\r\n     * @param {Boolean} fromTouch - true if slide function called via touch event\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery({});\r\n     *  plugin.goToPrevSlide();\r\n     * @see <a href=\"/demos/methods/\">Demo</a>\r\n     *\r\n     */\r\n    LightGallery.prototype.goToPrevSlide = function (fromTouch) {\r\n        var _this = this;\r\n        var _loop = this.settings.loop;\r\n        if (fromTouch && this.galleryItems.length < 3) {\r\n            _loop = false;\r\n        }\r\n        if (!this.lgBusy) {\r\n            if (this.index > 0) {\r\n                this.index--;\r\n                this.LGel.trigger(lGEvents.beforePrevSlide, {\r\n                    index: this.index,\r\n                    fromTouch: fromTouch,\r\n                });\r\n                this.slide(this.index, !!fromTouch, false, 'prev');\r\n            }\r\n            else {\r\n                if (_loop) {\r\n                    this.index = this.galleryItems.length - 1;\r\n                    this.LGel.trigger(lGEvents.beforePrevSlide, {\r\n                        index: this.index,\r\n                        fromTouch: fromTouch,\r\n                    });\r\n                    this.slide(this.index, !!fromTouch, false, 'prev');\r\n                }\r\n                else if (this.settings.slideEndAnimation && !fromTouch) {\r\n                    this.outer.addClass('lg-left-end');\r\n                    setTimeout(function () {\r\n                        _this.outer.removeClass('lg-left-end');\r\n                    }, 400);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.keyPress = function () {\r\n        var _this = this;\r\n        $LG(window).on(\"keydown.lg.global\" + this.lgId, function (e) {\r\n            if (_this.lgOpened &&\r\n                _this.settings.escKey === true &&\r\n                e.keyCode === 27) {\r\n                e.preventDefault();\r\n                if (_this.settings.allowMediaOverlap &&\r\n                    _this.outer.hasClass('lg-can-toggle') &&\r\n                    _this.outer.hasClass('lg-components-open')) {\r\n                    _this.outer.removeClass('lg-components-open');\r\n                }\r\n                else {\r\n                    _this.closeGallery();\r\n                }\r\n            }\r\n            if (_this.lgOpened && _this.galleryItems.length > 1) {\r\n                if (e.keyCode === 37) {\r\n                    e.preventDefault();\r\n                    _this.goToPrevSlide();\r\n                }\r\n                if (e.keyCode === 39) {\r\n                    e.preventDefault();\r\n                    _this.goToNextSlide();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.arrow = function () {\r\n        var _this = this;\r\n        this.getElementById('lg-prev').on('click.lg', function () {\r\n            _this.goToPrevSlide();\r\n        });\r\n        this.getElementById('lg-next').on('click.lg', function () {\r\n            _this.goToNextSlide();\r\n        });\r\n    };\r\n    LightGallery.prototype.arrowDisable = function (index) {\r\n        // Disable arrows if settings.hideControlOnEnd is true\r\n        if (!this.settings.loop && this.settings.hideControlOnEnd) {\r\n            var $prev = this.getElementById('lg-prev');\r\n            var $next = this.getElementById('lg-next');\r\n            if (index + 1 === this.galleryItems.length) {\r\n                $next.attr('disabled', 'disabled').addClass('disabled');\r\n            }\r\n            else {\r\n                $next.removeAttr('disabled').removeClass('disabled');\r\n            }\r\n            if (index === 0) {\r\n                $prev.attr('disabled', 'disabled').addClass('disabled');\r\n            }\r\n            else {\r\n                $prev.removeAttr('disabled').removeClass('disabled');\r\n            }\r\n        }\r\n    };\r\n    LightGallery.prototype.setTranslate = function ($el, xValue, yValue, scaleX, scaleY) {\r\n        if (scaleX === void 0) { scaleX = 1; }\r\n        if (scaleY === void 0) { scaleY = 1; }\r\n        $el.css('transform', 'translate3d(' +\r\n            xValue +\r\n            'px, ' +\r\n            yValue +\r\n            'px, 0px) scale3d(' +\r\n            scaleX +\r\n            ', ' +\r\n            scaleY +\r\n            ', 1)');\r\n    };\r\n    LightGallery.prototype.mousewheel = function () {\r\n        var _this = this;\r\n        var lastCall = 0;\r\n        this.outer.on('wheel.lg', function (e) {\r\n            if (!e.deltaY || _this.galleryItems.length < 2) {\r\n                return;\r\n            }\r\n            e.preventDefault();\r\n            var now = new Date().getTime();\r\n            if (now - lastCall < 1000) {\r\n                return;\r\n            }\r\n            lastCall = now;\r\n            if (e.deltaY > 0) {\r\n                _this.goToNextSlide();\r\n            }\r\n            else if (e.deltaY < 0) {\r\n                _this.goToPrevSlide();\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.isSlideElement = function (target) {\r\n        return (target.hasClass('lg-outer') ||\r\n            target.hasClass('lg-item') ||\r\n            target.hasClass('lg-img-wrap'));\r\n    };\r\n    LightGallery.prototype.isPosterElement = function (target) {\r\n        var playButton = this.getSlideItem(this.index)\r\n            .find('.lg-video-play-button')\r\n            .get();\r\n        return (target.hasClass('lg-video-poster') ||\r\n            target.hasClass('lg-video-play-button') ||\r\n            (playButton && playButton.contains(target.get())));\r\n    };\r\n    /**\r\n     * Maximize minimize inline gallery.\r\n     * @category lGPublicMethods\r\n     */\r\n    LightGallery.prototype.toggleMaximize = function () {\r\n        var _this = this;\r\n        this.getElementById('lg-maximize').on('click.lg', function () {\r\n            _this.$container.toggleClass('lg-inline');\r\n            _this.refreshOnResize();\r\n        });\r\n    };\r\n    LightGallery.prototype.invalidateItems = function () {\r\n        for (var index = 0; index < this.items.length; index++) {\r\n            var element = this.items[index];\r\n            var $element = $LG(element);\r\n            $element.off(\"click.lgcustom-item-\" + $element.attr('data-lg-id'));\r\n        }\r\n    };\r\n    LightGallery.prototype.trapFocus = function () {\r\n        var _this = this;\r\n        this.$container.get().focus({\r\n            preventScroll: true,\r\n        });\r\n        $LG(window).on(\"keydown.lg.global\" + this.lgId, function (e) {\r\n            if (!_this.lgOpened) {\r\n                return;\r\n            }\r\n            var isTabPressed = e.key === 'Tab' || e.keyCode === 9;\r\n            if (!isTabPressed) {\r\n                return;\r\n            }\r\n            var focusableEls = utils.getFocusableElements(_this.$container.get());\r\n            var firstFocusableEl = focusableEls[0];\r\n            var lastFocusableEl = focusableEls[focusableEls.length - 1];\r\n            if (e.shiftKey) {\r\n                if (document.activeElement === firstFocusableEl) {\r\n                    lastFocusableEl.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n            else {\r\n                if (document.activeElement === lastFocusableEl) {\r\n                    firstFocusableEl.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.manageCloseGallery = function () {\r\n        var _this = this;\r\n        if (!this.settings.closable)\r\n            return;\r\n        var mousedown = false;\r\n        this.getElementById('lg-close').on('click.lg', function () {\r\n            _this.closeGallery();\r\n        });\r\n        if (this.settings.closeOnTap) {\r\n            // If you drag the slide and release outside gallery gets close on chrome\r\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\r\n            this.outer.on('mousedown.lg', function (e) {\r\n                var target = $LG(e.target);\r\n                if (_this.isSlideElement(target)) {\r\n                    mousedown = true;\r\n                }\r\n                else {\r\n                    mousedown = false;\r\n                }\r\n            });\r\n            this.outer.on('mousemove.lg', function () {\r\n                mousedown = false;\r\n            });\r\n            this.outer.on('mouseup.lg', function (e) {\r\n                var target = $LG(e.target);\r\n                if (_this.isSlideElement(target) && mousedown) {\r\n                    if (!_this.outer.hasClass('lg-dragging')) {\r\n                        _this.closeGallery();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * Close lightGallery if it is opened.\r\n     *\r\n     * @description If closable is false in the settings, you need to pass true via closeGallery method to force close gallery\r\n     * @return returns the estimated time to close gallery completely including the close animation duration\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.closeGallery();\r\n     *\r\n     */\r\n    LightGallery.prototype.closeGallery = function (force) {\r\n        var _this = this;\r\n        if (!this.lgOpened || (!this.settings.closable && !force)) {\r\n            return 0;\r\n        }\r\n        this.LGel.trigger(lGEvents.beforeClose);\r\n        if (this.settings.resetScrollPosition && !this.settings.hideScrollbar) {\r\n            $LG(window).scrollTop(this.prevScrollTop);\r\n        }\r\n        var currentItem = this.items[this.index];\r\n        var transform;\r\n        if (this.zoomFromOrigin && currentItem) {\r\n            var _a = this.mediaContainerPosition, top_4 = _a.top, bottom = _a.bottom;\r\n            var _b = this.galleryItems[this.index], __slideVideoInfo = _b.__slideVideoInfo, poster = _b.poster;\r\n            var imageSize = utils.getSize(currentItem, this.outer, top_4 + bottom, __slideVideoInfo && poster && this.settings.videoMaxSize);\r\n            transform = utils.getTransform(currentItem, this.outer, top_4, bottom, imageSize);\r\n        }\r\n        if (this.zoomFromOrigin && transform) {\r\n            this.outer.addClass('lg-closing lg-zoom-from-image');\r\n            this.getSlideItem(this.index)\r\n                .addClass('lg-start-end-progress')\r\n                .css('transition-duration', this.settings.startAnimationDuration + 'ms')\r\n                .css('transform', transform);\r\n        }\r\n        else {\r\n            this.outer.addClass('lg-hide-items');\r\n            // lg-zoom-from-image is used for setting the opacity to 1 if zoomFromOrigin is true\r\n            // If the closing item doesn't have the lg-size attribute, remove this class to avoid the closing css conflicts\r\n            this.outer.removeClass('lg-zoom-from-image');\r\n        }\r\n        // Unbind all events added by lightGallery\r\n        // @todo\r\n        //this.$el.off('.lg.tm');\r\n        this.destroyModules();\r\n        this.lGalleryOn = false;\r\n        this.isDummyImageRemoved = false;\r\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\r\n        clearTimeout(this.hideBarTimeout);\r\n        this.hideBarTimeout = false;\r\n        $LG('html').removeClass('lg-on');\r\n        this.outer.removeClass('lg-visible lg-components-open');\r\n        // Resetting opacity to 0 isd required as  vertical swipe to close function adds inline opacity.\r\n        this.$backdrop.removeClass('in').css('opacity', 0);\r\n        var removeTimeout = this.zoomFromOrigin && transform\r\n            ? Math.max(this.settings.startAnimationDuration, this.settings.backdropDuration)\r\n            : this.settings.backdropDuration;\r\n        this.$container.removeClass('lg-show-in');\r\n        // Once the closign animation is completed and gallery is invisible\r\n        setTimeout(function () {\r\n            if (_this.zoomFromOrigin && transform) {\r\n                _this.outer.removeClass('lg-zoom-from-image');\r\n            }\r\n            _this.$container.removeClass('lg-show');\r\n            // Reset scrollbar\r\n            _this.resetScrollBar();\r\n            // Need to remove inline opacity as it is used in the stylesheet as well\r\n            _this.$backdrop\r\n                .removeAttr('style')\r\n                .css('transition-duration', _this.settings.backdropDuration + 'ms');\r\n            _this.outer.removeClass(\"lg-closing \" + _this.settings.startClass);\r\n            _this.getSlideItem(_this.index).removeClass('lg-start-end-progress');\r\n            _this.$inner.empty();\r\n            if (_this.lgOpened) {\r\n                _this.LGel.trigger(lGEvents.afterClose, {\r\n                    instance: _this,\r\n                });\r\n            }\r\n            if (_this.$container.get()) {\r\n                _this.$container.get().blur();\r\n            }\r\n            _this.lgOpened = false;\r\n        }, removeTimeout + 100);\r\n        return removeTimeout + 100;\r\n    };\r\n    LightGallery.prototype.initModules = function () {\r\n        this.plugins.forEach(function (module) {\r\n            try {\r\n                module.init();\r\n            }\r\n            catch (err) {\r\n                console.warn(\"lightGallery:- make sure lightGallery module is properly initiated\");\r\n            }\r\n        });\r\n    };\r\n    LightGallery.prototype.destroyModules = function (destroy) {\r\n        this.plugins.forEach(function (module) {\r\n            try {\r\n                if (destroy) {\r\n                    module.destroy();\r\n                }\r\n                else {\r\n                    module.closeGallery && module.closeGallery();\r\n                }\r\n            }\r\n            catch (err) {\r\n                console.warn(\"lightGallery:- make sure lightGallery module is properly destroyed\");\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Refresh lightGallery with new set of children.\r\n     *\r\n     * @description This is useful to update the gallery when the child elements are changed without calling destroy method.\r\n     *\r\n     * If you are using dynamic mode, you can pass the modified array of dynamicEl as the first parameter to refresh the dynamic gallery\r\n     * @see <a href=\"/demos/dynamic-mode/\">Demo</a>\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  // Delete or add children, then call\r\n     *  plugin.refresh();\r\n     *\r\n     */\r\n    LightGallery.prototype.refresh = function (galleryItems) {\r\n        if (!this.settings.dynamic) {\r\n            this.invalidateItems();\r\n        }\r\n        if (galleryItems) {\r\n            this.galleryItems = galleryItems;\r\n        }\r\n        else {\r\n            this.galleryItems = this.getItems();\r\n        }\r\n        this.updateControls();\r\n        this.openGalleryOnItemClick();\r\n        this.LGel.trigger(lGEvents.updateSlides);\r\n    };\r\n    LightGallery.prototype.updateControls = function () {\r\n        this.addSlideVideoInfo(this.galleryItems);\r\n        this.updateCounterTotal();\r\n        this.manageSingleSlideClassName();\r\n    };\r\n    LightGallery.prototype.destroyGallery = function () {\r\n        this.destroyModules(true);\r\n        if (!this.settings.dynamic) {\r\n            this.invalidateItems();\r\n        }\r\n        $LG(window).off(\".lg.global\" + this.lgId);\r\n        this.LGel.off('.lg');\r\n        this.$container.remove();\r\n    };\r\n    /**\r\n     * Destroy lightGallery.\r\n     * Destroy lightGallery and its plugin instances completely\r\n     *\r\n     * @description This method also calls CloseGallery function internally. Returns the time takes to completely close and destroy the instance.\r\n     * In case if you want to re-initialize lightGallery right after destroying it, initialize it only once the destroy process is completed.\r\n     * You can use refresh method most of the times.\r\n     * @category lGPublicMethods\r\n     * @example\r\n     *  const plugin = lightGallery();\r\n     *  plugin.destroy();\r\n     *\r\n     */\r\n    LightGallery.prototype.destroy = function () {\r\n        var closeTimeout = this.closeGallery(true);\r\n        if (closeTimeout) {\r\n            setTimeout(this.destroyGallery.bind(this), closeTimeout);\r\n        }\r\n        else {\r\n            this.destroyGallery();\r\n        }\r\n        return closeTimeout;\r\n    };\r\n    return LightGallery;\r\n}());\n\nfunction lightGallery(el, options) {\r\n    return new LightGallery(el, options);\r\n}\n\nexport default lightGallery;\n//# sourceMappingURL=lightgallery.es5.js.map\n"],"names":["thumbnailsSettings","thumbnail","animateThumb","currentPagerPosition","alignThumbnails","thumbWidth","thumbHeight","thumbMargin","appendThumbnailsTo","toggleThumb","enableThumbDrag","enableThumbSwipe","thumbnailSwipeThreshold","loadYouTubeThumbnail","youTubeThumbSize","thumbnailPluginStrings","toggleThumbnails","lGEvents","Thumbnail","instance","$LG","thumbOuterWidth","thumbTotalWidth","translateX","thumbClickable","this","core","prototype","init","settings","__assign","galleryItems","length","setAnimateThumbStyles","allowMediaOverlap","build","toggleThumbBar","thumbKeyPress","_this","setThumbMarkup","manageActiveClassOnSlideChange","$lgThumb","first","on","e","$target","target","hasAttribute","setTimeout","lgBusy","index","parseInt","attr","slide","LGel","event","detail","outer","get","offsetWidth","rebuildThumbnails","lgOpened","thumbOuterClassNames","html","addClass","$lgComponents","append","$thumbOuter","find","css","speed","setThumbItemHtml","thumbDragUtils","cords","startX","endX","isMoved","newTranslateX","startTime","Date","endTime","touchMoveTime","isDragging","preventDefault","pageX","scrollLeft","removeClass","window","lgId","onThumbTouchMove","onThumbTouchEnd","targetTouches","empty","setTranslate","value","getPossibleTransformX","left","position","valueOf","touchDuration","distanceXnew","speedX","Math","abs","min","getThumbHtml","thumb","alt","thumbImg","slideVideoInfo","__slideVideoInfo","youtube","altAttr","getThumbItemHtml","items","thumbList","i","$thumb","eq","$toolbar","toggleClass","keyCode","destroy","off","remove","zoomSettings","scale","zoom","infiniteZoom","actualSize","showZoomInOutIcons","actualSizeIcons","zoomIn","zoomOut","enableZoomAfter","zoomPluginStrings","viewActualSize","Zoom","buildTemplates","zoomIcons","getIdName","enableZoom","_speed","delay","hasClass","zoomableTimeout","isImageSlide","getSlideItem","setZoomEssentials","enableZoomOnSlideItemLoad","bind","getDragCords","x","y","pageY","getSwipeCords","touches","getDragAllowedAxises","scaleDiff","$image","height","width","rect","getBoundingClientRect","offsetHeight","allowY","containerRect","allowX","$content","zoomImage","reposition","resetToMax","originalX","originalY","offsetX","offsetY","top","scrollTop","positionChanged","dragAllowedAxises","possibleSwipeCords","getPossibleSwipeDragCords","_x","_y","scaleVal","isBeyondPossibleLeft","minX","isBeyondPossibleRight","maxX","isBeyondPossibleTop","minY","isBeyondPossibleBottom","maxY","setZoomStyles","setZoomImageSize","resetImageTranslate","imageReset","actualSizeScale","getCurrentImageActualSizeScale","naturalWidth","naturalHeight","ZOOM_TRANSITION_DURATION","style","$imageWrap","$dummyImage","transform","setActualSize","zoomInProgress","currentItem","src","prevScale","getScale","setPageCords","beginZoom","getNaturalWidth","parseFloat","getActualSizeScale","getPageCords","pageCords","manageActualPixelClassNames","getElementById","resetZoom","tapped","clearTimeout","touchAction","_LGel","setZoomSwipeStyles","timeout","prevIndex","zoomDrag","pinchZoom","zoomSwipe","$actualSize","$item","undefined","removeAttr","getTouchDistance","sqrt","startDist","pinchStarted","initScale","$inner","contains","endDist","distance","_scale","max","round","Number","EPSILON","diff","touchendZoom","startCoords","endCoords","distanceYnew","speedY","getZoomSwipeCords","diffMinY","diffMaxY","diffMinX","difMaxX","getSlideType","bottom","mediaContainerPosition","imgRect","imageHeight","imageWidth","closeGallery","Object","assign","t","s","n","arguments","p","hasOwnProperty","call","apply","lightGalleryCoreSettings","mode","easing","licenseKey","startClass","backdropDuration","container","startAnimationDuration","zoomFromOrigin","hideBarsDelay","showBarsAfter","slideDelay","supportLegacyBrowser","videoMaxSize","loadYouTubePoster","defaultCaptionHeight","ariaLabelledby","ariaDescribedby","resetScrollPosition","hideScrollbar","closable","swipeToClose","closeOnTap","showCloseIcon","showMaximizeIcon","loop","escKey","keyPress","trapFocus","controls","slideEndAnimation","hideControlOnEnd","mousewheel","getCaptionFromTitleOrAlt","appendSubHtmlTo","subHtmlSelectorRelative","preload","numberOfSlideItemsInDom","selector","selectWithin","nextHtml","prevHtml","iframeWidth","iframeHeight","iframeMaxWidth","iframeMaxHeight","download","counter","appendCounterTo","swipeThreshold","enableSwipe","enableDrag","dynamic","dynamicEl","extraProps","exThumbImage","isMobile","mobileSettings","plugins","strings","toggleMaximize","previousSlide","nextSlide","playVideo","mediaLoadingFailed","lgQuery","cssVenderPrefixes","_getSelector","firstElement","_getFirstEl","generateUUID","replace","c","r","random","toString","context","document","substring","querySelector","querySelectorAll","_each","func","forEach","_setCssVendorPrefix","el","cssProperty","property","group1","toUpperCase","indexOf","charAt","toLowerCase","slice","isEventMatched","eventName","eventNamespace","split","filter","every","getAttribute","setAttribute","parent","parentElement","attributes","attrs","removeAttribute","wrap","className","wrapper","createElement","parentNode","insertBefore","removeChild","appendChild","classNames","classList","add","attribute","events","listener","Array","isArray","eventListeners","push","addEventListener","once","keys","removeEventListener","trigger","customEvent","CustomEvent","dispatchEvent","load","url","fetch","then","res","text","innerHTML","insertAdjacentHTML","prepend","body","documentElement","pageYOffset","pageXOffset","offset","bodyMarginLeft","marginLeft","currentStyle","getComputedStyle","clientWidth","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","params","bubbles","cancelable","evt","createEvent","initCustomEvent","Element","matches","msMatchesSelector","webkitMatchesSelector","defaultDynamicOptions","convertToData","g","utils","spacing","defaultLgSize","lgSize","isResponsiveSizes","wWidth","innerWidth","size_1","size","cWidth","cHeight","maxWidth","maxHeight","ratio","imageSize","wHeight","elWidth","elHeight","elStyle","borderLeft","borderTop","iframeTitle","srcset","sizes","sources","imgMarkup","sourceTag","JSON","parse","map","source","key","srcItms","rsWidth","rsSrc","_src","splice","j","img","complete","_poster","dummyImg","videoContStyle","playVideoString","_isVideo","vimeo","elements","element","display","visibility","dynamicElements","availableDynamicOptions","il","k","a","jl","__spreadArrays","item","specified","dynamicAttr","name","label","title","subHtml","test","navigator","userAgent","isHTML5VIdeo","html5","console","error","match","wistia","LightGallery","options","lGalleryOn","currentItemsInDom","prevScrollTop","bodyPaddingRight","isDummyImageRemoved","dragOrSwipeEnabled","generateSettings","buildModules","getItems","normalizeSettings","validateLicense","addSlideVideoInfo","buildStructure","triggerPosterClick","arrow","openGalleryOnItemClick","_loop_1","this_1","$element","uuid","currentItemIndex","openGallery","plugin","warn","getSlideItemId","id","manageSingleSlideClassName","$container","subHtmlCont","addClasses","containerClassName","closeIcon","maximizeIcon","template","$backdrop","outerClassNames","refreshOnResize","hideBars","manageCloseGallery","initModules","getMediaContainerPosition","_a","top_1","currentImageSize","resizeVideoSlide","imgStyle","getDummyImgStyles","lgVideoStyle","getVideoContStyle","updateSlides","currentSrc","updateControls","_index","some","galleryItem","itemIndex","organizeSlideItems","loadContent","updateCurrentCounter","children","shouldHideScrollbar","bodyRect","scrollbarWidth","resetScrollBar","itemsToBeInsertedToDom","getItemsToBeInsertedToDom","addHtml","setMediaContainerPosition","currentSlide_1","captionHeight","thumbContainer","hideBarTimeout","initPictureFill","$img","picturefill","counterHtml","subHtmlUrl","fL","currentSlide","getDummyImageContent","$currentSlide","$currentItem","_dummyImgSrc","dummyImgContent","setImgMarkup","currentGalleryItem","isFirstSlideWithZoomAnimation","onSlideObjectLoad","$slide","isHTML5VideoWithoutPoster","onLoad","onError","mediaObject","onLgObjectLoad","isFirstSlide","triggerSlideItemLoad","poster","video","rec","_html5Video","responsive","srcDyItms","videoInfo","iframe","top_2","videoSize","markup","html5Video","hasPoster","loadContentOnFirstSlideLoad","numberOfItems","possibleNumberOfItems","prevIndexItem","_element","idx","numberOfExistingItems","getPreviousSlideIndex","currentItemId","setDownloadValue","downloadUrl","$download","makeSlideAnimation","direction","currentSlideItem","previousSlideItem","fromTouch","fromThumb","numberOfGalleryItems","previousSlideItem_1","top_3","arrowDisable","touchPrev","touchNext","updateCounterTotal","touchMove","distanceX","distanceY","allowSwipe","swipeDirection","gutter","opacity","innerHeight","touchEnd","triggerClick","distanceAbs","goToNextSlide","goToPrevSlide","isPosterElement","isSwiping","manageSwipeClass","isDraging","_touchNext","_touchPrev","_loop","$prev","$next","$el","xValue","yValue","scaleX","scaleY","lastCall","deltaY","now","getTime","isSlideElement","playButton","invalidateItems","focus","preventScroll","focusableEls","firstFocusableEl","lastFocusableEl","shiftKey","activeElement","mousedown","force","top_4","_b","destroyModules","removeTimeout","blur","module","err","refresh","destroyGallery","closeTimeout"],"sourceRoot":""}